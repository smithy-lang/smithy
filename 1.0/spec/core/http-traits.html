<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html"><link rel="search" title="Search" href="../../search.html"><link rel="next" title="12. XML binding traits" href="xml-traits.html"><link rel="prev" title="10. Streaming Traits" href="stream-traits.html">
        <link rel="prefetch" href="../../_static/smithy.svg" as="image">
        <link rel="prefetch" href="../../_static/smithy-dark.svg" as="image">

    <link rel="shortcut icon" href="../../_static/favicon.svg"><!-- Generated with Sphinx 8.2.3 and Furo 2025.09.25 -->
        <title>11. HTTP binding traits - Smithy 1.0</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=580074bf" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=8dab3a3b" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=0abfef4d" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --admonition-font-size: 100%;
  --admonition-title-font-size: 100%;
  --color-brand-primary: #C44536;
  --color-brand-content: #00808b;
  --color-announcement-background: #f8f8f8;
  --color-announcement-text: #383838;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #282828;
  --color-code-foreground: #dddddd;
  --color-brand-primary: #ed9d13;
  --color-brand-content: #58d3ff;
  --color-announcement-background: ##1a1c1e;;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #282828;
  --color-code-foreground: #dddddd;
  --color-brand-primary: #ed9d13;
  --color-brand-content: #58d3ff;
  --color-announcement-background: ##1a1c1e;;
  
      }
    }
  }
</style><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js"></script>
<script src="https://d2c.aws.amazon.com/client/loader/v1/d2c-load.js"></script></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>

<div class="announcement">
  <aside class="announcement-content">
     <strong>⚠️ You are viewing version 1.0.</strong><br/>
Version 2.0 is available at <a href="https://smithy.io/2.0/">https://smithy.io/2.0/</a>. 
  </aside>
</div>

<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Smithy 1.0</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="/index.html">
  
  <div class="sidebar-brand-icon">
    <img class="sidebar-logo only-light" src="../../_static/smithy.svg" alt="Logo">
    <img class="sidebar-logo only-dark" src="../../_static/smithy-dark.svg" alt="Logo">
  </div>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../quickstart.html">Quick start</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">Specifications</a><input aria-label="Toggle navigation of Specifications" checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul class="current">
<li class="toctree-l2 current has-children"><a class="reference internal" href="index.html">Smithy specification</a><input aria-label="Toggle navigation of Smithy specification" checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="model.html">1. The Smithy model</a></li>
<li class="toctree-l3"><a class="reference internal" href="prelude-model.html">2. Prelude model</a></li>
<li class="toctree-l3"><a class="reference internal" href="constraint-traits.html">3. Constraint traits</a></li>
<li class="toctree-l3"><a class="reference internal" href="documentation-traits.html">4. Documentation traits</a></li>
<li class="toctree-l3"><a class="reference internal" href="type-refinement-traits.html">5. Type refinement traits</a></li>
<li class="toctree-l3"><a class="reference internal" href="protocol-traits.html">6. Protocol traits</a></li>
<li class="toctree-l3"><a class="reference internal" href="auth-traits.html">7. Authentication traits</a></li>
<li class="toctree-l3"><a class="reference internal" href="behavior-traits.html">8. Behavior traits</a></li>
<li class="toctree-l3"><a class="reference internal" href="resource-traits.html">9. Resource traits</a></li>
<li class="toctree-l3"><a class="reference internal" href="stream-traits.html">10. Streaming Traits</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">11. HTTP binding traits</a></li>
<li class="toctree-l3"><a class="reference internal" href="xml-traits.html">12. XML binding traits</a></li>
<li class="toctree-l3"><a class="reference internal" href="endpoint-traits.html">13. Endpoint Traits</a></li>
<li class="toctree-l3"><a class="reference internal" href="selectors.html">14. Selectors</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-validation.html">15. Model validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="idl.html">16. Smithy IDL</a></li>
<li class="toctree-l3"><a class="reference internal" href="json-ast.html">17. JSON AST</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../http-protocol-compliance-tests.html">HTTP Protocol Compliance Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../waiters.html">Waiters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mqtt.html">MQTT Protocol Bindings</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../aws/index.html">AWS specifications</a><input aria-label="Toggle navigation of AWS specifications" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../aws/aws-core.html">AWS Core Specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/aws-auth.html">AWS Authentication Traits</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/aws-iam.html">AWS IAM traits</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/amazon-apigateway.html">Amazon API Gateway traits</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/aws-cloudformation.html">AWS CloudFormation traits</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/aws-restjson1-protocol.html">AWS restJson1 protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/aws-json-1_0-protocol.html">AWS JSON 1.0 protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/aws-json-1_1-protocol.html">AWS JSON 1.1 protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/aws-restxml-protocol.html">AWS restXml protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/aws-query-protocol.html">AWS query protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/aws-ec2-query-protocol.html">AWS EC2 query protocol</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../aws/customizations/index.html">AWS Service Customizations</a><input aria-label="Toggle navigation of AWS Service Customizations" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../aws/customizations/apigateway-customizations.html">Amazon API Gateway Customizations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../aws/customizations/glacier-customizations.html">Amazon Glacier Customizations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../aws/customizations/machinelearning-customizations.html">Amazon Machine Learning Customizations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../aws/customizations/s3-customizations.html">Amazon S3 Customizations</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../guides/index.html">Smithy Guides</a><input aria-label="Toggle navigation of Smithy Guides" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../guides/building-models/index.html">Building Smithy Models</a><input aria-label="Toggle navigation of Building Smithy Models" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../guides/building-models/gradle-plugin.html">Smithy Gradle Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/building-models/build-config.html">smithy-build</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../guides/model-linters.html">Model linters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guides/evolving-models.html">Evolving Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guides/style-guide.html">Style Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guides/converting-to-openapi.html">Converting Smithy to OpenAPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guides/generating-cloudformation-resources.html">Generating CloudFormation Resource Schemas from Smithy</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Implementations</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://smithy.io/2.0/implementations.html">Implementations</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../ts-ssdk/index.html">Server Generator for TypeScript</a><input aria-label="Toggle navigation of Server Generator for TypeScript" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../ts-ssdk/introduction.html">Introduction to the Smithy Server Generator for TypeScript</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ts-ssdk/handlers.html">Smithy Server Generator for TypeScript handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ts-ssdk/validation.html">Smithy Server Generator for TypeScript validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ts-ssdk/error-handling.html">Smithy Server Generator for TypeScript error handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ts-ssdk/supported-endpoints.html">Smithy Server Generator for TypeScript supported endpoints</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/smithy-lang/smithy">Source code</a></li>
<li class="toctree-l1"><a class="reference external" href="https://smithy.io/2.0/">2.0 Documentation</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/smithy-lang/smithy/blob/main/docs/source-1.0/spec/core/http-traits.rst?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/smithy-lang/smithy/edit/main/docs/source-1.0/spec/core/http-traits.rst" rel="edit" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="http-binding-traits">
<span id="http-traits"></span><h1><span class="section-number">11. </span>HTTP binding traits<a class="headerlink" href="#http-binding-traits" title="Link to this heading">¶</a></h1>
<p>Smithy provides various HTTP binding traits that can be used by protocols to
explicitly configure HTTP request and response messages.</p>
<p>The members of an operation input, output, and errors MUST NOT be bound to
multiple HTTP message locations (e.g., a member cannot be bound to both a URI
label and to a header). Only top-level members of an operation's input, output,
and error structures are considered when serializing HTTP messages.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Violating <span class="target" id="index-0"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9110.html"><strong>HTTP specifications</strong></a> or relying on poorly-supported
HTTP functionality when defining HTTP bindings will limit interoperability
and likely lead to undefined behavior across Smithy implementations. For
example, avoid defining GET/DELETE requests with payloads, defining
response payloads for operations with a 204/205 status, etc.</p>
</div>
<section id="http-trait">
<span id="smithy-api-http-trait"></span><span id="id1"></span><h2><span class="section-number">11.1. </span><code class="docutils literal notranslate"><span class="pre">http</span></code> trait<a class="headerlink" href="#http-trait" title="Link to this heading">¶</a></h2>
<dl class="simple">
<dt>Summary</dt><dd><p>Configures the HTTP bindings of an operation.</p>
</dd>
<dt>Trait selector</dt><dd><p><code class="docutils literal notranslate"><span class="pre">operation</span></code></p>
</dd>
<dt>Value type</dt><dd><p><code class="docutils literal notranslate"><span class="pre">structure</span></code></p>
</dd>
</dl>
<p>The <code class="docutils literal notranslate"><span class="pre">http</span></code> trait is a structure that supports the following members:</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 25.0%" />
<col style="width: 65.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#http-method"><span class="std std-ref">method</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p><strong>Required</strong>. The HTTP method of the operation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#http-uri"><span class="std std-ref">uri</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p><strong>Required</strong>. The URI pattern of the operation. Labels defined in the
URI pattern are used to bind operation input members to the URI.</p></td>
</tr>
<tr class="row-even"><td><p>code</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">integer</span></code></p></td>
<td><p>The HTTP status code of a successful response. Defaults to <code class="docutils literal notranslate"><span class="pre">200</span></code> if
not provided. The provided value SHOULD be between 200 and 299, and
it MUST be between 100 and 999. Status codes that do not allow a body
like 204 and 205 SHOULD bind all output members to locations other than
the body of the response.</p></td>
</tr>
</tbody>
</table>
</div>
<p>The following example defines an operation that uses HTTP bindings:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="nt">@idempotent</span>
<span class="nt">@http</span>(<span class="py">method</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PUT&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/{bucketName}/{key}&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">code</span><span class="p">:</span><span class="w"> </span><span class="m">200</span>)
<span class="kd">operation </span><span class="nc">PutObject</span><span class="w"> </span>{
<span class="w">    </span><span class="py">input</span><span class="p">:</span><span class="w"> </span><span class="vc">PutObjectInput</span>
}

<span class="nt">@input</span>
<span class="kd">structure </span><span class="nc">PutObjectInput</span><span class="w"> </span>{
<span class="w">    </span><span class="c">// Sent in the URI label named &quot;key&quot;.</span>
<span class="w">    </span><span class="nt">@required</span>
<span class="w">    </span><span class="nt">@httpLabel</span>
<span class="w">    </span><span class="py">key</span><span class="p">:</span><span class="w"> </span><span class="vc">ObjectKey</span><span class="p">,</span>

<span class="w">    </span><span class="c">// Sent in the URI label named &quot;bucketName&quot;.</span>
<span class="w">    </span><span class="nt">@required</span>
<span class="w">    </span><span class="nt">@httpLabel</span>
<span class="w">    </span><span class="py">bucketName</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span>

<span class="w">    </span><span class="c">// Sent in the X-Foo header</span>
<span class="w">    </span><span class="nt">@httpHeader</span>(<span class="s2">&quot;X-Foo&quot;</span>)
<span class="w">    </span><span class="py">foo</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span>

<span class="w">    </span><span class="c">// Sent in the query string as paramName</span>
<span class="w">    </span><span class="nt">@httpQuery</span>(<span class="s2">&quot;paramName&quot;</span>)
<span class="w">    </span><span class="py">someValue</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span>

<span class="w">    </span><span class="c">// Sent in the body</span>
<span class="w">    </span><span class="py">data</span><span class="p">:</span><span class="w"> </span><span class="vc">MyBlob</span><span class="p">,</span>

<span class="w">    </span><span class="c">// Sent in the body</span>
<span class="w">    </span><span class="py">additional</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span>
}
</pre></div>
</div>
<section id="method">
<span id="http-method"></span><h3><span class="section-number">11.1.1. </span>method<a class="headerlink" href="#method" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">method</span></code> property defines the HTTP method of the operation (e.g., &quot;GET&quot;,
&quot;PUT&quot;, &quot;POST&quot;, &quot;DELETE&quot;, &quot;PATCH&quot;, etc). Smithy will use this value literally
and will perform no validation on the method. The <code class="docutils literal notranslate"><span class="pre">method</span></code> value SHOULD
match one of the definitions found in <span class="target" id="index-1"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9110.html#section-9.3"><strong>RFC 9110 Section 9.3</strong></a>. This property
does not influence the safety or idempotency characteristics of an operation.</p>
</section>
<section id="uri">
<span id="http-uri"></span><h3><span class="section-number">11.1.2. </span>uri<a class="headerlink" href="#uri" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">uri</span></code> property defines the <em>request-target</em> of the operation in
<em>origin-form</em> as defined in <span class="target" id="index-2"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9112.html#section-3.2.1"><strong>RFC 9112 Section 3.2.1</strong></a>. The URI is a simple
pattern that Smithy uses to match HTTP requests to operations and to bind
components of the request URI to fields in the operations's input structure.
<em class="dfn">Patterns</em> consist of literal characters that MUST be matched in the
request URI and labels which are used to insert named components into the
request URI.</p>
<p>The resolved absolute URI of an operation is formed by combining the URI of
the operation with the endpoint of the service. (that is, the host and any
base URL of where the service is deployed). For example, given a service
endpoint of <code class="docutils literal notranslate"><span class="pre">https://example.com/v1</span></code> and an operation pattern of
<code class="docutils literal notranslate"><span class="pre">/myresource</span></code>, the resolved absolute URI of the operation is
<code class="docutils literal notranslate"><span class="pre">https://example.com/v1/myresource</span></code>.</p>
<p>The value provided for the <code class="docutils literal notranslate"><span class="pre">uri</span></code> property MUST adhere to the following
constraints:</p>
<ol class="arabic simple">
<li><p>MUST start with &quot;/&quot;.</p></li>
<li><p>MUST NOT contain empty path segments (i.e., &quot;//&quot;).</p></li>
<li><p>MUST NOT contain a fragment (i.e., &quot;#&quot;).</p></li>
<li><p>MUST NOT end with &quot;?&quot;.</p></li>
<li><p>MUST NOT contain dot-segments (i.e., &quot;..&quot; and &quot;.&quot;).</p></li>
<li><p>MUST NOT case-sensitively conflict with other <code class="docutils literal notranslate"><span class="pre">http</span></code> / <code class="docutils literal notranslate"><span class="pre">uri</span></code>
properties.</p></li>
</ol>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@readonly</span>
<span class="nt">@http</span>(<span class="py">method</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;GET&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/foo/{baz}&quot;</span>)
<span class="kd">operation </span><span class="nc">GetService</span><span class="w"> </span>{
<span class="w">    </span><span class="py">output</span><span class="p">:</span><span class="w"> </span><span class="vc">GetServiceOutput</span>
}
</pre></div>
</div>
<section id="literal-character-sequences">
<h4><span class="section-number">11.1.2.1. </span>Literal character sequences<a class="headerlink" href="#literal-character-sequences" title="Link to this heading">¶</a></h4>
<p>Patterns with no labels will match only requests containing the exact literal
characters declared in the pattern, with the exception of trailing slashes
which are always optional.</p>
<p>Given an endpoint of <code class="docutils literal notranslate"><span class="pre">https://yourhost</span></code> and a pattern of <code class="docutils literal notranslate"><span class="pre">/my/uri/path</span></code>:</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 40.0%" />
<col style="width: 10.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Request URI</p></th>
<th class="head"><p>Matches?</p></th>
<th class="head"><p>Reason</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">https://yourhost/my/uri/path</span></code></p></td>
<td><p>Yes</p></td>
<td><p>Exact match</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">https://yourhost/my/uri/path/</span></code></p></td>
<td><p>Yes</p></td>
<td><p>Trailing slashes are ignored</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">https://yourhost/my/uri</span></code></p></td>
<td><p>No</p></td>
<td><p>Missing &quot;/path&quot;</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">https://yourhost/my/uri/other</span></code></p></td>
<td><p>No</p></td>
<td><p>Found &quot;/other&quot; instead of &quot;/path&quot;</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">https://yourhost/my/uri/path/other</span></code></p></td>
<td><p>No</p></td>
<td><p>Trailing segment &quot;/other&quot;</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="labels">
<span id="http-uri-label"></span><h4><span class="section-number">11.1.2.2. </span>Labels<a class="headerlink" href="#labels" title="Link to this heading">¶</a></h4>
<p>Patterns MAY contain label placeholders in the path. <em class="dfn">Labels</em> consist of
label name characters surrounded by open and closed braces (i.e.,
&quot;{label_name}&quot; is a label and <code class="docutils literal notranslate"><span class="pre">label_name</span></code> is the label name). The label
name corresponds to a top-level operation input structure member name. Every
label MUST have a corresponding input member, the input member MUST be marked
as <a class="reference internal" href="constraint-traits.html#required-trait"><span class="std std-ref">required trait</span></a>, the input member MUST have the <a class="reference internal" href="#httplabel-trait"><span class="std std-ref">httpLabel trait</span></a>,
and the input member MUST reference a string, byte, short, integer, long,
float, double, bigDecimal, bigInteger, boolean, or timestamp. Labels only
capture path segments.</p>
<p>Labels MUST adhere to the following constraints:</p>
<ol class="arabic simple">
<li><p>Labels MUST NOT appear in the query string.</p></li>
<li><p>Each label MUST span an entire path segment (e.g., &quot;/{foo}/bar&quot; is valid,
and &quot;/{foo}bar&quot; is invalid).</p></li>
</ol>
<p>A pattern of <code class="docutils literal notranslate"><span class="pre">/my/uri/{label}</span></code> will match any URI that begins with
<code class="docutils literal notranslate"><span class="pre">/my/uri/</span></code> followed by any string not including an additional path segment
(&quot;/&quot;).</p>
<p>Given a pattern of <code class="docutils literal notranslate"><span class="pre">/my/uri/{label}</span></code> and an endpoint of <code class="docutils literal notranslate"><span class="pre">http://yourhost</span></code>:</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 40.0%" />
<col style="width: 10.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Request URI</p></th>
<th class="head"><p>Matches?</p></th>
<th class="head"><p>Reason</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri/foo</span></code></p></td>
<td><p>Yes</p></td>
<td><p>&quot;/my/uri/&quot; matches and &quot;foo&quot; is captured as <code class="docutils literal notranslate"><span class="pre">label</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri/foo/</span></code></p></td>
<td><p>Yes</p></td>
<td><p>&quot;/my/uri/&quot; matches and &quot;foo&quot; is captured as <code class="docutils literal notranslate"><span class="pre">label</span></code>. The trailing
&quot;/&quot; is ignored.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri/foo?query=bar</span></code></p></td>
<td><p>Yes</p></td>
<td><p>&quot;/my/uri/&quot; matches and &quot;foo&quot; is captured as <code class="docutils literal notranslate"><span class="pre">label</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri/foo#bar</span></code></p></td>
<td><p>Yes</p></td>
<td><p>&quot;/my/uri/&quot; matches and &quot;foo&quot; is captured as <code class="docutils literal notranslate"><span class="pre">label</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri/bar</span></code></p></td>
<td><p>Yes</p></td>
<td><p>&quot;/my/uri/&quot; matches and &quot;bar&quot; is captured as <code class="docutils literal notranslate"><span class="pre">label</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri</span></code></p></td>
<td><p>No</p></td>
<td><p>&quot;/my/uri&quot; matches but is missing a segment for <code class="docutils literal notranslate"><span class="pre">label</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri/foo/bar</span></code></p></td>
<td><p>No</p></td>
<td><p>Found a trailing segment &quot;/bar&quot;.</p></td>
</tr>
</tbody>
</table>
</div>
<p>Any number of labels can be included within a pattern, provided that they are
not immediately adjacent and do not have identical label names. Given a
pattern of <code class="docutils literal notranslate"><span class="pre">/my/uri/{label1}/{label2}</span></code> and an endpoint of
<code class="docutils literal notranslate"><span class="pre">http://yourhost</span></code>:</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 40.0%" />
<col style="width: 10.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Request URI</p></th>
<th class="head"><p>Matches?</p></th>
<th class="head"><p>Reason</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri/foo/bar</span></code></p></td>
<td><p>Yes</p></td>
<td><p>Matches literal &quot;/my/uri/&quot;, &quot;foo&quot; is captured as <code class="docutils literal notranslate"><span class="pre">label1</span></code>, and &quot;bar&quot;
is captured as <code class="docutils literal notranslate"><span class="pre">label2</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri/bar/baz/</span></code></p></td>
<td><p>Yes</p></td>
<td><p>Matches literal &quot;/my/uri/&quot;, &quot;bar&quot; is captured as <code class="docutils literal notranslate"><span class="pre">label1</span></code>, and &quot;baz&quot;
is captured as <code class="docutils literal notranslate"><span class="pre">label2</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri/foo</span></code></p></td>
<td><p>No</p></td>
<td><p>Matches literal &quot;/my/uri/&quot; but is missing a segment for <code class="docutils literal notranslate"><span class="pre">label2</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri</span></code></p></td>
<td><p>No</p></td>
<td><p>Matches literal &quot;/my/uri/&quot; but is missing segments for <code class="docutils literal notranslate"><span class="pre">label1</span></code> and
<code class="docutils literal notranslate"><span class="pre">label2</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri/foo/bar/baz</span></code></p></td>
<td><p>No</p></td>
<td><p>Matches literal &quot;/my/uri/&quot;, &quot;bar&quot; is captured as <code class="docutils literal notranslate"><span class="pre">label1</span></code>, and &quot;baz&quot;
is captured as <code class="docutils literal notranslate"><span class="pre">label2</span></code>, but contains an additional segment &quot;baz&quot;.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="query-string-literals">
<h4><span class="section-number">11.1.2.3. </span>Query string literals<a class="headerlink" href="#query-string-literals" title="Link to this heading">¶</a></h4>
<p>Components of the query string can be matched literally in the URI pattern.
The query string portion of a pattern MUST NOT contain labels.</p>
<p>Literals can be in the form of required keys without values. Given a pattern
of <code class="docutils literal notranslate"><span class="pre">/path?requiredKey</span></code> and an endpoint of <code class="docutils literal notranslate"><span class="pre">http://yourhost</span></code>:</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 40.0%" />
<col style="width: 10.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Request URI</p></th>
<th class="head"><p>Matches?</p></th>
<th class="head"><p>Reason</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/path?requiredKey</span></code></p></td>
<td><p>Yes</p></td>
<td><p>Matches literal &quot;/path&quot; and contains a &quot;requiredKey&quot; query string
parameter.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/path?other&amp;requiredKey</span></code></p></td>
<td><p>Yes</p></td>
<td><p>Matches literal &quot;/path&quot; and contains a &quot;requiredKey&quot; query string
parameter.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/path</span></code></p></td>
<td><p>No</p></td>
<td><p>Matches literal &quot;/path&quot; but does not contain the &quot;requiredKey&quot; query
string parameter.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/path?</span></code></p></td>
<td><p>No</p></td>
<td><p>Matches literal &quot;/path&quot; but does not contain the &quot;requiredKey&quot; query
string parameter.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/path?otherKey</span></code></p></td>
<td><p>No</p></td>
<td><p>Matches literal &quot;/path&quot; but does not contain the &quot;requiredKey&quot; query
string parameter.</p></td>
</tr>
</tbody>
</table>
</div>
<p>Literal query string parameters can be matched with required key-value pairs.
Given a pattern of <code class="docutils literal notranslate"><span class="pre">/path?requiredKey=requiredValue</span></code> and an endpoint of
<code class="docutils literal notranslate"><span class="pre">http://yourhost</span></code>:</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 40.0%" />
<col style="width: 10.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Request URI</p></th>
<th class="head"><p>Matches?</p></th>
<th class="head"><p>Reason</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/path?requiredKey=requiredValue</span></code></p></td>
<td><p>Yes</p></td>
<td><p>Matches literal &quot;/path&quot; and contains a query string parameter named
&quot;requiredKey&quot; with a value of &quot;requiredValue&quot;.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/path?other&amp;requiredKey=requiredValue</span></code></p></td>
<td><p>Yes</p></td>
<td><p>Matches literal &quot;/path&quot; and contains a query string parameter named
&quot;requiredKey&quot; with a value of &quot;requiredValue&quot;. &quot;other&quot; is disregarded
or bound to another input member.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/path</span></code></p></td>
<td><p>No</p></td>
<td><p>Does not contain a query string parameter named &quot;requiredKey&quot;.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/path?</span></code></p></td>
<td><p>No</p></td>
<td><p>Does not contain a query string parameter named &quot;requiredKey&quot;.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/path?requiredKey=otherValue</span></code></p></td>
<td><p>No</p></td>
<td><p>Contains a query string parameter named &quot;requiredKey&quot; but its value
is not &quot;requiredValue&quot;.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="greedy-labels">
<span id="id2"></span><h4><span class="section-number">11.1.2.4. </span>Greedy labels<a class="headerlink" href="#greedy-labels" title="Link to this heading">¶</a></h4>
<p>A <em class="dfn">greedy label</em> is a label suffixed with the <code class="docutils literal notranslate"><span class="pre">+</span></code> qualifier that can be
used to match more than one path segment. At most, one greedy label may exist
in any path pattern, and if present, it MUST be the last label in the pattern.
Greedy labels MUST be bound to a string shape.</p>
<p>Given a pattern of <code class="docutils literal notranslate"><span class="pre">/my/uri/{label+}</span></code> and an endpoint of <code class="docutils literal notranslate"><span class="pre">http://yourhost</span></code>:</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 40.0%" />
<col style="width: 10.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Request URI</p></th>
<th class="head"><p>Matches?</p></th>
<th class="head"><p>Reason</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri/foo/bar</span></code></p></td>
<td><p>Yes</p></td>
<td><p>Matches literal &quot;/my/uri/&quot;, and &quot;foo/bar&quot; is captured as <code class="docutils literal notranslate"><span class="pre">label</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri/bar/baz/</span></code></p></td>
<td><p>Yes</p></td>
<td><p>Matches literal &quot;/my/uri/&quot;, and &quot;bar/baz&quot; is captured as <code class="docutils literal notranslate"><span class="pre">label</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri/foo/bar/baz</span></code></p></td>
<td><p>Yes</p></td>
<td><p>Matches literal &quot;/my/uri/&quot;, and &quot;foo/bar/baz&quot; is captured as <code class="docutils literal notranslate"><span class="pre">label</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri</span></code></p></td>
<td><p>No</p></td>
<td><p>Matches literal &quot;/my/uri/&quot; but does not contain a segment to match
<code class="docutils literal notranslate"><span class="pre">label</span></code>.</p></td>
</tr>
</tbody>
</table>
</div>
<p>Greedy matching can be used to capture the whole URI to a label, which results
in every request for a particular HTTP method being captured. For example, this
can be modeled with a pattern of <code class="docutils literal notranslate"><span class="pre">/{label+}</span></code>.</p>
<p>Segments in the middle of a URI can be captured using greedy labels. Greedy
labels match greedily: they will match the longest possible string. Given a
pattern of <code class="docutils literal notranslate"><span class="pre">/prefix/{label+}/suffix</span></code> and an endpoint of <code class="docutils literal notranslate"><span class="pre">https://yourhost</span></code>:</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 40.0%" />
<col style="width: 10.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Request URI</p></th>
<th class="head"><p>Matches?</p></th>
<th class="head"><p>Reason</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/prefix/foo/suffix</span></code></p></td>
<td><p>Yes</p></td>
<td><p>Matches literal &quot;/prefix&quot;, captures &quot;foo&quot; in greedy <code class="docutils literal notranslate"><span class="pre">label</span></code>, and
matches literal &quot;/suffix&quot;.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/prefix/foo/bar/suffix</span></code></p></td>
<td><p>Yes</p></td>
<td><p>Matches literal &quot;/prefix&quot;, captures &quot;foo/bar&quot; in greedy <code class="docutils literal notranslate"><span class="pre">label</span></code>, and
matches literal &quot;/suffix&quot;.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/prefix/foo/bar</span></code></p></td>
<td><p>No</p></td>
<td><p>Matches literal &quot;/prefix&quot;, but does not contain the trailing literal
&quot;/suffix&quot;.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/foo/bar/suffix</span></code></p></td>
<td><p>No</p></td>
<td><p>Does not match the literal &quot;/prefix&quot;.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/prefix/foo/suffix/bar/suffix</span></code></p></td>
<td><p>Yes</p></td>
<td><p>Matches literal &quot;/prefix&quot;, captures &quot;foo/suffix/bar&quot; in greedy
<code class="docutils literal notranslate"><span class="pre">label</span></code>, and matches literal &quot;/suffix&quot;.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http://yourhost/prefix/suffix</span></code></p></td>
<td><p>No</p></td>
<td><p>Matches literal &quot;/prefix&quot;, matches literal &quot;/suffix&quot;, but does not
contain a segment to match <code class="docutils literal notranslate"><span class="pre">label</span></code>.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="pattern-validation-and-conflict-avoidance">
<h4><span class="section-number">11.1.2.5. </span>Pattern Validation and Conflict Avoidance<a class="headerlink" href="#pattern-validation-and-conflict-avoidance" title="Link to this heading">¶</a></h4>
<p>Smithy validates the patterns within a service against each other to ensure
that no two patterns conflict with each other for the same HTTP method. To
prevent ambiguity when matching requests for different operations, the
following rules are in place:</p>
<ol class="arabic simple">
<li><p>All labels MUST be delimited by '/' characters.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/{foo}/{bar}</span></code> is legal</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/{foo}{bar}</span></code> is illegal</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/{foo}bar/{bar}</span></code> is illegal</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/{foo}a{bar}</span></code> is illegal</p></li>
</ul>
</li>
<li><p>At most, one greedy label MAY exist per pattern.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/{foo}/{bar+}</span></code> is legal</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/{foo+}/{bar+}</span></code> is illegal</p></li>
</ul>
</li>
<li><p>If present, a greedy pattern MUST be the last label in a pattern.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/{foo}/{bar+}</span></code> is legal</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/{foo+}/{bar}</span></code> is illegal</p></li>
</ul>
</li>
<li><p>Patterns MUST NOT be equivalent if they share a host.</p>
<ul class="simple">
<li><p>Pattern <code class="docutils literal notranslate"><span class="pre">/foo/bar</span></code> and <code class="docutils literal notranslate"><span class="pre">/foo/bar</span></code> conflict.</p></li>
<li><p>Pattern <code class="docutils literal notranslate"><span class="pre">/foo/{bar}</span></code> and <code class="docutils literal notranslate"><span class="pre">/foo/{baz}</span></code> conflict regardless of any
constraint traits on the label members.</p></li>
</ul>
</li>
<li><p>A label and a literal SHOULD NOT both occupy the same segment in patterns
which are equivalent to that point if they share a host.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/foo/bar/{baz}</span></code> and <code class="docutils literal notranslate"><span class="pre">/foo/baz/bam</span></code> can coexist.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/foo/bar</span></code> and <code class="docutils literal notranslate"><span class="pre">/foo/{baz}/bam</span></code> cannot coexist unless pattern
traits prevent <code class="docutils literal notranslate"><span class="pre">{baz}</span></code> from evaluating to <code class="docutils literal notranslate"><span class="pre">bar</span></code> because the label
occupies the same segment of another pattern with the same prefix.</p></li>
</ul>
</li>
<li><p>A query string literal with no value and a query string literal with an
empty value are considered equivalent. For example, <code class="docutils literal notranslate"><span class="pre">/foo?baz</span></code> and
<code class="docutils literal notranslate"><span class="pre">/foo?baz=</span></code> are considered the same route.</p></li>
<li><p>Patterns MAY conflict if the operations use different hosts. Different hosts
can be configured using the <a class="reference internal" href="endpoint-traits.html#endpoint-trait"><span class="std std-ref">endpoint trait</span></a>'s <code class="docutils literal notranslate"><span class="pre">hostPrefix</span></code> property.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/foo/bar</span></code> and <code class="docutils literal notranslate"><span class="pre">/foo/{baz}/bam</span></code> can coexist if one operation has no
endpoint trait and the other specifies <code class="docutils literal notranslate"><span class="pre">foo.</span></code> as the <code class="docutils literal notranslate"><span class="pre">hostPrefix</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/foo/bar</span></code> and <code class="docutils literal notranslate"><span class="pre">/foo/{baz}/bam</span></code> can coexist if one operation specifies
<code class="docutils literal notranslate"><span class="pre">foo.</span></code> as the <code class="docutils literal notranslate"><span class="pre">hostPrefix</span></code> and the other specifies <code class="docutils literal notranslate"><span class="pre">bar.</span></code> as the
<code class="docutils literal notranslate"><span class="pre">hostPrefix</span></code>.</p></li>
</ul>
</li>
</ol>
</section>
</section>
</section>
<section id="httperror-trait">
<span id="smithy-api-httperror-trait"></span><span id="id3"></span><h2><span class="section-number">11.2. </span><code class="docutils literal notranslate"><span class="pre">httpError</span></code> trait<a class="headerlink" href="#httperror-trait" title="Link to this heading">¶</a></h2>
<dl>
<dt>Summary</dt><dd><p>Defines an HTTP response code for an operation error.</p>
</dd>
<dt>Trait selector</dt><dd><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>structure[trait|error]
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">httpError</span></code> trait can only be applied to <a class="reference internal" href="model.html#structure"><span class="std std-ref">structure</span></a>
shapes that also have the <a class="reference internal" href="type-refinement-traits.html#error-trait"><span class="std std-ref">error trait</span></a>.</p>
</dd>
<dt>Value type</dt><dd><p><code class="docutils literal notranslate"><span class="pre">integer</span></code> value representing the HTTP response status code
(for example, <code class="docutils literal notranslate"><span class="pre">404</span></code>).</p>
</dd>
</dl>
<p>The following example defines an error with an HTTP status code of <code class="docutils literal notranslate"><span class="pre">404</span></code>.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@error</span>(<span class="s2">&quot;client&quot;</span>)
<span class="nt">@httpError</span>(<span class="m">404</span>)
<span class="kd">structure </span><span class="nc">MyError</span><span class="w"> </span>{}
</pre></div>
</div>
<p class="rubric">Default HTTP status codes</p>
<p>The <code class="docutils literal notranslate"><span class="pre">httpError</span></code> trait is used to set a <em>custom</em> HTTP response status code.
By default, error structures with no <code class="docutils literal notranslate"><span class="pre">httpError</span></code> trait use the default
HTTP status code of the <a class="reference internal" href="type-refinement-traits.html#error-trait"><span class="std std-ref">error trait</span></a>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">400</span></code> is used for &quot;client&quot; errors</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">500</span></code> is used for &quot;server&quot; errors</p></li>
</ul>
</section>
<section id="httpheader-trait">
<span id="smithy-api-httpheader-trait"></span><span id="id4"></span><h2><span class="section-number">11.3. </span><code class="docutils literal notranslate"><span class="pre">httpHeader</span></code> trait<a class="headerlink" href="#httpheader-trait" title="Link to this heading">¶</a></h2>
<dl>
<dt>Summary</dt><dd><p>Binds a structure member to an HTTP header.</p>
</dd>
<dt>Trait selector</dt><dd><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>structure &gt; :test(member &gt; :test(boolean, number, string, timestamp,
        list &gt; member &gt; :test(boolean, number, string, timestamp)))
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">httpHeader</span></code> trait can be applied to <code class="docutils literal notranslate"><span class="pre">structure</span></code> members that
target a <code class="docutils literal notranslate"><span class="pre">boolean</span></code>, <code class="docutils literal notranslate"><span class="pre">number</span></code>, <code class="docutils literal notranslate"><span class="pre">string</span></code>, or <code class="docutils literal notranslate"><span class="pre">timestamp</span></code>; or a
<code class="docutils literal notranslate"><span class="pre">structure</span></code> member that targets a list of these types.</p>
</dd>
<dt>Value type</dt><dd><p><code class="docutils literal notranslate"><span class="pre">string</span></code> value defining a valid HTTP header field name according to
<span class="target" id="index-3"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9110.html#section-5.1"><strong>RFC 9110 Section 5.1</strong></a>. The value MUST NOT be empty and MUST be
case-insensitively unique across all other members of the structure.</p>
</dd>
<dt>Conflicts with</dt><dd><p><a class="reference internal" href="#httplabel-trait"><span class="std std-ref">httpLabel trait</span></a>,
<a class="reference internal" href="#httpquery-trait"><span class="std std-ref">httpQuery trait</span></a>,
<a class="reference internal" href="#httpqueryparams-trait"><span class="std std-ref">httpQueryParams trait</span></a>,
<a class="reference internal" href="#httpprefixheaders-trait"><span class="std std-ref">httpPrefixHeaders trait</span></a>,
<a class="reference internal" href="#httppayload-trait"><span class="std std-ref">httpPayload trait</span></a>,
<a class="reference internal" href="#httpresponsecode-trait"><span class="std std-ref">httpResponseCode trait</span></a></p>
</dd>
</dl>
<p class="rubric"><code class="docutils literal notranslate"><span class="pre">httpHeader</span></code> serialization rules:</p>
<ul class="simple">
<li><p>When a <a class="reference internal" href="model.html#list"><span class="std std-ref">list</span></a> shape is targeted, each member of the shape is
serialized as a separate HTTP header either by concatenating the values
with a comma on a single line or by serializing each header value on its
own line.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boolean</span></code> values are serialized as <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">string</span></code> values with a <a class="reference internal" href="protocol-traits.html#mediatype-trait"><span class="std std-ref">mediaType trait</span></a> are always base64 encoded.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timestamp</span></code> values are serialized using the <code class="docutils literal notranslate"><span class="pre">http-date</span></code>
format by default, as defined in the <code class="docutils literal notranslate"><span class="pre">IMF-fixdate</span></code> production of
<span class="target" id="index-4"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9110.html#section-5.6.7"><strong>RFC 9110 Section 5.6.7</strong></a>. The <a class="reference internal" href="protocol-traits.html#timestampformat-trait"><span class="std std-ref">timestampFormat trait</span></a> MAY be used
to use a custom serialization format.</p></li>
</ul>
<p class="rubric">Do not put too much data in HTTP headers</p>
<p>While there is no limit placed on the length of an HTTP header field, many
HTTP client and server implementations enforce limits in practice.
Carefully consider the maximum allowed length of each member that is bound
to an HTTP header.</p>
<section id="restricted-http-headers">
<span id="restricted-headers"></span><h3><span class="section-number">11.3.1. </span>Restricted HTTP headers<a class="headerlink" href="#restricted-http-headers" title="Link to this heading">¶</a></h3>
<p>Various HTTP headers are highly discouraged for the <code class="docutils literal notranslate"><span class="pre">httpHeader</span></code> and
<code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code> traits.</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Header</p></th>
<th class="head"><p>Reason</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Authorization</p></td>
<td><p>This header should be populated by
<a class="reference internal" href="auth-traits.html#authdefinition-trait"><span class="std std-ref">authentication traits</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p>Connection</p></td>
<td><p>This is controlled at a lower level by the HTTP client or server.</p></td>
</tr>
<tr class="row-even"><td><p>Content-Length</p></td>
<td><p>HTTP clients and servers are responsible for providing a
Content-Length header.</p></td>
</tr>
<tr class="row-odd"><td><p>Expect</p></td>
<td><p>This is controlled at a lower level by the HTTP client.</p></td>
</tr>
<tr class="row-even"><td><p>Host</p></td>
<td><p>The Host header is controlled by the HTTP client, not the model.</p></td>
</tr>
<tr class="row-odd"><td><p>Max-Forwards</p></td>
<td><p>This is controlled at a lower level by the HTTP client.</p></td>
</tr>
<tr class="row-even"><td><p>Proxy-Authenticate</p></td>
<td><p>This header should be populated by
<a class="reference internal" href="auth-traits.html#authdefinition-trait"><span class="std std-ref">authentication traits</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p>Server</p></td>
<td><p>The Server header is controlled by the HTTP server, not the model.</p></td>
</tr>
<tr class="row-even"><td><p>TE</p></td>
<td><p>This is controlled at a lower level by the HTTP client and server.</p></td>
</tr>
<tr class="row-odd"><td><p>Trailer</p></td>
<td><p>This is controlled at a lower level by the HTTP client and server.</p></td>
</tr>
<tr class="row-even"><td><p>Transfer-Encoding</p></td>
<td><p>This is controlled at a lower level by the HTTP client and server.</p></td>
</tr>
<tr class="row-odd"><td><p>Upgrade</p></td>
<td><p>This is controlled at a lower level by the HTTP server.</p></td>
</tr>
<tr class="row-even"><td><p>User-Agent</p></td>
<td><p>Setting a User-Agent is the responsibility of an HTTP client.</p></td>
</tr>
<tr class="row-odd"><td><p>WWW-Authenticate</p></td>
<td><p>This header should be populated by
<a class="reference internal" href="auth-traits.html#authdefinition-trait"><span class="std std-ref">authentication traits</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p>X-Forwarded-For</p></td>
<td><p>X-Forwarded-For is an implementation detail of HTTP that does not
need to be modeled.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="httplabel-trait">
<span id="smithy-api-httplabel-trait"></span><span id="id5"></span><h2><span class="section-number">11.4. </span><code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> trait<a class="headerlink" href="#httplabel-trait" title="Link to this heading">¶</a></h2>
<dl>
<dt>Summary</dt><dd><p>Binds an operation input structure member to an
<a class="reference internal" href="#http-uri-label"><span class="std std-ref">HTTP label</span></a> so that it is used as part of an
HTTP request URI.</p>
</dd>
<dt>Trait selector</dt><dd><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>structure &gt; member[trait|required] :test(&gt; :test(string, number, boolean, timestamp))
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> trait can be applied to <code class="docutils literal notranslate"><span class="pre">structure</span></code> members marked
with the <a class="reference internal" href="constraint-traits.html#required-trait"><span class="std std-ref">required trait</span></a> that target a <code class="docutils literal notranslate"><span class="pre">string</span></code>, <code class="docutils literal notranslate"><span class="pre">number</span></code>,
<code class="docutils literal notranslate"><span class="pre">boolean</span></code>, or <code class="docutils literal notranslate"><span class="pre">timestamp</span></code>.</p>
</dd>
<dt>Value type</dt><dd><p>Annotation trait.</p>
</dd>
<dt>Conflicts with</dt><dd><p><a class="reference internal" href="#httpheader-trait"><span class="std std-ref">httpHeader trait</span></a>,
<a class="reference internal" href="#httpquery-trait"><span class="std std-ref">httpQuery trait</span></a>,
<a class="reference internal" href="#httpqueryparams-trait"><span class="std std-ref">httpQueryParams trait</span></a>,
<a class="reference internal" href="#httpprefixheaders-trait"><span class="std std-ref">httpPrefixHeaders trait</span></a>,
<a class="reference internal" href="#httppayload-trait"><span class="std std-ref">httpPayload trait</span></a>,
<a class="reference internal" href="#httpresponsecode-trait"><span class="std std-ref">httpResponseCode trait</span></a></p>
</dd>
</dl>
<p>The following example defines an operation that send an HTTP label named
<code class="docutils literal notranslate"><span class="pre">foo</span></code> as part of the URI of an HTTP request:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="nt">@readonly</span>
<span class="nt">@http</span>(<span class="py">method</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;GET&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/{foo}&quot;</span>)
<span class="kd">operation </span><span class="nc">GetStatus</span><span class="w"> </span>{
<span class="w">    </span><span class="py">input</span><span class="p">:</span><span class="w"> </span><span class="vc">GetStatusInput</span><span class="p">,</span>
<span class="w">    </span><span class="py">output</span><span class="p">:</span><span class="w"> </span><span class="vc">GetStatusOutput</span>
}

<span class="nt">@input</span>
<span class="kd">structure </span><span class="nc">GetStatusInput</span><span class="w"> </span>{
<span class="w">    </span><span class="nt">@required</span>
<span class="w">    </span><span class="nt">@httpLabel</span>
<span class="w">    </span><span class="py">foo</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}
</pre></div>
</div>
<p class="rubric">Relationship to <a class="reference internal" href="#http-trait"><span class="std std-ref">http trait</span></a></p>
<p>When a structure is used as the input of an operation, any member of the
structure with the <code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> trait MUST have a corresponding
<a class="reference internal" href="#http-uri-label"><span class="std std-ref">URI label</span></a> with the same name as the member.
<code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> traits are ignored when serializing operation output or errors.</p>
<p class="rubric">Applying the <code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> trait to members</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> can only be applied to structure members that are marked as
<a class="reference internal" href="constraint-traits.html#required-trait"><span class="std std-ref">required</span></a>.</p></li>
<li><p>If the corresponding URI label in the operation is not greedy, then the
<code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> trait MUST target a member that targets a <code class="docutils literal notranslate"><span class="pre">string</span></code>,
<code class="docutils literal notranslate"><span class="pre">byte</span></code>, <code class="docutils literal notranslate"><span class="pre">short</span></code>, <code class="docutils literal notranslate"><span class="pre">integer</span></code>, <code class="docutils literal notranslate"><span class="pre">long</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, <code class="docutils literal notranslate"><span class="pre">double</span></code>,
<code class="docutils literal notranslate"><span class="pre">bigDecimal</span></code>, <code class="docutils literal notranslate"><span class="pre">bigInteger</span></code>, <code class="docutils literal notranslate"><span class="pre">boolean</span></code>, or <code class="docutils literal notranslate"><span class="pre">timestamp</span></code>.</p></li>
<li><p>If the corresponding URI label in the operation is greedy, then the
<code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> trait MUST target a member that targets a <code class="docutils literal notranslate"><span class="pre">string</span></code> shape.</p></li>
</ul>
<p class="rubric"><code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> serialization rules:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">boolean</span></code> values are serialized as <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timestamp</span></code> values are serialized as an <span class="target" id="index-5"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3339.html"><strong>RFC 3339</strong></a> string by default
(for example, <code class="docutils literal notranslate"><span class="pre">1985-04-12T23:20:50.52Z</span></code>, and with percent-encoding,
<code class="docutils literal notranslate"><span class="pre">1985-04-12T23%3A20%3A50.52Z</span></code>). The <a class="reference internal" href="protocol-traits.html#timestampformat-trait"><span class="std std-ref">timestampFormat trait</span></a>
MAY be used to use a custom serialization format.</p></li>
<li><p>Characters not defined as unreserved by <span class="target" id="index-6"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3986.html#section-2.3"><strong>RFC 3986 section 2.3</strong></a>
MUST be <span class="target" id="index-7"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3986.html#section-2.1"><strong>percent-encoded</strong></a>. That is, all characters except for
alphanumerics and <code class="docutils literal notranslate"><span class="pre">-._~</span></code>.</p></li>
<li><p>However, if the label is greedy, then &quot;/&quot; MUST NOT be percent-encoded
because greedy labels are meant to span multiple path segments.</p></li>
</ul>
<p class="rubric"><code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> is only used on input</p>
<p><code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> is ignored when resolving the HTTP bindings of an operation's
output or an error. This means that if a structure that contains members
marked with the <code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> trait is used as the top-level output structure
of an operation, then those members are sent as part of the
<a class="reference internal" href="#http-protocol-document-payloads"><span class="std std-ref">protocol-specific document</span></a> sent in
the body of the response.</p>
</section>
<section id="httppayload-trait">
<span id="smithy-api-httppayload-trait"></span><span id="id6"></span><h2><span class="section-number">11.5. </span><code class="docutils literal notranslate"><span class="pre">httpPayload</span></code> trait<a class="headerlink" href="#httppayload-trait" title="Link to this heading">¶</a></h2>
<dl>
<dt>Summary</dt><dd><p>Binds a single structure member to the body of an HTTP message.</p>
</dd>
<dt>Trait selector</dt><dd><p><code class="docutils literal notranslate"><span class="pre">structure</span> <span class="pre">&gt;</span> <span class="pre">member</span></code></p>
<p><em>Any structure member</em></p>
</dd>
<dt>Value type</dt><dd><p>Annotation trait.</p>
</dd>
<dt>Conflicts with</dt><dd><p><a class="reference internal" href="#httplabel-trait"><span class="std std-ref">httpLabel trait</span></a>, <a class="reference internal" href="#httpquery-trait"><span class="std std-ref">httpQuery trait</span></a>, <a class="reference internal" href="#httpqueryparams-trait"><span class="std std-ref">httpQueryParams trait</span></a>,
<a class="reference internal" href="#httpheader-trait"><span class="std std-ref">httpHeader trait</span></a>, <a class="reference internal" href="#httpprefixheaders-trait"><span class="std std-ref">httpPrefixHeaders trait</span></a>,
<a class="reference internal" href="#httpresponsecode-trait"><span class="std std-ref">httpResponseCode trait</span></a></p>
</dd>
<dt>Structurally exclusive</dt><dd><p>Only a single structure member can be bound to <code class="docutils literal notranslate"><span class="pre">httpPayload</span></code>.</p>
</dd>
</dl>
<p>The following example defines an operation that returns a <code class="docutils literal notranslate"><span class="pre">blob</span></code> of binary
data in a response:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="nt">@readonly</span>
<span class="nt">@http</span>(<span class="py">method</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;GET&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/random-binary-data&quot;</span>)
<span class="kd">operation </span><span class="nc">GetRandomBinaryData</span><span class="w"> </span>{
<span class="w">    </span><span class="py">input</span><span class="p">:</span><span class="w"> </span><span class="vc">GetRandomBinaryDataInput</span><span class="p">,</span>
<span class="w">    </span><span class="py">output</span><span class="p">:</span><span class="w"> </span><span class="vc">GetRandomBinaryDataOutput</span>
}

<span class="nt">@input</span>
<span class="kd">structure </span><span class="nc">GetRandomBinaryDataInput</span><span class="w"> </span>{}

<span class="nt">@output</span>
<span class="kd">structure </span><span class="nc">GetRandomBinaryDataOutput</span><span class="w"> </span>{
<span class="w">    </span><span class="nt">@required</span>
<span class="w">    </span><span class="nt">@httpHeader</span>(<span class="s2">&quot;Content-Type&quot;</span>)
<span class="w">    </span><span class="py">contentType</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span>

<span class="w">    </span><span class="nt">@httpPayload</span>
<span class="w">    </span><span class="py">content</span><span class="p">:</span><span class="w"> </span><span class="vc">Blob</span><span class="p">,</span>
}
</pre></div>
</div>
<p class="rubric" id="http-protocol-document-payloads">Protocol-specific document payloads</p>
<p>By default, all structure members that are not bound as part of the HTTP
message are serialized in a protocol-specific document sent in the body of
the message (e.g., a JSON object). The <code class="docutils literal notranslate"><span class="pre">httpPayload</span></code> trait can be used to
bind a single top-level operation input, output, or error structure member to
the body of the HTTP message. Multiple members of the same structure MUST NOT
be bound to <code class="docutils literal notranslate"><span class="pre">httpPayload</span></code>.</p>
<p class="rubric">Binding members to <code class="docutils literal notranslate"><span class="pre">httpPayload</span></code></p>
<p>If the <code class="docutils literal notranslate"><span class="pre">httpPayload</span></code> trait is present on the structure referenced by the
input of an operation, then all other structure members MUST be bound with
the <a class="reference internal" href="#httplabel-trait"><span class="std std-ref">httpLabel trait</span></a>, <a class="reference internal" href="#httpheader-trait"><span class="std std-ref">httpHeader trait</span></a>,
<a class="reference internal" href="#httpprefixheaders-trait"><span class="std std-ref">httpPrefixHeaders trait</span></a>, <a class="reference internal" href="#httpqueryparams-trait"><span class="std std-ref">httpQueryParams trait</span></a>, or <a class="reference internal" href="#httpquery-trait"><span class="std std-ref">httpQuery trait</span></a>.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">httpPayload</span></code> trait is present on the structure referenced by the
output of an operation or a structure targeted by the <a class="reference internal" href="type-refinement-traits.html#error-trait"><span class="std std-ref">error trait</span></a>,
then all other structure members MUST be bound to a <a class="reference internal" href="#httpheader-trait"><span class="std std-ref">httpHeader trait</span></a>
or <a class="reference internal" href="#httpprefixheaders-trait"><span class="std std-ref">httpPrefixHeaders trait</span></a>.</p>
<p class="rubric">Serialization rules</p>
<ol class="arabic simple">
<li><p>When a string or blob member is referenced, the raw value is serialized
as the body of the message.</p></li>
<li><p>When any other type of member is referenced, the shape value is serialized
as a <a class="reference internal" href="protocol-traits.html#protocoldefinition-trait"><span class="std std-ref">protocol-specific</span></a> value that is sent
as the body of the message.</p></li>
</ol>
</section>
<section id="httpprefixheaders-trait">
<span id="smithy-api-httpprefixheaders-trait"></span><span id="id7"></span><h2><span class="section-number">11.6. </span><code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code> trait<a class="headerlink" href="#httpprefixheaders-trait" title="Link to this heading">¶</a></h2>
<dl>
<dt>Summary</dt><dd><p>Binds a map of key-value pairs to prefixed HTTP headers.</p>
</dd>
<dt>Trait selector</dt><dd><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>structure &gt; member
:test(&gt; map :not([trait|sparse]) &gt; member[id|member=value] &gt; string)
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code> trait can be applied to <code class="docutils literal notranslate"><span class="pre">structure</span></code> members
that target a <code class="docutils literal notranslate"><span class="pre">map</span></code> of <code class="docutils literal notranslate"><span class="pre">string</span></code>. The targeted map MUST NOT be marked
with the <a class="reference internal" href="type-refinement-traits.html#sparse-trait"><span class="std std-ref">sparse trait</span></a>.</p>
</dd>
<dt>Value type</dt><dd><p><code class="docutils literal notranslate"><span class="pre">string</span></code> value that defines the prefix to prepend to each header field
name stored in the targeted map member. For example, given a prefix value
of &quot;X-Amz-Meta-&quot; and a map key entry of &quot;Baz&quot;, the resulting header field
name serialized in the message is &quot;X-Amz-Meta-Baz&quot;.</p>
</dd>
<dt>Conflicts with</dt><dd><p><a class="reference internal" href="#httplabel-trait"><span class="std std-ref">httpLabel trait</span></a>, <a class="reference internal" href="#httpquery-trait"><span class="std std-ref">httpQuery trait</span></a>, <a class="reference internal" href="#httpqueryparams-trait"><span class="std std-ref">httpQueryParams trait</span></a>,
<a class="reference internal" href="#httpheader-trait"><span class="std std-ref">httpHeader trait</span></a>, <a class="reference internal" href="#httppayload-trait"><span class="std std-ref">httpPayload trait</span></a>,
<a class="reference internal" href="#httpresponsecode-trait"><span class="std std-ref">httpResponseCode trait</span></a></p>
</dd>
<dt>Structurally exclusive</dt><dd><p>Only a single structure member can be bound to <code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code>.</p>
</dd>
</dl>
<p>Given the following Smithy model:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@readonly</span>
<span class="nt">@http</span>(<span class="py">method</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;GET&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/myOperation&quot;</span>)
<span class="kd">operation </span><span class="nc">MyOperation</span><span class="w"> </span>{
<span class="w">    </span><span class="py">input</span><span class="p">:</span><span class="w"> </span><span class="vc">MyOperationInput</span>
}

<span class="nt">@input</span>
<span class="kd">structure </span><span class="nc">MyOperationInput</span><span class="w"> </span>{
<span class="w">    </span><span class="nt">@httpPrefixHeaders</span>(<span class="s2">&quot;X-Foo-&quot;</span>)
<span class="w">    </span><span class="py">headers</span><span class="p">:</span><span class="w"> </span><span class="vc">StringMap</span>
}

<span class="kd">map </span><span class="nc">StringMap</span><span class="w"> </span>{
<span class="w">    </span><span class="py">key</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span>
<span class="w">    </span><span class="py">value</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}
</pre></div>
</div>
<p>And given the following input to <code class="docutils literal notranslate"><span class="pre">MyOperation</span></code>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;first&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hi&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;second&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;there&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>An example HTTP request would be serialized as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">myOperation</span>
<span class="n">Host</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">server</span><span class="o">&gt;</span>
<span class="n">X</span><span class="o">-</span><span class="n">Foo</span><span class="o">-</span><span class="n">first</span><span class="p">:</span> <span class="n">hi</span>
<span class="n">X</span><span class="o">-</span><span class="n">Foo</span><span class="o">-</span><span class="n">second</span><span class="p">:</span> <span class="n">there</span>
</pre></div>
</div>
<p class="rubric">Disambiguation of <code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code></p>
<p>In order to differentiate <code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code> from other headers, when
<code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code> are used, no other <a class="reference internal" href="#httpheader-trait"><span class="std std-ref">httpHeader trait</span></a> bindings can
start with the same prefix provided in <code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code> trait. If
<code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code> is set to an empty string, then no other members can be
bound to <code class="docutils literal notranslate"><span class="pre">headers</span></code>.</p>
</section>
<section id="httpquery-trait">
<span id="smithy-api-httpquery-trait"></span><span id="id8"></span><h2><span class="section-number">11.7. </span><code class="docutils literal notranslate"><span class="pre">httpQuery</span></code> trait<a class="headerlink" href="#httpquery-trait" title="Link to this heading">¶</a></h2>
<dl>
<dt>Summary</dt><dd><p>Binds an operation input structure member to a query string parameter.</p>
</dd>
<dt>Trait selector</dt><dd><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>structure &gt; member
:test(&gt; :test(string, number, boolean, timestamp),
      &gt; list &gt; member &gt; :test(string, number, boolean, timestamp))
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">httpQuery</span></code> trait can be applied to <code class="docutils literal notranslate"><span class="pre">structure</span></code> members that
target a <code class="docutils literal notranslate"><span class="pre">string</span></code>, <code class="docutils literal notranslate"><span class="pre">number</span></code>, <code class="docutils literal notranslate"><span class="pre">boolean</span></code>, or <code class="docutils literal notranslate"><span class="pre">timestamp</span></code>; or a
<code class="docutils literal notranslate"><span class="pre">list</span></code>/<code class="docutils literal notranslate"><span class="pre">set</span></code> of these types.</p>
</dd>
<dt>Value type</dt><dd><p>A non-empty <code class="docutils literal notranslate"><span class="pre">string</span></code> value that defines the name of the query string
parameter. The query string parameter name MUST be case-sensitively unique
across all other members marked with the <code class="docutils literal notranslate"><span class="pre">httpQuery</span></code> trait.</p>
</dd>
<dt>Conflicts with</dt><dd><p><a class="reference internal" href="#httplabel-trait"><span class="std std-ref">httpLabel trait</span></a>, <a class="reference internal" href="#httpheader-trait"><span class="std std-ref">httpHeader trait</span></a>, <a class="reference internal" href="#httpqueryparams-trait"><span class="std std-ref">httpQueryParams trait</span></a>,
<a class="reference internal" href="#httpprefixheaders-trait"><span class="std std-ref">httpPrefixHeaders trait</span></a>, <a class="reference internal" href="#httppayload-trait"><span class="std std-ref">httpPayload trait</span></a>,
<a class="reference internal" href="#httpresponsecode-trait"><span class="std std-ref">httpResponseCode trait</span></a></p>
</dd>
</dl>
<p>The following example defines an operation that optionally sends the
<code class="docutils literal notranslate"><span class="pre">color</span></code>, <code class="docutils literal notranslate"><span class="pre">shape</span></code>, and <code class="docutils literal notranslate"><span class="pre">size</span></code> query string parameters in an HTTP
request:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@readonly</span>
<span class="nt">@http</span>(<span class="py">method</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;GET&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/things&quot;</span>)
<span class="kd">operation </span><span class="nc">ListThings</span><span class="w"> </span>{
<span class="w">    </span><span class="py">input</span><span class="p">:</span><span class="w"> </span><span class="vc">ListThingsInput</span><span class="p">,</span>
<span class="w">    </span><span class="py">output</span><span class="p">:</span><span class="w"> </span><span class="vc">ListThingsOutput</span><span class="p">,</span><span class="w"> </span><span class="c">// omitted for brevity</span>
}

<span class="nt">@input</span>
<span class="kd">structure </span><span class="nc">ListThingsInput</span><span class="w"> </span>{
<span class="w">    </span><span class="nt">@httpQuery</span>(<span class="s2">&quot;color&quot;</span>)
<span class="w">    </span><span class="py">color</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span>

<span class="w">    </span><span class="nt">@httpQuery</span>(<span class="s2">&quot;shape&quot;</span>)
<span class="w">    </span><span class="py">shape</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span>

<span class="w">    </span><span class="nt">@httpQuery</span>(<span class="s2">&quot;size&quot;</span>)
<span class="w">    </span><span class="py">size</span><span class="p">:</span><span class="w"> </span><span class="vc">Integer</span><span class="p">,</span>
}
</pre></div>
</div>
<p class="rubric">Serialization rules</p>
<ul class="simple">
<li><p>&quot;&amp;&quot; is used to separate query string parameter key-value pairs.</p></li>
<li><p>&quot;=&quot; is used to separate query string parameter names from values.</p></li>
<li><p>Characters not defined as unreserved by <span class="target" id="index-8"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3986.html#section-2.3"><strong>RFC 3986 section 2.3</strong></a>
MUST be <span class="target" id="index-9"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3986.html#section-2.1"><strong>percent-encoded</strong></a>. That is, all characters except for
alphanumerics and <code class="docutils literal notranslate"><span class="pre">-._~</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boolean</span></code> values are serialized as <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timestamp</span></code> values are serialized as an <span class="target" id="index-10"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3339.html"><strong>RFC 3339</strong></a>
<code class="docutils literal notranslate"><span class="pre">date-time</span></code> string by default (for example, <code class="docutils literal notranslate"><span class="pre">1985-04-12T23:20:50.52Z</span></code>,
and with percent-encoding, <code class="docutils literal notranslate"><span class="pre">1985-04-12T23%3A20%3A50.52Z</span></code>). The
<a class="reference internal" href="protocol-traits.html#timestampformat-trait"><span class="std std-ref">timestampFormat trait</span></a> MAY be used to use a custom serialization
format.</p></li>
<li><p><a class="reference internal" href="model.html#list"><span class="std std-ref">List</span></a> and <a class="reference internal" href="model.html#set"><span class="std std-ref">set</span></a> members are serialized by adding multiple
query string parameters to the query string using the same name. For
example, given a member bound to <code class="docutils literal notranslate"><span class="pre">foo</span></code> that targets a list of strings
with a value of <code class="docutils literal notranslate"><span class="pre">[&quot;a&quot;,</span> <span class="pre">&quot;b&quot;]</span></code>, the value is serialized in the query string
as <code class="docutils literal notranslate"><span class="pre">foo=a&amp;foo=b</span></code>.</p></li>
<li><p>When deserializing, server implementations SHOULD use the first encountered
value in the query string for non-list members. For example, given a
member bound to <code class="docutils literal notranslate"><span class="pre">foo</span></code> that targets a string and a query string of
<code class="docutils literal notranslate"><span class="pre">foo=a&amp;foo=b</span></code>, the deserialized value of <code class="docutils literal notranslate"><span class="pre">foo</span></code> should be <code class="docutils literal notranslate"><span class="pre">a</span></code>.</p></li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Percent-encoding is an implementation detail</p>
<p>The encoding and serialization rules of shapes defined in a Smithy model are
implementation details. When designing clients, servers, and other kinds of
software based on Smithy models, the format in which the value of a member
is serialized SHOULD NOT be a concern of the end-user. As such, members bound
to the query string MUST be automatically percent-encoded when serializing
HTTP requests and automatically percent-decoded when deserializing HTTP
requests.</p>
</div>
<p class="rubric"><code class="docutils literal notranslate"><span class="pre">httpQuery</span></code> is only used on input</p>
<p><code class="docutils literal notranslate"><span class="pre">httpQuery</span></code> is ignored when resolving the HTTP bindings of an operation's
output or an error. This means that if a structure that contains members
marked with the <code class="docutils literal notranslate"><span class="pre">httpQuery</span></code> trait is used as the top-level output structure
of an operation, then those members are sent as part of the
<a class="reference internal" href="#http-protocol-document-payloads"><span class="std std-ref">protocol-specific document</span></a> sent in
the body of the response.</p>
<p class="rubric">Do not put too much data in the query string</p>
<p>While there is no limit placed on the length of an
<span class="target" id="index-11"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9112.html#section-3"><strong>HTTP request line</strong></a>, many HTTP client and server
implementations enforce limits in practice. Carefully consider the maximum
allowed length of each member that is bound to an HTTP query string or path.</p>
</section>
<section id="httpqueryparams-trait">
<span id="smithy-api-httpqueryparams-trait"></span><span id="id9"></span><h2><span class="section-number">11.8. </span><code class="docutils literal notranslate"><span class="pre">httpQueryParams</span></code> trait<a class="headerlink" href="#httpqueryparams-trait" title="Link to this heading">¶</a></h2>
<dl>
<dt>Summary</dt><dd><p>Binds a map of key-value pairs to query string parameters.</p>
</dd>
<dt>Trait selector</dt><dd><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>structure &gt; member
:test(&gt; map &gt; member[id|member=value] &gt; :test(string, list &gt; member &gt; string))
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">httpQueryParams</span></code> trait can be applied to <code class="docutils literal notranslate"><span class="pre">structure</span></code> members
that target a <code class="docutils literal notranslate"><span class="pre">map</span></code> of <code class="docutils literal notranslate"><span class="pre">string</span></code>, or a <code class="docutils literal notranslate"><span class="pre">map</span></code> of <code class="docutils literal notranslate"><span class="pre">list</span></code> of
<code class="docutils literal notranslate"><span class="pre">string</span></code>.</p>
</dd>
<dt>Value type</dt><dd><p>Annotation trait.</p>
</dd>
<dt>Conflicts with</dt><dd><p><a class="reference internal" href="#httplabel-trait"><span class="std std-ref">httpLabel trait</span></a>, <a class="reference internal" href="#httpheader-trait"><span class="std std-ref">httpHeader trait</span></a>, <a class="reference internal" href="#httpquery-trait"><span class="std std-ref">httpQuery trait</span></a>,
<a class="reference internal" href="#httpprefixheaders-trait"><span class="std std-ref">httpPrefixHeaders trait</span></a>, <a class="reference internal" href="#httppayload-trait"><span class="std std-ref">httpPayload trait</span></a>,
<a class="reference internal" href="#httpresponsecode-trait"><span class="std std-ref">httpResponseCode trait</span></a></p>
</dd>
<dt>Structurally exclusive</dt><dd><p>Only a single structure member can be bound to <code class="docutils literal notranslate"><span class="pre">httpQueryParams</span></code>.</p>
</dd>
</dl>
<p>The following example defines an operation that optionally sends the
target input map as query string parameters in an HTTP request:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@readonly</span>
<span class="nt">@http</span>(<span class="py">method</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;GET&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/things&quot;</span>)
<span class="kd">operation </span><span class="nc">ListThings</span><span class="w"> </span>{
<span class="w">    </span><span class="py">input</span><span class="p">:</span><span class="w"> </span><span class="vc">ListThingsInput</span><span class="p">,</span>
<span class="w">    </span><span class="py">output</span><span class="p">:</span><span class="w"> </span><span class="vc">ListThingsOutput</span><span class="p">,</span><span class="w"> </span><span class="c">// omitted for brevity</span>
}

<span class="nt">@input</span>
<span class="kd">structure </span><span class="nc">ListThingsInput</span><span class="w"> </span>{
<span class="w">    </span><span class="nt">@httpQueryParams</span>()
<span class="w">    </span><span class="py">myParams</span><span class="p">:</span><span class="w"> </span><span class="vc">MapOfStrings</span><span class="p">,</span>
}

<span class="kd">map </span><span class="nc">MapOfStrings</span><span class="w"> </span>{
<span class="w">    </span><span class="py">key</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span>
<span class="w">    </span><span class="py">value</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}
</pre></div>
</div>
<p class="rubric"><code class="docutils literal notranslate"><span class="pre">httpQueryParams</span></code> is only used on input</p>
<p><code class="docutils literal notranslate"><span class="pre">httpQueryParams</span></code> is ignored when resolving the HTTP bindings of an operation's
output or an error. This means that if a structure that contains members
marked with the <code class="docutils literal notranslate"><span class="pre">httpQueryParams</span></code> trait is used as the top-level output structure
of an operation, then those members are sent as part of the
<a class="reference internal" href="#http-protocol-document-payloads"><span class="std std-ref">protocol-specific document</span></a> sent in
the body of the response.</p>
<p class="rubric">Serialization rules</p>
<p>See the <a class="reference internal" href="#httpquery-trait"><span class="std std-ref">httpQuery trait</span></a> serialization rules that define how the keys and values of the
target map will be serialized in the request query string. Key-value pairs in the target map
are treated like they were explicitly bound using the <a class="reference internal" href="#httpquery-trait"><span class="std std-ref">httpQuery trait</span></a>, including the
requirement that reserved characters MUST be <a class="reference external" href="https://tools.ietf.org/html/rfc3986#section-2.1">percent-encoded</a>.</p>
<p>When servers deserialize the query string into a <code class="docutils literal notranslate"><span class="pre">map</span></code> of <code class="docutils literal notranslate"><span class="pre">string</span></code>, they SHOULD take the
first encountered value for each key. Since this rule applies to all future query string
values, and changing from a <code class="docutils literal notranslate"><span class="pre">map</span></code> of <code class="docutils literal notranslate"><span class="pre">string</span></code> to a <code class="docutils literal notranslate"><span class="pre">map</span></code> of <code class="docutils literal notranslate"><span class="pre">list</span></code> of <code class="docutils literal notranslate"><span class="pre">string</span></code> is
backwards-incompatible, care should be taken to use <code class="docutils literal notranslate"><span class="pre">map</span></code> of <code class="docutils literal notranslate"><span class="pre">string</span></code> only when it is
certain that multiple values for any query string will never be meaningful for the operation.</p>
<p>If a member with the <code class="docutils literal notranslate"><span class="pre">httpQueryParams</span></code> trait and a member with the <a class="reference internal" href="#httpquery-trait"><span class="std std-ref">httpQuery trait</span></a>
conflict, clients MUST use the value set by the member with the <a class="reference internal" href="#httpquery-trait"><span class="std std-ref">httpQuery trait</span></a> and
disregard the value set by <code class="docutils literal notranslate"><span class="pre">httpQueryParams</span></code>. For example, given the following model:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@http</span>(<span class="py">method</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;POST&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/things&quot;</span>)
<span class="kd">operation </span><span class="nc">PutThing</span><span class="w"> </span>{
<span class="w">    </span><span class="py">input</span><span class="p">:</span><span class="w"> </span><span class="vc">PutThingInput</span>
}

<span class="nt">@input</span>
<span class="kd">structure </span><span class="nc">PutThingInput</span><span class="w"> </span>{
<span class="w">    </span><span class="nt">@httpQuery</span>
<span class="w">    </span><span class="nt">@required</span>
<span class="w">    </span><span class="py">thingId</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span>

<span class="w">    </span><span class="nt">@httpQueryParams</span>
<span class="w">    </span><span class="py">tags</span><span class="p">:</span><span class="w"> </span><span class="vc">MapOfStrings</span>
}

<span class="kd">map </span><span class="nc">MapOfStrings</span><span class="w"> </span>{
<span class="w">    </span><span class="py">key</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span>
<span class="w">    </span><span class="py">value</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}
</pre></div>
</div>
<p>And given the following input to <code class="docutils literal notranslate"><span class="pre">PutThing</span></code>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;thingId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;realId&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;thingId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;fakeId&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;otherTag&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;value&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>An example HTTP request would be serialized as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>POST /things?thingId=realId&amp;otherTag=value
Host: &lt;server&gt;
</pre></div>
</div>
<p>When deserializing HTTP request query string parameters into members with the
<code class="docutils literal notranslate"><span class="pre">httpQueryParams</span></code> trait, servers MUST treat all values as strings and produce
empty string values for keys which do not have values specified. For example,
given the following model:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-0-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button></div><div aria-labelledby="tab-0-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-0-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@http</span>(<span class="py">method</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;POST&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/things&quot;</span>)
<span class="kd">operation </span><span class="nc">PostThing</span><span class="w"> </span>{
<span class="w">    </span><span class="py">input</span><span class="p">:</span><span class="w"> </span><span class="vc">PostThingInput</span>
}

<span class="kd">structure </span><span class="nc">PostThingInput</span><span class="w"> </span>{
<span class="w">    </span><span class="nt">@httpQueryParams</span>
<span class="w">    </span><span class="py">tags</span><span class="p">:</span><span class="w"> </span><span class="vc">MapOfStrings</span>
}

<span class="kd">map </span><span class="nc">MapOfStrings</span><span class="w"> </span>{
<span class="w">    </span><span class="py">key</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span>
<span class="w">    </span><span class="py">value</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}
</pre></div>
</div>
</div></div>
<p>And the following HTTP request:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>POST /things?thingId=realId&amp;otherTag=true&amp;anotherTag&amp;lastTag=
</pre></div>
</div>
<p>A server should deserialize the following input structure:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;thingId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;realId&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;otherTag&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;true&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;anotherTag&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;lastTag&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="httpresponsecode-trait">
<span id="smithy-api-httpresponsecode-trait"></span><span id="id10"></span><h2><span class="section-number">11.9. </span><code class="docutils literal notranslate"><span class="pre">httpResponseCode</span></code> trait<a class="headerlink" href="#httpresponsecode-trait" title="Link to this heading">¶</a></h2>
<dl>
<dt>Summary</dt><dd><p>Binds a structure member to the HTTP response status code so that an
HTTP response status code can be set dynamically at runtime to something
other than <code class="docutils literal notranslate"><span class="pre">code</span></code> of the <a class="reference internal" href="#http-trait"><span class="std std-ref">http trait</span></a>.</p>
</dd>
<dt>Trait selector</dt><dd><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>structure :not([trait|input]) &gt; member :test(&gt; integer)
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">httpResponseCode</span></code> trait can be applied to <code class="docutils literal notranslate"><span class="pre">structure</span></code> members
that target an <code class="docutils literal notranslate"><span class="pre">integer</span></code> within any <code class="docutils literal notranslate"><span class="pre">structure</span></code> that has no <code class="docutils literal notranslate"><span class="pre">input</span></code>
trait applied.</p>
</dd>
<dt>Value type</dt><dd><p>Annotation trait.</p>
</dd>
<dt>Conflicts with</dt><dd><p><a class="reference internal" href="#httplabel-trait"><span class="std std-ref">httpLabel trait</span></a>, <a class="reference internal" href="#httpheader-trait"><span class="std std-ref">httpHeader trait</span></a>,
<a class="reference internal" href="#httpprefixheaders-trait"><span class="std std-ref">httpPrefixHeaders trait</span></a>, <a class="reference internal" href="#httppayload-trait"><span class="std std-ref">httpPayload trait</span></a>,
<a class="reference internal" href="#httpquery-trait"><span class="std std-ref">httpQuery trait</span></a>, <a class="reference internal" href="#httpqueryparams-trait"><span class="std std-ref">httpQueryParams trait</span></a>,</p>
</dd>
</dl>
<p class="rubric"><code class="docutils literal notranslate"><span class="pre">httpResponseCode</span></code> use cases</p>
<p>Marking an output <code class="docutils literal notranslate"><span class="pre">structure</span></code> member with this trait can be used to provide
different response codes for an operation, like a 200 or 201 for a PUT
operation. If this member isn't provided, server implementations MUST default
to the <cite>code</cite> set by the <a class="reference internal" href="#http-trait"><span class="std std-ref">http trait</span></a>.</p>
<p class="rubric"><code class="docutils literal notranslate"><span class="pre">httpResponseCode</span></code> is only used on output</p>
<p><code class="docutils literal notranslate"><span class="pre">httpResponseCode</span></code> is ignored when resolving the HTTP bindings of any
structure except an operation's output structure. This means that if a
structure that contains members marked with the <code class="docutils literal notranslate"><span class="pre">httpResponseCode</span></code> trait
is not used as an output structure of an operation, then those members are
sent as part of the <a class="reference internal" href="#http-protocol-document-payloads"><span class="std std-ref">protocol-specific document</span></a>
sent in the body of the request.</p>
</section>
<section id="cors-trait">
<span id="smithy-api-cors-trait"></span><span id="id11"></span><h2><span class="section-number">11.10. </span><code class="docutils literal notranslate"><span class="pre">cors</span></code> trait<a class="headerlink" href="#cors-trait" title="Link to this heading">¶</a></h2>
<dl class="simple">
<dt>Summary</dt><dd><p>Defines how a service supports cross-origin resource sharing</p>
</dd>
<dt>Trait selector</dt><dd><p><code class="docutils literal notranslate"><span class="pre">service</span></code></p>
</dd>
<dt>Value type</dt><dd><p><code class="docutils literal notranslate"><span class="pre">structure</span></code></p>
</dd>
</dl>
<p>The <code class="docutils literal notranslate"><span class="pre">cors</span></code> trait is a structure that supports the following members:</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 25.0%" />
<col style="width: 65.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>origin</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>The origin from which browser script-originating requests will be
allowed. Defaults to <code class="docutils literal notranslate"><span class="pre">*</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>maxAge</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">integer</span></code></p></td>
<td><p>The maximum number of seconds for which browsers are allowed to cache
the results of a preflight <code class="docutils literal notranslate"><span class="pre">OPTIONS</span></code> request. Defaults to <code class="docutils literal notranslate"><span class="pre">600</span></code>, the
maximum age permitted by several browsers. Set to <code class="docutils literal notranslate"><span class="pre">-1</span></code> to disable
caching entirely.</p></td>
</tr>
<tr class="row-even"><td><p>additionalAllowedHeaders</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">list&lt;string&gt;</span></code></p></td>
<td><p>The names of headers that should be included in the
<code class="docutils literal notranslate"><span class="pre">Access-Control-Allow-Headers</span></code> header in responses to preflight
<code class="docutils literal notranslate"><span class="pre">OPTIONS</span></code> requests. This list will be used in addition to the names of
all request headers bound to an input data member via the
<a class="reference internal" href="#httpheader-trait"><span class="std std-ref">httpHeader trait</span></a>, as well as any headers required by the protocol
or authentication scheme.</p></td>
</tr>
<tr class="row-odd"><td><p>additionalExposedHeaders</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">list&lt;string&gt;</span></code></p></td>
<td><p>The names of headers that should be included in the
<code class="docutils literal notranslate"><span class="pre">Access-Control-Expose-Headers</span></code> header in all responses sent by the
service. This list will be used in addition to the names of all request
headers bound to an output data member via the <a class="reference internal" href="#httpheader-trait"><span class="std std-ref">httpHeader trait</span></a>,
as well as any headers required by the protocol or authentication
scheme.</p></td>
</tr>
</tbody>
</table>
</div>
<p>Adding a <code class="docutils literal notranslate"><span class="pre">cors</span></code> trait with its value set to an empty object enables
cross-origin resource sharing for all origins and allows browser scripts access
to all headers to which data is bound in the model, as well as any headers used
by the protocol and authentication scheme.</p>
<p>The default settings are not compatible with certain authentication schemes
(e.g., <code class="docutils literal notranslate"><span class="pre">http-basic</span></code>) that rely on browser-managed credentials. Services using
such authentication schemes MUST designate a single origin from which
cross-origin, credentialed requests will be accepted.</p>
</section>
<section id="serializing-http-messages">
<h2><span class="section-number">11.11. </span>Serializing HTTP messages<a class="headerlink" href="#serializing-http-messages" title="Link to this heading">¶</a></h2>
<p>The following steps are taken to serialize an HTTP request given a map of
parameters:</p>
<ol class="arabic simple">
<li><p>Set the HTTP method to the <code class="docutils literal notranslate"><span class="pre">method</span></code> property of the <a class="reference internal" href="#http-trait"><span class="std std-ref">http trait</span></a>
of the operation.</p></li>
<li><p>Set the URI of the HTTP request to the <code class="docutils literal notranslate"><span class="pre">uri</span></code> property of the <code class="docutils literal notranslate"><span class="pre">http</span></code>
trait.</p></li>
<li><p>Iterate over all of the key-value pairs of the parameters and find the
corresponding structure member by name:</p>
<ol class="arabic simple">
<li><p>If the member has the <code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> trait, expand the value into the URI.</p></li>
<li><p>If the member has the <code class="docutils literal notranslate"><span class="pre">httpQuery</span></code> trait, serialize the value into the
HTTP request as a query string parameter.</p></li>
<li><p>If the member has the <code class="docutils literal notranslate"><span class="pre">httpQueryParams</span></code> trait, serialize the values into
the HTTP request as query string parameters.</p></li>
<li><p>If the member has the <code class="docutils literal notranslate"><span class="pre">httpHeader</span></code> trait, serialize the value in an
HTTP header using the value of the <code class="docutils literal notranslate"><span class="pre">httpHeader</span></code> trait.</p></li>
<li><p>If the member has the <code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code> trait and the value is a map,
serialize the map key value pairs as prefixed HTTP headers.</p></li>
<li><p>If the member has the <code class="docutils literal notranslate"><span class="pre">httpPayload</span></code> trait, serialize the value as the
body of the request.</p></li>
<li><p>If the member has no bindings, serialize the key-value pair as part of a
protocol-specific document sent in the body of the request.</p></li>
</ol>
</li>
</ol>
<p>The following steps are taken to serialize an HTTP response given a map of
parameters:</p>
<ol class="arabic simple">
<li><p>If serializing the output of an operation, set the status code of the
response to the <code class="docutils literal notranslate"><span class="pre">code</span></code> property of the <a class="reference internal" href="#http-trait"><span class="std std-ref">http trait</span></a>.</p></li>
<li><p>If serializing an error and the <a class="reference internal" href="#httperror-trait"><span class="std std-ref">httpError trait</span></a> is present,
set the status code of the response to its value. Otherwise, set the status
code to 400 if the error trait is &quot;client&quot; or to 500 if the error trait is
&quot;server&quot;.</p></li>
<li><p>Iterate over all of the key-value pairs of the parameters and find the
corresponding structure member by name:</p>
<ol class="arabic simple">
<li><p>If the member has the <code class="docutils literal notranslate"><span class="pre">httpHeader</span></code> trait, serialize the value in an
HTTP header using the value of the <code class="docutils literal notranslate"><span class="pre">httpHeader</span></code> trait.</p></li>
<li><p>If the member has the <code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code> trait and the value is a map,
serialize the map key value pairs as prefixed HTTP headers.</p></li>
<li><p>If the member has the <code class="docutils literal notranslate"><span class="pre">httpPayload</span></code> trait, serialize the value as the
body of the response.</p></li>
<li><p>If the member has no bindings, serialize the key-value pair as part of a
protocol-specific document sent in the body of the response.</p></li>
</ol>
</li>
</ol>
</section>
<section id="event-streams">
<h2><span class="section-number">11.12. </span>Event streams<a class="headerlink" href="#event-streams" title="Link to this heading">¶</a></h2>
<p>When using <a class="reference internal" href="stream-traits.html#event-streams"><span class="std std-ref">event streams</span></a> and HTTP bindings, the
<a class="reference internal" href="#httppayload-trait"><span class="std std-ref">httpPayload</span></a> trait MUST be applied to any input or
output member that targets a shape marked with the <a class="reference internal" href="stream-traits.html#streaming-trait"><span class="std std-ref">streaming trait</span></a>.</p>
<p>The following example defines an operation that uses an input event stream
and HTTP bindings:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="nt">@http</span>(<span class="py">method</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;POST&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/messages&quot;</span>)
<span class="kd">operation </span><span class="nc">PublishMessages</span><span class="w"> </span>{
<span class="w">    </span><span class="py">input</span><span class="p">:</span><span class="w"> </span><span class="vc">PublishMessagesInput</span>
}

<span class="nt">@input</span>
<span class="kd">structure </span><span class="nc">PublishMessagesInput</span><span class="w"> </span>{
<span class="w">    </span><span class="nt">@httpPayload</span>
<span class="w">    </span><span class="py">messages</span><span class="p">:</span><span class="w"> </span><span class="vc">MessageStream</span><span class="p">,</span>
}

<span class="nt">@streaming</span>
<span class="kd">union </span><span class="nc">MessageStream</span><span class="w"> </span>{
<span class="w">    </span><span class="py">message</span><span class="p">:</span><span class="w"> </span><span class="vc">Message</span><span class="p">,</span>
}

<span class="kd">structure </span><span class="nc">Message</span><span class="w"> </span>{
<span class="w">    </span><span class="py">message</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span>
}
</pre></div>
</div>
<p>The following is <strong>invalid</strong> because the operation has the <code class="docutils literal notranslate"><span class="pre">http</span></code> trait
and an input member is marked with the <code class="docutils literal notranslate"><span class="pre">streaming</span></code> trait but not
marked with the <code class="docutils literal notranslate"><span class="pre">httpPayload</span></code> trait:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="nt">@http</span>(<span class="py">method</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;POST&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/messages&quot;</span>)
<span class="kd">operation </span><span class="nc">InvalidOperation</span><span class="w"> </span>{
<span class="w">    </span><span class="py">input</span><span class="p">:</span><span class="w"> </span><span class="vc">InvalidOperationInput</span>
}

<span class="nt">@input</span>
<span class="kd">structure </span><span class="nc">InvalidOperationInput</span><span class="w"> </span>{
<span class="w">    </span><span class="py">invalid</span><span class="p">:</span><span class="w"> </span><span class="vc">MessageStream</span><span class="p">,</span><span class="w"> </span><span class="c">// &lt;-- Missing the @httpPayload trait</span>
}

<span class="nt">@streaming</span>
<span class="kd">union </span><span class="nc">MessageStream</span><span class="w"> </span>{
<span class="w">    </span><span class="py">message</span><span class="p">:</span><span class="w"> </span><span class="vc">Message</span><span class="p">,</span>
}

<span class="kd">structure </span><span class="nc">Message</span><span class="w"> </span>{
<span class="w">    </span><span class="py">message</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span>
}
</pre></div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="xml-traits.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title"><span class="section-number">12. </span>XML binding traits</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="stream-traits.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title"><span class="section-number">10. </span>Streaming Traits</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Amazon Web Services
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/smithy-lang/smithy" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">11. HTTP binding traits</a><ul>
<li><a class="reference internal" href="#http-trait">11.1. <code class="docutils literal notranslate"><span class="pre">http</span></code> trait</a><ul>
<li><a class="reference internal" href="#method">11.1.1. method</a></li>
<li><a class="reference internal" href="#uri">11.1.2. uri</a><ul>
<li><a class="reference internal" href="#literal-character-sequences">11.1.2.1. Literal character sequences</a></li>
<li><a class="reference internal" href="#labels">11.1.2.2. Labels</a></li>
<li><a class="reference internal" href="#query-string-literals">11.1.2.3. Query string literals</a></li>
<li><a class="reference internal" href="#greedy-labels">11.1.2.4. Greedy labels</a></li>
<li><a class="reference internal" href="#pattern-validation-and-conflict-avoidance">11.1.2.5. Pattern Validation and Conflict Avoidance</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#httperror-trait">11.2. <code class="docutils literal notranslate"><span class="pre">httpError</span></code> trait</a></li>
<li><a class="reference internal" href="#httpheader-trait">11.3. <code class="docutils literal notranslate"><span class="pre">httpHeader</span></code> trait</a><ul>
<li><a class="reference internal" href="#restricted-http-headers">11.3.1. Restricted HTTP headers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#httplabel-trait">11.4. <code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> trait</a></li>
<li><a class="reference internal" href="#httppayload-trait">11.5. <code class="docutils literal notranslate"><span class="pre">httpPayload</span></code> trait</a></li>
<li><a class="reference internal" href="#httpprefixheaders-trait">11.6. <code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code> trait</a></li>
<li><a class="reference internal" href="#httpquery-trait">11.7. <code class="docutils literal notranslate"><span class="pre">httpQuery</span></code> trait</a></li>
<li><a class="reference internal" href="#httpqueryparams-trait">11.8. <code class="docutils literal notranslate"><span class="pre">httpQueryParams</span></code> trait</a></li>
<li><a class="reference internal" href="#httpresponsecode-trait">11.9. <code class="docutils literal notranslate"><span class="pre">httpResponseCode</span></code> trait</a></li>
<li><a class="reference internal" href="#cors-trait">11.10. <code class="docutils literal notranslate"><span class="pre">cors</span></code> trait</a></li>
<li><a class="reference internal" href="#serializing-http-messages">11.11. Serializing HTTP messages</a></li>
<li><a class="reference internal" href="#event-streams">11.12. Event streams</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=f2a433a1"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=6b89569b"></script>
    <script src="../../_static/tabs.js?v=3030b3cb"></script>
    </body>
</html>