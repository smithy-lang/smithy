
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>1. The Smithy model &#8212; Smithy 1.0 documentation</title><link rel="stylesheet" href="../../../_static/bootstrap-reboot.css" type="text/css" />
    
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/default.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css" />
    <link rel="stylesheet" href="../../../_static/custom-tabs.css" type="text/css" />

    
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/tabs.js"></script>
    <script type="text/javascript" src="../../../_static/smithy.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="2. Prelude model" href="prelude-model.html" />
    <link rel="prev" title="Smithy specification" href="index.html" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="smithy-version" content="1.0">

  </head><body>
    <header>
        <div class="header-flex width-wrapper">
            <div class="site-logo">
                <a href="../../../index.html">
                    <span class="logo-icon">ğŸ”¨ï¸</span><span class="logo-text">Smithy</span>
                </a>
                <span class="version-text">1.0</span>
            </div>
            <ul id="page-navigation">
                <li class="site-page first"><a href="../../../quickstart.html">Quick Start</a></li>
                <li class="site-page"><a href="../index.html">Specifications</a></li>
                <li class="site-page"><a href="../../guides/index.html">Guides</a></li>
                <li class="site-page"><a href="https://github.com/awslabs/smithy">Code</a></li>
                <li class="site-search hidden-sm">
                    <form action="../../../search.html" method="get">
                        <input type="hidden" name="check_keywords" value="yes" />
                        <input type="hidden" name="area" value="default" />
                        <input class="search-input" autocomplete="off" type="search" name="q" placeholder="Search" />
                    </form>
                </li>
            </ul>
        </div>
    </header>
    
        
        
        <section id="page-container">
            <div class="width-wrapper flex">
                <article class="document-body">
                    
                    <ul class="rel-parents">
                    <li><a href="../index.html" >Specifications</a></li>
                    <li><a href="index.html" accesskey="U">Smithy specification</a></li>
                    </ul>
                    
                    
  <div class="section" id="the-smithy-model">
<span id="smithy-model"></span><h1><a href="#the-smithy-model"><span class="section-number">1. </span>The Smithy model</a></h1>
<p>The <em>Smithy model</em> describes the Smithy semantic model and the files used to
create it. Smithy models are used to describe services and data structures.</p>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">Table of contents</p>
<ul class="simple">
<li><a class="reference internal" href="#smithy-overview" id="id35">Smithy overview</a></li>
<li><a class="reference internal" href="#the-semantic-model" id="id36">The semantic model</a></li>
<li><a class="reference internal" href="#shapes" id="id37">Shapes</a></li>
<li><a class="reference internal" href="#simple-shapes" id="id38">Simple shapes</a></li>
<li><a class="reference internal" href="#aggregate-shapes" id="id39">Aggregate shapes</a></li>
<li><a class="reference internal" href="#service-shapes" id="id40">Service shapes</a></li>
<li><a class="reference internal" href="#traits" id="id41">Traits</a></li>
<li><a class="reference internal" href="#model-metadata" id="id42">Model metadata</a></li>
<li><a class="reference internal" href="#node-values" id="id43">Node values</a></li>
<li><a class="reference internal" href="#merging-model-files" id="id44">Merging model files</a></li>
</ul>
</div>
<div class="section" id="smithy-overview">
<span id="id1"></span><h2><a href="#smithy-overview"><span class="section-number">1.1. </span>Smithy overview</a></h2>
<p>Smithy is a framework that consists of a semantic model, file formats used to
define a model, and a build process used to validate models and facilitate
model transformations.</p>
<div class="literal-block-wrapper text-figure docutils container" id="figure-1-1">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” part of          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                â”‚â•²                â•±â”‚                â”‚
                â”‚ Semantic Model â”‚â”€â—‹â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—‹â”€â”‚   Model File   â”‚
                â”‚                â”‚â•±                â•²â”‚                â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           split into       â•²â”‚â•±
                                                             â—‹
                                                             â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”¼
                â”‚JSON AST (.json)â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚         â”‚                â”‚
                                          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â–·â”‚ Representation â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚         â”‚                â”‚
                â”‚ IDL (.smithy)  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre></div>
</div>
<div class="code-block-caption"><span class="caption-text"><strong>Figure 1.1</strong>: Smithy framework concepts</span><a class="headerlink" href="#figure-1-1" title="Permalink to this code">Â¶</a></div>
</div>
<dl class="docutils">
<dt>Semantic model</dt><dd>The in-memory model used by tools. The <a class="reference internal" href="#semantic-model"><span class="std std-ref">semantic model</span></a>
may be serialized into one or more model file representations.</dd>
</dl>
<dl class="docutils" id="model-files">
<dt>Model File</dt><dd><p>A file on the file system, in a particular representation. The model files
that make up a semantic model MAY be split across multiple files to
improve readability or modularity, and those files are not required to
use the same representation. Model files do not explicitly include other
model files; this responsibility is left to tooling to ensure that all
necessary model files are merged together to form a valid semantic model.</p>
<p>One or more model files can be <a class="reference internal" href="#merging-models"><span class="std std-ref">assembled (or merged)</span></a>
together to form a semantic model.</p>
</dd>
<dt>Representation</dt><dd><p>A particular model file format such as the Smithy IDL or JSON AST.
Representations are loaded into the semantic model by mapping the
representation to concepts in the semantic model.</p>
<ul class="simple">
<li>The <a class="reference internal" href="idl.html#idl"><span class="std std-ref">Smithy IDL</span></a> is a human-readable format that aims to
streamline authoring and reading models.</li>
<li>The <a class="reference internal" href="json-ast.html#json-ast"><span class="std std-ref">JSON AST</span></a> aims to provide a more machine-readable
format to easily share models across language implementations and better
integrate with JSON-based ecosystems.</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="the-semantic-model">
<span id="semantic-model"></span><h2><a href="#the-semantic-model"><span class="section-number">1.2. </span>The semantic model</a></h2>
<p>Smithy's <em>semantic model</em> is an in-memory model used by tools. It is
independent of any particular serialized representation. The semantic
model contains <a class="reference internal" href="#metadata"><span class="std std-ref">metadata</span></a> and a graph of
<a class="reference internal" href="#shapes"><span class="std std-ref">shapes</span></a> connected by <a class="reference internal" href="#shape-id"><span class="std std-ref">shape IDs</span></a>.</p>
<div class="literal-block-wrapper text-figure docutils container" id="figure-1-2">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>                                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                      â”‚Semantic Model â”‚â•²
                                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â—‹â”€â”€â”€â”€â”€â”€â”€â”€â”
                                      â”‚metadata?      â”‚â•±         â”‚
                                      â”‚               â”‚          â”‚
                                      â”‚               â”‚          â”‚
                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
                                              â”¼     â”¼ prelude    â”‚
                                              â”‚     â—‹â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â—‹
                                       shapesâ•±â”‚â•²
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Applied Trait â”‚â•²          shape â”‚  Â«abstractÂ»   â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â—‹â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”‚     Shape     â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚               â”‚â•±                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚    ShapeID    â”‚
    â”‚               â”‚                 â”‚               â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚               â”‚â•²     applied-to â”‚               â”‚         id â”‚namespace      â”‚
    â”‚               â”‚â”€â—‹â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”‚               â”‚â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”‚shape_name     â”‚
    â”‚               â”‚â•±traits          â”‚               â”‚            â”‚member_name?   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre></div>
</div>
<div class="code-block-caption"><span class="caption-text"><strong>Figure 1.2</strong>: The semantic model</span><a class="headerlink" href="#figure-1-2" title="Permalink to this code">Â¶</a></div>
</div>
<dl class="docutils">
<dt>Shape</dt><dd>Shapes are named data definitions that describe the structure of an API.
Shapes are referenced and connected by <a class="reference internal" href="#shape-id"><span class="std std-ref">shape IDs</span></a>.
Relationships between shapes are formed by <a class="reference internal" href="#member"><span class="std std-ref">members</span></a> that
target other shapes, properties of shapes like the <code class="docutils literal notranslate"><span class="pre">input</span></code> and
<code class="docutils literal notranslate"><span class="pre">output</span></code> properties of an <a class="reference internal" href="#operation"><span class="std std-ref">operation</span></a>, and
<a class="reference internal" href="#applying-traits"><span class="std std-ref">applied traits</span></a> that attach a trait to a shape.</dd>
<dt>Shape ID</dt><dd>A <a class="reference internal" href="#shape-id"><span class="std std-ref">shape ID</span></a> is used to identify shapes defined in a
model. For example, <code class="docutils literal notranslate"><span class="pre">smithy.example#MyShape</span></code>,
<code class="docutils literal notranslate"><span class="pre">smithy.example#Foo$bar</span></code>, and <code class="docutils literal notranslate"><span class="pre">Baz</span></code> are all different kinds of shape
IDs.</dd>
<dt>Trait</dt><dd><a class="reference internal" href="#traits"><span class="std std-ref">Traits</span></a> are specialized shapes that form the basis of
Smithy's meta-model. Traits are applied to shapes to associate metadata
to a shape. They are typically used by tools to influence validation,
serialization, and code generation.</dd>
<dt>Applied trait</dt><dd>An applied trait is an instance of a trait applied to a shape, configured
using a <a class="reference internal" href="#node-value"><span class="std std-ref">node value</span></a>.</dd>
<dt>Model metadata</dt><dd><a class="reference internal" href="#metadata"><span class="std std-ref">Metadata</span></a> is a schema-less extensibility mechanism used
to associate metadata to an entire model.</dd>
<dt>Prelude</dt><dd>The <a class="reference internal" href="prelude-model.html#prelude"><span class="std std-ref">prelude</span></a> defines various simple shapes and every
trait defined in the core specification. All Smithy models automatically
include the prelude.</dd>
</dl>
</div>
<div class="section" id="shapes">
<span id="id2"></span><h2><a href="#shapes"><span class="section-number">1.3. </span>Shapes</a></h2>
<p>Smithy models are made up of shapes. Shapes come in three kinds: simple,
aggregate, and service. A simple shape defines atomic or primitive values
such as <code class="docutils literal notranslate"><span class="pre">integer</span></code> and <code class="docutils literal notranslate"><span class="pre">string</span></code>. Aggregate shapes have members such as
a list of strings or an <code class="docutils literal notranslate"><span class="pre">Address</span></code> structure. Service shapes have specific
semantics, unlike the very generic simple and aggregate shapes, as they
represent either a service, a resource managed by a service, or operations
on services and resources.</p>
<p>Shapes are visualized using the following diagram:</p>
<div class="literal-block-wrapper text-figure docutils container" id="figure-1-4">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         members â•±â”‚ Â«abstractÂ»  â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â—‹â”€â”‚    Shape    â”‚
                        â”‚        â•²â”‚             â”‚
                        â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚                â–³
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚         â”‚                â”‚                    â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  Â«abstractÂ»   â”‚ â”‚containerâ”‚ Â«abstractÂ»  â”‚      â”‚ Â«abstractÂ»  â”‚
      â”‚    Simple     â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”‚  Aggregate  â”‚      â”‚   Service   â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â–³                    â–³                    â–³
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚blob      â”‚â”€â”€â”¼â”€â”€â”‚boolean   â”‚      â”œâ”€â”€â”€â”€â”‚    List    â”‚  â”‚    â”‚         Service         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚    â”‚member      â”‚  â”‚    â”‚version                  â”‚
â”‚document  â”‚â”€â”€â”¼â”€â”€â”‚string    â”‚      â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”œâ”€â”€â”€â”€â”‚operations: [Operation]? â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚resources: [Resource]?   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                    â”œâ”€â”€â”€â”€â”‚    Set     â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚timestamp â”‚â”€â”€â”¤                    â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                    â”‚    â”‚member      â”‚  â”‚    â”‚        Operation        â”‚
              â”‚                    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚input: Structure         â”‚
      â”‚  Â«abstractÂ»   â”‚            â”œâ”€â”€â”€â”€â”‚    Map     â”‚  â”œâ”€â”€â”€â”€â”‚output: Structure        â”‚
      â”‚    Number     â”‚            â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚    â”‚errors: [Structure]?     â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚    â”‚key         â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â–³                    â”‚    â”‚value       â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚        Resource         â”‚
â”‚byte      â”‚â”€â”€â”¼â”€â”€â”‚short     â”‚      â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”œâ”€â”€â”€â”€â”‚ Structure  â”‚  â”‚    â”‚identifiers?             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚create: Operation?       â”‚
â”‚integer   â”‚â”€â”€â”¼â”€â”€â”‚long      â”‚      â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚put: Operation?          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”‚   Union    â”‚  â”‚    â”‚read: Operation?         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”‚update: Operation?       â”‚
â”‚float     â”‚â”€â”€â”¼â”€â”€â”‚double    â”‚                                â”‚delete: Operation?       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚list: : Operation?       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚operations: [Operation]? â”‚
â”‚bigIntegerâ”‚â”€â”€â”´â”€â”€â”‚bigDecimalâ”‚                                â”‚collectionOperations:    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚    [Operation]?         â”‚
                                                             â”‚resources: [Resource]?   â”‚
                                                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre></div>
</div>
<div class="code-block-caption"><span class="caption-text"><strong>Figure 1.4</strong>: Smithy shapes</span><a class="headerlink" href="#figure-1-4" title="Permalink to this code">Â¶</a></div>
</div>
<div class="section" id="shape-id">
<span id="id3"></span><h3><a href="#shape-id"><span class="section-number">1.3.1. </span>Shape ID</a></h3>
<p>All shapes have an assigned shape ID. A <em class="dfn">shape ID</em> is used to refer to
shapes in the model. Shape IDs adhere to the following syntax:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>com.foo.baz#ShapeName$memberName
\_________/ \_______/ \________/
     |          |          |
 Namespace  Shape name  Member name
</pre></div>
</div>
<dl class="docutils">
<dt>Namespace</dt><dd>A namespace is a mechanism for logically grouping shapes in a way
that makes them reusable alongside other models without naming
conflicts. A semantic model MAY contain shapes defined across multiple
namespaces. The IDL representation supports zero or one namespace per
model file, while the JSON AST representation supports zero or more
namespaces per model file.</dd>
<dt>Absolute shape ID</dt><dd>An <em class="dfn">absolute shape ID</em> starts with a <a class="reference internal" href="#grammar-token-smithy-namespace"><code class="xref std std-token docutils literal notranslate"><span class="pre">smithy:namespace</span></code></a> name,
followed by &quot;<code class="docutils literal notranslate"><span class="pre">#</span></code>&quot;, followed by a <em>relative shape ID</em>. All shape
IDs in the semantic model MUST be absolute.
For example, <code class="docutils literal notranslate"><span class="pre">smithy.example#Foo</span></code> and <code class="docutils literal notranslate"><span class="pre">smithy.example#Foo$bar</span></code>
are absolute shape IDs.</dd>
<dt>Relative shape ID</dt><dd>A <em class="dfn">relative shape ID</em> contains a <a class="reference internal" href="#grammar-token-smithy-identifier"><code class="xref std std-token docutils literal notranslate"><span class="pre">shape</span> <span class="pre">name</span></code></a>
and an optional <a class="reference internal" href="#grammar-token-smithy-identifier"><code class="xref std std-token docutils literal notranslate"><span class="pre">member</span> <span class="pre">name</span></code></a>. The shape name and
member name are separated by the &quot;<code class="docutils literal notranslate"><span class="pre">$</span></code>&quot; symbol if a member name is
present. For example, <code class="docutils literal notranslate"><span class="pre">Foo</span></code> and <code class="docutils literal notranslate"><span class="pre">Foo$bar</span></code> are relative shape IDs.</dd>
<dt>Root shape ID</dt><dd>A <em class="dfn">root shape ID</em> is a shape ID that does not contain a member.
For example, <code class="docutils literal notranslate"><span class="pre">smithy.example#Foo</span></code> and <code class="docutils literal notranslate"><span class="pre">Foo</span></code> are root shape IDs.</dd>
</dl>
<p class="rubric">Shape ID ABNF</p>
<p>Shape IDs are formally defined by the following ABNF:</p>
<pre class="productionlist">
<strong id="grammar-token-smithy-shape_id"><span id="grammar-token-shape-id"></span>shape_id</strong> =
    <a class="reference internal" href="#grammar-token-smithy-root_shape_id"><code class="xref docutils literal notranslate"><span class="pre">root_shape_id</span></code></a> [<a class="reference internal" href="#grammar-token-smithy-shape_id_member"><code class="xref docutils literal notranslate"><span class="pre">shape_id_member</span></code></a>]

<strong id="grammar-token-smithy-root_shape_id"><span id="grammar-token-root-shape-id"></span>root_shape_id</strong> =
    <a class="reference internal" href="#grammar-token-smithy-absolute_root_shape_id"><code class="xref docutils literal notranslate"><span class="pre">absolute_root_shape_id</span></code></a> / <a class="reference internal" href="#grammar-token-smithy-identifier"><code class="xref docutils literal notranslate"><span class="pre">identifier</span></code></a>

<strong id="grammar-token-smithy-absolute_root_shape_id"><span id="grammar-token-absolute-root-shape-id"></span>absolute_root_shape_id</strong> =
    <a class="reference internal" href="#grammar-token-smithy-namespace"><code class="xref docutils literal notranslate"><span class="pre">namespace</span></code></a> &quot;#&quot; <a class="reference internal" href="#grammar-token-smithy-identifier"><code class="xref docutils literal notranslate"><span class="pre">identifier</span></code></a>

<strong id="grammar-token-smithy-namespace"><span id="grammar-token-namespace"></span>namespace</strong> =
    <a class="reference internal" href="#grammar-token-smithy-identifier"><code class="xref docutils literal notranslate"><span class="pre">identifier</span></code></a> *(&quot;.&quot; <a class="reference internal" href="#grammar-token-smithy-identifier"><code class="xref docutils literal notranslate"><span class="pre">identifier</span></code></a>)

<strong id="grammar-token-smithy-identifier"><span id="grammar-token-identifier"></span>identifier</strong> =
    identifier_start *identifier_chars

<strong id="grammar-token-smithy-identifier_start"><span id="grammar-token-identifier-start"></span>identifier_start</strong> =
    *&quot;_&quot; ALPHA

<strong id="grammar-token-smithy-identifier_chars"><span id="grammar-token-identifier-chars"></span>identifier_chars</strong> =
    ALPHA / DIGIT / &quot;_&quot;

<strong id="grammar-token-smithy-shape_id_member"><span id="grammar-token-shape-id-member"></span>shape_id_member</strong> =
    &quot;$&quot; <a class="reference internal" href="#grammar-token-smithy-identifier"><code class="xref docutils literal notranslate"><span class="pre">identifier</span></code></a>
</pre>
<p class="rubric">Best practices for defining shape names</p>
<ol class="arabic">
<li><p class="first"><strong>Use a strict form of PascalCase for shape names.</strong>
Consumers of a Smithy model MAY choose to inflect shape names, structure
member names, and other facets of a Smithy model in order to expose a more
idiomatic experience to particular programming languages. In order to make
this easier for consumers of a model, model authors SHOULD utilize a
strict form of PascalCase in which only the first letter of acronyms,
abbreviations, and initialisms are capitalized.</p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="42%" />
<col width="58%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Recommended</th>
<th class="head">Not recommended</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>UserId</td>
<td>UserID</td>
</tr>
<tr class="row-odd"><td>ResourceArn</td>
<td>ResourceARN</td>
</tr>
<tr class="row-even"><td>IoChannel</td>
<td>IOChannel</td>
</tr>
<tr class="row-odd"><td>HtmlEntity</td>
<td>HTMLEntity</td>
</tr>
<tr class="row-even"><td>HtmlEntity</td>
<td>HTML_Entity</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first"><strong>Limit the number of namespaces used to model a single domain.</strong>
Ideally only a single namespace is used to model a single logical domain.
Limiting the number of namespaces used to define a logical grouping of
shapes limits the potential for ambiguity if the shapes are used by the
same service or need to be referenced within the same model.</p>
</li>
</ol>
</div>
<div class="section" id="shape-id-conflicts">
<span id="id4"></span><h3><a href="#shape-id-conflicts"><span class="section-number">1.3.2. </span>Shape ID conflicts</a></h3>
<p>While shape ID references within the semantic model are case-sensitive, no
two shapes in the semantic model can have the same case-insensitive shape ID.
This restriction makes it easier to use Smithy models for code generation in
programming languages that do not support case-sensitive identifiers or that
perform some kind of normalization on generated identifiers (for example,
a Python code generator might convert all member names to lower snake case).
To illustrate, <code class="docutils literal notranslate"><span class="pre">com.Foo#baz</span></code> and <code class="docutils literal notranslate"><span class="pre">com.foo#BAZ</span></code> are not allowed in the
same semantic model. This restriction also extends to member names:
<code class="docutils literal notranslate"><span class="pre">com.foo#Baz$bar</span></code> and <code class="docutils literal notranslate"><span class="pre">com.foo#Baz$BAR</span></code> are in conflict.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#merging-models"><span class="std std-ref">Merging model files</span></a> for information on how conflicting shape
definitions for the same shape ID are handled when assembling the
semantic model from multiple model files.</p>
</div>
</div>
</div>
<div class="section" id="simple-shapes">
<span id="simple-types"></span><h2><a href="#simple-shapes"><span class="section-number">1.4. </span>Simple shapes</a></h2>
<p><em>Simple types</em> are types that do not contain nested types or shape references.</p>
<table border="1" class="colwidths-given docutils align-default">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>blob</td>
<td>Uninterpreted binary data</td>
</tr>
<tr class="row-odd"><td>boolean</td>
<td>Boolean value type</td>
</tr>
<tr class="row-even"><td>string</td>
<td>UTF-8 encoded string</td>
</tr>
<tr class="row-odd"><td>byte</td>
<td>8-bit signed integer ranging from -128 to 127 (inclusive)</td>
</tr>
<tr class="row-even"><td>short</td>
<td>16-bit signed integer ranging from -32,768 to 32,767 (inclusive)</td>
</tr>
<tr class="row-odd"><td>integer</td>
<td>32-bit signed integer ranging from -2^31 to (2^31)-1 (inclusive)</td>
</tr>
<tr class="row-even"><td>long</td>
<td>64-bit signed integer ranging from -2^63 to (2^63)-1 (inclusive)</td>
</tr>
<tr class="row-odd"><td>float</td>
<td>Single precision IEEE-754 floating point number</td>
</tr>
<tr class="row-even"><td>double</td>
<td>Double precision IEEE-754 floating point number</td>
</tr>
<tr class="row-odd"><td>bigInteger</td>
<td>Arbitrarily large signed integer</td>
</tr>
<tr class="row-even"><td>bigDecimal</td>
<td>Arbitrary precision signed decimal number</td>
</tr>
<tr class="row-odd"><td>timestamp</td>
<td>Represents an instant in time with no UTC offset or timezone. The
serialization of a timestamp is an implementation detail that is
determined by a <a class="reference internal" href="protocol-traits.html#protocoldefinition-trait"><span class="std std-ref">protocol</span></a> and
MUST NOT have any effect on the types exposed by tooling to
represent a timestamp value.</td>
</tr>
<tr class="row-even"><td>document</td>
<td>Represents protocol-agnostic open content that functions as a kind of
&quot;any&quot; type. Document types are represented by a JSON-like data model
and can contain UTF-8 strings, arbitrary precision numbers, booleans,
nulls, a list of these values, and a map of UTF-8 strings to these
values. Open content is useful for modeling unstructured data that has
no schema, data that can't be modeled using rigid types, or data that
has a schema that evolves outside of the purview of a model. The
serialization format of a document is an implementation detail of a
protocol and MUST NOT have any effect on the types exposed by tooling
to represent a document value.</td>
</tr>
</tbody>
</table>
<p>Simple shapes are defined in the IDL using a <a class="reference internal" href="idl.html#idl-simple"><span class="std std-ref">simple_shape_statement</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <a class="reference internal" href="prelude-model.html#prelude"><span class="std std-ref">prelude model</span></a> contains pre-defined shapes for every
simple type.</p>
</div>
<p class="rubric">Simple shape examples</p>
<p>The following example defines a shape for each simple type in the
<code class="docutils literal notranslate"><span class="pre">smithy.example</span></code> namespace.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-0-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-0-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-0-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-0-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-0-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="kd">blob</span><span class="nc"> Blob</span><span class="w"></span>
<span class="kd">boolean</span><span class="nc"> Boolean</span><span class="w"></span>
<span class="kd">string</span><span class="nc"> String</span><span class="w"></span>
<span class="kd">byte</span><span class="nc"> Byte</span><span class="w"></span>
<span class="kd">short</span><span class="nc"> Short</span><span class="w"></span>
<span class="kd">integer</span><span class="nc"> Integer</span><span class="w"></span>
<span class="kd">long</span><span class="nc"> Long</span><span class="w"></span>
<span class="kd">float</span><span class="nc"> Float</span><span class="w"></span>
<span class="kd">double</span><span class="nc"> Double</span><span class="w"></span>
<span class="kd">bigInteger</span><span class="nc"> BigInteger</span><span class="w"></span>
<span class="kd">bigDecimal</span><span class="nc"> BigDecimal</span><span class="w"></span>
<span class="kd">timestamp</span><span class="nc"> Timestamp</span><span class="w"></span>
<span class="kd">document</span><span class="nc"> Document</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-0-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#Blob&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;blob&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Boolean&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;boolean&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#String&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Byte&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;byte&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Short&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;short&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Integer&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Long&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;long&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Float&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;float&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Double&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;double&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#BigInteger&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bigInteger&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#BigDecimal&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bigDecimal&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Timestamp&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;timestamp&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Document&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;document&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When defining shapes in the IDL, a namespace MUST first be declared.</p>
</div>
</div>
<div class="section" id="aggregate-shapes">
<span id="aggregate-types"></span><h2><a href="#aggregate-shapes"><span class="section-number">1.5. </span>Aggregate shapes</a></h2>
<p>Aggregate types define shapes that are composed of other shapes. Aggregate shapes
reference other shapes using <a class="reference internal" href="#member"><span class="std std-ref">members</span></a>.</p>
<table border="1" class="colwidths-given docutils align-default">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#member"><span class="std std-ref">Member</span></a></td>
<td>Defined in aggregate shapes to reference other shapes</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list"><span class="std std-ref">List</span></a></td>
<td>Ordered collection of homogeneous values</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#set"><span class="std std-ref">Set</span></a></td>
<td>Ordered collection of unique homogeneous values</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#map"><span class="std std-ref">Map</span></a></td>
<td>Map data structure that maps string keys to homogeneous values</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#structure"><span class="std std-ref">Structure</span></a></td>
<td>Fixed set of named heterogeneous members</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#union"><span class="std std-ref">Union</span></a></td>
<td>Tagged union data structure that can take on one of several
different, but fixed, types</td>
</tr>
</tbody>
</table>
<div class="section" id="member">
<span id="id5"></span><h3><a href="#member"><span class="section-number">1.5.1. </span>Member</a></h3>
<p><em class="dfn">Members</em> are defined in aggregate shapes to reference other shapes using
a <a class="reference internal" href="#shape-id"><span class="std std-ref">shape ID</span></a>. The shape referenced by a member is called its
&quot;target&quot;. A member MUST NOT target a <a class="reference internal" href="#trait-shapes"><span class="std std-ref">trait</span></a>, <code class="docutils literal notranslate"><span class="pre">operation</span></code>,
<code class="docutils literal notranslate"><span class="pre">resource</span></code>, <code class="docutils literal notranslate"><span class="pre">service</span></code>, or <code class="docutils literal notranslate"><span class="pre">member</span></code>.</p>
</div>
<div class="section" id="list">
<span id="id6"></span><h3><a href="#list"><span class="section-number">1.5.2. </span>List</a></h3>
<p>The <em class="dfn">list</em> type represents an ordered homogeneous collection of values.
A list shape requires a single member named <code class="docutils literal notranslate"><span class="pre">member</span></code>. Lists are defined
in the IDL using a <a class="reference internal" href="idl.html#idl-list"><span class="std std-ref">list_statement</span></a>.
The following example defines a list with a string member from the
<a class="reference internal" href="prelude-model.html#prelude"><span class="std std-ref">prelude</span></a>:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-1-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-1-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-1-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-1-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-1-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="kd">list</span><span class="nc"> MyList</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">member:</span><span class="w"> </span><span class="vc">String</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-1-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyList&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span>
            <span class="nt">&quot;member&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p class="rubric">List member nullability</p>
<p>Lists are considered <em>dense</em> by default, meaning they MAY NOT contain <code class="docutils literal notranslate"><span class="pre">null</span></code>
values. A list MAY be made <em>sparse</em> by applying the <a class="reference internal" href="type-refinement-traits.html#sparse-trait"><span class="std std-ref">sparse trait</span></a>.
The <a class="reference internal" href="type-refinement-traits.html#box-trait"><span class="std std-ref">box trait</span></a> is not used to determine if a list is dense or sparse;
a list with no <code class="docutils literal notranslate"><span class="pre">&#64;sparse</span></code> trait is always considered dense. The following
example defines a sparse list:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-2-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-2-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-2-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-2-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-2-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@sparse</span><span class="w"></span>
<span class="kd">list</span><span class="nc"> SparseList</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">member:</span><span class="w"> </span><span class="vc">String</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-2-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-2-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#SparseList&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span>
            <span class="nt">&quot;member&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#sparse&quot;</span><span class="p">:</span> <span class="p">{}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p>If a client encounters a <code class="docutils literal notranslate"><span class="pre">null</span></code> value when deserializing a dense list
returned from a service, the client MUST discard the <code class="docutils literal notranslate"><span class="pre">null</span></code> value. If a
service receives a <code class="docutils literal notranslate"><span class="pre">null</span></code> value for a dense list from a client, it SHOULD
reject the request.</p>
<p class="rubric">List member shape ID</p>
<p>The shape ID of the member of a list is the list shape ID followed by
<code class="docutils literal notranslate"><span class="pre">$member</span></code>. For example, the shape ID of the list member in the above
example is <code class="docutils literal notranslate"><span class="pre">smithy.example#MyList$member</span></code>.</p>
</div>
<div class="section" id="set">
<span id="id7"></span><h3><a href="#set"><span class="section-number">1.5.3. </span>Set</a></h3>
<p>The <em class="dfn">set</em> type represents an ordered collection of unique values. A set
shape requires a single member named <code class="docutils literal notranslate"><span class="pre">member</span></code>, and the member MUST target
either a string, blob, byte, short, integer, long, bigInteger, or bigDecimal
shape. The targeted shape MUST NOT be marked with the <a class="reference internal" href="stream-traits.html#streaming-trait"><span class="std std-ref">streaming trait</span></a>.</p>
<p>Sets are defined in the IDL using a <a class="reference internal" href="idl.html#idl-set"><span class="std std-ref">set_statement</span></a>. The
following example defines a set of strings:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-3-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-3-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-3-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-3-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-3-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="kd">set</span><span class="nc"> StringSet</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">member:</span><span class="w"> </span><span class="vc">String</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-3-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-3-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#StringSet&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;set&quot;</span><span class="p">,</span>
            <span class="nt">&quot;member&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p class="rubric">Sets MUST NOT contain <code class="docutils literal notranslate"><span class="pre">null</span></code> values</p>
<p>The values contained in a set are not permitted to be <code class="docutils literal notranslate"><span class="pre">null</span></code>. <code class="docutils literal notranslate"><span class="pre">null</span></code> set
values do not provide much, if any, utility, and set implementations across
programming languages often do not support <code class="docutils literal notranslate"><span class="pre">null</span></code> values.</p>
<p>If a client encounters a <code class="docutils literal notranslate"><span class="pre">null</span></code> value when deserializing a set returned
from a service, the client MUST discard the <code class="docutils literal notranslate"><span class="pre">null</span></code> value. If a service
receives a <code class="docutils literal notranslate"><span class="pre">null</span></code> value for a set from a client, it SHOULD reject the
request.</p>
<p class="rubric">Set member shape ID</p>
<p>The shape ID of the member of a set is the set shape ID followed by
<code class="docutils literal notranslate"><span class="pre">$member</span></code>. For example, the shape ID of the set member in the above
example is <code class="docutils literal notranslate"><span class="pre">smithy.example#StringSet$member</span></code>.</p>
<p class="rubric">Language support for insertion ordered sets</p>
<p>Not all programming languages support an insertion ordered set data
structure. Such languages SHOULD store the values of a set data
structure in a list and rely on validation to ensure uniqueness.</p>
</div>
<div class="section" id="map">
<span id="id8"></span><h3><a href="#map"><span class="section-number">1.5.4. </span>Map</a></h3>
<p>The <em class="dfn">map</em> type represents a map data structure that maps <code class="docutils literal notranslate"><span class="pre">string</span></code>
keys to homogeneous values. A map requires a member named <code class="docutils literal notranslate"><span class="pre">key</span></code>
that MUST target a <code class="docutils literal notranslate"><span class="pre">string</span></code> shape and a member named <code class="docutils literal notranslate"><span class="pre">value</span></code>.
Maps are defined in the IDL using a <a class="reference internal" href="idl.html#idl-map"><span class="std std-ref">map_statement</span></a>.
The following example defines a map of strings to integers:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-4-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-4-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-4-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-4-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-4-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-4-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="kd">map</span><span class="nc"> IntegerMap</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">key:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">value:</span><span class="w"> </span><span class="vc">Integer</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-4-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-4-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#IntegerMap&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;map&quot;</span><span class="p">,</span>
            <span class="nt">&quot;key&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p class="rubric">Map keys MUST NOT be <code class="docutils literal notranslate"><span class="pre">null</span></code></p>
<p>Map keys are not permitted to be <code class="docutils literal notranslate"><span class="pre">null</span></code>. Not all protocol serialization
formats have a way to define <code class="docutils literal notranslate"><span class="pre">null</span></code> map keys, and map implementations
across programming languages often do not allow <code class="docutils literal notranslate"><span class="pre">null</span></code> keys in maps.</p>
<p class="rubric">Map value member nullability</p>
<p>Maps values are considered <em>dense</em> by default, meaning they MAY NOT contain
<code class="docutils literal notranslate"><span class="pre">null</span></code> values. A map MAY be made <em>sparse</em> by applying the
<a class="reference internal" href="type-refinement-traits.html#sparse-trait"><span class="std std-ref">sparse trait</span></a>. The <a class="reference internal" href="type-refinement-traits.html#box-trait"><span class="std std-ref">box trait</span></a> is not used to determine if a map
is dense or sparse; a map with no <code class="docutils literal notranslate"><span class="pre">&#64;sparse</span></code> trait is always considered
dense. The following example defines a sparse map:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-5-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-5-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-5-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-5-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-5-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-5-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@sparse</span><span class="w"></span>
<span class="kd">map</span><span class="nc"> SparseMap</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">key:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">value:</span><span class="w"> </span><span class="vc">String</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-5-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-5-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#SparseMap&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;map&quot;</span><span class="p">,</span>
            <span class="nt">&quot;key&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#sparse&quot;</span><span class="p">:</span> <span class="p">{}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p>If a client encounters a <code class="docutils literal notranslate"><span class="pre">null</span></code> map value when deserializing a dense map
returned from a service, the client MUST discard the <code class="docutils literal notranslate"><span class="pre">null</span></code> entry. If a
service receives a <code class="docutils literal notranslate"><span class="pre">null</span></code> map value for a dense map from a client, it
SHOULD reject the request.</p>
<p class="rubric">Map member shape IDs</p>
<p>The shape ID of the <code class="docutils literal notranslate"><span class="pre">key</span></code> member of a map is the map shape ID followed by
<code class="docutils literal notranslate"><span class="pre">$key</span></code>, and the shape ID of the <code class="docutils literal notranslate"><span class="pre">value</span></code> member is the map shape ID
followed by <code class="docutils literal notranslate"><span class="pre">$value</span></code>. For example, the shape ID of the <code class="docutils literal notranslate"><span class="pre">key</span></code> member in
the above map is <code class="docutils literal notranslate"><span class="pre">smithy.example#IntegerMap$key</span></code>, and the <code class="docutils literal notranslate"><span class="pre">value</span></code>
member is <code class="docutils literal notranslate"><span class="pre">smithy.example#IntegerMap$value</span></code>.</p>
</div>
<div class="section" id="structure">
<span id="id9"></span><h3><a href="#structure"><span class="section-number">1.5.5. </span>Structure</a></h3>
<p>The <em class="dfn">structure</em> type represents a fixed set of named, unordered,
heterogeneous values. A structure shape contains a set of named members, and
each member name maps to exactly one <a class="reference internal" href="#member"><span class="std std-ref">member</span></a> definition.
Structures are defined in the IDL using a
<a class="reference internal" href="idl.html#idl-structure"><span class="std std-ref">structure_statement</span></a>.</p>
<p>The following example defines a structure with two members, one of which
is marked with the <a class="reference internal" href="constraint-traits.html#required-trait"><span class="std std-ref">required trait</span></a>.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-6-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-6-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-6-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-6-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-6-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-6-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="kd">structure</span><span class="nc"> MyStructure</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">foo:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span><span class="w"></span>

<span class="w">    </span><span class="nd">@required</span><span class="w"></span>
<span class="w">    </span><span class="nl">baz:</span><span class="w"> </span><span class="vc">Integer</span><span class="p">,</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-6-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-6-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyStructure&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;foo&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;baz&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#Integer&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;smithy.api#required&quot;</span><span class="p">:</span> <span class="p">{}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="idl.html#idl-applying-traits"><span class="std std-ref">Applying traits</span></a> for a description of how to apply traits.</p>
</div>
<p class="rubric">Adding new members</p>
<p>New members added to existing structures SHOULD be added to the end of the
structure. This ensures that programming languages that require a specific
data structure layout or alignment for code generated from Smithy models are
able to maintain backward compatibility.</p>
<p class="rubric">Structure member shape IDs</p>
<p>The shape ID of a member of a structure is the structure shape ID, followed
by <code class="docutils literal notranslate"><span class="pre">$</span></code>, followed by the member name. For example, the shape ID of the <code class="docutils literal notranslate"><span class="pre">foo</span></code>
member in the above example is <code class="docutils literal notranslate"><span class="pre">smithy.example#MyStructure$foo</span></code>.</p>
<div class="section" id="default-structure-member-values">
<span id="default-values"></span><h4><a href="#default-structure-member-values"><span class="section-number">1.5.5.1. </span>Default structure member values</a></h4>
<p>The values provided for structure members are either always present and set to
a default value when necessary or <em>boxed</em>, meaning a value is optionally present
with no default value. Members are considered boxed if the member is marked with
the <a class="reference internal" href="type-refinement-traits.html#box-trait"><span class="std std-ref">box trait</span></a> or the shape targeted by the member is marked with the box
trait. Members that target strings, timestamps, and aggregate shapes are always
considered boxed and have no default values.</p>
<ul class="simple">
<li>The default value of a <code class="docutils literal notranslate"><span class="pre">byte</span></code>, <code class="docutils literal notranslate"><span class="pre">short</span></code>, <code class="docutils literal notranslate"><span class="pre">integer</span></code>, <code class="docutils literal notranslate"><span class="pre">long</span></code>,
<code class="docutils literal notranslate"><span class="pre">float</span></code>, and <code class="docutils literal notranslate"><span class="pre">double</span></code> shape that is not boxed is zero.</li>
<li>The default value of a <code class="docutils literal notranslate"><span class="pre">boolean</span></code> shape that is not boxed is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</li>
<li>All other shapes are always considered boxed and have no default value.</li>
</ul>
</div>
</div>
<div class="section" id="union">
<span id="id10"></span><h3><a href="#union"><span class="section-number">1.5.6. </span>Union</a></h3>
<p>The union type represents a <a class="reference external" href="https://en.wikipedia.org/wiki/Tagged_union">tagged union data structure</a> that can take
on several different, but fixed, types. Unions function similarly to
structures except that only one member can be used at any one time. Each
member in the union is a variant of the tagged union, where member names
are the tags of each variant, and the shapes targeted by members are the
values of each variant.</p>
<p>Unions are defined in the IDL using a <a class="reference internal" href="idl.html#idl-union"><span class="std std-ref">union_statement</span></a>.
A union shape MUST contain one or more named <a class="reference internal" href="#member"><span class="std std-ref">members</span></a>.
The following example defines a union shape with several members:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-7-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-7-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-7-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-7-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-7-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-7-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="kd">union</span><span class="nc"> MyUnion</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">i32:</span><span class="w"> </span><span class="vc">Integer</span><span class="p">,</span><span class="w"></span>

<span class="w">    </span><span class="nd">@length</span>(<span class="nl">min:</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="nl">max:</span><span class="w"> </span><span class="m">100</span>)<span class="w"></span>
<span class="w">    </span><span class="nl">string:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span><span class="w"></span>

<span class="w">    </span><span class="nl">time:</span><span class="w"> </span><span class="vc">Timestamp</span><span class="p">,</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-7-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-7-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyUnion&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;union&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;i32&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#Integer&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;string&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;smithy.api#length&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;min&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="nt">&quot;max&quot;</span><span class="p">:</span> <span class="mi">100</span>
                    <span class="p">}</span>
                <span class="p">},</span>
                <span class="nt">&quot;time&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#Timestamp&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p class="rubric">Unit types in unions</p>
<p>Some union members might not need any meaningful information beyond the
tag itself. For these cases, union members MAY target Smithy's built-in
<a class="reference internal" href="#unit-type"><span class="std std-ref">unit type</span></a>, <code class="docutils literal notranslate"><span class="pre">smithy.api#Unit</span></code>.</p>
<p>The following example defines a union for actions a player can take in a
game.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">union</span><span class="nc"> PlayerAction</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="cm">/// Quit the game.</span><span class="w"></span>
<span class="w">    </span><span class="nl">quit:</span><span class="w"> </span><span class="vc">Unit</span><span class="p">,</span><span class="w"></span>

<span class="w">    </span><span class="cm">/// Move in a specific direction.</span><span class="w"></span>
<span class="w">    </span><span class="nl">move:</span><span class="w"> </span><span class="vc">DirectedAction</span><span class="p">,</span><span class="w"></span>

<span class="w">    </span><span class="cm">/// Jump in a specific direction.</span><span class="w"></span>
<span class="w">    </span><span class="nl">jump:</span><span class="w"> </span><span class="vc">DirectedAction</span><span class="w"></span>
}<span class="w"></span>

<span class="kd">structure</span><span class="nc"> DirectedAction</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nd">@required</span><span class="w"></span>
<span class="w">    </span><span class="nl">direction:</span><span class="w"> </span><span class="vc">Integer</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">quit</span></code> action has no meaningful data associated with it, while <code class="docutils literal notranslate"><span class="pre">move</span></code>
and <code class="docutils literal notranslate"><span class="pre">jump</span></code> both reference <code class="docutils literal notranslate"><span class="pre">DirectedAction</span></code>.</p>
<p class="rubric">Union member presence</p>
<p>Exactly one member of a union MUST be set. The serialization of a union is
defined by a <a class="reference internal" href="protocol-traits.html#protocoldefinition-trait"><span class="std std-ref">protocol</span></a>, but for example
purposes, if unions were to be represented in a hypothetical JSON
serialization, the following value would be valid for the <code class="docutils literal notranslate"><span class="pre">PlayerAction</span></code>
union because a single member is present:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;move&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;direction&quot;</span><span class="p">:</span> <span class="mi">1</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The following value is <strong>invalid</strong> because multiple members are present:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;quit&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="nt">&quot;move&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;direction&quot;</span><span class="p">:</span> <span class="mi">1</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The following value is <strong>invalid</strong> because no members are present:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{}</span>
</pre></div>
</div>
<p class="rubric">Adding new members</p>
<p>New members added to existing unions SHOULD be added to the end of the
union. This ensures that programming languages that require a specific
data structure layout or alignment for code generated from Smithy models are
able to maintain backward compatibility.</p>
<p class="rubric">Union member shape IDs</p>
<p>The shape ID of a member of a union is the union shape ID, followed
by <code class="docutils literal notranslate"><span class="pre">$</span></code>, followed by the member name. For example, the shape ID of the <code class="docutils literal notranslate"><span class="pre">i32</span></code>
member in the above example is <code class="docutils literal notranslate"><span class="pre">smithy.example#MyUnion$i32</span></code>.</p>
</div>
<div class="section" id="unit-type">
<span id="id11"></span><h3><a href="#unit-type"><span class="section-number">1.5.7. </span>Unit type</a></h3>
<p>Smithy provides a singular <a class="reference external" href="https://en.wikipedia.org/wiki/Unit_type">unit type</a> named <code class="docutils literal notranslate"><span class="pre">smithy.api#Unit</span></code>. The unit
type in Smithy is similar to <code class="docutils literal notranslate"><span class="pre">Void</span></code> and <code class="docutils literal notranslate"><span class="pre">None</span></code> in other languages. It is
used when the input or output of an <a class="reference internal" href="#operation"><span class="std std-ref">operation</span></a> has no
meaningful value or if a <a class="reference internal" href="#union"><span class="std std-ref">union</span></a> member has no meaningful value.
<code class="docutils literal notranslate"><span class="pre">smithy.api#Unit</span></code> MUST NOT be referenced in any other context.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">smithy.api#Unit</span></code> shape is defined in Smithy's <a class="reference internal" href="prelude-model.html#prelude"><span class="std std-ref">prelude</span></a>
as a structure shape marked with the <code class="docutils literal notranslate"><span class="pre">smithy.api#unitType</span></code> trait to
differentiate it from other structures. It is the only such structure in the
model that can be marked with the <code class="docutils literal notranslate"><span class="pre">smithy.api#unitType</span></code> trait.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="prelude-model.html#prelude"><span class="std std-ref">Prelude model</span></a>, <a class="reference internal" href="#union"><span class="std std-ref">Union</span></a>, <a class="reference internal" href="#operation"><span class="std std-ref">Operation</span></a></p>
</div>
</div>
<div class="section" id="recursive-shape-definitions">
<h3><a href="#recursive-shape-definitions"><span class="section-number">1.5.8. </span>Recursive shape definitions</a></h3>
<p>Smithy allows recursive shape definitions with the following limitations:</p>
<ol class="arabic simple">
<li>The member of a list, set, or map cannot directly or transitively target
its containing shape unless one or more members in the path from the
container back to itself targets a structure or union shape. This ensures
that shapes that are typically impossible to define in various programming
languages are not defined in Smithy models (for example, you can't define
a recursive list in Java <code class="docutils literal notranslate"><span class="pre">List&lt;List&lt;List....</span></code>).</li>
<li>A structure cannot contain a cyclical set of members marked with the
<a class="reference internal" href="constraint-traits.html#required-trait"><span class="std std-ref">required trait</span></a> that refers back to itself.</li>
</ol>
<p>The following recursive shape definition is <strong>valid</strong>:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-8-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-8-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-8-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-8-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-8-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-8-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="kd">list</span><span class="nc"> ValidList</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">member:</span><span class="w"> </span><span class="vc">IntermediateStructure</span><span class="w"></span>
}<span class="w"></span>

<span class="kd">structure</span><span class="nc"> IntermediateStructure</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">foo:</span><span class="w"> </span><span class="vc">ValidList</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-8-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-8-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#ValidList&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span>
            <span class="nt">&quot;member&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#IntermediateStructure&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#IntermediateStructure&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;foo&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#ValidList&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p>The following recursive shape definition is <strong>invalid</strong>:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-9-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-9-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-9-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-9-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-9-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-9-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="kd">list</span><span class="nc"> RecursiveList</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">member:</span><span class="w"> </span><span class="vc">RecursiveList</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-9-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-9-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#RecursiveList&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span>
            <span class="nt">&quot;member&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#RecursiveList&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p>The following recursive shape definition is <strong>invalid</strong> due to mutual
recursion and the <a class="reference internal" href="constraint-traits.html#required-trait"><span class="std std-ref">required trait</span></a>.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="kd">structure</span><span class="nc"> RecursiveShape1</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nd">@required</span><span class="w"></span>
<span class="w">    </span><span class="nl">recursiveMember:</span><span class="w"> </span><span class="vc">RecursiveShape2</span><span class="w"></span>
}<span class="w"></span>

<span class="kd">structure</span><span class="nc"> RecursiveShape2</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nd">@required</span><span class="w"></span>
<span class="w">    </span><span class="nl">recursiveMember:</span><span class="w"> </span><span class="vc">RecursiveShape1</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="service-shapes">
<span id="service-types"></span><h2><a href="#service-shapes"><span class="section-number">1.6. </span>Service shapes</a></h2>
<p><em>Service types</em> have specific semantics and define services, resources,
and operations.</p>
<table border="1" class="colwidths-given docutils align-default">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#service"><span class="std std-ref">service</span></a></td>
<td>Entry point of an API that aggregates resources and operations together</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#operation"><span class="std std-ref">operation</span></a></td>
<td>Represents the input, output, and errors of an API operation</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#resource"><span class="std std-ref">resource</span></a></td>
<td>Entity with an identity that has a set of operations</td>
</tr>
</tbody>
</table>
<div class="section" id="service">
<span id="id12"></span><h3><a href="#service"><span class="section-number">1.6.1. </span>Service</a></h3>
<p>A <em class="dfn">service</em> is the entry point of an API that aggregates resources and
operations together. The <a class="reference internal" href="#resource"><span class="std std-ref">resources</span></a> and
<a class="reference internal" href="#operation"><span class="std std-ref">operations</span></a> of an API are bound within the closure of a
service. A service is defined in the IDL using a
<a class="reference internal" href="idl.html#idl-service"><span class="std std-ref">service_statement</span></a>.</p>
<p>The service shape supports the following properties:</p>
<table border="1" class="colwidths-given docutils align-default">
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>version</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>Defines the optional version of the service. The version can be provided in
any format (e.g., <code class="docutils literal notranslate"><span class="pre">2017-02-11</span></code>, <code class="docutils literal notranslate"><span class="pre">2.0</span></code>, etc).</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#service-operations"><span class="std std-ref">operations</span></a></td>
<td>[<code class="docutils literal notranslate"><span class="pre">string</span></code>]</td>
<td>Binds a set of <code class="docutils literal notranslate"><span class="pre">operation</span></code> shapes to the service. Each
element in the given list MUST be a valid <a class="reference internal" href="#shape-id"><span class="std std-ref">shape ID</span></a>
that targets an <a class="reference internal" href="#operation"><span class="std std-ref">operation</span></a> shape.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#service-resources"><span class="std std-ref">resources</span></a></td>
<td>[<code class="docutils literal notranslate"><span class="pre">string</span></code>]</td>
<td>Binds a set of <code class="docutils literal notranslate"><span class="pre">resource</span></code> shapes to the service. Each element in
the given list MUST be a valid <a class="reference internal" href="#shape-id"><span class="std std-ref">shape ID</span></a> that targets
a <a class="reference internal" href="#resource"><span class="std std-ref">resource</span></a> shape.</td>
</tr>
<tr class="row-odd"><td>errors</td>
<td>[<code class="docutils literal notranslate"><span class="pre">string</span></code>]</td>
<td>Defines a list of common errors that every operation bound within the
closure of the service can return. Each provided shape ID MUST target
a <a class="reference internal" href="#structure"><span class="std std-ref">structure</span></a> shape that is marked with the
<a class="reference internal" href="type-refinement-traits.html#error-trait"><span class="std std-ref">error trait</span></a>.</td>
</tr>
<tr class="row-even"><td>rename</td>
<td>map of <a class="reference internal" href="#shape-id"><span class="std std-ref">shape ID</span></a> to <code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><p class="first">Disambiguates shape name conflicts in the
<a class="reference internal" href="#service-closure"><span class="std std-ref">service closure</span></a>. Map keys are shape IDs
contained in the service, and map values are the disambiguated shape
names to use in the context of the service. Each given shape ID MUST
reference a shape contained in the closure of the service. Each given
map value MUST match the <a class="reference internal" href="#grammar-token-smithy-identifier"><code class="xref std std-token docutils literal notranslate"><span class="pre">smithy:identifier</span></code></a> production used for
shape IDs. Renaming a shape <em>does not</em> give the shape a new shape ID.</p>
<ul class="last simple">
<li>No renamed shape name can case-insensitively match any other renamed
shape name or the name of a non-renamed shape contained in the
service.</li>
<li>Member shapes MAY NOT be renamed.</li>
<li>Resource, operation, and shapes marked with the <a class="reference internal" href="type-refinement-traits.html#error-trait"><span class="std std-ref">error trait</span></a>
MAY NOT be renamed. Renaming shapes is intended for incidental naming
conflicts, not for renaming the fundamental concepts of a service.</li>
<li>Shapes from other namespaces marked as <a class="reference internal" href="constraint-traits.html#private-trait"><span class="std std-ref">private</span></a>
MAY be renamed.</li>
<li>A rename MUST use a name that is case-sensitively different from the
original shape ID name.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>The following example defines a service with no operations or resources.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-10-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-10-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-10-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-10-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-10-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-10-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="kd">service</span><span class="nc"> MyService</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">version:</span><span class="w"> </span><span class="s2">&quot;2017-02-11&quot;</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-10-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-10-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyService&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;service&quot;</span><span class="p">,</span>
            <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-11&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p>The following example defines a service shape that defines a set of errors
that are common to every operation in the service:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-11-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-11-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-11-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-11-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-11-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-11-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="kd">service</span><span class="nc"> MyService</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">version:</span><span class="w"> </span><span class="s2">&quot;2017-02-11&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">errors:</span><span class="w"> </span>[<span class="vc">SomeError</span>]<span class="w"></span>
}<span class="w"></span>

<span class="nd">@error</span>(<span class="s2">&quot;client&quot;</span>)<span class="w"></span>
<span class="kd">structure</span><span class="nc"> SomeError</span><span class="w"> </span>{}<span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-11-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-11-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyService&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;service&quot;</span><span class="p">,</span>
            <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-11&quot;</span><span class="p">,</span>
            <span class="nt">&quot;errors&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#SomeError&quot;</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#SomeError&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#error&quot;</span><span class="p">:</span> <span class="s2">&quot;client&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<div class="section" id="service-operations">
<span id="id13"></span><h4><a href="#service-operations"><span class="section-number">1.6.1.1. </span>Service operations</a></h4>
<p><a class="reference internal" href="#operation"><span class="std std-ref">Operation</span></a> shapes can be bound to a service by adding the
shape ID of an operation to the <code class="docutils literal notranslate"><span class="pre">operations</span></code> property of a service.
Operations bound directly to a service are typically RPC-style operations
that do not fit within a resource hierarchy.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-12-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-12-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-12-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-12-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-12-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-12-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="kd">service</span><span class="nc"> MyService</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">version:</span><span class="w"> </span><span class="s2">&quot;2017-02-11&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">operations:</span><span class="w"> </span>[<span class="vc">GetServerTime</span>]<span class="p">,</span><span class="w"></span>
}<span class="w"></span>

<span class="nd">@readonly</span><span class="w"></span>
<span class="kd">operation</span><span class="nc"> GetServerTime</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">output:</span><span class="w"> </span><span class="vc">GetServerTimeOutput</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-12-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-12-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyService&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;service&quot;</span><span class="p">,</span>
            <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-11&quot;</span><span class="p">,</span>
            <span class="nt">&quot;operations&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetServerTime&quot;</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#GetServerTime&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span><span class="p">,</span>
            <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetServerTimeOutput&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
</div>
<div class="section" id="service-resources">
<span id="id14"></span><h4><a href="#service-resources"><span class="section-number">1.6.1.2. </span>Service resources</a></h4>
<p><a class="reference internal" href="#resource"><span class="std std-ref">Resource</span></a> shapes can be bound to a service by adding the
shape ID of a resource to the <code class="docutils literal notranslate"><span class="pre">resources</span></code> property of a service.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-13-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-13-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-13-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-13-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-13-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-13-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="kd">service</span><span class="nc"> MyService</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">version:</span><span class="w"> </span><span class="s2">&quot;2017-02-11&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">resources:</span><span class="w"> </span>[<span class="vc">MyResource</span>]<span class="p">,</span><span class="w"></span>
}<span class="w"></span>

<span class="kd">resource</span><span class="nc"> MyResource</span><span class="w"> </span>{}<span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-13-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-13-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyService&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;service&quot;</span><span class="p">,</span>
            <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-11&quot;</span><span class="p">,</span>
            <span class="nt">&quot;resources&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#MyResource&quot;</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#MyResource&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;resource&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
</div>
<div class="section" id="service-closure">
<span id="id15"></span><h4><a href="#service-closure"><span class="section-number">1.6.1.3. </span>Service closure</a></h4>
<p>The <em>closure</em> of a service is the set of shapes connected to a service
through resources, operations, and members.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">With some exceptions, the shapes that are referenced in the <em>closure</em>
of a service MUST have case-insensitively unique names regardless of
their namespace, and conflicts MUST be disambiguated using the
<code class="docutils literal notranslate"><span class="pre">rename</span></code> property of a service.</p>
</div>
<p>By requiring unique names within a service, each service forms a
<a class="reference external" href="https://martinfowler.com/bliki/UbiquitousLanguage.html">ubiquitous language</a>, making it easier for developers to understand the
model and artifacts generated from the model, like code. For example, when
using Java code generated from a Smithy model, a developer should not need
to discern between <code class="docutils literal notranslate"><span class="pre">BadRequestException</span></code> classes across multiple packages
that can be thrown by an operation. Uniqueness is required
case-insensitively because many model transformations (like code generation)
change the casing and inflection of shape names to make artifacts more
idiomatic.</p>
<p class="rubric">Shape types allowed to conflict in a closure</p>
<p><a class="reference internal" href="#simple-types"><span class="std std-ref">Simple types</span></a> and <a class="reference internal" href="#list"><span class="std std-ref">lists</span></a> or
<a class="reference internal" href="#set"><span class="std std-ref">sets</span></a> of compatible simple types are allowed to conflict because
a conflict for these type would rarely have an impact on generated artifacts.
These kinds of conflicts are only allowed if both conflicting shapes are the
same type and have the exact same traits. In the case of a list or set, a
conflict is only allowed if the members of the conflicting shapes target
compatible shapes.</p>
<p class="rubric">Disambiguating shapes with <code class="docutils literal notranslate"><span class="pre">rename</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">rename</span></code> property of a service is used to disambiguate conflicting
shape names found in the closure of a service. The <code class="docutils literal notranslate"><span class="pre">rename</span></code> property is
essentially a <a class="reference external" href="https://martinfowler.com/bliki/BoundedContext.html">context map</a> used to ensure that the service still presents
a ubiquitous language despite bringing together shapes from multiple
namespaces.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Renames SHOULD be used sparingly. Renaming shapes is something typically
only needed when aggregating models from multiple independent teams into
a single service.</p>
</div>
<p>The following example defines a service that contains two shapes named
&quot;Widget&quot; in its closure. The <code class="docutils literal notranslate"><span class="pre">rename</span></code> property is used to disambiguate
the conflicting shapes.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="kd">service</span><span class="nc"> MyService</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">version:</span><span class="w"> </span><span class="s2">&quot;2017-02-11&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">operations:</span><span class="w"> </span>[<span class="vc">GetSomething</span>]<span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">rename:</span><span class="w"> </span>{<span class="w"></span>
<span class="w">        </span><span class="s2">&quot;foo.example#Widget&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FooWidget&quot;</span><span class="w"></span>
<span class="w">    </span>}<span class="w"></span>
}<span class="w"></span>

<span class="kd">operation</span><span class="nc"> GetSomething</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">input:</span><span class="w"> </span><span class="vc">GetSomethingInput</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">output:</span><span class="w"> </span><span class="vc">GetSomethingOutput</span><span class="w"></span>
}<span class="w"></span>

<span class="nd">@input</span><span class="w"></span>
<span class="kd">structure</span><span class="nc"> GetSomethingInput</span><span class="w"> </span>{}<span class="w"></span>

<span class="nd">@output</span><span class="w"></span>
<span class="kd">structure</span><span class="nc"> GetSomethingOutput</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">widget1:</span><span class="w"> </span><span class="vc">Widget</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">fooWidget:</span><span class="w"> </span><span class="vc">foo.example#Widget</span><span class="p">,</span><span class="w"></span>
}<span class="w"></span>

<span class="kd">structure</span><span class="nc"> Widget</span><span class="w"> </span>{}<span class="w"></span>
</pre></div>
</div>
<p class="rubric">Resources and operations can be bound once</p>
<p>An operation or resource MUST NOT be bound to multiple shapes within the
closure of a service. This constraint allows services to discern between
operations and resources using only their shape name rather than a
fully-qualified path from the service to the shape.</p>
<p class="rubric">Undeclared operation inputs and outputs are not a
part of the service closure</p>
<p><a class="reference internal" href="#unit-type"><span class="std std-ref">smithy.api#Unit</span></a> is the shape that is implicitly targeted by
operation inputs and outputs when they are not explicitly declared. This does
not, however, add <code class="docutils literal notranslate"><span class="pre">smithy.api#Unit</span></code> to the service's closure, and does not
require renaming to avoid conflicts with other shapes named <code class="docutils literal notranslate"><span class="pre">Unit</span></code>. Unions in
the service closure with members targeting <code class="docutils literal notranslate"><span class="pre">smithy.api#Unit</span></code>, however, will
cause <code class="docutils literal notranslate"><span class="pre">smithy.api#Unit</span></code> to be a part of the service closure.</p>
</div>
</div>
<div class="section" id="operation">
<span id="id16"></span><h3><a href="#operation"><span class="section-number">1.6.2. </span>Operation</a></h3>
<p>The <em class="dfn">operation</em> type represents the input, output, and possible errors of
an API operation. Operation shapes are bound to <a class="reference internal" href="#resource"><span class="std std-ref">resource</span></a>
shapes and <a class="reference internal" href="#service"><span class="std std-ref">service</span></a> shapes. An operation is defined in the IDL
using an <a class="reference internal" href="idl.html#idl-operation"><span class="std std-ref">operation_statement</span></a>.</p>
<p>An operation supports the following members:</p>
<table border="1" class="colwidths-given docutils align-default">
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>input</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><p class="first">The input of the operation defined using a <a class="reference internal" href="#shape-id"><span class="std std-ref">shape ID</span></a>
that MUST target a structure.</p>
<ul class="last simple">
<li>Every operation SHOULD define a dedicated input shape marked with
the <a class="reference internal" href="type-refinement-traits.html#input-trait"><span class="std std-ref">input trait</span></a>. Creating a dedicated input shape ensures
that input members can be added in the future if needed.</li>
<li>Input defaults to <a class="reference internal" href="#unit-type"><span class="std std-ref">smithy.api#Unit</span></a> if no input is
defined, indicating that the operation has no meaningful input.</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>output</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><p class="first">The output of the operation defined using a <a class="reference internal" href="#shape-id"><span class="std std-ref">shape ID</span></a>
that MUST target a structure.</p>
<ul class="last simple">
<li>Every operation SHOULD define a dedicated output shape marked with
the <a class="reference internal" href="type-refinement-traits.html#output-trait"><span class="std std-ref">output trait</span></a>. Creating a dedicated output shape ensures
that output members can be added in the future if needed.</li>
<li>Output defaults to <a class="reference internal" href="#unit-type"><span class="std std-ref">smithy.api#Unit</span></a> if no output
is defined, indicating that the operation has no meaningful output.</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>errors</td>
<td>[<code class="docutils literal notranslate"><span class="pre">string</span></code>]</td>
<td>The errors that an operation can return. Each string in the list is
a shape ID that MUST target a <a class="reference internal" href="#structure"><span class="std std-ref">structure</span></a> shape
marked with the <a class="reference internal" href="type-refinement-traits.html#error-trait"><span class="std std-ref">error trait</span></a>.</td>
</tr>
</tbody>
</table>
<p>The following example defines an operation that accepts an input structure
named <code class="docutils literal notranslate"><span class="pre">MyOperationInput</span></code>, returns an output structure named
<code class="docutils literal notranslate"><span class="pre">MyOperationOutput</span></code>, and can potentially return the <code class="docutils literal notranslate"><span class="pre">NotFound</span></code> or
<code class="docutils literal notranslate"><span class="pre">BadRequest</span></code> <a class="reference internal" href="type-refinement-traits.html#error-trait"><span class="std std-ref">error structures</span></a>.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="kd">operation</span><span class="nc"> MyOperation</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">input:</span><span class="w"> </span><span class="vc">MyOperationInput</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">output:</span><span class="w"> </span><span class="vc">MyOperationOutput</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">errors:</span><span class="w"> </span>[<span class="vc">NotFoundError</span><span class="p">,</span><span class="w"> </span><span class="vc">BadRequestError</span>]<span class="w"></span>
}<span class="w"></span>

<span class="nd">@input</span><span class="w"></span>
<span class="kd">structure</span><span class="nc"> MyOperationInput</span><span class="w"> </span>{}<span class="w"></span>

<span class="nd">@output</span><span class="w"></span>
<span class="kd">structure</span><span class="nc"> MyOperationOutput</span><span class="w"> </span>{}<span class="w"></span>
</pre></div>
</div>
<p>While, input and output SHOULD be explicitly defined for every operation,
omitting them is allowed. The default value for input and output is
<code class="docutils literal notranslate"><span class="pre">smithy.api#Unit</span></code>, indicating that there is no meaningful value.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="kd">operation</span><span class="nc"> MySideEffectOperation</span><span class="w"> </span>{}<span class="w"></span>
</pre></div>
</div>
<p>The following example is equivalent, but more explicit in intent:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="kd">operation</span><span class="nc"> MySideEffectOperation</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">input:</span><span class="w"> </span><span class="vc">Unit</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">output:</span><span class="w"> </span><span class="vc">Unit</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Using the <code class="docutils literal notranslate"><span class="pre">Unit</span></code> shape for input or output removes flexibility in how an
operation can evolve over time because members cannot be added to the
input or output if ever needed.</p>
</div>
</div>
<div class="section" id="resource">
<span id="id17"></span><h3><a href="#resource"><span class="section-number">1.6.3. </span>Resource</a></h3>
<p>Smithy defines a <em class="dfn">resource</em> as an entity with an identity that has a
set of operations. A resource shape is defined in the IDL using a
<a class="reference internal" href="idl.html#idl-resource"><span class="std std-ref">resource_statement</span></a>.</p>
<p>A resource supports the following members:</p>
<table border="1" class="colwidths-given docutils align-default">
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#resource-identifiers"><span class="std std-ref">identifiers</span></a></td>
<td><code class="docutils literal notranslate"><span class="pre">object</span></code></td>
<td>Defines a map of identifier string names to <a class="reference internal" href="#shape-id"><span class="std std-ref">Shape ID</span></a>s used to
identify the resource. Each shape ID MUST target a <code class="docutils literal notranslate"><span class="pre">string</span></code> shape.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#create-lifecycle"><span class="std std-ref">create</span></a></td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>Defines the lifecycle operation used to create a resource using one
or more identifiers created by the service. The value MUST be a
valid <a class="reference internal" href="#shape-id"><span class="std std-ref">Shape ID</span></a> that targets an <code class="docutils literal notranslate"><span class="pre">operation</span></code> shape.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#put-lifecycle"><span class="std std-ref">put</span></a></td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>Defines an idempotent lifecycle operation used to create a resource
using identifiers provided by the client. The value MUST be a
valid <a class="reference internal" href="#shape-id"><span class="std std-ref">Shape ID</span></a> that targets an <code class="docutils literal notranslate"><span class="pre">operation</span></code> shape.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#read-lifecycle"><span class="std std-ref">read</span></a></td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>Defines the lifecycle operation used to retrieve the resource. The
value MUST be a valid <a class="reference internal" href="#shape-id"><span class="std std-ref">Shape ID</span></a> that targets an
<code class="docutils literal notranslate"><span class="pre">operation</span></code> shape.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#update-lifecycle"><span class="std std-ref">update</span></a></td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>Defines the lifecycle operation used to update the resource. The
value MUST be a valid <a class="reference internal" href="#shape-id"><span class="std std-ref">Shape ID</span></a> that targets an
<code class="docutils literal notranslate"><span class="pre">operation</span></code> shape.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#delete-lifecycle"><span class="std std-ref">delete</span></a></td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>Defines the lifecycle operation used to delete the resource. The
value MUST be a valid <a class="reference internal" href="#shape-id"><span class="std std-ref">Shape ID</span></a> that targets an <code class="docutils literal notranslate"><span class="pre">operation</span></code>
shape.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list-lifecycle"><span class="std std-ref">list</span></a></td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>Defines the lifecycle operation used to list resources of this type.
The value MUST be a valid <a class="reference internal" href="#shape-id"><span class="std std-ref">Shape ID</span></a> that targets an
<code class="docutils literal notranslate"><span class="pre">operation</span></code> shape.</td>
</tr>
<tr class="row-odd"><td>operations</td>
<td>[<code class="docutils literal notranslate"><span class="pre">string</span></code>]</td>
<td>Binds a list of non-lifecycle instance operations to the resource.
Each value in the list MUST be a valid <a class="reference internal" href="#shape-id"><span class="std std-ref">Shape ID</span></a> that targets
an <code class="docutils literal notranslate"><span class="pre">operation</span></code> shape.</td>
</tr>
<tr class="row-even"><td>collectionOperations</td>
<td>[<code class="docutils literal notranslate"><span class="pre">string</span></code>]</td>
<td>Binds a list of non-lifecycle collection operations to the resource.
Each value in the list MUST be a valid <a class="reference internal" href="#shape-id"><span class="std std-ref">Shape ID</span></a> that targets
an <code class="docutils literal notranslate"><span class="pre">operation</span></code> shape.</td>
</tr>
<tr class="row-odd"><td>resources</td>
<td>[<code class="docutils literal notranslate"><span class="pre">string</span></code>]</td>
<td>Binds a list of resources to this resource as a child resource,
forming a containment relationship. Each value in the list MUST be a
valid <a class="reference internal" href="#shape-id"><span class="std std-ref">Shape ID</span></a> that targets a <code class="docutils literal notranslate"><span class="pre">resource</span></code>. The resources
MUST NOT have a cyclical containment hierarchy, and a resource
can not be bound more than once in the entire closure of a
resource or service.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="resource-identifiers">
<span id="id18"></span><h3><a href="#resource-identifiers"><span class="section-number">1.6.4. </span>Resource Identifiers</a></h3>
<p><em class="dfn">Identifiers</em> are used to refer to a specific resource within a service.
The identifiers property of a resource is a map of identifier names to
<a class="reference internal" href="#shape-id"><span class="std std-ref">shape IDs</span></a> that MUST target string shapes.</p>
<p>For example, the following model defines a <code class="docutils literal notranslate"><span class="pre">Forecast</span></code> resource with a
single identifier named <code class="docutils literal notranslate"><span class="pre">forecastId</span></code> that targets the <code class="docutils literal notranslate"><span class="pre">ForecastId</span></code> shape:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-14-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-14-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-14-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-14-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-14-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-14-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="kd">resource</span><span class="nc"> Forecast</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">identifiers:</span><span class="w"> </span>{<span class="w"></span>
<span class="w">        </span><span class="nl">forecastId:</span><span class="w"> </span><span class="vc">ForecastId</span><span class="w"></span>
<span class="w">    </span>}<span class="w"></span>
}<span class="w"></span>

<span class="kd">string</span><span class="nc"> ForecastId</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-14-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-14-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#Forecast&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;resource&quot;</span><span class="p">,</span>
            <span class="nt">&quot;identifiers&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;forecastId&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#ForecastId&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#ForecastId&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p>When a resource is bound as a child to another resource using the &quot;resources&quot;
property, all of the identifiers of the parent resource MUST be repeated
verbatim in the child resource, and the child resource MAY introduce any
number of additional identifiers.</p>
<p><em class="dfn">Parent identifiers</em> are the identifiers of the parent of a resource.
All parent identifiers MUST be bound as identifiers in the input of every
operation bound as a child to a resource. <em class="dfn">Child identifiers</em> are the
identifiers that a child resource contains that are not present in the parent
identifiers.</p>
<p>For example, given the following model,</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-15-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-15-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-15-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-15-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-15-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-15-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">resource</span><span class="nc"> ResourceA</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">identifiers:</span><span class="w"> </span>{<span class="w"></span>
<span class="w">        </span><span class="nl">a:</span><span class="w"> </span><span class="vc">String</span><span class="w"></span>
<span class="w">    </span>}<span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">resources:</span><span class="w"> </span>[<span class="vc">ResourceB</span>]<span class="p">,</span><span class="w"></span>
}<span class="w"></span>

<span class="kd">resource</span><span class="nc"> ResourceB</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">identifiers:</span><span class="w"> </span>{<span class="w"></span>
<span class="w">        </span><span class="nl">a:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nl">b:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span>}<span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">resources:</span><span class="w"> </span>[<span class="vc">ResourceC</span>]<span class="p">,</span><span class="w"></span>
}<span class="w"></span>

<span class="kd">resource</span><span class="nc"> ResourceC</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">identifiers:</span><span class="w"> </span>{<span class="w"></span>
<span class="w">        </span><span class="nl">a:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nl">b:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nl">c:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span>}<span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-15-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-15-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#ResourceA&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;resource&quot;</span><span class="p">,</span>
            <span class="nt">&quot;resources&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#ResourceB&quot;</span>
                <span class="p">}</span>
            <span class="p">],</span>
            <span class="nt">&quot;identifiers&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;a&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#ResourceB&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;resource&quot;</span><span class="p">,</span>
            <span class="nt">&quot;resources&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#ResourceC&quot;</span>
                <span class="p">}</span>
            <span class="p">],</span>
            <span class="nt">&quot;identifiers&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;a&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;b&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#ResourceC&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;resource&quot;</span><span class="p">,</span>
            <span class="nt">&quot;identifiers&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;a&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;b&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;c&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p><code class="docutils literal notranslate"><span class="pre">ResourceB</span></code> is a valid child of <code class="docutils literal notranslate"><span class="pre">ResourceA</span></code> and contains a child
identifier of &quot;b&quot;. <code class="docutils literal notranslate"><span class="pre">ResourceC</span></code> is a valid child of <code class="docutils literal notranslate"><span class="pre">ResourceB</span></code> and
contains a child identifier of &quot;c&quot;.</p>
<p>However, the following defines two <em>invalid</em> child resources that do not
define an <code class="docutils literal notranslate"><span class="pre">identifiers</span></code> property that is compatible with their parents:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-16-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-16-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-16-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-16-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-16-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-16-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">resource</span><span class="nc"> ResourceA</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">identifiers:</span><span class="w"> </span>{<span class="w"></span>
<span class="w">        </span><span class="nl">a:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nl">b:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span>}<span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">resources:</span><span class="w"> </span>[<span class="vc">Invalid1</span><span class="p">,</span><span class="w"> </span><span class="vc">Invalid2</span>]<span class="p">,</span><span class="w"></span>
}<span class="w"></span>

<span class="kd">resource</span><span class="nc"> Invalid1</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="c">// Invalid: missing &quot;a&quot;.</span><span class="w"></span>
<span class="w">    </span><span class="nl">identifiers:</span><span class="w"> </span>{<span class="w"></span>
<span class="w">        </span><span class="nl">b:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span>}<span class="p">,</span><span class="w"></span>
}<span class="w"></span>

<span class="kd">resource</span><span class="nc"> Invalid2</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">identifiers:</span><span class="w"> </span>{<span class="w"></span>
<span class="w">        </span><span class="nl">a:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="c">// Invalid: does not target the same shape.</span><span class="w"></span>
<span class="w">        </span><span class="nl">b:</span><span class="w"> </span><span class="vc">SomeOtherString</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span>}<span class="p">,</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-16-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-16-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#ResourceA&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;resource&quot;</span><span class="p">,</span>
            <span class="nt">&quot;identifiers&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;a&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;b&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;resources&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#Invalid1&quot;</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#Invalid2&quot;</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Invalid1&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;resource&quot;</span><span class="p">,</span>
            <span class="nt">&quot;identifiers&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;b&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Invalid2&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;resource&quot;</span><span class="p">,</span>
            <span class="nt">&quot;identifiers&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;a&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;b&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#SomeOtherString&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<div class="section" id="binding-identifiers-to-operations">
<span id="binding-identifiers"></span><h4><a href="#binding-identifiers-to-operations"><span class="section-number">1.6.4.1. </span>Binding identifiers to operations</a></h4>
<p><em>Identifier bindings</em> indicate which top-level members of the input structure
of an operation provide values for the identifiers of a resource.</p>
<p class="rubric">Identifier binding validation</p>
<ul class="simple">
<li>Child resources MUST provide identifier bindings for all of its parent's
identifiers.</li>
<li>Identifier bindings are only formed on input structure members that are
marked as <a class="reference internal" href="constraint-traits.html#required-trait"><span class="std std-ref">required</span></a>.</li>
<li>Resource operations MUST form a valid <em>instance operation</em> or
<em>collection operation</em>.</li>
</ul>
<p id="instance-operations"><em class="dfn">Instance operations</em> are formed when all of the identifiers of a resource
are bound to the input structure of an operation or when a resource has no
identifiers. The <a class="reference internal" href="#put-lifecycle"><span class="std std-ref">put</span></a>, <a class="reference internal" href="#read-lifecycle"><span class="std std-ref">read</span></a>,
<a class="reference internal" href="#update-lifecycle"><span class="std std-ref">update</span></a>, and <a class="reference internal" href="#delete-lifecycle"><span class="std std-ref">delete</span></a>
lifecycle operations are examples of instance operations. An operation bound
to a resource using <cite>operations</cite> MUST form a valid instance operation.</p>
<p id="collection-operations"><em class="dfn">Collection operations</em> are used when an operation is meant to operate on
a collection of resources rather than a specific resource. Collection
operations are formed when an operation is bound to a resource with <cite>collectionOperations</cite>,
or when bound to the <a class="reference internal" href="#list-lifecycle"><span class="std std-ref">list</span></a> or <a class="reference internal" href="#create-lifecycle"><span class="std std-ref">create</span></a>
lifecycle operations. A collection operation MUST omit one or more identifiers
of the resource it is bound to, but MUST bind all identifiers of any parent
resource.</p>
</div>
<div class="section" id="implicit-identifier-bindings">
<span id="id19"></span><h4><a href="#implicit-identifier-bindings"><span class="section-number">1.6.4.2. </span>Implicit identifier bindings</a></h4>
<p><em>Implicit identifier bindings</em> are formed when the input of an operation
contains member names that target the same shapes that are defined in the
&quot;identifiers&quot; property of the resource to which an operation is bound.</p>
<p>For example, given the following model,</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">resource</span><span class="nc"> Forecast</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">identifiers:</span><span class="w"> </span>{<span class="w"></span>
<span class="w">        </span><span class="nl">forecastId:</span><span class="w"> </span><span class="vc">ForecastId</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span>}<span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">read:</span><span class="w"> </span><span class="vc">GetForecast</span><span class="p">,</span><span class="w"></span>
}<span class="w"></span>

<span class="nd">@readonly</span><span class="w"></span>
<span class="kd">operation</span><span class="nc"> GetForecast</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">input:</span><span class="w"> </span><span class="vc">GetForecastInput</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">output:</span><span class="w"> </span><span class="vc">GetForecastOutput</span><span class="w"></span>
}<span class="w"></span>

<span class="nd">@input</span><span class="w"></span>
<span class="kd">structure</span><span class="nc"> GetForecastInput</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nd">@required</span><span class="w"></span>
<span class="w">    </span><span class="nl">forecastId:</span><span class="w"> </span><span class="vc">ForecastId</span><span class="p">,</span><span class="w"></span>
}<span class="w"></span>

<span class="nd">@output</span><span class="w"></span>
<span class="kd">structure</span><span class="nc"> GetForecastOutput</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nd">@required</span><span class="w"></span>
<span class="w">    </span><span class="nl">weather:</span><span class="w"> </span><span class="vc">WeatherData</span><span class="p">,</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">GetForecast</span></code> forms a valid instance operation because the operation is
not marked with the <code class="docutils literal notranslate"><span class="pre">collection</span></code> trait and <code class="docutils literal notranslate"><span class="pre">GetForecastInput</span></code> provides
<em>implicit identifier bindings</em> by defining a required &quot;forecastId&quot; member
that targets the same shape as the &quot;forecastId&quot; identifier of the resource.</p>
<p>Implicit identifier bindings for collection operations are created in a
similar way to an instance operation, but MUST NOT contain identifier bindings
for <em>all</em> child identifiers of the resource.</p>
<p>Given the following model,</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">resource</span><span class="nc"> Forecast</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">identifiers:</span><span class="w"> </span>{<span class="w"></span>
<span class="w">        </span><span class="nl">forecastId:</span><span class="w"> </span><span class="vc">ForecastId</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span>}<span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">collectionOperations:</span><span class="w"> </span>[<span class="vc">BatchPutForecasts</span>]<span class="p">,</span><span class="w"></span>
}<span class="w"></span>

<span class="kd">operation</span><span class="nc"> BatchPutForecasts</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">input:</span><span class="w"> </span><span class="vc">BatchPutForecastsInput</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">output:</span><span class="w"> </span><span class="vc">BatchPutForecastsOutput</span><span class="w"></span>
}<span class="w"></span>

<span class="nd">@input</span><span class="w"></span>
<span class="kd">structure</span><span class="nc"> BatchPutForecastsInput</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nd">@required</span><span class="w"></span>
<span class="w">    </span><span class="nl">forecasts:</span><span class="w"> </span><span class="vc">BatchPutForecastList</span><span class="p">,</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">BatchPutForecasts</span></code> forms a valid collection operation with implicit
identifier bindings because <code class="docutils literal notranslate"><span class="pre">BatchPutForecastsInput</span></code> does not require an
input member named &quot;forecastId&quot; that targets <code class="docutils literal notranslate"><span class="pre">ForecastId</span></code>.</p>
</div>
<div class="section" id="explicit-identifier-bindings">
<h4><a href="#explicit-identifier-bindings"><span class="section-number">1.6.4.3. </span>Explicit identifier bindings</a></h4>
<p><em>Explicit identifier bindings</em> are defined by applying the
<a class="reference internal" href="resource-traits.html#resourceidentifier-trait"><span class="std std-ref">resourceIdentifier trait</span></a> to a member of the input of for an
operation bound to a resource. Explicit bindings are necessary when the name of
the input structure member differs from the name of the resource identifier to
which the input member corresponds.</p>
<p>For example, given the following,</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">resource</span><span class="nc"> Forecast</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="c">// continued from above</span><span class="w"></span>
<span class="w">    </span><span class="nl">resources:</span><span class="w"> </span>[<span class="vc">HistoricalForecast</span>]<span class="p">,</span><span class="w"></span>
}<span class="w"></span>

<span class="kd">resource</span><span class="nc"> HistoricalForecast</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">identifiers:</span><span class="w"> </span>{<span class="w"></span>
<span class="w">        </span><span class="nl">forecastId:</span><span class="w"> </span><span class="vc">ForecastId</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nl">historicalId:</span><span class="w"> </span><span class="vc">HistoricalForecastId</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span>}<span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">read:</span><span class="w"> </span><span class="vc">GetHistoricalForecast</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">list:</span><span class="w"> </span><span class="vc">ListHistoricalForecasts</span><span class="p">,</span><span class="w"></span>
}<span class="w"></span>

<span class="nd">@readonly</span><span class="w"></span>
<span class="kd">operation</span><span class="nc"> GetHistoricalForecast</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">input:</span><span class="w"> </span><span class="vc">GetHistoricalForecastInput</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">output:</span><span class="w"> </span><span class="vc">GetHistoricalForecastOutput</span><span class="w"></span>
}<span class="w"></span>

<span class="nd">@input</span><span class="w"></span>
<span class="kd">structure</span><span class="nc"> GetHistoricalForecastInput</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nd">@required</span><span class="w"></span>
<span class="w">    </span><span class="nd">@resourceIdentifier</span>(<span class="s2">&quot;forecastId&quot;</span>)<span class="w"></span>
<span class="w">    </span><span class="nl">customForecastIdName:</span><span class="w"> </span><span class="vc">ForecastId</span><span class="p">,</span><span class="w"></span>

<span class="w">    </span><span class="nd">@required</span><span class="w"></span>
<span class="w">    </span><span class="nd">@resourceIdentifier</span>(<span class="s2">&quot;historicalId&quot;</span>)<span class="w"></span>
<span class="w">    </span><span class="nl">customHistoricalIdName:</span><span class="w"> </span><span class="vc">String</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
<p>the <a class="reference internal" href="resource-traits.html#resourceidentifier-trait"><span class="std std-ref">resourceIdentifier trait</span></a> on <code class="docutils literal notranslate"><span class="pre">GetHistoricalForecastInput$customForecastIdName</span></code>
maps it to the &quot;forecastId&quot; identifier is provided by the
&quot;customForecastIdName&quot; member, and the <a class="reference internal" href="resource-traits.html#resourceidentifier-trait"><span class="std std-ref">resourceIdentifier trait</span></a>
on <code class="docutils literal notranslate"><span class="pre">GetHistoricalForecastInput$customHistoricalIdName</span></code> maps that member
to the &quot;historicalId&quot; identifier.</p>
</div>
</div>
<div class="section" id="resource-lifecycle-operations">
<span id="lifecycle-operations"></span><h3><a href="#resource-lifecycle-operations"><span class="section-number">1.6.5. </span>Resource lifecycle operations</a></h3>
<p><em class="dfn">Lifecycle operations</em> are used to transition the state of a resource
using well-defined semantics. Lifecycle operations are defined by providing a
shape ID to the <code class="docutils literal notranslate"><span class="pre">put</span></code>, <code class="docutils literal notranslate"><span class="pre">create</span></code>, <code class="docutils literal notranslate"><span class="pre">read</span></code>, <code class="docutils literal notranslate"><span class="pre">update</span></code>, <code class="docutils literal notranslate"><span class="pre">delete</span></code>, and
<code class="docutils literal notranslate"><span class="pre">list</span></code> properties of a resource. Each shape ID MUST target an
<a class="reference internal" href="#operation"><span class="std std-ref">operation</span></a> that is compatible with the semantics of the
lifecycle.</p>
<p>The following example defines a resource with each lifecycle method:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="kd">resource</span><span class="nc"> Forecast</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">identifiers:</span><span class="w"> </span>{<span class="w"></span>
<span class="w">        </span><span class="nl">forecastId:</span><span class="w"> </span><span class="vc">ForecastId</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span>}<span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">put:</span><span class="w"> </span><span class="vc">PutForecast</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">create:</span><span class="w"> </span><span class="vc">CreateForecast</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">read:</span><span class="w"> </span><span class="vc">GetForecast</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">update:</span><span class="w"> </span><span class="vc">UpdateForecast</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">delete:</span><span class="w"> </span><span class="vc">DeleteForecast</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">list:</span><span class="w"> </span><span class="vc">ListForecasts</span><span class="p">,</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
<div class="section" id="put-lifecycle">
<span id="id20"></span><h4><a href="#put-lifecycle"><span class="section-number">1.6.5.1. </span>Put lifecycle</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">put</span></code> lifecycle operation is used to create a resource using identifiers
provided by the client.</p>
<ul class="simple">
<li>Put operations MUST NOT be marked with the <a class="reference internal" href="behavior-traits.html#readonly-trait"><span class="std std-ref">readonly trait</span></a>.</li>
<li>Put operations MUST be marked with the <a class="reference internal" href="behavior-traits.html#idempotent-trait"><span class="std std-ref">idempotent trait</span></a>.</li>
<li>Put operations MUST form valid <a class="reference internal" href="#instance-operations"><span class="std std-ref">instance operations</span></a>.</li>
</ul>
<p>The following example defines the <code class="docutils literal notranslate"><span class="pre">PutForecast</span></code> operation.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@idempotent</span><span class="w"></span>
<span class="kd">operation</span><span class="nc"> PutForecast</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">input:</span><span class="w"> </span><span class="vc">PutForecastInput</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">output:</span><span class="w"> </span><span class="vc">PutForecastOutput</span><span class="w"></span>
}<span class="w"></span>

<span class="nd">@input</span><span class="w"></span>
<span class="kd">structure</span><span class="nc"> PutForecastInput</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="c">// The client provides the resource identifier.</span><span class="w"></span>
<span class="w">    </span><span class="nd">@required</span><span class="w"></span>
<span class="w">    </span><span class="nl">forecastId:</span><span class="w"> </span><span class="vc">ForecastId</span><span class="p">,</span><span class="w"></span>

<span class="w">    </span><span class="nl">chanceOfRain:</span><span class="w"> </span><span class="vc">Float</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
<p class="rubric">Put semantics</p>
<p>The semantics of a <code class="docutils literal notranslate"><span class="pre">put</span></code> lifecycle operation are similar to the semantics
of a HTTP PUT method as described in <span class="target" id="index-0"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc7231.html#section-4.3.4"><strong>section 4.3.4 of [RFC7231]</strong></a>:</p>
<blockquote>
<div>The PUT method requests that the state of the target resource be
created or replaced ...</div></blockquote>
<p>The <a class="reference internal" href="resource-traits.html#noreplace-trait"><span class="std std-ref">noReplace trait</span></a> can be applied to resources that define a
<code class="docutils literal notranslate"><span class="pre">put</span></code> lifecycle operation to indicate that a resource cannot be
replaced using the <code class="docutils literal notranslate"><span class="pre">put</span></code> operation.</p>
</div>
<div class="section" id="create-lifecycle">
<span id="id21"></span><h4><a href="#create-lifecycle"><span class="section-number">1.6.5.2. </span>Create lifecycle</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">create</span></code> operation is used to create a resource using one or more
identifiers created by the service.</p>
<ul class="simple">
<li>Create operations MUST NOT be marked with the <a class="reference internal" href="behavior-traits.html#readonly-trait"><span class="std std-ref">readonly trait</span></a>.</li>
<li>Create operations MUST form valid <a class="reference internal" href="#collection-operations"><span class="std std-ref">collection operations</span></a>.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">create</span></code> operation MAY be marked with the <a class="reference internal" href="behavior-traits.html#idempotent-trait"><span class="std std-ref">idempotent trait</span></a>.</li>
</ul>
<p>The following example defines the <code class="docutils literal notranslate"><span class="pre">CreateForecast</span></code> operation.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">operation</span><span class="nc"> CreateForecast</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">input:</span><span class="w"> </span><span class="vc">CreateForecastInput</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">output:</span><span class="w"> </span><span class="vc">CreateForecastOutput</span><span class="w"></span>
}<span class="w"></span>

<span class="kd">operation</span><span class="nc"> CreateForecast</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">input:</span><span class="w"> </span><span class="vc">CreateForecastInput</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">output:</span><span class="w"> </span><span class="vc">CreateForecastOutput</span><span class="w"></span>
}<span class="w"></span>

<span class="nd">@input</span><span class="w"></span>
<span class="kd">structure</span><span class="nc"> CreateForecastInput</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="c">// No identifier is provided by the client, so the service is</span><span class="w"></span>
<span class="w">    </span><span class="c">// responsible for providing the identifier of the resource.</span><span class="w"></span>
<span class="w">    </span><span class="nl">chanceOfRain:</span><span class="w"> </span><span class="vc">Float</span><span class="p">,</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="read-lifecycle">
<span id="id22"></span><h4><a href="#read-lifecycle"><span class="section-number">1.6.5.3. </span>Read lifecycle</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">read</span></code> operation is the canonical operation used to retrieve the current
representation of a resource.</p>
<ul class="simple">
<li>Read operations MUST be valid <a class="reference internal" href="#instance-operations"><span class="std std-ref">instance operations</span></a>.</li>
<li>Read operations MUST be marked with the <a class="reference internal" href="behavior-traits.html#readonly-trait"><span class="std std-ref">readonly trait</span></a>.</li>
</ul>
<p>For example:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@readonly</span><span class="w"></span>
<span class="kd">operation</span><span class="nc"> GetForecast</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">input:</span><span class="w"> </span><span class="vc">GetForecastInput</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">output:</span><span class="w"> </span><span class="vc">GetForecastOutput</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">errors:</span><span class="w"> </span>[<span class="vc">ResourceNotFound</span>]<span class="w"></span>
}<span class="w"></span>

<span class="nd">@input</span><span class="w"></span>
<span class="kd">structure</span><span class="nc"> GetForecastInput</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nd">@required</span><span class="w"></span>
<span class="w">    </span><span class="nl">forecastId:</span><span class="w"> </span><span class="vc">ForecastId</span><span class="p">,</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="update-lifecycle">
<span id="id23"></span><h4><a href="#update-lifecycle"><span class="section-number">1.6.5.4. </span>Update lifecycle</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">update</span></code> operation is the canonical operation used to update a
resource.</p>
<ul class="simple">
<li>Update operations MUST be valid <a class="reference internal" href="#instance-operations"><span class="std std-ref">instance operations</span></a>.</li>
<li>Update operations MUST NOT be marked with the <a class="reference internal" href="behavior-traits.html#readonly-trait"><span class="std std-ref">readonly trait</span></a>.</li>
</ul>
<p>For example:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">operation</span><span class="nc"> UpdateForecast</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">input:</span><span class="w"> </span><span class="vc">UpdateForecastInput</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">output:</span><span class="w"> </span><span class="vc">UpdateForecastOutput</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">errors:</span><span class="w"> </span>[<span class="vc">ResourceNotFound</span>]<span class="w"></span>
}<span class="w"></span>

<span class="nd">@input</span><span class="w"></span>
<span class="kd">structure</span><span class="nc"> UpdateForecastInput</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nd">@required</span><span class="w"></span>
<span class="w">    </span><span class="nl">forecastId:</span><span class="w"> </span><span class="vc">ForecastId</span><span class="p">,</span><span class="w"></span>

<span class="w">    </span><span class="nl">chanceOfRain:</span><span class="w"> </span><span class="vc">Float</span><span class="p">,</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="delete-lifecycle">
<span id="id24"></span><h4><a href="#delete-lifecycle"><span class="section-number">1.6.5.5. </span>Delete lifecycle</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">delete</span></code> operation is canonical operation used to delete a resource.</p>
<ul class="simple">
<li>Delete operations MUST be valid <a class="reference internal" href="#instance-operations"><span class="std std-ref">instance operations</span></a>.</li>
<li>Delete operations MUST NOT be marked with the <a class="reference internal" href="behavior-traits.html#readonly-trait"><span class="std std-ref">readonly trait</span></a>.</li>
<li>Delete operations MUST be marked with the <a class="reference internal" href="behavior-traits.html#idempotent-trait"><span class="std std-ref">idempotent trait</span></a>.</li>
</ul>
<p>For example:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@idempotent</span><span class="w"></span>
<span class="kd">operation</span><span class="nc"> DeleteForecast</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">input:</span><span class="w"> </span><span class="vc">DeleteForecastInput</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">output:</span><span class="w"> </span><span class="vc">DeleteForecastOutput</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">errors:</span><span class="w"> </span>[<span class="vc">ResourceNotFound</span>]<span class="w"></span>
}<span class="w"></span>

<span class="nd">@input</span><span class="w"></span>
<span class="kd">structure</span><span class="nc"> DeleteForecastInput</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nd">@required</span><span class="w"></span>
<span class="w">    </span><span class="nl">forecastId:</span><span class="w"> </span><span class="vc">ForecastId</span><span class="p">,</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="list-lifecycle">
<span id="id25"></span><h4><a href="#list-lifecycle"><span class="section-number">1.6.5.6. </span>List lifecycle</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">list</span></code> operation is the canonical operation used to list a
collection of resources.</p>
<ul class="simple">
<li>List operations MUST form valid <a class="reference internal" href="#collection-operations"><span class="std std-ref">collection operations</span></a>.</li>
<li>List operations MUST be marked with the <a class="reference internal" href="behavior-traits.html#readonly-trait"><span class="std std-ref">readonly trait</span></a>.</li>
<li>The output of a list operation SHOULD contain references to the resource
being listed.</li>
<li>List operations SHOULD be <a class="reference internal" href="behavior-traits.html#paginated-trait"><span class="std std-ref">paginated</span></a>.</li>
</ul>
<p>For example:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@readonly</span><span class="w"> </span><span class="nd">@paginated</span><span class="w"></span>
<span class="kd">operation</span><span class="nc"> ListForecasts</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">input:</span><span class="w"> </span><span class="vc">ListForecastsInput</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">output:</span><span class="w"> </span><span class="vc">ListForecastsOutput</span><span class="w"></span>
}<span class="w"></span>

<span class="nd">@input</span><span class="w"></span>
<span class="kd">structure</span><span class="nc"> ListForecastsInput</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">maxResults:</span><span class="w"> </span><span class="vc">Integer</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">nextToken:</span><span class="w"> </span><span class="vc">String</span><span class="w"></span>
}<span class="w"></span>

<span class="nd">@output</span><span class="w"></span>
<span class="kd">structure</span><span class="nc"> ListForecastsOutput</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">nextToken:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nd">@required</span><span class="w"></span>
<span class="w">    </span><span class="nl">forecasts:</span><span class="w"> </span><span class="vc">ForecastList</span><span class="w"></span>
}<span class="w"></span>

<span class="kd">list</span><span class="nc"> ForecastList</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">member:</span><span class="w"> </span><span class="vc">ForecastId</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="traits">
<span id="id26"></span><h2><a href="#traits"><span class="section-number">1.7. </span>Traits</a></h2>
<p><em>Traits</em> are model components that can be attached to <a class="reference internal" href="#shapes"><span class="std std-ref">shapes</span></a>
to describe additional information about the shape; shapes provide the
structure and layout of an API, while traits provide refinement and style.</p>
<div class="section" id="applying-traits-to-shapes">
<span id="applying-traits"></span><h3><a href="#applying-traits-to-shapes"><span class="section-number">1.7.1. </span>Applying traits to shapes</a></h3>
<p>An instance of a trait applied to a shape is called an <em>applied trait</em>. Only
a single instance of a trait can be applied to a shape. The way in which a
trait is applied to a shape depends on the model file representation.</p>
<p>Traits are applied to shapes in the IDL using <a class="reference internal" href="idl.html#grammar-token-smithy-trait_statements"><code class="xref std std-token docutils literal notranslate"><span class="pre">smithy:trait_statements</span></code></a> that
immediately precede a shape. The following example applies the
<a class="reference internal" href="constraint-traits.html#length-trait"><span class="std std-ref">length trait</span></a> and <a class="reference internal" href="documentation-traits.html#documentation-trait"><span class="std std-ref">documentation trait</span></a> to <code class="docutils literal notranslate"><span class="pre">MyString</span></code>:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-17-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-17-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-17-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-17-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-17-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-17-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="nd">@length</span>(<span class="nl">min:</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="nl">max:</span><span class="w"> </span><span class="m">100</span>)<span class="w"></span>
<span class="nd">@documentation</span>(<span class="s2">&quot;Contains a string&quot;</span>)<span class="w"></span>
<span class="kd">string</span><span class="nc"> MyString</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-17-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-17-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyString&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;Contains a string&quot;</span><span class="p">,</span>
                <span class="nt">&quot;smithy.api#length&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;min&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="nt">&quot;max&quot;</span><span class="p">:</span> <span class="mi">100</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<ul class="simple">
<li>Refer to the <a class="reference internal" href="idl.html#idl-applying-traits"><span class="std std-ref">IDL specification</span></a> for a
description of how traits are applied in the IDL.</li>
<li>Refer to the <a class="reference internal" href="json-ast.html#json-ast"><span class="std std-ref">JSON AST specification</span></a> for a
description of how traits are applied in the JSON AST.</li>
</ul>
<p class="rubric">Scope of member traits</p>
<p>Traits that target <a class="reference internal" href="#member"><span class="std std-ref">members</span></a> apply only in the context of
the member shape and do not affect the shape targeted by the member. Traits
applied to a member supersede traits applied to the shape targeted by the
member and do not inherently conflict.</p>
<div class="section" id="applying-traits-externally">
<span id="apply-statements"></span><h4><a href="#applying-traits-externally"><span class="section-number">1.7.1.1. </span>Applying traits externally</a></h4>
<p>Both the IDL and JSON AST model representations allow traits to be applied
to shapes outside of a shape's definition. This is done using an
<a class="reference internal" href="idl.html#grammar-token-smithy-apply_statement"><code class="xref std std-token docutils literal notranslate"><span class="pre">apply</span></code></a> statement in the IDL, or the
<a class="reference internal" href="json-ast.html#ast-apply"><span class="std std-ref">apply</span></a> type in the JSON AST. For example, this can be
useful to allow different teams within the same organization to independently
own different facets of a model; a service team could own the model that
defines the shapes and traits of the API, and a documentation team could
own a model that applies documentation traits to the shapes.</p>
<p>The following example applies the <a class="reference internal" href="documentation-traits.html#documentation-trait"><span class="std std-ref">documentation trait</span></a> and
<a class="reference internal" href="constraint-traits.html#length-trait"><span class="std std-ref">length trait</span></a> to the <code class="docutils literal notranslate"><span class="pre">smithy.example#MyString</span></code> shape:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-18-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-18-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-18-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-18-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-18-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-18-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="kd">apply</span><span class="nc"> MyString</span><span class="w"> </span><span class="nd">@documentation</span>(<span class="s2">&quot;This is my string!&quot;</span>)<span class="w"></span>
<span class="kd">apply</span><span class="nc"> MyString</span><span class="w"> </span><span class="nd">@length</span>(<span class="nl">min:</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="nl">max:</span><span class="w"> </span><span class="m">10</span>)<span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-18-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-18-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyString&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;apply&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;This is my string!&quot;</span><span class="p">,</span>
                <span class="nt">&quot;smithy.api#length&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;min&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="nt">&quot;max&quot;</span><span class="p">:</span> <span class="mi">10</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In the semantic model, applying traits outside of a shape definition is
treated exactly the same as applying the trait inside of a shape
definition.</p>
</div>
</div>
</div>
<div class="section" id="trait-conflict-resolution">
<span id="id27"></span><h3><a href="#trait-conflict-resolution"><span class="section-number">1.7.2. </span>Trait conflict resolution</a></h3>
<p>Trait conflict resolution is used when the same trait is applied multiple
times to a shape. Duplicate traits applied to shapes are allowed in the
following cases:</p>
<ol class="arabic simple">
<li>If the trait is a <code class="docutils literal notranslate"><span class="pre">list</span></code> or <code class="docutils literal notranslate"><span class="pre">set</span></code> shape, then the conflicting trait
values are concatenated into a single trait value.</li>
<li>If both values are exactly equal, then the conflict is ignored.</li>
</ol>
<p>All other instances of trait collisions are prohibited.</p>
<p>The following model definition is <strong>valid</strong> because the <code class="docutils literal notranslate"><span class="pre">length</span></code> trait is
duplicated on the <code class="docutils literal notranslate"><span class="pre">MyList</span></code> shape with the same values:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="nd">@length</span>(<span class="nl">min:</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="nl">max:</span><span class="w"> </span><span class="m">10</span>)<span class="w"></span>
<span class="kd">list</span><span class="nc"> MyList</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">member:</span><span class="w"> </span><span class="vc">String</span><span class="w"></span>
}<span class="w"></span>

<span class="kd">apply</span><span class="nc"> MyList</span><span class="w"> </span><span class="nd">@length</span>(<span class="nl">min:</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="nl">max:</span><span class="w"> </span><span class="m">10</span>)<span class="w"></span>
</pre></div>
</div>
<p>The following model definition is <strong>valid</strong> because the <code class="docutils literal notranslate"><span class="pre">tags</span></code> trait
is a list. The resulting value assigned to the <code class="docutils literal notranslate"><span class="pre">tags</span></code> trait on the
<code class="docutils literal notranslate"><span class="pre">Hello</span></code> shape is a list that contains &quot;a&quot;, &quot;b&quot;, and &quot;c&quot;.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="nd">@tags</span>([<span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;b&quot;</span>])<span class="w"></span>
<span class="kd">string</span><span class="nc"> Hello</span><span class="w"></span>

<span class="kd">apply</span><span class="nc"> Hello</span><span class="w"> </span><span class="nd">@tags</span>([<span class="s2">&quot;c&quot;</span>])<span class="w"></span>
</pre></div>
</div>
<p>The following model definition is <strong>invalid</strong> because the <code class="docutils literal notranslate"><span class="pre">length</span></code> trait is
duplicated on the <code class="docutils literal notranslate"><span class="pre">MyList</span></code> shape with different values:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="nd">@length</span>(<span class="nl">min:</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="nl">max:</span><span class="w"> </span><span class="m">10</span>)<span class="w"></span>
<span class="kd">list</span><span class="nc"> MyList</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">member:</span><span class="w"> </span><span class="vc">String</span><span class="w"></span>
}<span class="w"></span>

<span class="kd">apply</span><span class="nc"> MyList</span><span class="w"> </span><span class="nd">@length</span>(<span class="nl">min:</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="nl">max:</span><span class="w"> </span><span class="m">20</span>)<span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="trait-node-values">
<span id="id28"></span><h3><a href="#trait-node-values"><span class="section-number">1.7.3. </span>Trait node values</a></h3>
<p>The value provided for a trait MUST be compatible with the <code class="docutils literal notranslate"><span class="pre">shape</span></code> of the
trait. The following table defines each shape type that is available to
target from traits and how their values are defined in
<a class="reference internal" href="idl.html#grammar-token-smithy-node_value"><code class="xref std std-token docutils literal notranslate"><span class="pre">node</span></code></a> values.</p>
<table border="1" class="colwidths-given docutils align-default">
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Smithy type</th>
<th class="head">Node type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>blob</td>
<td>string</td>
<td>A <code class="docutils literal notranslate"><span class="pre">string</span></code> value that is base64 encoded.</td>
</tr>
<tr class="row-odd"><td>boolean</td>
<td>boolean</td>
<td>Can be set to <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>.</td>
</tr>
<tr class="row-even"><td>byte</td>
<td>number</td>
<td>The value MUST fall within the range of -128 to 127</td>
</tr>
<tr class="row-odd"><td>short</td>
<td>number</td>
<td>The value MUST fall within the range of -32,768 to 32,767</td>
</tr>
<tr class="row-even"><td>integer</td>
<td>number</td>
<td>The value MUST fall within the range of -2^31 to (2^31)-1.</td>
</tr>
<tr class="row-odd"><td>long</td>
<td>number</td>
<td>The value MUST fall within the range of -2^63 to (2^63)-1.</td>
</tr>
<tr class="row-even"><td>float</td>
<td>string | number</td>
<td>The value MUST be either a normal JSON number or one of the following
string values: <code class="docutils literal notranslate"><span class="pre">&quot;NaN&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;Infinity&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;-Infinity&quot;</span></code>.</td>
</tr>
<tr class="row-odd"><td>double</td>
<td>string | number</td>
<td>The value MUST be either a normal JSON number or one of the following
string values: <code class="docutils literal notranslate"><span class="pre">&quot;NaN&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;Infinity&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;-Infinity&quot;</span></code>.</td>
</tr>
<tr class="row-even"><td>bigDecimal</td>
<td>string | number</td>
<td>bigDecimal values can be serialized as strings to avoid rounding
issues when parsing a Smithy model in various languages.</td>
</tr>
<tr class="row-odd"><td>bigInteger</td>
<td>string | number</td>
<td>bigInteger values can be serialized as strings to avoid truncation
issues when parsing a Smithy model in various languages.</td>
</tr>
<tr class="row-even"><td>string</td>
<td>string</td>
<td>The provided value SHOULD be compatible with the <code class="docutils literal notranslate"><span class="pre">mediaType</span></code> of the
string shape if present; however, this is not validated by Smithy.</td>
</tr>
<tr class="row-odd"><td>timestamp</td>
<td>number | string</td>
<td>If a number is provided, it represents Unix epoch seconds with optional
millisecond precision. If a string is provided, it MUST be a valid
<span class="target" id="index-1"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc3339.html"><strong>RFC 3339</strong></a> string with no UTC offset and optional fractional
precision (for example, <code class="docutils literal notranslate"><span class="pre">1985-04-12T23:20:50.52Z</span></code>).</td>
</tr>
<tr class="row-even"><td>list and set</td>
<td>array</td>
<td>Each value in the array MUST be compatible with the targeted member.</td>
</tr>
<tr class="row-odd"><td>map</td>
<td>object</td>
<td>Each key MUST be compatible with the <code class="docutils literal notranslate"><span class="pre">key</span></code> member of the map, and
each value MUST be compatible with the <code class="docutils literal notranslate"><span class="pre">value</span></code> member of the map.</td>
</tr>
<tr class="row-even"><td>structure</td>
<td>object</td>
<td>All members marked as required MUST be provided in a corresponding
key-value pair. Each key MUST correspond to a single member name of
the structure. Each value MUST be compatible with the member that
corresponds to the member name.</td>
</tr>
<tr class="row-odd"><td>union</td>
<td>object</td>
<td>The object MUST contain a single key-value pair. The key MUST be
one of the member names of the union shape, and the value MUST be
compatible with the corresponding shape.</td>
</tr>
</tbody>
</table>
<p class="rubric">Constraint traits</p>
<p>Trait values MUST be compatible with any constraint traits found related to the
shape being validated.</p>
</div>
<div class="section" id="defining-traits">
<span id="trait-shapes"></span><span id="id29"></span><h3><a href="#defining-traits"><span class="section-number">1.7.4. </span>Defining traits</a></h3>
<p>Traits are defined inside of a namespace by applying <code class="docutils literal notranslate"><span class="pre">smithy.api#trait</span></code> to
a shape. This trait can only be applied to simple types, <code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">map</span></code>,
<code class="docutils literal notranslate"><span class="pre">set</span></code>, <code class="docutils literal notranslate"><span class="pre">structure</span></code>, and <code class="docutils literal notranslate"><span class="pre">union</span></code> shapes.</p>
<p>The following example defines a trait with a <a class="reference internal" href="#shape-id"><span class="std std-ref">shape ID</span></a> of
<code class="docutils literal notranslate"><span class="pre">smithy.example#myTraitName</span></code> and applies it to <code class="docutils literal notranslate"><span class="pre">smithy.example#MyString</span></code>:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-19-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-19-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-19-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-19-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-19-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-19-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="nd">@trait</span>(<span class="nl">selector:</span><span class="w"> </span><span class="s2">&quot;*&quot;</span>)<span class="w"></span>
<span class="kd">structure</span><span class="nc"> myTraitName</span><span class="w"> </span>{}<span class="w"></span>

<span class="nd">@myTraitName</span><span class="w"></span>
<span class="kd">string</span><span class="nc"> MyString</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-19-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-19-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#myTraitName&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#trait&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;selector&quot;</span><span class="p">:</span> <span class="s2">&quot;*&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#MyString&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#myTraitName&quot;</span><span class="p">:</span> <span class="p">{}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p class="rubric">Trait properties</p>
<p><code class="docutils literal notranslate"><span class="pre">smithy.api#trait</span></code> is a structure that supports the following members:</p>
<table border="1" class="colwidths-given docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>selector</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>A valid <a class="reference internal" href="selectors.html#selectors"><span class="std std-ref">selector</span></a> that defines where the trait
can be applied. For example, a <code class="docutils literal notranslate"><span class="pre">selector</span></code> set to <code class="docutils literal notranslate"><span class="pre">:test(list,</span> <span class="pre">map)</span></code>
means that the trait can be applied to a <a class="reference internal" href="#list"><span class="std std-ref">list</span></a> or
<a class="reference internal" href="#map"><span class="std std-ref">map</span></a> shape. This value defaults to <code class="docutils literal notranslate"><span class="pre">*</span></code> if not set,
meaning the trait can be applied to any shape.</td>
</tr>
<tr class="row-odd"><td>conflicts</td>
<td>[<code class="docutils literal notranslate"><span class="pre">string</span></code>]</td>
<td>Defines the shape IDs of traits that MUST NOT be applied to the same
shape as the trait being defined. This allows traits to be defined as
mutually exclusive. Provided shape IDs MAY target unknown traits
that are not defined in the model.</td>
</tr>
<tr class="row-even"><td>structurallyExclusive</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>One of &quot;member&quot; or &quot;target&quot;. When set to &quot;member&quot;, only a single
member of a structure can be marked with the trait. When set to
&quot;target&quot;, only a single member of a structure can target a shape
marked with this trait.</td>
</tr>
<tr class="row-odd"><td>breakingChanges</td>
<td>[<a class="reference internal" href="#trait-breaking-change-rules"><span class="std std-ref">BreakingChangeRule</span></a>]</td>
<td>Defines the backward compatibility rules of the trait.</td>
</tr>
</tbody>
</table>
<p>The following example defines two custom traits: <code class="docutils literal notranslate"><span class="pre">beta</span></code> and
<code class="docutils literal notranslate"><span class="pre">structuredTrait</span></code>:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-20-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-20-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-20-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-20-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-20-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-20-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="cm">/// A trait that can be applied to a member.</span><span class="w"></span>
<span class="nd">@trait</span>(<span class="nl">selector:</span><span class="w"> </span><span class="s2">&quot;structure &gt; member&quot;</span>)<span class="w"></span>
<span class="kd">structure</span><span class="nc"> beta</span><span class="w"> </span>{}<span class="w"></span>

<span class="cm">/// A trait that has members.</span><span class="w"></span>
<span class="nd">@trait</span>(<span class="nl">selector:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span><span class="w"> </span><span class="nl">conflicts:</span><span class="w"> </span>[<span class="vc">beta</span>])<span class="w"></span>
<span class="kd">structure</span><span class="nc"> structuredTrait</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nd">@required</span><span class="w"></span>
<span class="w">    </span><span class="nl">lorem:</span><span class="w"> </span><span class="vc">StringShape</span><span class="p">,</span><span class="w"></span>

<span class="w">    </span><span class="nd">@required</span><span class="w"></span>
<span class="w">    </span><span class="nl">ipsum:</span><span class="w"> </span><span class="vc">StringShape</span><span class="p">,</span><span class="w"></span>

<span class="w">    </span><span class="nl">dolor:</span><span class="w"> </span><span class="vc">StringShape</span><span class="p">,</span><span class="w"></span>
}<span class="w"></span>

<span class="c">// Apply the &quot;beta&quot; trait to the &quot;foo&quot; member.</span><span class="w"></span>
<span class="kd">structure</span><span class="nc"> MyShape</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nd">@required</span><span class="w"></span>
<span class="w">    </span><span class="nd">@beta</span><span class="w"></span>
<span class="w">    </span><span class="nl">foo:</span><span class="w"> </span><span class="vc">StringShape</span><span class="p">,</span><span class="w"></span>
}<span class="w"></span>

<span class="c">// Apply the structuredTrait to the string.</span><span class="w"></span>
<span class="nd">@structuredTrait</span>(<span class="w"></span>
<span class="w">    </span><span class="nl">lorem:</span><span class="w"> </span><span class="s2">&quot;This is a custom trait!&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">ipsum:</span><span class="w"> </span><span class="s2">&quot;lorem and ipsum are both required values.&quot;</span>)<span class="w"></span>
<span class="kd">string</span><span class="nc"> StringShape</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-20-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-20-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#beta&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;apply&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
                <span class="nt">&quot;smithy.api#trait&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;selector&quot;</span><span class="p">:</span> <span class="s2">&quot;structure &gt; member&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;smithy.api#documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;A trait that can be applied to a member.&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#structuredTrait&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;apply&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
                <span class="nt">&quot;smithy.api#trait&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;selector&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;conflicts&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="s2">&quot;smithy.example#beta&quot;</span>
                    <span class="p">]</span>
                <span class="p">},</span>
                <span class="nt">&quot;smithy.api#members&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;lorem&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;StringShape&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">true</span>
                    <span class="p">},</span>
                    <span class="nt">&quot;dolor&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;StringShape&quot;</span>
                    <span class="p">}</span>
                <span class="p">},</span>
                <span class="nt">&quot;smithy.api#documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;A trait that has members.&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#MyShape&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;apply&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
                <span class="nt">&quot;smithy.api#members&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;beta&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;StringShape&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;beta&quot;</span><span class="p">:</span> <span class="kc">true</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#StringShape&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;apply&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
                <span class="nt">&quot;smithy.api#structuredTrait&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;lorem&quot;</span><span class="p">:</span> <span class="s2">&quot;This is a custom trait!&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;ipsum&quot;</span><span class="p">:</span> <span class="s2">&quot;lorem and ipsum are both required values.&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p class="rubric">Prelude traits</p>
<p>When using the IDL, built-in traits defined in the Smithy
<a class="reference internal" href="prelude-model.html#prelude"><span class="std std-ref">prelude</span></a> namespace, <code class="docutils literal notranslate"><span class="pre">smithy.api</span></code>, are automatically
available in every Smithy model and namespace through relative shape IDs.</p>
<p class="rubric">References to traits</p>
<p>The only valid reference to a trait is through applying a trait to a
shape. Members and references within a model MUST NOT target shapes.</p>
<p class="rubric">Naming traits</p>
<p>By convention, trait shape names SHOULD use a lowercase name so that they
visually stand out from normal shapes.</p>
<div class="section" id="annotation-traits">
<span id="annotation-trait"></span><h4><a href="#annotation-traits"><span class="section-number">1.7.4.1. </span>Annotation traits</a></h4>
<p>A structure trait with no members is called an <em>annotation trait</em>. It's hard
to predict what information a trait needs to capture when modeling a domain;
a trait might start out as a simple annotation, but later might benefit
from additional information. By defining an annotation trait rather than a
boolean trait, the trait can safely add optional members over time as needed.</p>
<p>The following example defines an annotation trait named <code class="docutils literal notranslate"><span class="pre">foo</span></code>:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-21-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-21-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-21-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-21-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-21-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-21-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="nd">@trait</span><span class="w"></span>
<span class="kd">structure</span><span class="nc"> foo</span><span class="w"> </span>{}<span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-21-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-21-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#foo&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#trait&quot;</span><span class="p">:</span> <span class="p">{}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p>A member can be safely added to an annotation trait if the member is not
marked as <a class="reference internal" href="constraint-traits.html#required-trait"><span class="std std-ref">required</span></a>. The applications of the <code class="docutils literal notranslate"><span class="pre">foo</span></code>
trait in the previous example and the following example are all valid even
after adding a member to the <code class="docutils literal notranslate"><span class="pre">foo</span></code> trait:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-22-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-22-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-22-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-22-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-22-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-22-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="nd">@trait</span><span class="w"></span>
<span class="kd">structure</span><span class="nc"> foo</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">baz:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span><span class="w"></span>
}<span class="w"></span>

<span class="nd">@foo</span>(<span class="nl">baz:</span><span class="w"> </span><span class="s2">&quot;bar&quot;</span>)<span class="w"></span>
<span class="kd">string</span><span class="nc"> MyString4</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-22-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-22-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#foo&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;baz&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#trait&quot;</span><span class="p">:</span> <span class="p">{}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#MyString4&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#foo&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;baz&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
</div>
<div class="section" id="trait-breaking-change-rules">
<span id="id30"></span><h4><a href="#trait-breaking-change-rules"><span class="section-number">1.7.4.2. </span>Trait breaking change rules</a></h4>
<p>Backward compatibility rules of a trait can be defined in the <code class="docutils literal notranslate"><span class="pre">breakingChanges</span></code>
member of a trait definition. This member is a list of diff rules. Smithy
tooling that performs semantic diff analysis between two versions of the same
model can use these rules to detect breaking or risky changes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Not every kind of breaking change can be described using the
<code class="docutils literal notranslate"><span class="pre">breakingChanges</span></code> property. Such backward compatibility rules SHOULD
instead be described through documentation and ideally enforced through
custom diff tooling.</p>
</div>
<table border="1" class="colwidths-given docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>change</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><p class="first"><strong>Required</strong>. The type of change. This value can be set to one of the
following:</p>
<ul class="last simple">
<li><code class="docutils literal notranslate"><span class="pre">add</span></code>: The trait or value at the given path was added.</li>
<li><code class="docutils literal notranslate"><span class="pre">remove</span></code>: The trait or value at the given path was removed.</li>
<li><code class="docutils literal notranslate"><span class="pre">update</span></code>: The trait or value at the given path was changed.</li>
<li><code class="docutils literal notranslate"><span class="pre">any</span></code>: The trait or value at the given path was added, removed,
or changed.</li>
<li><code class="docutils literal notranslate"><span class="pre">presence</span></code>: The trait or value at the given path was either
added or removed.</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>path</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>A JSON pointer as described in <span class="target" id="index-2"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc6901.html"><strong>RFC 6901</strong></a> that points to the values
to compare from the original model to the updated model. If omitted
or if an empty string is provided (<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>), the entire trait is used
as the value for comparison. The provided pointer MUST correctly
correspond to shapes in the model.</td>
</tr>
<tr class="row-even"><td>severity</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><p class="first">Defines the severity of the change. This value can be set to:</p>
<ul class="last simple">
<li><code class="docutils literal notranslate"><span class="pre">ERROR</span></code>: The change is backward incompatible. This is the default
assumed severity.</li>
<li><code class="docutils literal notranslate"><span class="pre">DANGER</span></code>: The change is very likely backward incompatible.</li>
<li><code class="docutils literal notranslate"><span class="pre">WARNING</span></code>: The change might be backward incompatible.</li>
<li><code class="docutils literal notranslate"><span class="pre">NOTICE</span></code>: The change is likely ok, but should be noted during
things like code reviews.</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>message</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>Provides an optional plain text message that provides information about
why the detected change could be problematic.</td>
</tr>
</tbody>
</table>
<p>It is a backward incompatible change to add the following trait to an
existing shape:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@trait</span>(<span class="nl">breakingChanges:</span><span class="w"> </span>[{<span class="nl">change:</span><span class="w"> </span><span class="s2">&quot;add&quot;</span>}])<span class="w"></span>
<span class="kd">structure</span><span class="nc"> cannotAdd</span><span class="w"> </span>{}<span class="w"></span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The above trait definition is equivalent to the following:</p>
<div class="last highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@trait</span>(<span class="w"></span>
<span class="w">    </span><span class="nl">breakingChanges:</span><span class="w"> </span>[<span class="w"></span>
<span class="w">        </span>{<span class="w"></span>
<span class="w">            </span><span class="nl">change:</span><span class="w"> </span><span class="s2">&quot;add&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nl">path:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nl">severity:</span><span class="w"> </span><span class="s2">&quot;ERROR&quot;</span><span class="w"></span>
<span class="w">        </span>}<span class="w"></span>
<span class="w">    </span>]<span class="w"></span>
)<span class="w"></span>
<span class="kd">structure</span><span class="nc"> cannotAdd</span><span class="w"> </span>{}<span class="w"></span>
</pre></div>
</div>
</div>
<p>It is a backward incompatible change to add or remove the following trait from
an existing shape:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@trait</span>(<span class="nl">breakingChanges:</span><span class="w"> </span>[{<span class="nl">change:</span><span class="w"> </span><span class="s2">&quot;presence&quot;</span>}])<span class="w"></span>
<span class="kd">structure</span><span class="nc"> cannotToAddOrRemove</span><span class="w"> </span>{}<span class="w"></span>
</pre></div>
</div>
<p>It is very likely backward incompatible to change the &quot;foo&quot; member of the
following trait or to remove the &quot;baz&quot; member:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@trait</span>(<span class="w"></span>
<span class="w">    </span><span class="nl">breakingChanges:</span><span class="w"> </span>[<span class="w"></span>
<span class="w">        </span>{<span class="w"></span>
<span class="w">            </span><span class="nl">change:</span><span class="w"> </span><span class="s2">&quot;update&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nl">path:</span><span class="w"> </span><span class="s2">&quot;/foo&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nl">severity:</span><span class="w"> </span><span class="s2">&quot;DANGER&quot;</span><span class="w"></span>
<span class="w">        </span>}<span class="p">,</span><span class="w"></span>
<span class="w">        </span>{<span class="w"></span>
<span class="w">            </span><span class="nl">change:</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nl">path:</span><span class="w"> </span><span class="s2">&quot;/baz&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nl">severity:</span><span class="w"> </span><span class="s2">&quot;DANGER&quot;</span><span class="w"></span>
<span class="w">        </span>}<span class="w"></span>
<span class="w">    </span>]<span class="w"></span>
)<span class="w"></span>
<span class="kd">structure</span><span class="nc"> fooBaz</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">foo:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">baz:</span><span class="w"> </span><span class="vc">String</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
<p>So for example, if the following shape:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@fooBaz</span>(<span class="nl">foo:</span><span class="w"> </span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="nl">baz:</span><span class="w"> </span><span class="s2">&quot;b&quot;</span>)<span class="w"></span>
<span class="kd">string</span><span class="nc"> Example</span><span class="w"></span>
</pre></div>
</div>
<p>Is changed to:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@fooBaz</span>(<span class="nl">foo:</span><span class="w"> </span><span class="s2">&quot;b&quot;</span>)<span class="w"></span>
<span class="kd">string</span><span class="nc"> Example</span><span class="w"></span>
</pre></div>
</div>
<p>Then the change to the <code class="docutils literal notranslate"><span class="pre">foo</span></code> member from &quot;a&quot; to &quot;b&quot; is backward
incompatible, as is the removal of the <code class="docutils literal notranslate"><span class="pre">baz</span></code> member.</p>
<p class="rubric">Referring to list and set members</p>
<p>The JSON pointer can path into the members of a list or set using a <code class="docutils literal notranslate"><span class="pre">member</span></code>
segment.</p>
<p>In the following example, it is a breaking change to change values of lists
or sets in instances of the <code class="docutils literal notranslate"><span class="pre">names</span></code> trait:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@trait</span>(<span class="w"></span>
<span class="w">    </span><span class="nl">breakingChanges:</span><span class="w"> </span>[<span class="w"></span>
<span class="w">        </span>{<span class="w"></span>
<span class="w">            </span><span class="nl">change:</span><span class="w"> </span><span class="s2">&quot;update&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nl">path:</span><span class="w"> </span><span class="s2">&quot;/names/member&quot;</span><span class="w"></span>
<span class="w">        </span>}<span class="w"></span>
<span class="w">    </span>]<span class="w"></span>
)<span class="w"></span>
<span class="kd">structure</span><span class="nc"> names</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">names:</span><span class="w"> </span><span class="vc">NameList</span><span class="w"></span>
}<span class="w"></span>

<span class="nd">@private</span><span class="w"></span>
<span class="kd">list</span><span class="nc"> NameList</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">member:</span><span class="w"> </span><span class="vc">String</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
<p>So for example, if the following shape:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@names</span>(<span class="nl">names:</span><span class="w"> </span>[<span class="s2">&quot;Han&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Luke&quot;</span>])<span class="w"></span>
<span class="kd">string</span><span class="nc"> Example</span><span class="w"></span>
</pre></div>
</div>
<p>Is changed to:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@names</span>(<span class="nl">names:</span><span class="w"> </span>[<span class="s2">&quot;Han&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Chewy&quot;</span>])<span class="w"></span>
<span class="kd">string</span><span class="nc"> Example</span><span class="w"></span>
</pre></div>
</div>
<p>Then the change to the second value of the <code class="docutils literal notranslate"><span class="pre">names</span></code> member is
backward incompatible because it changed from <code class="docutils literal notranslate"><span class="pre">Luke</span></code> to <code class="docutils literal notranslate"><span class="pre">Chewy</span></code>.</p>
<p class="rubric">Referring to map members</p>
<p>Members of a map shape can be referenced in a JSON pointer using
<code class="docutils literal notranslate"><span class="pre">key</span></code> and <code class="docutils literal notranslate"><span class="pre">value</span></code>.</p>
<p>The following example defines a trait where it is backward incompatible
to remove a key value pair from a map:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@trait</span>(<span class="w"></span>
<span class="w">    </span><span class="nl">breakingChanges:</span><span class="w"> </span>[<span class="w"></span>
<span class="w">        </span>{<span class="w"></span>
<span class="w">            </span><span class="nl">change:</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nl">path:</span><span class="w"> </span><span class="s2">&quot;/key&quot;</span><span class="w"></span>
<span class="w">        </span>}<span class="w"></span>
<span class="w">    </span>]<span class="w"></span>
)<span class="w"></span>
<span class="kd">map</span><span class="nc"> jobs</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">key:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">value:</span><span class="w"> </span><span class="vc">String</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
<p>So for example, if the following shape:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@jobs</span>(<span class="nl">Han:</span><span class="w"> </span><span class="s2">&quot;Smuggler&quot;</span><span class="p">,</span><span class="w"> </span><span class="nl">Luke:</span><span class="w"> </span><span class="s2">&quot;Jedi&quot;</span>)<span class="w"></span>
<span class="kd">string</span><span class="nc"> Example</span><span class="w"></span>
</pre></div>
</div>
<p>Is changed to:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@jobs</span>(<span class="nl">Luke:</span><span class="w"> </span><span class="s2">&quot;Jedi&quot;</span>)<span class="w"></span>
<span class="kd">string</span><span class="nc"> Example</span><span class="w"></span>
</pre></div>
</div>
<p>Then the removal of the &quot;Han&quot; entry of the map is flagged as backward
incompatible.</p>
<p>The following example detects when values of a map change.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@trait</span>(<span class="w"></span>
<span class="w">    </span><span class="nl">breakingChanges:</span><span class="w"> </span>[<span class="w"></span>
<span class="w">        </span>{<span class="w"></span>
<span class="w">            </span><span class="nl">change:</span><span class="w"> </span><span class="s2">&quot;update&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nl">path:</span><span class="w"> </span><span class="s2">&quot;/value&quot;</span><span class="w"></span>
<span class="w">        </span>}<span class="w"></span>
<span class="w">    </span>]<span class="w"></span>
)<span class="w"></span>
<span class="kd">map</span><span class="nc"> jobs</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">key:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">value:</span><span class="w"> </span><span class="vc">String</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
<p>So for example, if the following shape:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@jobs</span>(<span class="nl">Han:</span><span class="w"> </span><span class="s2">&quot;Smuggler&quot;</span><span class="p">,</span><span class="w"> </span><span class="nl">Luke:</span><span class="w"> </span><span class="s2">&quot;Jedi&quot;</span>)<span class="w"></span>
<span class="kd">string</span><span class="nc"> Example</span><span class="w"></span>
</pre></div>
</div>
<p>Is changed to:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@jobs</span>(<span class="nl">Han:</span><span class="w"> </span><span class="s2">&quot;Smuggler&quot;</span><span class="p">,</span><span class="w"> </span><span class="nl">Luke:</span><span class="w"> </span><span class="s2">&quot;Ghost&quot;</span>)<span class="w"></span>
<span class="kd">string</span><span class="nc"> Example</span><span class="w"></span>
</pre></div>
</div>
<p>Then the change to Luke's mapping from &quot;Jedi&quot; to &quot;Ghost&quot; is
backward incompatible.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Using the &quot;update&quot; <code class="docutils literal notranslate"><span class="pre">change</span></code> type with a map key has no effect.</li>
<li>Using any <code class="docutils literal notranslate"><span class="pre">change</span></code> type other than &quot;update&quot; with map values has no
effect.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="section" id="model-metadata">
<span id="metadata"></span><h2><a href="#model-metadata"><span class="section-number">1.8. </span>Model metadata</a></h2>
<p>Metadata is a schema-less extensibility mechanism used to associate
metadata to an entire model. For example, metadata is used to define
<a class="reference internal" href="model-validation.html#validator-definition"><span class="std std-ref">validators</span></a> and model-wide
<a class="reference internal" href="model-validation.html#suppression-definition"><span class="std std-ref">suppressions</span></a>. Metadata is defined
using an <code class="docutils literal notranslate"><span class="pre">object</span></code> <a class="reference internal" href="#node-value"><span class="std std-ref">node value</span></a>.</p>
<div class="section" id="merging-metadata">
<span id="id31"></span><h3><a href="#merging-metadata"><span class="section-number">1.8.1. </span>Merging metadata</a></h3>
<p>When a conflict occurs between top-level metadata key-value pairs,
metadata is merged using the following logic:</p>
<ol class="arabic simple">
<li>If a metadata key is only present in one model, then the entry is valid
and added to the merged model.</li>
<li>If both models contain the same key and both values are arrays, then
the entry is valid; the values of both arrays are concatenated into a
single array and added to the merged model.</li>
<li>If both models contain the same key and both values are exactly equal,
then the conflict is ignored and the value is added to the merged model.</li>
<li>If both models contain the same key, the values do not both map to
arrays, and the values are not equal, then the key is invalid and there
is a metadata conflict error.</li>
</ol>
<p>Given the following two Smithy models:</p>
<div class="literal-block-wrapper docutils container" id="id33">
<div class="code-block-caption"><span class="caption-text">model-a.smithy</span><a class="headerlink" href="#id33" title="Permalink to this code">Â¶</a></div>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">metadata</span><span class="nc"> &quot;foo&quot; </span><span class="nd">=</span><span class="w"> </span>[<span class="s2">&quot;baz&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;bar&quot;</span>]<span class="w"></span>
<span class="kd">metadata</span><span class="nc"> &quot;qux&quot; </span><span class="nd">=</span><span class="w"> </span><span class="s2">&quot;test&quot;</span><span class="w"></span>
<span class="kd">metadata</span><span class="nc"> &quot;validConflict&quot; </span><span class="nd">=</span><span class="w"> </span><span class="s2">&quot;hi!&quot;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id34">
<div class="code-block-caption"><span class="caption-text">model-b.smithy</span><a class="headerlink" href="#id34" title="Permalink to this code">Â¶</a></div>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">metadata</span><span class="nc"> &quot;foo&quot; </span><span class="nd">=</span><span class="w"> </span>[<span class="s2">&quot;lorem&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ipsum&quot;</span>]<span class="w"></span>
<span class="kd">metadata</span><span class="nc"> &quot;lorem&quot; </span><span class="nd">=</span><span class="w"> </span><span class="s2">&quot;ipsum&quot;</span><span class="w"></span>
<span class="kd">metadata</span><span class="nc"> &quot;validConflict&quot; </span><span class="nd">=</span><span class="w"> </span><span class="s2">&quot;hi!&quot;</span><span class="w"></span>
</pre></div>
</div>
</div>
<p>Merging <code class="docutils literal notranslate"><span class="pre">model-a.smithy</span></code> and <code class="docutils literal notranslate"><span class="pre">model-b.smithy</span></code> produces the following
model:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">metadata</span><span class="nc"> &quot;foo&quot; </span><span class="nd">=</span><span class="w"> </span>[<span class="s2">&quot;baz&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;bar&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;lorem&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ipsum&quot;</span>]<span class="w"></span>
<span class="kd">metadata</span><span class="nc"> &quot;qux&quot; </span><span class="nd">=</span><span class="w"> </span><span class="s2">&quot;test&quot;</span><span class="w"></span>
<span class="kd">metadata</span><span class="nc"> &quot;lorem&quot; </span><span class="nd">=</span><span class="w"> </span><span class="s2">&quot;ipsum&quot;</span><span class="w"></span>
<span class="kd">metadata</span><span class="nc"> &quot;validConflict&quot; </span><span class="nd">=</span><span class="w"> </span><span class="s2">&quot;hi!&quot;</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="node-values">
<span id="node-value"></span><h2><a href="#node-values"><span class="section-number">1.9. </span>Node values</a></h2>
<p>Node values are JSON-like values used in the following places in the
semantic model:</p>
<ul class="simple">
<li><strong>metadata</strong>: Metadata is defined as a node value object.</li>
<li><strong>applied trait</strong>: The value of a trait applied to a shape is defined
using a node value.</li>
</ul>
<div class="literal-block-wrapper text-figure docutils container" id="figure-1-3">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Semantic Model  â”‚                     â”‚Applied Traitâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚                                            â”‚
  â”‚                                            â”‚
  â”‚                                            â”¼ nodeValue
  â”‚                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                     â”‚ Â«abstractÂ»  â”‚
  â”‚                                     â”‚    Value    â”‚
  â”‚metadata                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚                                            â–³
  â—‹      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”¼      â”‚                   â”‚                 â”‚               â”‚               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Object      â”‚ â”‚      Array      â”‚ â”‚   Number    â”‚ â”‚   Boolean   â”‚ â”‚   String    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚members:         â”‚ â”‚members: [Value] â”‚
â”‚  [String, Value]â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre></div>
</div>
<div class="code-block-caption"><span class="caption-text"><strong>Figure 1.3</strong>: Node value types</span><a class="headerlink" href="#figure-1-3" title="Permalink to this code">Â¶</a></div>
</div>
<p>The following example defines metadata using a node value:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-23-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-23-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-23-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-23-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-23-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-23-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">metadata</span><span class="nc"> foo </span><span class="nd">=</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-23-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-23-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;hello&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p>The following example defines a trait using a node value:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-24-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-24-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-24-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-24-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-24-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-24-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="nd">@length</span>(<span class="nl">min:</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="nl">max:</span><span class="w"> </span><span class="m">10</span>)<span class="w"></span>
<span class="kd">string</span><span class="nc"> MyString</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-24-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-24-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyString&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#length&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;min&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="nt">&quot;max&quot;</span><span class="p">:</span> <span class="mi">10</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<div class="section" id="node-value-types">
<h3><a href="#node-value-types"><span class="section-number">1.9.1. </span>Node value types</a></h3>
<p>Node values have the same data model as JSON; they consist of the following
kinds of values:</p>
<table border="1" class="colwidths-given docutils align-default">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>null</td>
<td>The lack of a value</td>
</tr>
<tr class="row-odd"><td>string</td>
<td>A UTF-8 string</td>
</tr>
<tr class="row-even"><td>number</td>
<td>A double precision floating point number</td>
</tr>
<tr class="row-odd"><td>boolean</td>
<td>A Boolean, true or false value</td>
</tr>
<tr class="row-even"><td>array</td>
<td>A list of heterogeneous node values</td>
</tr>
<tr class="row-odd"><td>object</td>
<td>A map of string keys to heterogeneous node values</td>
</tr>
</tbody>
</table>
<p class="rubric">Shape IDs, text blocks, et al.</p>
<p>There is no specific node value type for shape IDs, text blocks, or
other higher-level features of the IDL; these values are stored and
treated in the semantic model as simply opaque strings, and their
validation happens before the creation of the model.</p>
</div>
</div>
<div class="section" id="merging-model-files">
<span id="merging-models"></span><h2><a href="#merging-model-files"><span class="section-number">1.10. </span>Merging model files</a></h2>
<p>Implementations MUST take the following steps when merging two or more
<a class="reference internal" href="#model-files"><span class="std std-ref">model files</span></a> to form a
<a class="reference internal" href="#semantic-model"><span class="std std-ref">semantic model</span></a>:</p>
<ol class="arabic simple">
<li>Merge the metadata objects of all model files using the steps defined in
<a class="reference internal" href="#merging-metadata"><span class="std std-ref">Merging metadata</span></a>.</li>
<li>Shapes defined in a single model file are added to the semantic model as-is.</li>
<li>Shapes with the same shape ID defined in multiple model files are
reconciled using the following rules:<ol class="arabic">
<li>All conflicting shapes MUST have the same shape type.</li>
<li>Conflicting <a class="reference internal" href="#aggregate-types"><span class="std std-ref">aggregate shapes</span></a> MUST contain the
same members that target the same shapes.</li>
<li>Conflicting <a class="reference internal" href="#service-types"><span class="std std-ref">service shapes</span></a> MUST contain the same
properties and target the same shapes.</li>
</ol>
</li>
<li>Conflicting traits defined in shape definitions or through
<a class="reference internal" href="#apply-statements"><span class="std std-ref">apply statements</span></a> are reconciled using
<a class="reference internal" href="#trait-conflict-resolution"><span class="std std-ref">trait conflict resolution</span></a>.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>The following guidance is non-normative.</em> Because the Smithy IDL allows
forward references to shapes that have not yet been defined or shapes
that are defined in another model file, implementations likely need to
defer <a class="reference internal" href="idl.html#relative-shape-id"><span class="std std-ref">resolving relative shape IDs</span></a> to
absolute shape IDs until <em>all</em> model files are loaded.</p>
</div>
</div>
</div>


                    
                    <section class="relations">
                        
                        <a href="index.html" title="previous chapter" class="previous-page clearfix hidden-xs">â† Smithy specification</a>
                        
                        <a href="prelude-model.html" title="next chapter" class="next-page clearfix"><span class="section-number">2. </span>Prelude model â†’</a>
                    </section>
                    
                </article><aside id="right-column" class="side-column hidden-sm">
                    <div class="column-body">
                        <section class="sidebar">
                            
                            <section class="next-previous">
                                
                                <a href="index.html" title="previous chapter" class="previous-page clearfix hidden-xs">â† Prev</a>
                                
                                <a href="prelude-model.html" title="next chapter" class="next-page clearfix">Next â†’</a>
                            </section>
                            
                            <ul>
<li><a class="reference internal" href="#">1. The Smithy model</a><ul>
<li><a class="reference internal" href="#smithy-overview">1.1. Smithy overview</a></li>
<li><a class="reference internal" href="#the-semantic-model">1.2. The semantic model</a></li>
<li><a class="reference internal" href="#shapes">1.3. Shapes</a><ul>
<li><a class="reference internal" href="#shape-id">1.3.1. Shape ID</a></li>
<li><a class="reference internal" href="#shape-id-conflicts">1.3.2. Shape ID conflicts</a></li>
</ul>
</li>
<li><a class="reference internal" href="#simple-shapes">1.4. Simple shapes</a></li>
<li><a class="reference internal" href="#aggregate-shapes">1.5. Aggregate shapes</a><ul>
<li><a class="reference internal" href="#member">1.5.1. Member</a></li>
<li><a class="reference internal" href="#list">1.5.2. List</a></li>
<li><a class="reference internal" href="#set">1.5.3. Set</a></li>
<li><a class="reference internal" href="#map">1.5.4. Map</a></li>
<li><a class="reference internal" href="#structure">1.5.5. Structure</a><ul>
<li><a class="reference internal" href="#default-structure-member-values">1.5.5.1. Default structure member values</a></li>
</ul>
</li>
<li><a class="reference internal" href="#union">1.5.6. Union</a></li>
<li><a class="reference internal" href="#unit-type">1.5.7. Unit type</a></li>
<li><a class="reference internal" href="#recursive-shape-definitions">1.5.8. Recursive shape definitions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#service-shapes">1.6. Service shapes</a><ul>
<li><a class="reference internal" href="#service">1.6.1. Service</a><ul>
<li><a class="reference internal" href="#service-operations">1.6.1.1. Service operations</a></li>
<li><a class="reference internal" href="#service-resources">1.6.1.2. Service resources</a></li>
<li><a class="reference internal" href="#service-closure">1.6.1.3. Service closure</a></li>
</ul>
</li>
<li><a class="reference internal" href="#operation">1.6.2. Operation</a></li>
<li><a class="reference internal" href="#resource">1.6.3. Resource</a></li>
<li><a class="reference internal" href="#resource-identifiers">1.6.4. Resource Identifiers</a><ul>
<li><a class="reference internal" href="#binding-identifiers-to-operations">1.6.4.1. Binding identifiers to operations</a></li>
<li><a class="reference internal" href="#implicit-identifier-bindings">1.6.4.2. Implicit identifier bindings</a></li>
<li><a class="reference internal" href="#explicit-identifier-bindings">1.6.4.3. Explicit identifier bindings</a></li>
</ul>
</li>
<li><a class="reference internal" href="#resource-lifecycle-operations">1.6.5. Resource lifecycle operations</a><ul>
<li><a class="reference internal" href="#put-lifecycle">1.6.5.1. Put lifecycle</a></li>
<li><a class="reference internal" href="#create-lifecycle">1.6.5.2. Create lifecycle</a></li>
<li><a class="reference internal" href="#read-lifecycle">1.6.5.3. Read lifecycle</a></li>
<li><a class="reference internal" href="#update-lifecycle">1.6.5.4. Update lifecycle</a></li>
<li><a class="reference internal" href="#delete-lifecycle">1.6.5.5. Delete lifecycle</a></li>
<li><a class="reference internal" href="#list-lifecycle">1.6.5.6. List lifecycle</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#traits">1.7. Traits</a><ul>
<li><a class="reference internal" href="#applying-traits-to-shapes">1.7.1. Applying traits to shapes</a><ul>
<li><a class="reference internal" href="#applying-traits-externally">1.7.1.1. Applying traits externally</a></li>
</ul>
</li>
<li><a class="reference internal" href="#trait-conflict-resolution">1.7.2. Trait conflict resolution</a></li>
<li><a class="reference internal" href="#trait-node-values">1.7.3. Trait node values</a></li>
<li><a class="reference internal" href="#defining-traits">1.7.4. Defining traits</a><ul>
<li><a class="reference internal" href="#annotation-traits">1.7.4.1. Annotation traits</a></li>
<li><a class="reference internal" href="#trait-breaking-change-rules">1.7.4.2. Trait breaking change rules</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#model-metadata">1.8. Model metadata</a><ul>
<li><a class="reference internal" href="#merging-metadata">1.8.1. Merging metadata</a></li>
</ul>
</li>
<li><a class="reference internal" href="#node-values">1.9. Node values</a><ul>
<li><a class="reference internal" href="#node-value-types">1.9.1. Node value types</a></li>
</ul>
</li>
<li><a class="reference internal" href="#merging-model-files">1.10. Merging model files</a></li>
</ul>
</li>
</ul>

                        </section>
                    </div>
                </aside></div>
        </section>
        
    
<footer id="footer">
    <div class="width-wrapper">
        <div class="copyright">
            <p>Â©2021, Amazon Web Services, Inc or its affiliates. All rights reserved.</p>
        </div>
    </div>
</footer>
  </body>
</html>