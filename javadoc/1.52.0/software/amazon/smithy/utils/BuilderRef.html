<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>BuilderRef (Smithy API 1.52.0)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="BuilderRef (Smithy API 1.52.0)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":6,"i1":6,"i2":1,"i3":1,"i4":1,"i5":1,"i6":1,"i7":6,"i8":6,"i9":6};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = false;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">software.amazon.smithy.utils</a></div>
<h2 title="Interface BuilderRef" class="title">Interface BuilderRef&lt;T&gt;</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - Type of value being created.</dd>
</dl>
<hr>
<pre>public interface <span class="typeNameLabel">BuilderRef&lt;T&gt;</span></pre>
<div class="block">Manages the creation, copying, and reuse of values created by builders.

 <p>BuilderRef manages the state of a mutable value contained in a builder.
 It ensures that things like arrays built up in a builder can be used
 directly in objects being built without copies, and it allows the builder
 to be reused without mutating previously built objects.

 <p>Smithy uses lots of builders to build up immutable objects. To make an
 immutable object in Java, you need to make defensive copies of things like
 lists, sets, and maps, but doing that for every single one of these types
 in builders results in lots of copies. One option is to just use the lists
 et al contained in builders directly in the built objects, but that runs the
 risk of the builder being further mutated and thus mutating the object.
 Another option is to clear out the state of the builder and give "ownership"
 of lists et al to built objects, but that means builders can't easily be
 used to build up multiple objects (and while that rare, it's a use case that
 probably *should* work, and always has worked in Smithy).

 <p>BuilderRef creates the value if needed when the builder needs to mutate
 the wrapped value (see <code>get()</code>. It creates an immutable copy of the value
 when <a href="#copy()"><code>copy()</code></a> is called, and an immutable "borrowed" reference to the
 copied value is maintained in the reference. This borrowed copy can be queried
 using <code>peek()</code>, but it can't be mutated. If the reference only has a
 borrowed value but attempts to call <code>get()</code>, then a copy of the borrowed
 value is created and returned from <code>get()</code>.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#clear()">clear</a></span>()</code></th>
<td class="colLast">
<div class="block">Removes any borrowed or owned values from the reference.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="BuilderRef.html" title="type parameter in BuilderRef">T</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#copy()">copy</a></span>()</code></th>
<td class="colLast">
<div class="block">Creates an immutable copy of <code>T</code>.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;<a href="BuilderRef.html" title="interface in software.amazon.smithy.utils">BuilderRef</a>&lt;java.util.List&lt;T&gt;&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#forList()">forList</a></span>()</code></th>
<td class="colLast">
<div class="block">Creates a builder reference to a list.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static &lt;K,&#8203;V&gt;<br><a href="BuilderRef.html" title="interface in software.amazon.smithy.utils">BuilderRef</a>&lt;java.util.Map&lt;K,&#8203;V&gt;&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#forOrderedMap()">forOrderedMap</a></span>()</code></th>
<td class="colLast">
<div class="block">Creates a builder reference to a ordered map.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;<a href="BuilderRef.html" title="interface in software.amazon.smithy.utils">BuilderRef</a>&lt;java.util.Set&lt;T&gt;&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#forOrderedSet()">forOrderedSet</a></span>()</code></th>
<td class="colLast">
<div class="block">Creates a builder reference to an ordered set.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>static &lt;K,&#8203;V&gt;<br><a href="BuilderRef.html" title="interface in software.amazon.smithy.utils">BuilderRef</a>&lt;java.util.Map&lt;K,&#8203;V&gt;&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#forUnorderedMap()">forUnorderedMap</a></span>()</code></th>
<td class="colLast">
<div class="block">Creates a builder reference to an unordered map.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;<a href="BuilderRef.html" title="interface in software.amazon.smithy.utils">BuilderRef</a>&lt;java.util.Set&lt;T&gt;&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#forUnorderedSet()">forUnorderedSet</a></span>()</code></th>
<td class="colLast">
<div class="block">Creates a builder reference to an unordered set.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>T</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink">get</span>()</code></th>
<td class="colLast">
<div class="block">Gets a mutable <code>T</code> from the reference, creating one if needed.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#hasValue()">hasValue</a></span>()</code></th>
<td class="colLast">
<div class="block">Checks if the reference currently has a borrowed or owned value.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>T</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink">peek</span>()</code></th>
<td class="colLast">
<div class="block">Gets an immutable <code>T</code> from the reference, reusing borrowed
 values if possible, and creating owned values if needed.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="copy()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>copy</h4>
<pre class="methodSignature"><a href="BuilderRef.html" title="type parameter in BuilderRef">T</a>&nbsp;copy()</pre>
<div class="block">Creates an immutable copy of <code>T</code>.

 <p>Subsequent calls to <a href="#hasValue()"><code>hasValue()</code></a> may or may not return true
 after this method is called.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns the copied immutable value.</dd>
</dl>
</li>
</ul>
<a id="hasValue()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasValue</h4>
<pre class="methodSignature">boolean&nbsp;hasValue()</pre>
<div class="block">Checks if the reference currently has a borrowed or owned value.

 <p>This method does not check if the contained value is considered
 empty. This method only returns true if the reference contains any
 kind of previously built value. This might be useful for builder
 methods that attempt to remove values from the contained object.
 If there is no contained object, then there's no need to create
 one just to remove a value from an empty container.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns true if the reference contains a value of any kind.</dd>
</dl>
</li>
</ul>
<a id="clear()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clear</h4>
<pre class="methodSignature">void&nbsp;clear()</pre>
<div class="block">Removes any borrowed or owned values from the reference.

 <p>Subsequent calls to <a href="#hasValue()"><code>hasValue()</code></a> will return false after
 this method is called.</div>
</li>
</ul>
<a id="forUnorderedMap()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forUnorderedMap</h4>
<pre class="methodSignature">static&nbsp;&lt;K,&#8203;V&gt;&nbsp;<a href="BuilderRef.html" title="interface in software.amazon.smithy.utils">BuilderRef</a>&lt;java.util.Map&lt;K,&#8203;V&gt;&gt;&nbsp;forUnorderedMap()</pre>
<div class="block">Creates a builder reference to an unordered map.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>K</code> - Type of key of the map.</dd>
<dd><code>V</code> - Type of value of the map.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns the created map.</dd>
</dl>
</li>
</ul>
<a id="forOrderedMap()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forOrderedMap</h4>
<pre class="methodSignature">static&nbsp;&lt;K,&#8203;V&gt;&nbsp;<a href="BuilderRef.html" title="interface in software.amazon.smithy.utils">BuilderRef</a>&lt;java.util.Map&lt;K,&#8203;V&gt;&gt;&nbsp;forOrderedMap()</pre>
<div class="block">Creates a builder reference to a ordered map.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>K</code> - Type of key of the map.</dd>
<dd><code>V</code> - Type of value of the map.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns the created map.</dd>
</dl>
</li>
</ul>
<a id="forList()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forList</h4>
<pre class="methodSignature">static&nbsp;&lt;T&gt;&nbsp;<a href="BuilderRef.html" title="interface in software.amazon.smithy.utils">BuilderRef</a>&lt;java.util.List&lt;T&gt;&gt;&nbsp;forList()</pre>
<div class="block">Creates a builder reference to a list.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - Type of value in the list.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns the created list.</dd>
</dl>
</li>
</ul>
<a id="forUnorderedSet()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forUnorderedSet</h4>
<pre class="methodSignature">static&nbsp;&lt;T&gt;&nbsp;<a href="BuilderRef.html" title="interface in software.amazon.smithy.utils">BuilderRef</a>&lt;java.util.Set&lt;T&gt;&gt;&nbsp;forUnorderedSet()</pre>
<div class="block">Creates a builder reference to an unordered set.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - Type of value in the set.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns the created set.</dd>
</dl>
</li>
</ul>
<a id="forOrderedSet()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forOrderedSet</h4>
<pre class="methodSignature">static&nbsp;&lt;T&gt;&nbsp;<a href="BuilderRef.html" title="interface in software.amazon.smithy.utils">BuilderRef</a>&lt;java.util.Set&lt;T&gt;&gt;&nbsp;forOrderedSet()</pre>
<div class="block">Creates a builder reference to an ordered set.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - Type of value in the set.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns the created set.</dd>
</dl>
</li>
</ul>
<a id="get()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre class="methodSignature">T&nbsp;get()</pre>
<div class="block">Gets a mutable <code>T</code> from the reference, creating one if needed.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns a mutable <code>T</code> value.</dd>
</dl>
</li>
</ul>
<a id="peek()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>peek</h4>
<pre class="methodSignature">T&nbsp;peek()</pre>
<div class="block">Gets an immutable <code>T</code> from the reference, reusing borrowed
 values if possible, and creating owned values if needed.

 <p>Attempting to mutate the provided value <em>should</em> fail
 at runtime, but even if it doesn't, doing so could inadvertently
 mutate previously built objects.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns an immutable peeked <code>T</code> value.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
