<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>BuilderRef (Smithy API 1.26.2)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: software.amazon.smithy.utils, interface: BuilderRef">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">software.amazon.smithy.utils</a></div>
<h1 title="Interface BuilderRef" class="title">Interface BuilderRef&lt;T&gt;</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - Type of value being created.</dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public interface </span><span class="element-name type-name-label">BuilderRef&lt;T&gt;</span></div>
<div class="block">Manages the creation, copying, and reuse of values created by builders.

 <p>BuilderRef manages the state of a mutable value contained in a builder.
 It ensures that things like arrays built up in a builder can be used
 directly in objects being built without copies, and it allows the builder
 to be reused without mutating previously built objects.

 <p>Smithy uses lots of builders to build up immutable objects. To make an
 immutable object in Java, you need to make defensive copies of things like
 lists, sets, and maps, but doing that for every single one of these types
 in builders results in lots of copies. One option is to just use the lists
 et al contained in builders directly in the built objects, but that runs the
 risk of the builder being further mutated and thus mutating the object.
 Another option is to clear out the state of the builder and give "ownership"
 of lists et al to built objects, but that means builders can't easily be
 used to build up multiple objects (and while that rare, it's a use case that
 probably *should* work, and always has worked in Smithy).

 <p>BuilderRef creates the value if needed when the builder needs to mutate
 the wrapped value (see <a href="#get()"><code>get()</code></a>. It creates an immutable copy of the value
 when <a href="#copy()"><code>copy()</code></a> is called, and an immutable "borrowed" reference to the
 copied value is maintained in the reference. This borrowed copy can be queried
 using <a href="#peek()"><code>peek()</code></a>, but it can't be mutated. If the reference only has a
 borrowed value but attempts to call <a href="#get()"><code>get()</code></a>, then a copy of the borrowed
 value is created and returned from <code>get()</code>.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#clear()" class="member-name-link">clear</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Removes any borrowed or owned values from the reference.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="BuilderRef.html" title="type parameter in BuilderRef">T</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#copy()" class="member-name-link">copy</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Creates an immutable copy of <code>T</code>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1"><code>static &lt;T&gt;&nbsp;<a href="BuilderRef.html" title="interface in software.amazon.smithy.utils">BuilderRef</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;T&gt;&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1"><code><a href="#forList()" class="member-name-link">forList</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1">
<div class="block">Creates a builder reference to a list.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1"><code>static &lt;K,<wbr>
V&gt;&nbsp;<a href="BuilderRef.html" title="interface in software.amazon.smithy.utils">BuilderRef</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;K,<wbr>V&gt;&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1"><code><a href="#forOrderedMap()" class="member-name-link">forOrderedMap</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1">
<div class="block">Creates a builder reference to a ordered map.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1"><code>static &lt;T&gt;&nbsp;<a href="BuilderRef.html" title="interface in software.amazon.smithy.utils">BuilderRef</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;T&gt;&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1"><code><a href="#forOrderedSet()" class="member-name-link">forOrderedSet</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1">
<div class="block">Creates a builder reference to an ordered set.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1"><code>static &lt;K,<wbr>
V&gt;&nbsp;<a href="BuilderRef.html" title="interface in software.amazon.smithy.utils">BuilderRef</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;K,<wbr>V&gt;&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1"><code><a href="#forUnorderedMap()" class="member-name-link">forUnorderedMap</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1">
<div class="block">Creates a builder reference to an unordered map.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1"><code>static &lt;T&gt;&nbsp;<a href="BuilderRef.html" title="interface in software.amazon.smithy.utils">BuilderRef</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;T&gt;&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1"><code><a href="#forUnorderedSet()" class="member-name-link">forUnorderedSet</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1">
<div class="block">Creates a builder reference to an unordered set.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="BuilderRef.html" title="type parameter in BuilderRef">T</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#get()" class="member-name-link">get</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Gets a mutable <code>T</code> from the reference, creating one if needed.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#hasValue()" class="member-name-link">hasValue</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Checks if the reference currently has a borrowed or owned value.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="BuilderRef.html" title="type parameter in BuilderRef">T</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#peek()" class="member-name-link">peek</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Gets an immutable <code>T</code> from the reference, reusing borrowed
 values if possible, and creating owned values if needed.</div>
</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="copy()">
<h3>copy</h3>
<div class="member-signature"><span class="return-type"><a href="BuilderRef.html" title="type parameter in BuilderRef">T</a></span>&nbsp;<span class="element-name">copy</span>()</div>
<div class="block">Creates an immutable copy of <code>T</code>.

 <p>Subsequent calls to <a href="#hasValue()"><code>hasValue()</code></a> may or may not return true
 after this method is called.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>Returns the copied immutable value.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="hasValue()">
<h3>hasValue</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">hasValue</span>()</div>
<div class="block">Checks if the reference currently has a borrowed or owned value.

 <p>This method does not check if the contained value is considered
 empty. This method only returns true if the reference contains any
 kind of previously built value. This might be useful for builder
 methods that attempt to remove values from the contained object.
 If there is no contained object, then there's no need to create
 one just to remove a value from an empty container.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>Returns true if the reference contains a value of any kind.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="clear()">
<h3>clear</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">clear</span>()</div>
<div class="block">Removes any borrowed or owned values from the reference.

 <p>Subsequent calls to <a href="#hasValue()"><code>hasValue()</code></a> will return false after
 this method is called.</div>
</section>
</li>
<li>
<section class="detail" id="forUnorderedMap()">
<h3>forUnorderedMap</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="type-parameters">&lt;K,<wbr>
V&gt;</span>&nbsp;<span class="return-type"><a href="BuilderRef.html" title="interface in software.amazon.smithy.utils">BuilderRef</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;K,<wbr>V&gt;&gt;</span>&nbsp;<span class="element-name">forUnorderedMap</span>()</div>
<div class="block">Creates a builder reference to an unordered map.</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>K</code> - Type of key of the map.</dd>
<dd><code>V</code> - Type of value of the map.</dd>
<dt>Returns:</dt>
<dd>Returns the created map.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="forOrderedMap()">
<h3>forOrderedMap</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="type-parameters">&lt;K,<wbr>
V&gt;</span>&nbsp;<span class="return-type"><a href="BuilderRef.html" title="interface in software.amazon.smithy.utils">BuilderRef</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;K,<wbr>V&gt;&gt;</span>&nbsp;<span class="element-name">forOrderedMap</span>()</div>
<div class="block">Creates a builder reference to a ordered map.</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>K</code> - Type of key of the map.</dd>
<dd><code>V</code> - Type of value of the map.</dd>
<dt>Returns:</dt>
<dd>Returns the created map.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="forList()">
<h3>forList</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="BuilderRef.html" title="interface in software.amazon.smithy.utils">BuilderRef</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;T&gt;&gt;</span>&nbsp;<span class="element-name">forList</span>()</div>
<div class="block">Creates a builder reference to a list.</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - Type of value in the list.</dd>
<dt>Returns:</dt>
<dd>Returns the created list.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="forUnorderedSet()">
<h3>forUnorderedSet</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="BuilderRef.html" title="interface in software.amazon.smithy.utils">BuilderRef</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;T&gt;&gt;</span>&nbsp;<span class="element-name">forUnorderedSet</span>()</div>
<div class="block">Creates a builder reference to an unordered set.</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - Type of value in the set.</dd>
<dt>Returns:</dt>
<dd>Returns the created set.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="forOrderedSet()">
<h3>forOrderedSet</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="BuilderRef.html" title="interface in software.amazon.smithy.utils">BuilderRef</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;T&gt;&gt;</span>&nbsp;<span class="element-name">forOrderedSet</span>()</div>
<div class="block">Creates a builder reference to an ordered set.</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - Type of value in the set.</dd>
<dt>Returns:</dt>
<dd>Returns the created set.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="get()">
<h3>get</h3>
<div class="member-signature"><span class="return-type"><a href="BuilderRef.html" title="type parameter in BuilderRef">T</a></span>&nbsp;<span class="element-name">get</span>()</div>
<div class="block">Gets a mutable <code>T</code> from the reference, creating one if needed.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>Returns a mutable <code>T</code> value.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="peek()">
<h3>peek</h3>
<div class="member-signature"><span class="return-type"><a href="BuilderRef.html" title="type parameter in BuilderRef">T</a></span>&nbsp;<span class="element-name">peek</span>()</div>
<div class="block">Gets an immutable <code>T</code> from the reference, reusing borrowed
 values if possible, and creating owned values if needed.

 <p>Attempting to mutate the provided value <em>should</em> fail
 at runtime, but even if it doesn't, doing so could inadvertently
 mutate previously built objects.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>Returns an immutable peeked <code>T</code> value.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
