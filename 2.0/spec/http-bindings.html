<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="15. Endpoint traits" href="endpoint-traits.html" /><link rel="prev" title="13. Streaming" href="streaming.html" />

    <link rel="shortcut icon" href="../_static/favicon.svg"/><meta name="generator" content="sphinx-5.3.0, furo 2022.06.21"/>
        <title>14. HTTP bindings - Smithy 2.0</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=40978830699223671f4072448e654b5958f38b89" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --admonition-font-size: 100%;
  --admonition-title-font-size: 100%;
  --color-brand-primary: #C44536;
  --color-brand-content: #00808b;
  --color-announcement-background: #f8f8f8;
  --color-announcement-text: #383838;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #282828;
  --color-code-foreground: #dddddd;
  --color-brand-primary: #ed9d13;
  --color-brand-content: #58d3ff;
  --color-announcement-background: ##1a1c1e;;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #282828;
  --color-code-foreground: #dddddd;
  --color-brand-primary: #ed9d13;
  --color-brand-content: #58d3ff;
  --color-announcement-background: ##1a1c1e;;
  
      }
    }
  }
</style><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js"></script>
<script src="https://d2c.aws.amazon.com/client/loader/v1/d2c-load.js"></script></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Smithy 2.0</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../_static/smithy.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../_static/smithy-dark.svg" alt="Dark Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick start</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Smithy specification</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="model.html">1. The Smithy model</a></li>
<li class="toctree-l2"><a class="reference internal" href="simple-types.html">2. Simple types</a></li>
<li class="toctree-l2"><a class="reference internal" href="aggregate-types.html">3. Aggregate types</a></li>
<li class="toctree-l2"><a class="reference internal" href="service-types.html">4. Service types</a></li>
<li class="toctree-l2"><a class="reference internal" href="mixins.html">5. Mixins</a></li>
<li class="toctree-l2"><a class="reference internal" href="constraint-traits.html">6. Constraint traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="type-refinement-traits.html">7. Type refinement traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="documentation-traits.html">8. Documentation traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="behavior-traits.html">9. Behavior traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="resource-traits.html">10. Resource traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication-traits.html">11. Authentication traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="protocol-traits.html">12. Serialization and Protocol traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="streaming.html">13. Streaming</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">14. HTTP bindings</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-traits.html">15. Endpoint traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="selectors.html">16. Selectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="model-validation.html">17. Model validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="idl.html">18. Smithy IDL</a></li>
<li class="toctree-l2"><a class="reference internal" href="json-ast.html">19. JSON AST</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../trait-index.html">Trait index</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../guides/index.html">Guides</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../guides/smithy-cli/index.html">The Smithy CLI</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../guides/smithy-cli/cli_installation.html">Installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guides/smithy-build-json.html">smithy-build.json</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../guides/gradle-plugin/index.html">Smithy Gradle Plugins</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../guides/gradle-plugin/gradle-migration-guide.html">Migrating to Gradle plugin version 0.10.0+</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../guides/using-code-generation/index.html">Code Generation</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../guides/using-code-generation/update-model.html">Updating the Smithy Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/using-code-generation/generating-a-client.html">Generating a client</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guides/model-linters.html">Linting Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/model-validation-examples.html">Model Validation Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/evolving-models.html">Evolving Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/style-guide.html">Style Guide</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../guides/model-translations/index.html">Model Translations</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../guides/model-translations/converting-to-openapi.html">Converting Smithy to OpenAPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/model-translations/migrating-idl-1-to-2.html">Smithy IDL 1.0 to 2.0 Migration Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/model-translations/generating-cloudformation-resources.html">Generating CloudFormation Resource Schemas from Smithy</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../guides/building-codegen/index.html">Creating a Code Generator</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/overview-and-concepts.html">Overview and Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/mapping-shapes-to-languages.html">Mapping Smithy Shapes to Your Language</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/creating-codegen-repo.html">Creating a Codegen Repo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/configuring-the-generator.html">Configuring the Generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/implementing-the-generator.html">Implementing the Generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/making-codegen-pluggable.html">Making Codegen Pluggable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/generating-code.html">Generating Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/decoupling-codegen-with-symbols.html">Decoupling Codegen with Symbols</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/using-the-semantic-model.html">Using the Semantic Model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guides/glossary.html">Glossary</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials/index.html">Tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/full-stack-tutorial.html">Full Stack Application</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../additional-specs/index.html">Additional specs</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../additional-specs/http-protocol-compliance-tests.html">HTTP Protocol Compliance Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../additional-specs/smoke-tests.html">Smoke Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../additional-specs/waiters.html">Waiters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../additional-specs/mqtt.html">MQTT Protocol Bindings</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../additional-specs/rules-engine/index.html">Rules engine</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../additional-specs/rules-engine/specification.html">Rules engine specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../additional-specs/rules-engine/parameters.html">Rules engine parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../additional-specs/rules-engine/standard-library.html">Rules engine standard library</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../additional-specs/protocols/index.html">Protocols</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../additional-specs/protocols/smithy-rpc-v2.html">Smithy RPC v2 CBOR protocol</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../aws/index.html">AWS integrations</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../aws/aws-core.html">AWS Core Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aws/aws-auth.html">AWS Authentication Traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aws/aws-endpoints-region.html">AWS Declarative Endpoint Traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aws/aws-iam.html">AWS IAM traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aws/amazon-apigateway.html">Amazon API Gateway traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aws/aws-cloudformation.html">AWS CloudFormation Traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aws/amazon-eventstream.html">Amazon Event Stream Specification</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../aws/protocols/index.html">AWS Protocols</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../aws/protocols/aws-restjson1-protocol.html">AWS restJson1 protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/protocols/aws-json-1_0-protocol.html">AWS JSON 1.0 protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/protocols/aws-json-1_1-protocol.html">AWS JSON 1.1 protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/protocols/aws-restxml-protocol.html">AWS restXml protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/protocols/aws-query-protocol.html">AWS query protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/protocols/aws-ec2-query-protocol.html">AWS EC2 query protocol</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../aws/customizations/index.html">AWS Service Customizations</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../aws/customizations/apigateway-customizations.html">Amazon API Gateway Customizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/customizations/glacier-customizations.html">Amazon Glacier Customizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/customizations/machinelearning-customizations.html">Amazon Machine Learning Customizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/customizations/s3-customizations.html">Amazon S3 Customizations</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../aws/rules-engine/index.html">AWS rules engine extensions</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../aws/rules-engine/built-ins.html">AWS rules engine built-ins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/rules-engine/library-functions.html">AWS rules engine library functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/rules-engine/auth-schemes.html">AWS rules engine authentication scheme validators</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Languages</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../languages/java/index.html">Java</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../languages/java/quickstart.html">Java Quickstart</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../languages/java/client/index.html">Client User Guide</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../languages/java/client/generating-clients.html">Generating Clients</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/java/client/configuration.html">Configuring Clients</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/java/client/customization.html">Customizing Client Behavior</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/java/client/plugins.html">Client Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/java/client/dynamic-client.html">Dynamic Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/java/client/codegen-integrations.html">Codegen Integrations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-java">Source code</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-java/tree/0.0.1/examples">Smithy Java Examples</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../languages/typescript/index.html">TypeScript</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../languages/typescript/quickstart.html">TypeScript Quickstart</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../languages/typescript/ts-ssdk/index.html">Server Generator for TypeScript</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../languages/typescript/ts-ssdk/introduction.html">Introduction to the Smithy Server Generator for TypeScript</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/typescript/ts-ssdk/handlers.html">Smithy Server Generator for TypeScript handlers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/typescript/ts-ssdk/validation.html">Smithy Server Generator for TypeScript validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/typescript/ts-ssdk/error-handling.html">Smithy Server Generator for TypeScript error handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/typescript/ts-ssdk/supported-endpoints.html">Smithy Server Generator for TypeScript supported endpoints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-typescript">Source code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/full-stack-tutorial.html">Smithy Full Stack Application</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../languages/rust/index.html">Rust</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://smithy-lang.github.io/smithy-rs/design/">Design Documentation</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-rs">Source code</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../languages/python/index.html">Python</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-python">Source code</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../languages/kotlin/index.html">Kotlin</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-kotlin">Source code</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../languages/golang/index.html">GoLang</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://github.com/aws/smithy-go">Source code</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../languages/scala/index.html">Scala</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://disneystreaming.github.io/smithy4s/">Documentation</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/disneystreaming/smithy4s">Source code</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/smithy-lang/smithy">Source code</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/smithy-lang/awesome-smithy">Awesome Smithy</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/smithy-lang/smithy-examples">Smithy Examples</a></li>
<li class="toctree-l1"><a class="reference external" href="https://smithy.io/1.0/">1.0 Documentation</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/awslabs/smithy/edit/main/docs/source-2.0/spec/http-bindings.rst" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <div class="section" id="http-bindings">
<span id="http-traits"></span><h1><span class="section-number">14. </span>HTTP bindings<a class="headerlink" href="#http-bindings" title="Permalink to this heading">#</a></h1>
<p>Smithy provides various HTTP binding traits that can be used by protocols to
explicitly configure HTTP request and response messages.</p>
<p>The members of an operation input, output, and errors MUST NOT be bound to
multiple HTTP message locations (e.g., a member cannot be bound to both a URI
label and to a header). Only top-level members of an operation's input, output,
and error structures are considered when serializing HTTP messages.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Violating <span class="target" id="index-0"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9110.html"><strong>HTTP specifications</strong></a> or relying on poorly-supported
HTTP functionality when defining HTTP bindings will limit interoperability
and likely lead to undefined behavior across Smithy implementations. For
example, avoid defining GET/DELETE requests with payloads, defining
response payloads for operations with a 204/205 status, etc.</p>
</div>
<div class="section" id="http-trait">
<span id="smithy-api-http-trait"></span><span id="id1"></span><h2><span class="section-number">14.1. </span><code class="docutils literal notranslate"><span class="pre">http</span></code> trait<a class="headerlink" href="#http-trait" title="Permalink to this heading">#</a></h2>
<dl class="docutils">
<dt>Summary</dt><dd>Configures the HTTP bindings of an operation.</dd>
<dt>Trait selector</dt><dd><code class="docutils literal notranslate"><span class="pre">operation</span></code></dd>
<dt>Value type</dt><dd><code class="docutils literal notranslate"><span class="pre">structure</span></code></dd>
</dl>
<p>The <code class="docutils literal notranslate"><span class="pre">http</span></code> trait is a structure that supports the following members:</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="25%" />
<col width="65%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#http-method"><span class="std std-ref">method</span></a></td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><strong>Required</strong>. The HTTP method of the operation.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#http-uri"><span class="std std-ref">uri</span></a></td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><strong>Required</strong>. The URI pattern of the operation. Labels defined in the
URI pattern are used to bind operation input members to the URI.</td>
</tr>
<tr class="row-even"><td>code</td>
<td><code class="docutils literal notranslate"><span class="pre">integer</span></code></td>
<td>The HTTP status code of a successful response. Defaults to <code class="docutils literal notranslate"><span class="pre">200</span></code> if
not provided. The provided value SHOULD be between 200 and 299, and
it MUST be between 100 and 999. Status codes that do not allow a body
like 204 and 205 SHOULD bind all output members to locations other than
the body of the response.</td>
</tr>
</tbody>
</table>
</div>
<p>The following example defines an operation that uses HTTP bindings:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="nt">@idempotent</span>
<span class="nt">@http</span>(<span class="py">method</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PUT&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/{bucketName}/{key}&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">code</span><span class="p">:</span><span class="w"> </span><span class="m">200</span>)
<span class="kd">operation </span><span class="nc">PutObject</span><span class="w"> </span>{
<span class="w">    </span><span class="py">input</span><span class="p">:</span><span class="w"> </span><span class="vc">PutObjectInput</span>
}

<span class="nt">@input</span>
<span class="kd">structure </span><span class="nc">PutObjectInput</span><span class="w"> </span>{
<span class="w">    </span><span class="c">// Sent in the URI label named &quot;key&quot;.</span>
<span class="w">    </span><span class="nt">@required</span>
<span class="w">    </span><span class="nt">@httpLabel</span>
<span class="w">    </span><span class="py">key</span><span class="p">:</span><span class="w"> </span><span class="vc">ObjectKey</span>

<span class="w">    </span><span class="c">// Sent in the URI label named &quot;bucketName&quot;.</span>
<span class="w">    </span><span class="nt">@required</span>
<span class="w">    </span><span class="nt">@httpLabel</span>
<span class="w">    </span><span class="py">bucketName</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>

<span class="w">    </span><span class="c">// Sent in the X-Foo header</span>
<span class="w">    </span><span class="nt">@httpHeader</span>(<span class="s2">&quot;X-Foo&quot;</span>)
<span class="w">    </span><span class="py">foo</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>

<span class="w">    </span><span class="c">// Sent in the query string as paramName</span>
<span class="w">    </span><span class="nt">@httpQuery</span>(<span class="s2">&quot;paramName&quot;</span>)
<span class="w">    </span><span class="py">someValue</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>

<span class="w">    </span><span class="c">// Sent in the body</span>
<span class="w">    </span><span class="py">data</span><span class="p">:</span><span class="w"> </span><span class="vc">MyBlob</span>

<span class="w">    </span><span class="c">// Sent in the body</span>
<span class="w">    </span><span class="py">additional</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}
</pre></div>
</div>
<div class="section" id="method">
<span id="http-method"></span><h3><span class="section-number">14.1.1. </span>method<a class="headerlink" href="#method" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">method</span></code> property defines the HTTP method of the operation (e.g., &quot;GET&quot;,
&quot;PUT&quot;, &quot;POST&quot;, &quot;DELETE&quot;, &quot;PATCH&quot;, etc). Smithy will use this value literally
and will perform no validation on the method. The <code class="docutils literal notranslate"><span class="pre">method</span></code> value SHOULD
match one of the definitions found in <span class="target" id="index-1"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9110.html#section-9.3"><strong>RFC 9110#section-9.3</strong></a>. This property
does not influence the safety or idempotency characteristics of an operation.</p>
</div>
<div class="section" id="uri">
<span id="http-uri"></span><h3><span class="section-number">14.1.2. </span>uri<a class="headerlink" href="#uri" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">uri</span></code> property defines the <em>request-target</em> of the operation in
<em>origin-form</em> as defined in <span class="target" id="index-2"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9112.html#section-3.2.1"><strong>RFC 9112#section-3.2.1</strong></a>. The URI is a simple
pattern that Smithy uses to match HTTP requests to operations and to bind
components of the request URI to fields in the operations's input structure.
<em class="dfn">Patterns</em> consist of literal characters that MUST be matched in the
request URI and labels which are used to insert named components into the
request URI.</p>
<p>The resolved absolute URI of an operation is formed by combining the URI of
the operation with the endpoint of the service. (that is, the host and any
base URL of where the service is deployed). For example, given a service
endpoint of <code class="docutils literal notranslate"><span class="pre">https://example.com/v1</span></code> and an operation pattern of
<code class="docutils literal notranslate"><span class="pre">/myresource</span></code>, the resolved absolute URI of the operation is
<code class="docutils literal notranslate"><span class="pre">https://example.com/v1/myresource</span></code>.</p>
<p>The value provided for the <code class="docutils literal notranslate"><span class="pre">uri</span></code> property MUST adhere to the following
constraints:</p>
<ol class="arabic simple">
<li>MUST start with &quot;/&quot;.</li>
<li>MUST NOT contain empty path segments (i.e., &quot;//&quot;).</li>
<li>MUST NOT contain a fragment (i.e., &quot;#&quot;).</li>
<li>MUST NOT end with &quot;?&quot;.</li>
<li>MUST NOT contain dot-segments (i.e., &quot;..&quot; and &quot;.&quot;).</li>
<li>MUST NOT case-sensitively conflict with other <code class="docutils literal notranslate"><span class="pre">http</span></code> / <code class="docutils literal notranslate"><span class="pre">uri</span></code>
properties.</li>
</ol>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@readonly</span>
<span class="nt">@http</span>(<span class="py">method</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;GET&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/foo/{baz}&quot;</span>)
<span class="kd">operation </span><span class="nc">GetService</span><span class="w"> </span>{
<span class="w">    </span><span class="py">output</span><span class="p">:</span><span class="w"> </span><span class="vc">GetServiceOutput</span>
}
</pre></div>
</div>
<div class="section" id="literal-character-sequences">
<h4><span class="section-number">14.1.2.1. </span>Literal character sequences<a class="headerlink" href="#literal-character-sequences" title="Permalink to this heading">#</a></h4>
<p>Patterns with no labels will match only requests containing the exact literal
characters declared in the pattern, with the exception of trailing slashes
which are always optional.</p>
<p>Given an endpoint of <code class="docutils literal notranslate"><span class="pre">https://yourhost</span></code> and a pattern of <code class="docutils literal notranslate"><span class="pre">/my/uri/path</span></code>:</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="40%" />
<col width="10%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Request URI</th>
<th class="head">Matches?</th>
<th class="head">Reason</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">https://yourhost/my/uri/path</span></code></td>
<td>Yes</td>
<td>Exact match</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">https://yourhost/my/uri/path/</span></code></td>
<td>Yes</td>
<td>Trailing slashes are ignored</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">https://yourhost/my/uri</span></code></td>
<td>No</td>
<td>Missing &quot;/path&quot;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">https://yourhost/my/uri/other</span></code></td>
<td>No</td>
<td>Found &quot;/other&quot; instead of &quot;/path&quot;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">https://yourhost/my/uri/path/other</span></code></td>
<td>No</td>
<td>Trailing segment &quot;/other&quot;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="labels">
<span id="http-uri-label"></span><h4><span class="section-number">14.1.2.2. </span>Labels<a class="headerlink" href="#labels" title="Permalink to this heading">#</a></h4>
<p>Patterns MAY contain label placeholders in the path. <em class="dfn">Labels</em> consist of
label name characters surrounded by open and closed braces (i.e.,
&quot;{label_name}&quot; is a label and <code class="docutils literal notranslate"><span class="pre">label_name</span></code> is the label name). The label
name corresponds to a top-level operation input structure member name. Every
label MUST have a corresponding input member, the input member MUST be marked
as <a class="reference internal" href="type-refinement-traits.html#required-trait"><span class="std std-ref">required trait</span></a>, the input member MUST have the <a class="reference internal" href="#httplabel-trait"><span class="std std-ref">httpLabel trait</span></a>,
and the input member MUST reference a string, byte, short, integer, long,
float, double, bigDecimal, bigInteger, boolean, or timestamp. Labels only
capture path segments.</p>
<p>Labels MUST adhere to the following constraints:</p>
<ol class="arabic simple">
<li>Labels MUST NOT appear in the query string.</li>
<li>Each label MUST span an entire path segment (e.g., &quot;/{foo}/bar&quot; is valid,
and &quot;/{foo}bar&quot; is invalid).</li>
</ol>
<p>A pattern of <code class="docutils literal notranslate"><span class="pre">/my/uri/{label}</span></code> will match any URI that begins with
<code class="docutils literal notranslate"><span class="pre">/my/uri/</span></code> followed by any string not including an additional path segment
(&quot;/&quot;).</p>
<p>Given a pattern of <code class="docutils literal notranslate"><span class="pre">/my/uri/{label}</span></code> and an endpoint of <code class="docutils literal notranslate"><span class="pre">http://yourhost</span></code>:</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="40%" />
<col width="10%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Request URI</th>
<th class="head">Matches?</th>
<th class="head">Reason</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri/foo</span></code></td>
<td>Yes</td>
<td>&quot;/my/uri/&quot; matches and &quot;foo&quot; is captured as <code class="docutils literal notranslate"><span class="pre">label</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri/foo/</span></code></td>
<td>Yes</td>
<td>&quot;/my/uri/&quot; matches and &quot;foo&quot; is captured as <code class="docutils literal notranslate"><span class="pre">label</span></code>. The trailing
&quot;/&quot; is ignored.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri/foo?query=bar</span></code></td>
<td>Yes</td>
<td>&quot;/my/uri/&quot; matches and &quot;foo&quot; is captured as <code class="docutils literal notranslate"><span class="pre">label</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri/foo#bar</span></code></td>
<td>Yes</td>
<td>&quot;/my/uri/&quot; matches and &quot;foo&quot; is captured as <code class="docutils literal notranslate"><span class="pre">label</span></code>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri/bar</span></code></td>
<td>Yes</td>
<td>&quot;/my/uri/&quot; matches and &quot;bar&quot; is captured as <code class="docutils literal notranslate"><span class="pre">label</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri</span></code></td>
<td>No</td>
<td>&quot;/my/uri&quot; matches but is missing a segment for <code class="docutils literal notranslate"><span class="pre">label</span></code>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri/foo/bar</span></code></td>
<td>No</td>
<td>Found a trailing segment &quot;/bar&quot;.</td>
</tr>
</tbody>
</table>
</div>
<p>Any number of labels can be included within a pattern, provided that they are
not immediately adjacent and do not have identical label names. Given a
pattern of <code class="docutils literal notranslate"><span class="pre">/my/uri/{label1}/{label2}</span></code> and an endpoint of
<code class="docutils literal notranslate"><span class="pre">http://yourhost</span></code>:</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="40%" />
<col width="10%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Request URI</th>
<th class="head">Matches?</th>
<th class="head">Reason</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri/foo/bar</span></code></td>
<td>Yes</td>
<td>Matches literal &quot;/my/uri/&quot;, &quot;foo&quot; is captured as <code class="docutils literal notranslate"><span class="pre">label1</span></code>, and &quot;bar&quot;
is captured as <code class="docutils literal notranslate"><span class="pre">label2</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri/bar/baz/</span></code></td>
<td>Yes</td>
<td>Matches literal &quot;/my/uri/&quot;, &quot;bar&quot; is captured as <code class="docutils literal notranslate"><span class="pre">label1</span></code>, and &quot;baz&quot;
is captured as <code class="docutils literal notranslate"><span class="pre">label2</span></code>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri/foo</span></code></td>
<td>No</td>
<td>Matches literal &quot;/my/uri/&quot; but is missing a segment for <code class="docutils literal notranslate"><span class="pre">label2</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri</span></code></td>
<td>No</td>
<td>Matches literal &quot;/my/uri/&quot; but is missing segments for <code class="docutils literal notranslate"><span class="pre">label1</span></code> and
<code class="docutils literal notranslate"><span class="pre">label2</span></code>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri/foo/bar/baz</span></code></td>
<td>No</td>
<td>Matches literal &quot;/my/uri/&quot;, &quot;bar&quot; is captured as <code class="docutils literal notranslate"><span class="pre">label1</span></code>, and &quot;baz&quot;
is captured as <code class="docutils literal notranslate"><span class="pre">label2</span></code>, but contains an additional segment &quot;baz&quot;.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="query-string-literals">
<h4><span class="section-number">14.1.2.3. </span>Query string literals<a class="headerlink" href="#query-string-literals" title="Permalink to this heading">#</a></h4>
<p>Components of the query string can be matched literally in the URI pattern.
The query string portion of a pattern MUST NOT contain labels.</p>
<p>Literals can be in the form of required keys without values. Given a pattern
of <code class="docutils literal notranslate"><span class="pre">/path?requiredKey</span></code> and an endpoint of <code class="docutils literal notranslate"><span class="pre">http://yourhost</span></code>:</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="40%" />
<col width="10%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Request URI</th>
<th class="head">Matches?</th>
<th class="head">Reason</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/path?requiredKey</span></code></td>
<td>Yes</td>
<td>Matches literal &quot;/path&quot; and contains a &quot;requiredKey&quot; query string
parameter.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/path?other&amp;requiredKey</span></code></td>
<td>Yes</td>
<td>Matches literal &quot;/path&quot; and contains a &quot;requiredKey&quot; query string
parameter.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/path</span></code></td>
<td>No</td>
<td>Matches literal &quot;/path&quot; but does not contain the &quot;requiredKey&quot; query
string parameter.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/path?</span></code></td>
<td>No</td>
<td>Matches literal &quot;/path&quot; but does not contain the &quot;requiredKey&quot; query
string parameter.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/path?otherKey</span></code></td>
<td>No</td>
<td>Matches literal &quot;/path&quot; but does not contain the &quot;requiredKey&quot; query
string parameter.</td>
</tr>
</tbody>
</table>
</div>
<p>Literal query string parameters can be matched with required key-value pairs.
Given a pattern of <code class="docutils literal notranslate"><span class="pre">/path?requiredKey=requiredValue</span></code> and an endpoint of
<code class="docutils literal notranslate"><span class="pre">http://yourhost</span></code>:</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="40%" />
<col width="10%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Request URI</th>
<th class="head">Matches?</th>
<th class="head">Reason</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/path?requiredKey=requiredValue</span></code></td>
<td>Yes</td>
<td>Matches literal &quot;/path&quot; and contains a query string parameter named
&quot;requiredKey&quot; with a value of &quot;requiredValue&quot;.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/path?other&amp;requiredKey=requiredValue</span></code></td>
<td>Yes</td>
<td>Matches literal &quot;/path&quot; and contains a query string parameter named
&quot;requiredKey&quot; with a value of &quot;requiredValue&quot;. &quot;other&quot; is disregarded
or bound to another input member.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/path</span></code></td>
<td>No</td>
<td>Does not contain a query string parameter named &quot;requiredKey&quot;.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/path?</span></code></td>
<td>No</td>
<td>Does not contain a query string parameter named &quot;requiredKey&quot;.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/path?requiredKey=otherValue</span></code></td>
<td>No</td>
<td>Contains a query string parameter named &quot;requiredKey&quot; but its value
is not &quot;requiredValue&quot;.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="greedy-labels">
<span id="id2"></span><h4><span class="section-number">14.1.2.4. </span>Greedy labels<a class="headerlink" href="#greedy-labels" title="Permalink to this heading">#</a></h4>
<p>A <em class="dfn">greedy label</em> is a label suffixed with the <code class="docutils literal notranslate"><span class="pre">+</span></code> qualifier that can be
used to match more than one path segment. At most, one greedy label may exist
in any path pattern, and if present, it SHOULD be the last label in the pattern.
Greedy labels MUST be bound to a string shape.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Servers implementing <a class="reference internal" href="#specificity-routing"><span class="std std-ref">Specificity Routing</span></a> MAY support more than one greedy label and
not require it to be the last label in the pattern. The validation
events are therefore emitted as <code class="docutils literal notranslate"><span class="pre">DANGER</span></code> and can
suppressed. Most servers don't support having more than one greedy
label. Make sure that your server supports it and test that works
as expected before suppressing those events.</p>
</div>
<p>Given a pattern of <code class="docutils literal notranslate"><span class="pre">/my/uri/{label+}</span></code> and an endpoint of <code class="docutils literal notranslate"><span class="pre">http://yourhost</span></code>:</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="40%" />
<col width="10%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Request URI</th>
<th class="head">Matches?</th>
<th class="head">Reason</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri/foo/bar</span></code></td>
<td>Yes</td>
<td>Matches literal &quot;/my/uri/&quot;, and &quot;foo/bar&quot; is captured as <code class="docutils literal notranslate"><span class="pre">label</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri/bar/baz/</span></code></td>
<td>Yes</td>
<td>Matches literal &quot;/my/uri/&quot;, and &quot;bar/baz&quot; is captured as <code class="docutils literal notranslate"><span class="pre">label</span></code>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri/foo/bar/baz</span></code></td>
<td>Yes</td>
<td>Matches literal &quot;/my/uri/&quot;, and &quot;foo/bar/baz&quot; is captured as <code class="docutils literal notranslate"><span class="pre">label</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/my/uri</span></code></td>
<td>No</td>
<td>Matches literal &quot;/my/uri/&quot; but does not contain a segment to match
<code class="docutils literal notranslate"><span class="pre">label</span></code>.</td>
</tr>
</tbody>
</table>
</div>
<p>Greedy matching can be used to capture the whole URI to a label, which results
in every request for a particular HTTP method being captured. For example, this
can be modeled with a pattern of <code class="docutils literal notranslate"><span class="pre">/{label+}</span></code>.</p>
<p>Segments in the middle of a URI can be captured using greedy labels. Greedy
labels match greedily: they will match the longest possible string. Given a
pattern of <code class="docutils literal notranslate"><span class="pre">/prefix/{label+}/suffix</span></code> and an endpoint of <code class="docutils literal notranslate"><span class="pre">https://yourhost</span></code>:</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="40%" />
<col width="10%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Request URI</th>
<th class="head">Matches?</th>
<th class="head">Reason</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/prefix/foo/suffix</span></code></td>
<td>Yes</td>
<td>Matches literal &quot;/prefix&quot;, captures &quot;foo&quot; in greedy <code class="docutils literal notranslate"><span class="pre">label</span></code>, and
matches literal &quot;/suffix&quot;.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/prefix/foo/bar/suffix</span></code></td>
<td>Yes</td>
<td>Matches literal &quot;/prefix&quot;, captures &quot;foo/bar&quot; in greedy <code class="docutils literal notranslate"><span class="pre">label</span></code>, and
matches literal &quot;/suffix&quot;.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/prefix/foo/bar</span></code></td>
<td>No</td>
<td>Matches literal &quot;/prefix&quot;, but does not contain the trailing literal
&quot;/suffix&quot;.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/foo/bar/suffix</span></code></td>
<td>No</td>
<td>Does not match the literal &quot;/prefix&quot;.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/prefix/foo/suffix/bar/suffix</span></code></td>
<td>Yes</td>
<td>Matches literal &quot;/prefix&quot;, captures &quot;foo/suffix/bar&quot; in greedy
<code class="docutils literal notranslate"><span class="pre">label</span></code>, and matches literal &quot;/suffix&quot;.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">http://yourhost/prefix/suffix</span></code></td>
<td>No</td>
<td>Matches literal &quot;/prefix&quot;, matches literal &quot;/suffix&quot;, but does not
contain a segment to match <code class="docutils literal notranslate"><span class="pre">label</span></code>.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="pattern-validation-and-conflict-avoidance">
<h4><span class="section-number">14.1.2.5. </span>Pattern Validation and Conflict Avoidance<a class="headerlink" href="#pattern-validation-and-conflict-avoidance" title="Permalink to this heading">#</a></h4>
<p>Smithy validates the patterns within a service against each other to
ensure that no two patterns conflict with each other for the same HTTP
method. The following rules are in place:</p>
<ol class="arabic simple">
<li>All labels MUST be delimited by '/' characters.<ul>
<li><code class="docutils literal notranslate"><span class="pre">/{foo}/{bar}</span></code> is legal</li>
<li><code class="docutils literal notranslate"><span class="pre">/{foo}{bar}</span></code> is illegal</li>
<li><code class="docutils literal notranslate"><span class="pre">/{foo}bar/{bar}</span></code> is illegal</li>
<li><code class="docutils literal notranslate"><span class="pre">/{foo}a{bar}</span></code> is illegal</li>
</ul>
</li>
<li>At most, one greedy label MAY exist per pattern.<ul>
<li><code class="docutils literal notranslate"><span class="pre">/{foo}/{bar+}</span></code> is legal</li>
<li><code class="docutils literal notranslate"><span class="pre">/{foo+}/bar/{baz+}</span></code> is illegal</li>
</ul>
</li>
<li>If present, a greedy pattern SHOULD be the last label in a pattern.<ul>
<li><code class="docutils literal notranslate"><span class="pre">/{foo}/{bar+}</span></code> is legal</li>
<li><code class="docutils literal notranslate"><span class="pre">/{foo+}/bar/{baz}</span></code> is illegal</li>
</ul>
</li>
<li>Patterns MUST NOT be equivalent if they share a host.<ul>
<li>Pattern <code class="docutils literal notranslate"><span class="pre">/foo/bar</span></code> and <code class="docutils literal notranslate"><span class="pre">/foo/bar</span></code> conflict.</li>
<li>Pattern <code class="docutils literal notranslate"><span class="pre">/foo/{bar}</span></code> and <code class="docutils literal notranslate"><span class="pre">/foo/{baz}</span></code> conflict regardless of any
constraint traits on the label members.</li>
</ul>
</li>
<li>A label and a literal MAY both occupy the same segment in patterns
that are equivalent to that point if they share a host. Server
implementations MUST route ambiguous requests to the operation with
the most specific URI path (see <a class="reference internal" href="#specificity-routing"><span class="std std-ref">Specificity Routing</span></a>.)</li>
</ol>
</div>
<div class="section" id="specificity-routing">
<span id="id3"></span><h4><span class="section-number">14.1.2.6. </span>Specificity Routing<a class="headerlink" href="#specificity-routing" title="Permalink to this heading">#</a></h4>
<p>Specificity routing allows Smithy compliant servers to support
ambiguous URI patterns and resolve requests at runtime. The algorithm
chooses the <em>best-ranked</em> match using the specificity of the path and
literal query parameters when present. The core of the algorithm can
be loosely defined as “a path with a non-label segment is considered
more specific than one with a label segment in the same
position. Similarly a segment with a non-greedy label is considered
more specific than a segment with a greedy label segment in the same
position.”</p>
<p>The following algorithm is used to compare two paths</p>
<p>Given two ambiguous URI patterns <code class="docutils literal notranslate"><span class="pre">A</span></code> and <code class="docutils literal notranslate"><span class="pre">B</span></code> with segments <code class="docutils literal notranslate"><span class="pre">[A0,</span>
<span class="pre">…,</span> <span class="pre">An]</span></code> and <code class="docutils literal notranslate"><span class="pre">[B0,</span> <span class="pre">…,</span> <span class="pre">Bm]</span></code> with query string literals <code class="docutils literal notranslate"><span class="pre">[AQ0,</span> <span class="pre">…,</span>
<span class="pre">AQp]</span></code> and <code class="docutils literal notranslate"><span class="pre">[BQ0,</span> <span class="pre">…,</span> <span class="pre">BQq]</span></code> (with both <code class="docutils literal notranslate"><span class="pre">p</span></code> and <code class="docutils literal notranslate"><span class="pre">q</span></code> possibly zero,
i.e., without query string literals), the following steps are taken to
compare them, for each index <code class="docutils literal notranslate"><span class="pre">x</span></code> from <code class="docutils literal notranslate"><span class="pre">0</span></code> to <code class="docutils literal notranslate"><span class="pre">min(n,</span> <span class="pre">m)</span></code></p>
<ol class="arabic simple">
<li>If <code class="docutils literal notranslate"><span class="pre">A[x]</span></code> and <code class="docutils literal notranslate"><span class="pre">B[x]</span></code> are both literals then continue (the
literal values have to be equal otherwise the patterns are not
ambiguous)</li>
<li>If <code class="docutils literal notranslate"><span class="pre">A[x]</span></code> is a literal and <code class="docutils literal notranslate"><span class="pre">B[x]</span></code> is a label then <code class="docutils literal notranslate"><span class="pre">A</span></code> is more
specific than <code class="docutils literal notranslate"><span class="pre">B</span></code>,</li>
<li>If <code class="docutils literal notranslate"><span class="pre">A[x]</span></code> is a non-greedy label and <code class="docutils literal notranslate"><span class="pre">B[x]</span></code> is a greedy label
then <code class="docutils literal notranslate"><span class="pre">A</span></code> is more specific than <code class="docutils literal notranslate"><span class="pre">B</span></code></li>
<li>If <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">&gt;</span> <span class="pre">m</span></code> then <code class="docutils literal notranslate"><span class="pre">A</span></code> is more specific than <code class="docutils literal notranslate"><span class="pre">B</span></code></li>
<li>if <code class="docutils literal notranslate"><span class="pre">p</span> <span class="pre">&gt;</span> <span class="pre">q</span></code> then <code class="docutils literal notranslate"><span class="pre">A</span></code> is more specific than <code class="docutils literal notranslate"><span class="pre">B</span></code></li>
</ol>
<p><strong>Routing Example 1</strong></p>
<p>Given a service with the following URI patterns for the same method</p>
<ol class="arabic simple">
<li><code class="docutils literal notranslate"><span class="pre">/abc/bcd/{xyz}</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">/abc/{xyz}/cde</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">/{xyz}/bcd/cde</span></code></li>
</ol>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="30%" />
<col width="10%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Request URI</th>
<th class="head">Pattern Matched</th>
<th class="head">Reason</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">/abc/bcd/cde</span></code></td>
<td>Pattern 1</td>
<td>Ambiguous with patterns 2 and 3. The literal <code class="docutils literal notranslate"><span class="pre">bcd</span></code> is more
specific than the label <code class="docutils literal notranslate"><span class="pre">{xyz}</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">/abc/foo/cde</span></code></td>
<td>Pattern 2</td>
<td>Ambiguous with pattern 3. The literal segment <code class="docutils literal notranslate"><span class="pre">abc</span></code> is more
specific than the label <code class="docutils literal notranslate"><span class="pre">{xyz}</span></code>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">/foo/bcd/cde</span></code></td>
<td>Pattern 3</td>
<td>Non-ambiguous.</td>
</tr>
</tbody>
</table>
</div>
<p><strong>Routing Example 2</strong></p>
<p>Given a service with the following URI patterns for the same method</p>
<ol class="arabic simple">
<li><code class="docutils literal notranslate"><span class="pre">/abc/bcd/{xyz}</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">/abc/{xyz}/cde</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">/{xyz}/bcd/cde?def=efg</span></code></li>
</ol>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="30%" />
<col width="10%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Request URI</th>
<th class="head">Pattern Matched</th>
<th class="head">Reason</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">/abc/bcd/cde?def=efg</span></code></td>
<td>Pattern 1</td>
<td>Ambiguous with numbers 2 and 3. The literal segment <code class="docutils literal notranslate"><span class="pre">abc</span></code> is
more specific than the label <code class="docutils literal notranslate"><span class="pre">{xyz}</span></code>. Notice that path
specificity wins over query string literals</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">/abc/foo/cde?def=efg</span></code></td>
<td>Pattern 2</td>
<td>Ambiguous with pattern 3. The literal segment <code class="docutils literal notranslate"><span class="pre">abc</span></code> is more
specific than the label <code class="docutils literal notranslate"><span class="pre">{xyz}</span></code>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">/foo/bcd/cde?def=efg</span></code></td>
<td>Pattern 3</td>
<td>Non-ambiguous.</td>
</tr>
</tbody>
</table>
</div>
<p><strong>Routing Example 3</strong></p>
<p>Given a service with the following URI patterns for the same method</p>
<ol class="arabic simple">
<li><code class="docutils literal notranslate"><span class="pre">/abc/{xyz+}/bcd</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">/abc/{xyz+}</span></code></li>
</ol>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="30%" />
<col width="10%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Request URI</th>
<th class="head">Pattern Matched</th>
<th class="head">Reason</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">/abc/foo/bar/bcd</span></code></td>
<td>Pattern 1</td>
<td>Ambiguous with numbers 2. The literal segment <code class="docutils literal notranslate"><span class="pre">bcd</span></code> is
more specific than a non-segment.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">/abc/foo/bar/baz</span></code></td>
<td>Pattern 2</td>
<td>Non-ambiguous.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="section" id="httperror-trait">
<span id="smithy-api-httperror-trait"></span><span id="id4"></span><h2><span class="section-number">14.2. </span><code class="docutils literal notranslate"><span class="pre">httpError</span></code> trait<a class="headerlink" href="#httperror-trait" title="Permalink to this heading">#</a></h2>
<dl class="docutils">
<dt>Summary</dt><dd>Defines an HTTP response code for an operation error.</dd>
<dt>Trait selector</dt><dd><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>structure[trait|error]
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">httpError</span></code> trait can only be applied to <a class="reference internal" href="aggregate-types.html#structure"><span class="std std-ref">structure</span></a>
shapes that also have the <a class="reference internal" href="type-refinement-traits.html#error-trait"><span class="std std-ref">error trait</span></a>.</p>
</dd>
<dt>Value type</dt><dd><code class="docutils literal notranslate"><span class="pre">integer</span></code> value representing the HTTP response status code
(for example, <code class="docutils literal notranslate"><span class="pre">404</span></code>). The provided value SHOULD be between 400 and 499
for &quot;client&quot; errors or between 500 and 599 for &quot;server&quot; errors.</dd>
</dl>
<p>The following example defines an error with an HTTP status code of <code class="docutils literal notranslate"><span class="pre">404</span></code>.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@error</span>(<span class="s2">&quot;client&quot;</span>)
<span class="nt">@httpError</span>(<span class="m">404</span>)
<span class="kd">structure </span><span class="nc">MyError</span><span class="w"> </span>{}
</pre></div>
</div>
<div class="section" id="default-http-status-codes">
<h3><span class="section-number">14.2.1. </span>Default HTTP status codes<a class="headerlink" href="#default-http-status-codes" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">httpError</span></code> trait is used to set a <em>custom</em> HTTP response status code.
By default, error structures with no <code class="docutils literal notranslate"><span class="pre">httpError</span></code> trait use the default
HTTP status code of the <a class="reference internal" href="type-refinement-traits.html#error-trait"><span class="std std-ref">error trait</span></a>.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">400</span></code> is used for &quot;client&quot; errors</li>
<li><code class="docutils literal notranslate"><span class="pre">500</span></code> is used for &quot;server&quot; errors</li>
</ul>
</div>
</div>
<div class="section" id="httpheader-trait">
<span id="smithy-api-httpheader-trait"></span><span id="id5"></span><h2><span class="section-number">14.3. </span><code class="docutils literal notranslate"><span class="pre">httpHeader</span></code> trait<a class="headerlink" href="#httpheader-trait" title="Permalink to this heading">#</a></h2>
<dl class="docutils">
<dt>Summary</dt><dd>Binds a structure member to an HTTP header.</dd>
<dt>Trait selector</dt><dd><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>structure &gt; :test(member &gt; :test(boolean, number, string, timestamp,
        list &gt; member &gt; :test(boolean, number, string, timestamp)))
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">httpHeader</span></code> trait can be applied to <code class="docutils literal notranslate"><span class="pre">structure</span></code> members that
target a <code class="docutils literal notranslate"><span class="pre">boolean</span></code>, <code class="docutils literal notranslate"><span class="pre">number</span></code>, <code class="docutils literal notranslate"><span class="pre">string</span></code>, or <code class="docutils literal notranslate"><span class="pre">timestamp</span></code>; or a
<code class="docutils literal notranslate"><span class="pre">structure</span></code> member that targets a list of these types.</p>
</dd>
<dt>Value type</dt><dd><code class="docutils literal notranslate"><span class="pre">string</span></code> value defining a valid HTTP header field name according to
<span class="target" id="index-3"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9110.html#section-5.1"><strong>RFC 9110#section-5.1</strong></a>. The value MUST NOT be empty and MUST be
case-insensitively unique across all other members of the structure.</dd>
<dt>Conflicts with</dt><dd><a class="reference internal" href="#httplabel-trait"><span class="std std-ref">httpLabel trait</span></a>,
<a class="reference internal" href="#httpquery-trait"><span class="std std-ref">httpQuery trait</span></a>,
<a class="reference internal" href="#httpqueryparams-trait"><span class="std std-ref">httpQueryParams trait</span></a>,
<a class="reference internal" href="#httpprefixheaders-trait"><span class="std std-ref">httpPrefixHeaders trait</span></a>,
<a class="reference internal" href="#httppayload-trait"><span class="std std-ref">httpPayload trait</span></a>,
<a class="reference internal" href="#httpresponsecode-trait"><span class="std std-ref">httpResponseCode trait</span></a></dd>
</dl>
<div class="section" id="httpheader-serialization-rules">
<h3><span class="section-number">14.3.1. </span><code class="docutils literal notranslate"><span class="pre">httpHeader</span></code> serialization rules:<a class="headerlink" href="#httpheader-serialization-rules" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li>When a <a class="reference internal" href="aggregate-types.html#list"><span class="std std-ref">list</span></a> shape is targeted, each member of the shape is
serialized as a separate HTTP header either by concatenating the values
with a comma on a single line or by serializing each header value on its
own line.</li>
<li><code class="docutils literal notranslate"><span class="pre">boolean</span></code> values are serialized as <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">string</span></code> values with a <a class="reference internal" href="protocol-traits.html#mediatype-trait"><span class="std std-ref">mediaType trait</span></a> are always base64 encoded.</li>
<li><code class="docutils literal notranslate"><span class="pre">timestamp</span></code> values are serialized using the <code class="docutils literal notranslate"><span class="pre">http-date</span></code>
format by default, as defined in the <code class="docutils literal notranslate"><span class="pre">IMF-fixdate</span></code> production of
<span class="target" id="index-4"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9110.html#section-5.6.7"><strong>RFC 9110#section-5.6.7</strong></a>. The <a class="reference internal" href="protocol-traits.html#timestampformat-trait"><span class="std std-ref">timestampFormat trait</span></a> MAY be used
to use a custom serialization format.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">While there is no limit placed on the length of an HTTP header field, many
HTTP client and server implementations enforce limits in practice.
Carefully consider the maximum allowed length of each member that is bound
to an HTTP header.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">httpHeader</span></code> is only considered when applied to top-level members of an
operation's input, output, or error structures. This trait has no meaning
in any other context and is simply ignored.</p>
</div>
</div>
<div class="section" id="restricted-http-headers">
<span id="restricted-headers"></span><h3><span class="section-number">14.3.2. </span>Restricted HTTP headers<a class="headerlink" href="#restricted-http-headers" title="Permalink to this heading">#</a></h3>
<p>Various HTTP headers are highly discouraged for the <code class="docutils literal notranslate"><span class="pre">httpHeader</span></code> and
<code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code> traits.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Header</th>
<th class="head">Reason</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Authorization</td>
<td>This header should be populated by
<a class="reference internal" href="authentication-traits.html#authdefinition-trait"><span class="std std-ref">authentication traits</span></a>.</td>
</tr>
<tr class="row-odd"><td>Connection</td>
<td>This is controlled at a lower level by the HTTP client or server.</td>
</tr>
<tr class="row-even"><td>Content-Length</td>
<td>HTTP clients and servers are responsible for providing a
Content-Length header.</td>
</tr>
<tr class="row-odd"><td>Expect</td>
<td>This is controlled at a lower level by the HTTP client.</td>
</tr>
<tr class="row-even"><td>Host</td>
<td>The Host header is controlled by the HTTP client, not the model.</td>
</tr>
<tr class="row-odd"><td>Max-Forwards</td>
<td>This is controlled at a lower level by the HTTP client.</td>
</tr>
<tr class="row-even"><td>Proxy-Authenticate</td>
<td>This header should be populated by
<a class="reference internal" href="authentication-traits.html#authdefinition-trait"><span class="std std-ref">authentication traits</span></a>.</td>
</tr>
<tr class="row-odd"><td>Server</td>
<td>The Server header is controlled by the HTTP server, not the model.</td>
</tr>
<tr class="row-even"><td>TE</td>
<td>This is controlled at a lower level by the HTTP client and server.</td>
</tr>
<tr class="row-odd"><td>Trailer</td>
<td>This is controlled at a lower level by the HTTP client and server.</td>
</tr>
<tr class="row-even"><td>Transfer-Encoding</td>
<td>This is controlled at a lower level by the HTTP client and server.</td>
</tr>
<tr class="row-odd"><td>Upgrade</td>
<td>This is controlled at a lower level by the HTTP server.</td>
</tr>
<tr class="row-even"><td>User-Agent</td>
<td>Setting a User-Agent is the responsibility of an HTTP client.</td>
</tr>
<tr class="row-odd"><td>WWW-Authenticate</td>
<td>This header should be populated by
<a class="reference internal" href="authentication-traits.html#authdefinition-trait"><span class="std std-ref">authentication traits</span></a>.</td>
</tr>
<tr class="row-even"><td>X-Forwarded-For</td>
<td>X-Forwarded-For is an implementation detail of HTTP that does not
need to be modeled.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="httplabel-trait">
<span id="smithy-api-httplabel-trait"></span><span id="id6"></span><h2><span class="section-number">14.4. </span><code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> trait<a class="headerlink" href="#httplabel-trait" title="Permalink to this heading">#</a></h2>
<dl class="docutils">
<dt>Summary</dt><dd>Binds an operation input structure member to an
<a class="reference internal" href="#http-uri-label"><span class="std std-ref">HTTP label</span></a> so that it is used as part of an
HTTP request URI.</dd>
<dt>Trait selector</dt><dd><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>structure &gt; member[trait|required] :test(&gt; :test(string, number, boolean, timestamp))
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> trait can be applied to <code class="docutils literal notranslate"><span class="pre">structure</span></code> members marked
with the <a class="reference internal" href="type-refinement-traits.html#required-trait"><span class="std std-ref">required trait</span></a> that target a <code class="docutils literal notranslate"><span class="pre">string</span></code>, <code class="docutils literal notranslate"><span class="pre">number</span></code>,
<code class="docutils literal notranslate"><span class="pre">boolean</span></code>, or <code class="docutils literal notranslate"><span class="pre">timestamp</span></code>.</p>
</dd>
<dt>Value type</dt><dd>Annotation trait.</dd>
<dt>Conflicts with</dt><dd><a class="reference internal" href="#httpheader-trait"><span class="std std-ref">httpHeader trait</span></a>,
<a class="reference internal" href="#httpquery-trait"><span class="std std-ref">httpQuery trait</span></a>,
<a class="reference internal" href="#httpqueryparams-trait"><span class="std std-ref">httpQueryParams trait</span></a>,
<a class="reference internal" href="#httpprefixheaders-trait"><span class="std std-ref">httpPrefixHeaders trait</span></a>,
<a class="reference internal" href="#httppayload-trait"><span class="std std-ref">httpPayload trait</span></a>,
<a class="reference internal" href="#httpresponsecode-trait"><span class="std std-ref">httpResponseCode trait</span></a></dd>
</dl>
<p>The following example defines an operation that send an HTTP label named
<code class="docutils literal notranslate"><span class="pre">foo</span></code> as part of the URI of an HTTP request:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="nt">@readonly</span>
<span class="nt">@http</span>(<span class="py">method</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;GET&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/{foo}&quot;</span>)
<span class="kd">operation </span><span class="nc">GetStatus</span><span class="w"> </span>{
<span class="w">    </span><span class="py">input</span><span class="p">:</span><span class="w"> </span><span class="vc">GetStatusInput</span>
<span class="w">    </span><span class="py">output</span><span class="p">:</span><span class="w"> </span><span class="vc">GetStatusOutput</span>
}

<span class="nt">@input</span>
<span class="kd">structure </span><span class="nc">GetStatusInput</span><span class="w"> </span>{
<span class="w">    </span><span class="nt">@required</span>
<span class="w">    </span><span class="nt">@httpLabel</span>
<span class="w">    </span><span class="py">foo</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}
</pre></div>
</div>
<div class="section" id="relationship-to-http-trait">
<h3><span class="section-number">14.4.1. </span>Relationship to <a class="reference internal" href="#http-trait"><span class="std std-ref">http trait</span></a><a class="headerlink" href="#relationship-to-http-trait" title="Permalink to this heading">#</a></h3>
<p>When a structure is used as the input of an operation, any member of the
structure with the <code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> trait MUST have a corresponding
<a class="reference internal" href="#http-uri-label"><span class="std std-ref">URI label</span></a> with the same name as the member.
<code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> traits are ignored when serializing operation output or errors.</p>
</div>
<div class="section" id="applying-the-httplabel-trait-to-members">
<h3><span class="section-number">14.4.2. </span>Applying the <code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> trait to members<a class="headerlink" href="#applying-the-httplabel-trait-to-members" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> can only be applied to structure members that are marked as
<a class="reference internal" href="type-refinement-traits.html#required-trait"><span class="std std-ref">required</span></a>.</li>
<li>If the corresponding URI label in the operation is not greedy, then the
<code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> trait MUST target a member that targets a <code class="docutils literal notranslate"><span class="pre">string</span></code>,
<code class="docutils literal notranslate"><span class="pre">byte</span></code>, <code class="docutils literal notranslate"><span class="pre">short</span></code>, <code class="docutils literal notranslate"><span class="pre">integer</span></code>, <code class="docutils literal notranslate"><span class="pre">long</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, <code class="docutils literal notranslate"><span class="pre">double</span></code>,
<code class="docutils literal notranslate"><span class="pre">bigDecimal</span></code>, <code class="docutils literal notranslate"><span class="pre">bigInteger</span></code>, <code class="docutils literal notranslate"><span class="pre">boolean</span></code>, or <code class="docutils literal notranslate"><span class="pre">timestamp</span></code>.</li>
<li>If the corresponding URI label in the operation is greedy, then the
<code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> trait MUST target a member that targets a <code class="docutils literal notranslate"><span class="pre">string</span></code> shape.</li>
</ul>
</div>
<div class="section" id="httplabel-serialization-rules">
<h3><span class="section-number">14.4.3. </span><code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> serialization rules<a class="headerlink" href="#httplabel-serialization-rules" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">boolean</span></code> values are serialized as <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">timestamp</span></code> values are serialized as an <span class="target" id="index-5"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3339.html"><strong>RFC 3339</strong></a> string by default
(for example, <code class="docutils literal notranslate"><span class="pre">1985-04-12T23:20:50.52Z</span></code>, and with percent-encoding,
<code class="docutils literal notranslate"><span class="pre">1985-04-12T23%3A20%3A50.52Z</span></code>). The <a class="reference internal" href="protocol-traits.html#timestampformat-trait"><span class="std std-ref">timestampFormat trait</span></a>
MAY be used to use a custom serialization format.</li>
<li>Characters not defined as unreserved by <span class="target" id="index-6"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3986.html#section-2.3"><strong>RFC 3986 section 2.3</strong></a>
MUST be <span class="target" id="index-7"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3986.html#section-2.1"><strong>percent-encoded</strong></a>. That is, all characters except for
alphanumerics and <code class="docutils literal notranslate"><span class="pre">-._~</span></code>.</li>
<li>However, if the label is greedy, then &quot;/&quot; MUST NOT be percent-encoded
because greedy labels are meant to span multiple path segments.</li>
</ul>
</div>
<div class="section" id="httplabel-is-only-used-on-top-level-input">
<h3><span class="section-number">14.4.4. </span><code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> is only used on top-level input<a class="headerlink" href="#httplabel-is-only-used-on-top-level-input" title="Permalink to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> is only considered when applied to top-level members of an
operation's input structure. This trait has no meaning in any other context and
is simply ignored.</p>
</div>
</div>
<div class="section" id="httppayload-trait">
<span id="smithy-api-httppayload-trait"></span><span id="id7"></span><h2><span class="section-number">14.5. </span><code class="docutils literal notranslate"><span class="pre">httpPayload</span></code> trait<a class="headerlink" href="#httppayload-trait" title="Permalink to this heading">#</a></h2>
<dl class="docutils">
<dt>Summary</dt><dd>Binds a single structure member to the body of an HTTP message.</dd>
<dt>Trait selector</dt><dd><p><code class="docutils literal notranslate"><span class="pre">structure</span> <span class="pre">&gt;</span> <span class="pre">member</span></code></p>
<p><em>Any structure member</em></p>
</dd>
<dt>Value type</dt><dd>Annotation trait.</dd>
<dt>Conflicts with</dt><dd><a class="reference internal" href="#httplabel-trait"><span class="std std-ref">httpLabel trait</span></a>, <a class="reference internal" href="#httpquery-trait"><span class="std std-ref">httpQuery trait</span></a>, <a class="reference internal" href="#httpqueryparams-trait"><span class="std std-ref">httpQueryParams trait</span></a>,
<a class="reference internal" href="#httpheader-trait"><span class="std std-ref">httpHeader trait</span></a>, <a class="reference internal" href="#httpprefixheaders-trait"><span class="std std-ref">httpPrefixHeaders trait</span></a>,
<a class="reference internal" href="#httpresponsecode-trait"><span class="std std-ref">httpResponseCode trait</span></a></dd>
<dt>Structurally exclusive</dt><dd>Only a single structure member can be bound to <code class="docutils literal notranslate"><span class="pre">httpPayload</span></code>.</dd>
</dl>
<p>The following example defines an operation that returns a <code class="docutils literal notranslate"><span class="pre">blob</span></code> of binary
data in a response:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="nt">@readonly</span>
<span class="nt">@http</span>(<span class="py">method</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;GET&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/random-binary-data&quot;</span>)
<span class="kd">operation </span><span class="nc">GetRandomBinaryData</span><span class="w"> </span>{
<span class="w">    </span><span class="py">input</span><span class="p">:</span><span class="w"> </span><span class="vc">GetRandomBinaryDataInput</span>
<span class="w">    </span><span class="py">output</span><span class="p">:</span><span class="w"> </span><span class="vc">GetRandomBinaryDataOutput</span>
}

<span class="nt">@input</span>
<span class="kd">structure </span><span class="nc">GetRandomBinaryDataInput</span><span class="w"> </span>{}

<span class="nt">@output</span>
<span class="kd">structure </span><span class="nc">GetRandomBinaryDataOutput</span><span class="w"> </span>{
<span class="w">    </span><span class="nt">@required</span>
<span class="w">    </span><span class="nt">@httpHeader</span>(<span class="s2">&quot;Content-Type&quot;</span>)
<span class="w">    </span><span class="py">contentType</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>

<span class="w">    </span><span class="nt">@httpPayload</span>
<span class="w">    </span><span class="py">content</span><span class="p">:</span><span class="w"> </span><span class="vc">Blob</span>
}
</pre></div>
</div>
<div class="section" id="protocol-specific-document-payloads">
<span id="http-protocol-document-payloads"></span><h3><span class="section-number">14.5.1. </span>Protocol-specific document payloads<a class="headerlink" href="#protocol-specific-document-payloads" title="Permalink to this heading">#</a></h3>
<p>By default, all structure members that are not bound as part of the HTTP
message are serialized in a protocol-specific document sent in the body of
the message (e.g., a JSON object). The <code class="docutils literal notranslate"><span class="pre">httpPayload</span></code> trait can be used to
bind a single top-level operation input, output, or error structure member to
the body of the HTTP message. Multiple members of the same structure MUST NOT
be bound to <code class="docutils literal notranslate"><span class="pre">httpPayload</span></code>.</p>
</div>
<div class="section" id="binding-members-to-httppayload">
<h3><span class="section-number">14.5.2. </span>Binding members to <code class="docutils literal notranslate"><span class="pre">httpPayload</span></code><a class="headerlink" href="#binding-members-to-httppayload" title="Permalink to this heading">#</a></h3>
<p>If the <code class="docutils literal notranslate"><span class="pre">httpPayload</span></code> trait is present on the structure referenced by the
input of an operation, then all other structure members MUST be bound with
the <a class="reference internal" href="#httplabel-trait"><span class="std std-ref">httpLabel trait</span></a>, <a class="reference internal" href="#httpheader-trait"><span class="std std-ref">httpHeader trait</span></a>,
<a class="reference internal" href="#httpprefixheaders-trait"><span class="std std-ref">httpPrefixHeaders trait</span></a>, <a class="reference internal" href="#httpqueryparams-trait"><span class="std std-ref">httpQueryParams trait</span></a>, or <a class="reference internal" href="#httpquery-trait"><span class="std std-ref">httpQuery trait</span></a>.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">httpPayload</span></code> trait is present on the structure referenced by the
output of an operation or a structure targeted by the <a class="reference internal" href="type-refinement-traits.html#error-trait"><span class="std std-ref">error trait</span></a>,
then all other structure members MUST be bound to a <a class="reference internal" href="#httpheader-trait"><span class="std std-ref">httpHeader trait</span></a>
or <a class="reference internal" href="#httpprefixheaders-trait"><span class="std std-ref">httpPrefixHeaders trait</span></a>.</p>
</div>
<div class="section" id="serialization-rules">
<h3><span class="section-number">14.5.3. </span>Serialization rules<a class="headerlink" href="#serialization-rules" title="Permalink to this heading">#</a></h3>
<ol class="arabic simple">
<li>When a string or blob member is referenced, the raw value is serialized
as the body of the message.</li>
<li>When any other type of member is referenced, the shape value is serialized
as a <a class="reference internal" href="protocol-traits.html#protocoldefinition-trait"><span class="std std-ref">protocol-specific</span></a> value that is sent
as the body of the message.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">httpPayload</span></code> is only considered when applied to top-level members of an
operation's input, output, or error structures. This trait has no meaning
in any other context and is simply ignored.</p>
</div>
</div>
</div>
<div class="section" id="httpprefixheaders-trait">
<span id="smithy-api-httpprefixheaders-trait"></span><span id="id8"></span><h2><span class="section-number">14.6. </span><code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code> trait<a class="headerlink" href="#httpprefixheaders-trait" title="Permalink to this heading">#</a></h2>
<dl class="docutils">
<dt>Summary</dt><dd>Binds a map of key-value pairs to prefixed HTTP headers.</dd>
<dt>Trait selector</dt><dd><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>structure &gt; member
:test(&gt; map :not([trait|sparse]) &gt; member[id|member=value] &gt; string)
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code> trait can be applied to <code class="docutils literal notranslate"><span class="pre">structure</span></code> members
that target a <code class="docutils literal notranslate"><span class="pre">map</span></code> of <code class="docutils literal notranslate"><span class="pre">string</span></code>. The targeted map MUST NOT be marked
with the <a class="reference internal" href="type-refinement-traits.html#sparse-trait"><span class="std std-ref">sparse trait</span></a>.</p>
</dd>
<dt>Value type</dt><dd><code class="docutils literal notranslate"><span class="pre">string</span></code> value that defines the prefix to prepend to each header field
name stored in the targeted map member. For example, given a prefix value
of &quot;X-Amz-Meta-&quot; and a map key entry of &quot;Baz&quot;, the resulting header field
name serialized in the message is &quot;X-Amz-Meta-Baz&quot;.</dd>
<dt>Conflicts with</dt><dd><a class="reference internal" href="#httplabel-trait"><span class="std std-ref">httpLabel trait</span></a>, <a class="reference internal" href="#httpquery-trait"><span class="std std-ref">httpQuery trait</span></a>, <a class="reference internal" href="#httpqueryparams-trait"><span class="std std-ref">httpQueryParams trait</span></a>,
<a class="reference internal" href="#httpheader-trait"><span class="std std-ref">httpHeader trait</span></a>, <a class="reference internal" href="#httppayload-trait"><span class="std std-ref">httpPayload trait</span></a>,
<a class="reference internal" href="#httpresponsecode-trait"><span class="std std-ref">httpResponseCode trait</span></a></dd>
<dt>Structurally exclusive</dt><dd>Only a single structure member can be bound to <code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code>.</dd>
</dl>
<p>Given the following Smithy model:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@readonly</span>
<span class="nt">@http</span>(<span class="py">method</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;GET&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/myOperation&quot;</span>)
<span class="kd">operation </span><span class="nc">MyOperation</span><span class="w"> </span>{
<span class="w">    </span><span class="py">input</span><span class="p">:</span><span class="w"> </span><span class="vc">MyOperationInput</span>
}

<span class="nt">@input</span>
<span class="kd">structure </span><span class="nc">MyOperationInput</span><span class="w"> </span>{
<span class="w">    </span><span class="nt">@httpPrefixHeaders</span>(<span class="s2">&quot;X-Foo-&quot;</span>)
<span class="w">    </span><span class="py">headers</span><span class="p">:</span><span class="w"> </span><span class="vc">StringMap</span>
}

<span class="kd">map </span><span class="nc">StringMap</span><span class="w"> </span>{
<span class="w">    </span><span class="py">key</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
<span class="w">    </span><span class="py">value</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}
</pre></div>
</div>
<p>And given the following input to <code class="docutils literal notranslate"><span class="pre">MyOperation</span></code>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;first&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hi&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;second&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;there&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>An example HTTP request would be serialized as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">myOperation</span>
<span class="n">Host</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">server</span><span class="o">&gt;</span>
<span class="n">X</span><span class="o">-</span><span class="n">Foo</span><span class="o">-</span><span class="n">first</span><span class="p">:</span> <span class="n">hi</span>
<span class="n">X</span><span class="o">-</span><span class="n">Foo</span><span class="o">-</span><span class="n">second</span><span class="p">:</span> <span class="n">there</span>
</pre></div>
</div>
<div class="section" id="disambiguation-of-httpprefixheaders">
<h3><span class="section-number">14.6.1. </span>Disambiguation of <code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code><a class="headerlink" href="#disambiguation-of-httpprefixheaders" title="Permalink to this heading">#</a></h3>
<p>In order to differentiate <code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code> from other headers, when
<code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code> are used, no other <a class="reference internal" href="#httpheader-trait"><span class="std std-ref">httpHeader trait</span></a> bindings can
start with the same prefix provided in <code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code> trait. If
<code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code> is set to an empty string, then no other members can be
bound to <code class="docutils literal notranslate"><span class="pre">headers</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code> is only considered when applied to top-level members
of an operation's input, output, or error structures. This trait has no
meaning in any other context and is simply ignored.</p>
</div>
</div>
</div>
<div class="section" id="httpquery-trait">
<span id="smithy-api-httpquery-trait"></span><span id="id9"></span><h2><span class="section-number">14.7. </span><code class="docutils literal notranslate"><span class="pre">httpQuery</span></code> trait<a class="headerlink" href="#httpquery-trait" title="Permalink to this heading">#</a></h2>
<dl class="docutils">
<dt>Summary</dt><dd>Binds an operation input structure member to a query string parameter.</dd>
<dt>Trait selector</dt><dd><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>structure &gt; member
:test(&gt; :test(string, number, boolean, timestamp),
      &gt; list &gt; member &gt; :test(string, number, boolean, timestamp))
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">httpQuery</span></code> trait can be applied to <code class="docutils literal notranslate"><span class="pre">structure</span></code> members that
target a <code class="docutils literal notranslate"><span class="pre">string</span></code>, <code class="docutils literal notranslate"><span class="pre">number</span></code>, <code class="docutils literal notranslate"><span class="pre">boolean</span></code>, or <code class="docutils literal notranslate"><span class="pre">timestamp</span></code>; or a
<code class="docutils literal notranslate"><span class="pre">list</span></code> of these types.</p>
</dd>
<dt>Value type</dt><dd>A non-empty <code class="docutils literal notranslate"><span class="pre">string</span></code> value that defines the name of the query string
parameter. The query string parameter name MUST be case-sensitively unique
across all other members marked with the <code class="docutils literal notranslate"><span class="pre">httpQuery</span></code> trait.</dd>
<dt>Conflicts with</dt><dd><a class="reference internal" href="#httplabel-trait"><span class="std std-ref">httpLabel trait</span></a>, <a class="reference internal" href="#httpheader-trait"><span class="std std-ref">httpHeader trait</span></a>, <a class="reference internal" href="#httpqueryparams-trait"><span class="std std-ref">httpQueryParams trait</span></a>,
<a class="reference internal" href="#httpprefixheaders-trait"><span class="std std-ref">httpPrefixHeaders trait</span></a>, <a class="reference internal" href="#httppayload-trait"><span class="std std-ref">httpPayload trait</span></a>,
<a class="reference internal" href="#httpresponsecode-trait"><span class="std std-ref">httpResponseCode trait</span></a></dd>
</dl>
<p>The following example defines an operation that optionally sends the
<code class="docutils literal notranslate"><span class="pre">color</span></code>, <code class="docutils literal notranslate"><span class="pre">shape</span></code>, and <code class="docutils literal notranslate"><span class="pre">size</span></code> query string parameters in an HTTP
request:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@readonly</span>
<span class="nt">@http</span>(<span class="py">method</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;GET&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/things&quot;</span>)
<span class="kd">operation </span><span class="nc">ListThings</span><span class="w"> </span>{
<span class="w">    </span><span class="py">input</span><span class="p">:</span><span class="w"> </span><span class="vc">ListThingsInput</span>
<span class="w">    </span><span class="py">output</span><span class="p">:</span><span class="w"> </span><span class="vc">ListThingsOutput</span><span class="p">,</span><span class="w"> </span><span class="c">// omitted for brevity</span>
}

<span class="nt">@input</span>
<span class="kd">structure </span><span class="nc">ListThingsInput</span><span class="w"> </span>{
<span class="w">    </span><span class="nt">@httpQuery</span>(<span class="s2">&quot;color&quot;</span>)
<span class="w">    </span><span class="py">color</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>

<span class="w">    </span><span class="nt">@httpQuery</span>(<span class="s2">&quot;shape&quot;</span>)
<span class="w">    </span><span class="py">shape</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>

<span class="w">    </span><span class="nt">@httpQuery</span>(<span class="s2">&quot;size&quot;</span>)
<span class="w">    </span><span class="py">size</span><span class="p">:</span><span class="w"> </span><span class="vc">Integer</span>
}
</pre></div>
</div>
<div class="section" id="id10">
<h3><span class="section-number">14.7.1. </span>Serialization rules<a class="headerlink" href="#id10" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li>&quot;&amp;&quot; is used to separate query string parameter key-value pairs.</li>
<li>&quot;=&quot; is used to separate query string parameter names from values.</li>
<li>Characters not defined as unreserved by <span class="target" id="index-8"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3986.html#section-2.3"><strong>RFC 3986 section 2.3</strong></a>
MUST be <span class="target" id="index-9"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3986.html#section-2.1"><strong>percent-encoded</strong></a>. That is, all characters except for
alphanumerics and <code class="docutils literal notranslate"><span class="pre">-._~</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">boolean</span></code> values are serialized as <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">timestamp</span></code> values are serialized as an <span class="target" id="index-10"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3339.html"><strong>RFC 3339</strong></a>
<code class="docutils literal notranslate"><span class="pre">date-time</span></code> string by default (for example, <code class="docutils literal notranslate"><span class="pre">1985-04-12T23:20:50.52Z</span></code>,
and with percent-encoding, <code class="docutils literal notranslate"><span class="pre">1985-04-12T23%3A20%3A50.52Z</span></code>). The
<a class="reference internal" href="protocol-traits.html#timestampformat-trait"><span class="std std-ref">timestampFormat trait</span></a> MAY be used to use a custom serialization
format.</li>
<li><a class="reference internal" href="aggregate-types.html#list"><span class="std std-ref">List</span></a> members are serialized by adding multiple
query string parameters to the query string using the same name. For
example, given a member bound to <code class="docutils literal notranslate"><span class="pre">foo</span></code> that targets a list of strings
with a value of <code class="docutils literal notranslate"><span class="pre">[&quot;a&quot;,</span> <span class="pre">&quot;b&quot;]</span></code>, the value is serialized in the query string
as <code class="docutils literal notranslate"><span class="pre">foo=a&amp;foo=b</span></code>.</li>
<li>When deserializing, server implementations SHOULD use the first encountered
value in the query string for non-list members. For example, given a
member bound to <code class="docutils literal notranslate"><span class="pre">foo</span></code> that targets a string and a query string of
<code class="docutils literal notranslate"><span class="pre">foo=a&amp;foo=b</span></code>, the deserialized value of <code class="docutils literal notranslate"><span class="pre">foo</span></code> should be <code class="docutils literal notranslate"><span class="pre">a</span></code>.</li>
</ul>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>Percent-encoding is an implementation detail</p>
<p class="last">The encoding and serialization rules of shapes defined in a Smithy model are
implementation details. When designing clients, servers, and other kinds of
software based on Smithy models, the format in which the value of a member
is serialized SHOULD NOT be a concern of the end-user. As such, members bound
to the query string MUST be automatically percent-encoded when serializing
HTTP requests and automatically percent-decoded when deserializing HTTP
requests.</p>
</div>
</div>
<div class="section" id="httpquery-is-only-used-on-top-level-input">
<h3><span class="section-number">14.7.2. </span><code class="docutils literal notranslate"><span class="pre">httpQuery</span></code> is only used on top-level input<a class="headerlink" href="#httpquery-is-only-used-on-top-level-input" title="Permalink to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">httpQuery</span></code> is only considered when applied to top-level members of an
operation's input structure. This trait has no meaning in any other context and
is simply ignored.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">While there is no limit placed on the length of an
<span class="target" id="index-11"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9112.html#section-3"><strong>HTTP request line</strong></a>, many HTTP client and server
implementations enforce limits in practice. Carefully consider the maximum
allowed length of each member that is bound to an HTTP query string or
path.</p>
</div>
</div>
</div>
<div class="section" id="httpqueryparams-trait">
<span id="smithy-api-httpqueryparams-trait"></span><span id="id11"></span><h2><span class="section-number">14.8. </span><code class="docutils literal notranslate"><span class="pre">httpQueryParams</span></code> trait<a class="headerlink" href="#httpqueryparams-trait" title="Permalink to this heading">#</a></h2>
<dl class="docutils">
<dt>Summary</dt><dd>Binds a map of key-value pairs to query string parameters.</dd>
<dt>Trait selector</dt><dd><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>structure &gt; member
:test(&gt; map &gt; member[id|member=value] &gt; :test(string, list &gt; member &gt; string))
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">httpQueryParams</span></code> trait can be applied to <code class="docutils literal notranslate"><span class="pre">structure</span></code> members
that target a <code class="docutils literal notranslate"><span class="pre">map</span></code> of <code class="docutils literal notranslate"><span class="pre">string</span></code>, or a <code class="docutils literal notranslate"><span class="pre">map</span></code> of <code class="docutils literal notranslate"><span class="pre">list</span></code> of
<code class="docutils literal notranslate"><span class="pre">string</span></code>.</p>
</dd>
<dt>Value type</dt><dd>Annotation trait.</dd>
<dt>Conflicts with</dt><dd><a class="reference internal" href="#httplabel-trait"><span class="std std-ref">httpLabel trait</span></a>, <a class="reference internal" href="#httpheader-trait"><span class="std std-ref">httpHeader trait</span></a>, <a class="reference internal" href="#httpquery-trait"><span class="std std-ref">httpQuery trait</span></a>,
<a class="reference internal" href="#httpprefixheaders-trait"><span class="std std-ref">httpPrefixHeaders trait</span></a>, <a class="reference internal" href="#httppayload-trait"><span class="std std-ref">httpPayload trait</span></a>,
<a class="reference internal" href="#httpresponsecode-trait"><span class="std std-ref">httpResponseCode trait</span></a></dd>
<dt>Structurally exclusive</dt><dd>Only a single structure member can be bound to <code class="docutils literal notranslate"><span class="pre">httpQueryParams</span></code>.</dd>
</dl>
<p>The following example defines an operation that optionally sends the
target input map as query string parameters in an HTTP request:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@readonly</span>
<span class="nt">@http</span>(<span class="py">method</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;GET&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/things&quot;</span>)
<span class="kd">operation </span><span class="nc">ListThings</span><span class="w"> </span>{
<span class="w">    </span><span class="py">input</span><span class="p">:</span><span class="w"> </span><span class="vc">ListThingsInput</span>
<span class="w">    </span><span class="py">output</span><span class="p">:</span><span class="w"> </span><span class="vc">ListThingsOutput</span><span class="p">,</span><span class="w"> </span><span class="c">// omitted for brevity</span>
}

<span class="nt">@input</span>
<span class="kd">structure </span><span class="nc">ListThingsInput</span><span class="w"> </span>{
<span class="w">    </span><span class="nt">@httpQueryParams</span>()
<span class="w">    </span><span class="py">myParams</span><span class="p">:</span><span class="w"> </span><span class="vc">MapOfStrings</span>
}

<span class="kd">map </span><span class="nc">MapOfStrings</span><span class="w"> </span>{
<span class="w">    </span><span class="py">key</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
<span class="w">    </span><span class="py">value</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}
</pre></div>
</div>
<div class="section" id="id12">
<h3><span class="section-number">14.8.1. </span>Serialization rules<a class="headerlink" href="#id12" title="Permalink to this heading">#</a></h3>
<p>See the <a class="reference internal" href="#httpquery-trait"><span class="std std-ref">httpQuery trait</span></a> serialization rules that define how the keys and values of the
target map will be serialized in the request query string. Key-value pairs in the target map
are treated like they were explicitly bound using the <a class="reference internal" href="#httpquery-trait"><span class="std std-ref">httpQuery trait</span></a>, including the
requirement that reserved characters MUST be <span class="target" id="index-12"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3986.html#section-2.1"><strong>percent-encoded</strong></a>.</p>
<p>When servers deserialize the query string into a <code class="docutils literal notranslate"><span class="pre">map</span></code> of <code class="docutils literal notranslate"><span class="pre">string</span></code>, they SHOULD take the
first encountered value for each key. Since this rule applies to all future query string
values, and changing from a <code class="docutils literal notranslate"><span class="pre">map</span></code> of <code class="docutils literal notranslate"><span class="pre">string</span></code> to a <code class="docutils literal notranslate"><span class="pre">map</span></code> of <code class="docutils literal notranslate"><span class="pre">list</span></code> of <code class="docutils literal notranslate"><span class="pre">string</span></code> is
backwards-incompatible, care should be taken to use <code class="docutils literal notranslate"><span class="pre">map</span></code> of <code class="docutils literal notranslate"><span class="pre">string</span></code> only when it is
certain that multiple values for any query string will never be meaningful for the operation.</p>
<p>If a member with the <code class="docutils literal notranslate"><span class="pre">httpQueryParams</span></code> trait and a member with the <a class="reference internal" href="#httpquery-trait"><span class="std std-ref">httpQuery trait</span></a>
conflict, clients MUST use the value set by the member with the <a class="reference internal" href="#httpquery-trait"><span class="std std-ref">httpQuery trait</span></a> and
disregard the value set by <code class="docutils literal notranslate"><span class="pre">httpQueryParams</span></code>. For example, given the following model:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@http</span>(<span class="py">method</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;POST&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/things&quot;</span>)
<span class="kd">operation </span><span class="nc">PutThing</span><span class="w"> </span>{
<span class="w">    </span><span class="py">input</span><span class="p">:</span><span class="w"> </span><span class="vc">PutThingInput</span>
}

<span class="nt">@input</span>
<span class="kd">structure </span><span class="nc">PutThingInput</span><span class="w"> </span>{
<span class="w">    </span><span class="nt">@httpQuery</span>
<span class="w">    </span><span class="nt">@required</span>
<span class="w">    </span><span class="py">thingId</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span>

<span class="w">    </span><span class="nt">@httpQueryParams</span>
<span class="w">    </span><span class="py">tags</span><span class="p">:</span><span class="w"> </span><span class="vc">MapOfStrings</span>
}

<span class="kd">map </span><span class="nc">MapOfStrings</span><span class="w"> </span>{
<span class="w">    </span><span class="py">key</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
<span class="w">    </span><span class="py">value</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}
</pre></div>
</div>
<p>And given the following input to <code class="docutils literal notranslate"><span class="pre">PutThing</span></code>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;thingId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;realId&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;thingId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;fakeId&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;otherTag&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;value&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>An example HTTP request would be serialized as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>POST /things?thingId=realId&amp;otherTag=value
Host: &lt;server&gt;
</pre></div>
</div>
<p>When deserializing HTTP request query string parameters into members with the
<code class="docutils literal notranslate"><span class="pre">httpQueryParams</span></code> trait, servers MUST treat all values as strings and produce
empty string values for keys which do not have values specified. For example,
given the following model:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@http</span>(<span class="py">method</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;POST&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/things&quot;</span>)
<span class="kd">operation </span><span class="nc">PostThing</span><span class="w"> </span>{
<span class="w">    </span><span class="py">input</span><span class="p">:</span><span class="w"> </span><span class="vc">PostThingInput</span>
}

<span class="kd">structure </span><span class="nc">PostThingInput</span><span class="w"> </span>{
<span class="w">    </span><span class="nt">@httpQueryParams</span>
<span class="w">    </span><span class="py">tags</span><span class="p">:</span><span class="w"> </span><span class="vc">MapOfStrings</span>
}

<span class="kd">map </span><span class="nc">MapOfStrings</span><span class="w"> </span>{
<span class="w">    </span><span class="py">key</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
<span class="w">    </span><span class="py">value</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}
</pre></div>
</div>
<p>And the following HTTP request:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>POST /things?thingId=realId&amp;otherTag=true&amp;anotherTag&amp;lastTag=
</pre></div>
</div>
<p>A server should deserialize the following input structure:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;thingId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;realId&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;otherTag&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;true&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;anotherTag&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;lastTag&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="httpqueryparams-is-only-used-on-top-level-input">
<h3><span class="section-number">14.8.2. </span><code class="docutils literal notranslate"><span class="pre">httpQueryParams</span></code> is only used on top-level input<a class="headerlink" href="#httpqueryparams-is-only-used-on-top-level-input" title="Permalink to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">httpQueryParams</span></code> is only considered when applied to top-level members of an
operation's input structure. This trait has no meaning in any other context and
is simply ignored.</p>
</div>
</div>
<div class="section" id="httpresponsecode-trait">
<span id="smithy-api-httpresponsecode-trait"></span><span id="id13"></span><h2><span class="section-number">14.9. </span><code class="docutils literal notranslate"><span class="pre">httpResponseCode</span></code> trait<a class="headerlink" href="#httpresponsecode-trait" title="Permalink to this heading">#</a></h2>
<dl class="docutils">
<dt>Summary</dt><dd>Binds a structure member to the HTTP response status code so that an
HTTP response status code can be set dynamically at runtime to something
other than <code class="docutils literal notranslate"><span class="pre">code</span></code> of the <a class="reference internal" href="#http-trait"><span class="std std-ref">http trait</span></a>.</dd>
<dt>Trait selector</dt><dd><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>structure :not([trait|input]) &gt; member :test(&gt; integer)
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">httpResponseCode</span></code> trait can be applied to <code class="docutils literal notranslate"><span class="pre">structure</span></code> members
that target an <code class="docutils literal notranslate"><span class="pre">integer</span></code> within any <code class="docutils literal notranslate"><span class="pre">structure</span></code> that has no <code class="docutils literal notranslate"><span class="pre">input</span></code>
trait applied.</p>
</dd>
<dt>Value type</dt><dd>Annotation trait.</dd>
<dt>Conflicts with</dt><dd><a class="reference internal" href="#httplabel-trait"><span class="std std-ref">httpLabel trait</span></a>, <a class="reference internal" href="#httpheader-trait"><span class="std std-ref">httpHeader trait</span></a>,
<a class="reference internal" href="#httpprefixheaders-trait"><span class="std std-ref">httpPrefixHeaders trait</span></a>, <a class="reference internal" href="#httppayload-trait"><span class="std std-ref">httpPayload trait</span></a>,
<a class="reference internal" href="#httpquery-trait"><span class="std std-ref">httpQuery trait</span></a>, <a class="reference internal" href="#httpqueryparams-trait"><span class="std std-ref">httpQueryParams trait</span></a>,</dd>
</dl>
<div class="section" id="httpresponsecode-use-cases">
<h3><span class="section-number">14.9.1. </span><code class="docutils literal notranslate"><span class="pre">httpResponseCode</span></code> use cases<a class="headerlink" href="#httpresponsecode-use-cases" title="Permalink to this heading">#</a></h3>
<p>Marking an output <code class="docutils literal notranslate"><span class="pre">structure</span></code> member with this trait can be used to provide
different response codes for an operation, like a 200 or 201 for a PUT
operation. The value for this member SHOULD be between 200 and 299, inclusive.
If this member isn't provided, server implementations MUST default to the
<cite>code</cite> set by the <a class="reference internal" href="#http-trait"><span class="std std-ref">http trait</span></a>.</p>
</div>
<div class="section" id="httpresponsecode-is-only-used-on-top-level-output">
<h3><span class="section-number">14.9.2. </span><code class="docutils literal notranslate"><span class="pre">httpResponseCode</span></code> is only used on top-level output<a class="headerlink" href="#httpresponsecode-is-only-used-on-top-level-output" title="Permalink to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">httpResponseCode</span></code> is only considered when applied to top-level members of an
operation's output structure. This trait has no meaning in any other context
and is simply ignored.</p>
</div>
</div>
<div class="section" id="cors-trait">
<span id="smithy-api-cors-trait"></span><span id="id14"></span><h2><span class="section-number">14.10. </span><code class="docutils literal notranslate"><span class="pre">cors</span></code> trait<a class="headerlink" href="#cors-trait" title="Permalink to this heading">#</a></h2>
<dl class="docutils">
<dt>Summary</dt><dd>Defines how a service supports cross-origin resource sharing</dd>
<dt>Trait selector</dt><dd><code class="docutils literal notranslate"><span class="pre">service</span></code></dd>
<dt>Value type</dt><dd><code class="docutils literal notranslate"><span class="pre">structure</span></code></dd>
</dl>
<p>The <code class="docutils literal notranslate"><span class="pre">cors</span></code> trait is a structure that supports the following members:</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="25%" />
<col width="65%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>origin</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>The origin from which browser script-originating requests will be
allowed. Defaults to <code class="docutils literal notranslate"><span class="pre">*</span></code>.</td>
</tr>
<tr class="row-odd"><td>maxAge</td>
<td><code class="docutils literal notranslate"><span class="pre">integer</span></code></td>
<td>The maximum number of seconds for which browsers are allowed to cache
the results of a preflight <code class="docutils literal notranslate"><span class="pre">OPTIONS</span></code> request. Defaults to <code class="docutils literal notranslate"><span class="pre">600</span></code>, the
maximum age permitted by several browsers. Set to <code class="docutils literal notranslate"><span class="pre">-1</span></code> to disable
caching entirely.</td>
</tr>
<tr class="row-even"><td>additionalAllowedHeaders</td>
<td><code class="docutils literal notranslate"><span class="pre">list&lt;string&gt;</span></code></td>
<td>The names of headers that should be included in the
<code class="docutils literal notranslate"><span class="pre">Access-Control-Allow-Headers</span></code> header in responses to preflight
<code class="docutils literal notranslate"><span class="pre">OPTIONS</span></code> requests. This list will be used in addition to the names of
all request headers bound to an input data member via the
<a class="reference internal" href="#httpheader-trait"><span class="std std-ref">httpHeader trait</span></a>, as well as any headers required by the protocol
or authentication scheme.</td>
</tr>
<tr class="row-odd"><td>additionalExposedHeaders</td>
<td><code class="docutils literal notranslate"><span class="pre">list&lt;string&gt;</span></code></td>
<td>The names of headers that should be included in the
<code class="docutils literal notranslate"><span class="pre">Access-Control-Expose-Headers</span></code> header in all responses sent by the
service. This list will be used in addition to the names of all request
headers bound to an output data member via the <a class="reference internal" href="#httpheader-trait"><span class="std std-ref">httpHeader trait</span></a>,
as well as any headers required by the protocol or authentication
scheme.</td>
</tr>
</tbody>
</table>
</div>
<p>Adding a <code class="docutils literal notranslate"><span class="pre">cors</span></code> trait with its value set to an empty object enables
cross-origin resource sharing for all origins and allows browser scripts access
to all headers to which data is bound in the model, as well as any headers used
by the protocol and authentication scheme.</p>
<p>The default settings are not compatible with certain authentication schemes
(e.g., <code class="docutils literal notranslate"><span class="pre">http-basic</span></code>) that rely on browser-managed credentials. Services using
such authentication schemes MUST designate a single origin from which
cross-origin, credentialed requests will be accepted.</p>
</div>
<div class="section" id="httpchecksumrequired-trait">
<span id="smithy-api-httpchecksumrequired-trait"></span><span id="id15"></span><h2><span class="section-number">14.11. </span><code class="docutils literal notranslate"><span class="pre">httpChecksumRequired</span></code> trait<a class="headerlink" href="#httpchecksumrequired-trait" title="Permalink to this heading">#</a></h2>
<dl class="docutils">
<dt>Summary</dt><dd>Indicates that an operation requires a checksum in its HTTP request. By
default, the checksum used for a service is a MD5 checksum passed in the
Content-MD5 header.</dd>
<dt>Trait selector</dt><dd><code class="docutils literal notranslate"><span class="pre">operation</span></code></dd>
<dt>Value type</dt><dd>Annotation trait.</dd>
<dt>See</dt><dd><span class="target" id="index-13"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc1864.html"><strong>RFC 1864</strong></a></dd>
</dl>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@httpChecksumRequired</span>
<span class="kd">operation </span><span class="nc">PutSomething</span><span class="w"> </span>{
<span class="w">    </span><span class="py">input</span><span class="p">:</span><span class="w"> </span><span class="vc">PutSomethingInput</span>
<span class="w">    </span><span class="py">output</span><span class="p">:</span><span class="w"> </span><span class="vc">PutSomethingOutput</span>
}
</pre></div>
</div>
</div>
<div class="section" id="serializing-http-messages">
<h2><span class="section-number">14.12. </span>Serializing HTTP messages<a class="headerlink" href="#serializing-http-messages" title="Permalink to this heading">#</a></h2>
<p>The following steps are taken to serialize an HTTP request given a map of
parameters:</p>
<ol class="arabic simple">
<li>Set the HTTP method to the <code class="docutils literal notranslate"><span class="pre">method</span></code> property of the <a class="reference internal" href="#http-trait"><span class="std std-ref">http trait</span></a>
of the operation.</li>
<li>Set the URI of the HTTP request to the <code class="docutils literal notranslate"><span class="pre">uri</span></code> property of the <code class="docutils literal notranslate"><span class="pre">http</span></code>
trait.</li>
<li>Iterate over all of the key-value pairs of the parameters and find the
corresponding structure member by name:<ol class="arabic">
<li>If the member has the <code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> trait, expand the value into the URI.</li>
<li>If the member has the <code class="docutils literal notranslate"><span class="pre">httpQuery</span></code> trait, serialize the value into the
HTTP request as a query string parameter.</li>
<li>If the member has the <code class="docutils literal notranslate"><span class="pre">httpQueryParams</span></code> trait, serialize the values into
the HTTP request as query string parameters.</li>
<li>If the member has the <code class="docutils literal notranslate"><span class="pre">httpHeader</span></code> trait, serialize the value in an
HTTP header using the value of the <code class="docutils literal notranslate"><span class="pre">httpHeader</span></code> trait.</li>
<li>If the member has the <code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code> trait and the value is a map,
serialize the map key value pairs as prefixed HTTP headers.</li>
<li>If the member has the <code class="docutils literal notranslate"><span class="pre">httpPayload</span></code> trait, serialize the value as the
body of the request.</li>
<li>If the member has no bindings, serialize the key-value pair as part of a
protocol-specific document sent in the body of the request.</li>
</ol>
</li>
</ol>
<p>The following steps are taken to serialize an HTTP response given a map of
parameters:</p>
<ol class="arabic simple">
<li>If serializing the output of an operation, set the status code of the
response to the <code class="docutils literal notranslate"><span class="pre">code</span></code> property of the <a class="reference internal" href="#http-trait"><span class="std std-ref">http trait</span></a>.</li>
<li>If serializing an error and the <a class="reference internal" href="#httperror-trait"><span class="std std-ref">httpError trait</span></a> is present,
set the status code of the response to its value. Otherwise, set the status
code to 400 if the error trait is &quot;client&quot; or to 500 if the error trait is
&quot;server&quot;.</li>
<li>Iterate over all of the key-value pairs of the parameters and find the
corresponding structure member by name:<ol class="arabic">
<li>If the member has the <code class="docutils literal notranslate"><span class="pre">httpHeader</span></code> trait, serialize the value in an
HTTP header using the value of the <code class="docutils literal notranslate"><span class="pre">httpHeader</span></code> trait.</li>
<li>If the member has the <code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code> trait and the value is a map,
serialize the map key value pairs as prefixed HTTP headers.</li>
<li>If the member has the <code class="docutils literal notranslate"><span class="pre">httpPayload</span></code> trait, serialize the value as the
body of the response.</li>
<li>If the member has no bindings, serialize the key-value pair as part of a
protocol-specific document sent in the body of the response.</li>
</ol>
</li>
</ol>
</div>
<div class="section" id="event-streams">
<h2><span class="section-number">14.13. </span>Event streams<a class="headerlink" href="#event-streams" title="Permalink to this heading">#</a></h2>
<p>When using <a class="reference internal" href="streaming.html#event-streams"><span class="std std-ref">event streams</span></a> and HTTP bindings, the
<a class="reference internal" href="#httppayload-trait"><span class="std std-ref">httpPayload</span></a> trait MUST be applied to any input or
output member that targets a shape marked with the <a class="reference internal" href="streaming.html#streaming-trait"><span class="std std-ref">streaming trait</span></a>.</p>
<p>The following example defines an operation that uses an input event stream
and HTTP bindings:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="nt">@http</span>(<span class="py">method</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;POST&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/messages&quot;</span>)
<span class="kd">operation </span><span class="nc">PublishMessages</span><span class="w"> </span>{
<span class="w">    </span><span class="py">input</span><span class="p">:</span><span class="w"> </span><span class="vc">PublishMessagesInput</span>
}

<span class="nt">@input</span>
<span class="kd">structure </span><span class="nc">PublishMessagesInput</span><span class="w"> </span>{
<span class="w">    </span><span class="nt">@httpPayload</span>
<span class="w">    </span><span class="py">messages</span><span class="p">:</span><span class="w"> </span><span class="vc">MessageStream</span>
}

<span class="nt">@streaming</span>
<span class="kd">union </span><span class="nc">MessageStream</span><span class="w"> </span>{
<span class="w">    </span><span class="py">message</span><span class="p">:</span><span class="w"> </span><span class="vc">Message</span>
}

<span class="kd">structure </span><span class="nc">Message</span><span class="w"> </span>{
<span class="w">    </span><span class="py">message</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}
</pre></div>
</div>
<p>The following is <strong>invalid</strong> because the operation has the <code class="docutils literal notranslate"><span class="pre">http</span></code> trait
and an input member is marked with the <code class="docutils literal notranslate"><span class="pre">streaming</span></code> trait but not
marked with the <code class="docutils literal notranslate"><span class="pre">httpPayload</span></code> trait:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="nt">@http</span>(<span class="py">method</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;POST&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/messages&quot;</span>)
<span class="kd">operation </span><span class="nc">InvalidOperation</span><span class="w"> </span>{
<span class="w">    </span><span class="py">input</span><span class="p">:</span><span class="w"> </span><span class="vc">InvalidOperationInput</span>
}

<span class="nt">@input</span>
<span class="kd">structure </span><span class="nc">InvalidOperationInput</span><span class="w"> </span>{
<span class="w">    </span><span class="py">invalid</span><span class="p">:</span><span class="w"> </span><span class="vc">MessageStream</span><span class="w">  </span><span class="c">// &lt;-- Missing the @httpPayload trait</span>
}

<span class="nt">@streaming</span>
<span class="kd">union </span><span class="nc">MessageStream</span><span class="w"> </span>{
<span class="w">    </span><span class="py">message</span><span class="p">:</span><span class="w"> </span><span class="vc">Message</span>
}

<span class="kd">structure </span><span class="nc">Message</span><span class="w"> </span>{
<span class="w">    </span><span class="py">message</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}
</pre></div>
</div>
</div>
</div>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="endpoint-traits.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title"><span class="section-number">15. </span>Endpoint traits</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="streaming.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title"><span class="section-number">13. </span>Streaming</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Amazon Web Services
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/awslabs/smithy" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">14. HTTP bindings</a><ul>
<li><a class="reference internal" href="#http-trait">14.1. <code class="docutils literal notranslate"><span class="pre">http</span></code> trait</a><ul>
<li><a class="reference internal" href="#method">14.1.1. method</a></li>
<li><a class="reference internal" href="#uri">14.1.2. uri</a><ul>
<li><a class="reference internal" href="#literal-character-sequences">14.1.2.1. Literal character sequences</a></li>
<li><a class="reference internal" href="#labels">14.1.2.2. Labels</a></li>
<li><a class="reference internal" href="#query-string-literals">14.1.2.3. Query string literals</a></li>
<li><a class="reference internal" href="#greedy-labels">14.1.2.4. Greedy labels</a></li>
<li><a class="reference internal" href="#pattern-validation-and-conflict-avoidance">14.1.2.5. Pattern Validation and Conflict Avoidance</a></li>
<li><a class="reference internal" href="#specificity-routing">14.1.2.6. Specificity Routing</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#httperror-trait">14.2. <code class="docutils literal notranslate"><span class="pre">httpError</span></code> trait</a><ul>
<li><a class="reference internal" href="#default-http-status-codes">14.2.1. Default HTTP status codes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#httpheader-trait">14.3. <code class="docutils literal notranslate"><span class="pre">httpHeader</span></code> trait</a><ul>
<li><a class="reference internal" href="#httpheader-serialization-rules">14.3.1. <code class="docutils literal notranslate"><span class="pre">httpHeader</span></code> serialization rules:</a></li>
<li><a class="reference internal" href="#restricted-http-headers">14.3.2. Restricted HTTP headers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#httplabel-trait">14.4. <code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> trait</a><ul>
<li><a class="reference internal" href="#relationship-to-http-trait">14.4.1. Relationship to <span class="xref std std-ref">http-trait</span></a></li>
<li><a class="reference internal" href="#applying-the-httplabel-trait-to-members">14.4.2. Applying the <code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> trait to members</a></li>
<li><a class="reference internal" href="#httplabel-serialization-rules">14.4.3. <code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> serialization rules</a></li>
<li><a class="reference internal" href="#httplabel-is-only-used-on-top-level-input">14.4.4. <code class="docutils literal notranslate"><span class="pre">httpLabel</span></code> is only used on top-level input</a></li>
</ul>
</li>
<li><a class="reference internal" href="#httppayload-trait">14.5. <code class="docutils literal notranslate"><span class="pre">httpPayload</span></code> trait</a><ul>
<li><a class="reference internal" href="#protocol-specific-document-payloads">14.5.1. Protocol-specific document payloads</a></li>
<li><a class="reference internal" href="#binding-members-to-httppayload">14.5.2. Binding members to <code class="docutils literal notranslate"><span class="pre">httpPayload</span></code></a></li>
<li><a class="reference internal" href="#serialization-rules">14.5.3. Serialization rules</a></li>
</ul>
</li>
<li><a class="reference internal" href="#httpprefixheaders-trait">14.6. <code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code> trait</a><ul>
<li><a class="reference internal" href="#disambiguation-of-httpprefixheaders">14.6.1. Disambiguation of <code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#httpquery-trait">14.7. <code class="docutils literal notranslate"><span class="pre">httpQuery</span></code> trait</a><ul>
<li><a class="reference internal" href="#id10">14.7.1. Serialization rules</a></li>
<li><a class="reference internal" href="#httpquery-is-only-used-on-top-level-input">14.7.2. <code class="docutils literal notranslate"><span class="pre">httpQuery</span></code> is only used on top-level input</a></li>
</ul>
</li>
<li><a class="reference internal" href="#httpqueryparams-trait">14.8. <code class="docutils literal notranslate"><span class="pre">httpQueryParams</span></code> trait</a><ul>
<li><a class="reference internal" href="#id12">14.8.1. Serialization rules</a></li>
<li><a class="reference internal" href="#httpqueryparams-is-only-used-on-top-level-input">14.8.2. <code class="docutils literal notranslate"><span class="pre">httpQueryParams</span></code> is only used on top-level input</a></li>
</ul>
</li>
<li><a class="reference internal" href="#httpresponsecode-trait">14.9. <code class="docutils literal notranslate"><span class="pre">httpResponseCode</span></code> trait</a><ul>
<li><a class="reference internal" href="#httpresponsecode-use-cases">14.9.1. <code class="docutils literal notranslate"><span class="pre">httpResponseCode</span></code> use cases</a></li>
<li><a class="reference internal" href="#httpresponsecode-is-only-used-on-top-level-output">14.9.2. <code class="docutils literal notranslate"><span class="pre">httpResponseCode</span></code> is only used on top-level output</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cors-trait">14.10. <code class="docutils literal notranslate"><span class="pre">cors</span></code> trait</a></li>
<li><a class="reference internal" href="#httpchecksumrequired-trait">14.11. <code class="docutils literal notranslate"><span class="pre">httpChecksumRequired</span></code> trait</a></li>
<li><a class="reference internal" href="#serializing-http-messages">14.12. Serializing HTTP messages</a></li>
<li><a class="reference internal" href="#event-streams">14.13. Event streams</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/tabs.js"></script>
    </body>
</html>