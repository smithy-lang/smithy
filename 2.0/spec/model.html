<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="2. Simple types" href="simple-types.html" /><link rel="prev" title="Smithy specification" href="index.html" />

    <link rel="shortcut icon" href="../_static/favicon.png"/><meta name="generator" content="sphinx-5.3.0, furo 2022.06.21"/>
        <title>1. The Smithy model - Smithy 2.0</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=40978830699223671f4072448e654b5958f38b89" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --admonition-font-size: 100%;
  --admonition-title-font-size: 100%;
  --color-brand-primary: #C44536;
  --color-brand-content: #00808b;
  --color-announcement-background: #711818de;
  --color-announcement-text: #fff;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #282828;
  --color-code-foreground: #dddddd;
  --color-brand-primary: #ed9d13;
  --color-brand-content: #58d3ff;
  --color-announcement-background: #711818de;
  --color-announcement-text: #fff;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #282828;
  --color-code-foreground: #dddddd;
  --color-brand-primary: #ed9d13;
  --color-brand-content: #58d3ff;
  --color-announcement-background: #711818de;
  --color-announcement-text: #fff;
  
      }
    }
  }
</style><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js"></script>
<script src="https://d2c.aws.amazon.com/client/loader/v1/d2c-load.js"></script></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Smithy 2.0</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/smithy.svg" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick start</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Smithy specification</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">1. The Smithy model</a></li>
<li class="toctree-l2"><a class="reference internal" href="simple-types.html">2. Simple types</a></li>
<li class="toctree-l2"><a class="reference internal" href="aggregate-types.html">3. Aggregate types</a></li>
<li class="toctree-l2"><a class="reference internal" href="service-types.html">4. Service types</a></li>
<li class="toctree-l2"><a class="reference internal" href="mixins.html">5. Mixins</a></li>
<li class="toctree-l2"><a class="reference internal" href="constraint-traits.html">6. Constraint traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="type-refinement-traits.html">7. Type refinement traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="documentation-traits.html">8. Documentation traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="behavior-traits.html">9. Behavior traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="resource-traits.html">10. Resource traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication-traits.html">11. Authentication traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="protocol-traits.html">12. Serialization and Protocol traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="streaming.html">13. Streaming</a></li>
<li class="toctree-l2"><a class="reference internal" href="http-bindings.html">14. HTTP bindings</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-traits.html">15. Endpoint traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="selectors.html">16. Selectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="model-validation.html">17. Model validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="idl.html">18. Smithy IDL</a></li>
<li class="toctree-l2"><a class="reference internal" href="json-ast.html">19. JSON AST</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../trait-index.html">Trait index</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../guides/index.html">Guides</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../guides/smithy-cli/index.html">The Smithy CLI</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../guides/smithy-cli/cli_installation.html">Installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guides/smithy-build-json.html">smithy-build.json</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../guides/gradle-plugin/index.html">Smithy Gradle Plugins</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../guides/gradle-plugin/gradle-migration-guide.html">Migrating to Gradle plugin version 0.10.0+</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../guides/using-code-generation/index.html">Code Generation</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../guides/using-code-generation/update-model.html">Updating the Smithy Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/using-code-generation/generating-a-client.html">Generating a client</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guides/model-linters.html">Linting Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/model-validation-examples.html">Model Validation Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/evolving-models.html">Evolving Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/style-guide.html">Style Guide</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../guides/model-translations/index.html">Model Translations</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../guides/model-translations/converting-to-openapi.html">Converting Smithy to OpenAPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/model-translations/migrating-idl-1-to-2.html">Smithy IDL 1.0 to 2.0 Migration Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/model-translations/generating-cloudformation-resources.html">Generating CloudFormation Resource Schemas from Smithy</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../guides/building-codegen/index.html">Creating a Code Generator</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/overview-and-concepts.html">Overview and Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/mapping-shapes-to-languages.html">Mapping Smithy Shapes to Your Language</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/creating-codegen-repo.html">Creating a Codegen Repo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/configuring-the-generator.html">Configuring the Generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/implementing-the-generator.html">Implementing the Generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/making-codegen-pluggable.html">Making Codegen Pluggable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/generating-code.html">Generating Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/decoupling-codegen-with-symbols.html">Decoupling Codegen with Symbols</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/using-the-semantic-model.html">Using the Semantic Model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guides/glossary.html">Glossary</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../additional-specs/index.html">Additional specs</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../additional-specs/http-protocol-compliance-tests.html">HTTP Protocol Compliance Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../additional-specs/smoke-tests.html">Smoke Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../additional-specs/waiters.html">Waiters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../additional-specs/mqtt.html">MQTT Protocol Bindings</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../additional-specs/rules-engine/index.html">Rules engine</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../additional-specs/rules-engine/specification.html">Rules engine specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../additional-specs/rules-engine/parameters.html">Rules engine parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../additional-specs/rules-engine/standard-library.html">Rules engine standard library</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../aws/index.html">AWS integrations</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../aws/aws-core.html">AWS Core Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aws/aws-auth.html">AWS Authentication Traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aws/aws-endpoints-region.html">AWS Declarative Endpoint Traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aws/aws-iam.html">AWS IAM traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aws/amazon-apigateway.html">Amazon API Gateway traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aws/aws-cloudformation.html">AWS CloudFormation Traits</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../aws/protocols/index.html">AWS Protocols</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../aws/protocols/aws-restjson1-protocol.html">AWS restJson1 protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/protocols/aws-json-1_0-protocol.html">AWS JSON 1.0 protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/protocols/aws-json-1_1-protocol.html">AWS JSON 1.1 protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/protocols/aws-restxml-protocol.html">AWS restXml protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/protocols/aws-query-protocol.html">AWS query protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/protocols/aws-ec2-query-protocol.html">AWS EC2 query protocol</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../aws/customizations/index.html">AWS Service Customizations</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../aws/customizations/apigateway-customizations.html">Amazon API Gateway Customizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/customizations/glacier-customizations.html">Amazon Glacier Customizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/customizations/machinelearning-customizations.html">Amazon Machine Learning Customizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/customizations/s3-customizations.html">Amazon S3 Customizations</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../aws/rules-engine/index.html">AWS rules engine extensions</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../aws/rules-engine/built-ins.html">AWS rules engine built-ins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/rules-engine/library-functions.html">AWS rules engine library functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/rules-engine/auth-schemes.html">AWS rules engine authentication scheme validators</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ts-ssdk/index.html">Smithy Server Generator for TypeScript</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ts-ssdk/introduction.html">Introduction to the Smithy Server Generator for TypeScript</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ts-ssdk/handlers.html">Smithy Server Generator for TypeScript handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ts-ssdk/validation.html">Smithy Server Generator for TypeScript validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ts-ssdk/error-handling.html">Smithy Server Generator for TypeScript error handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ts-ssdk/supported-endpoints.html">Smithy Server Generator for TypeScript supported endpoints</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/smithy-lang/smithy">Source code</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/smithy-lang/awesome-smithy">Awesome Smithy</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/smithy-lang/smithy-examples">Smithy Examples</a></li>
<li class="toctree-l1"><a class="reference external" href="https://smithy.io/1.0/">1.0 Documentation</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/awslabs/smithy/edit/main/docs/source-2.0/spec/model.rst" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <div class="section" id="the-smithy-model">
<span id="smithy-model"></span><h1><span class="section-number">1. </span>The Smithy model<a class="headerlink" href="#the-smithy-model" title="Permalink to this heading">#</a></h1>
<p>The <em>Smithy model</em> describes the Smithy semantic model and the files used to
create it. Smithy models are used to describe services and data structures.</p>
<div class="section" id="smithy-overview">
<span id="id1"></span><h2><span class="section-number">1.1. </span>Smithy overview<a class="headerlink" href="#smithy-overview" title="Permalink to this heading">#</a></h2>
<p>Smithy is a framework that consists of a semantic model, file formats used to
define a model, and a build process used to validate models and facilitate
model transformations.</p>
<div class="literal-block-wrapper docutils container" id="figure-1-1">
<div class="code-block-caption"><span class="caption-text"><strong>Figure 1.1</strong>: Smithy framework concepts</span><a class="headerlink" href="#figure-1-1" title="Permalink to this code">#</a></div>
<div class="no-copybutton highlight-none notranslate"><div class="highlight"><pre><span></span>                ┌────────────────┐ part of          ┌────────────────┐
                │                │╲                ╱│                │
                │ Semantic Model │─○──────────────○─│   Model File   │
                │                │╱                ╲│                │
                └────────────────┘                  └────────────────┘
                                           split into       ╲│╱
                                                             ○
                                                             │
                ┌────────────────┐                           ┼
                │JSON AST (.json)│────────┐         ┌────────────────┐
                └────────────────┘        │         │                │
                                          ├────────▷│ Representation │
                ┌────────────────┐        │         │                │
                │ IDL (.smithy)  │────────┘         └────────────────┘
                └────────────────┘
</pre></div>
</div>
</div>
<dl class="docutils">
<dt>Semantic model</dt><dd>The in-memory model used by tools. The <a class="reference internal" href="#semantic-model"><span class="std std-ref">semantic model</span></a>
may be serialized into one or more model file representations.</dd>
</dl>
<dl class="docutils" id="model-files">
<dt>Model File</dt><dd><p>A file on the file system, in a particular representation. The model files
that make up a semantic model MAY be split across multiple files to
improve readability or modularity, and those files are not required to
use the same representation. Model files do not explicitly include other
model files; this responsibility is left to tooling to ensure that all
necessary model files are merged together to form a valid semantic model.</p>
<p>One or more model files can be <a class="reference internal" href="#merging-models"><span class="std std-ref">assembled (or merged)</span></a>
together to form a semantic model.</p>
</dd>
<dt>Representation</dt><dd><p>A particular model file format such as the Smithy IDL or JSON AST.
Representations are loaded into the semantic model by mapping the
representation to concepts in the semantic model.</p>
<ul class="simple">
<li><a class="reference internal" href="idl.html#idl"><span class="std std-ref">Smithy IDL</span></a>: a human-readable format that aims to
streamline authoring and reading models.</li>
<li><a class="reference internal" href="json-ast.html#json-ast"><span class="std std-ref">JSON AST</span></a>: a machine-readable JSON-based format.</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="the-semantic-model">
<span id="semantic-model"></span><h2><span class="section-number">1.2. </span>The semantic model<a class="headerlink" href="#the-semantic-model" title="Permalink to this heading">#</a></h2>
<p>Smithy's <em>semantic model</em> is an in-memory model used by tools. It is
independent of any particular serialized representation. The semantic
model contains metadata and a graph of shapes connected by shape IDs.</p>
<div class="literal-block-wrapper docutils container" id="figure-1-2">
<div class="code-block-caption"><span class="caption-text"><strong>Figure 1.2</strong>: The semantic model</span><a class="headerlink" href="#figure-1-2" title="Permalink to this code">#</a></div>
<div class="no-copybutton highlight-none notranslate"><div class="highlight"><pre><span></span>                                      ┌───────────────┐
                                      │Semantic Model │╲
                                      ├───────────────┤─○────────┐
                                      │metadata?      │╱         │
                                      │               │          │
                                      │               │          │
                                      └───────────────┘          │
                                              ┼     ┼ prelude    │
                                              │     ○────────────┘
                                              ○
                                       shapes╱│╲
    ┌───────────────┐                 ┌───────────────┐
    │ Applied Trait │╲          shape │  «abstract»   │
    ├───────────────┤─○──────────────┼│     Shape     │            ┌───────────────┐
    │               │╱                ├───────────────┤            │    ShapeID    │
    │               │                 │               │            ├───────────────┤
    │               │╲     applied-to │               │         id │namespace      │
    │               │─○──────────────┼│               │┼──────────┼│shape_name     │
    │               │╱traits          │               │            │member_name?   │
    └───────────────┘                 └───────────────┘            └───────────────┘
</pre></div>
</div>
</div>
<dl class="docutils">
<dt>Shape</dt><dd><a class="reference internal" href="#shapes"><span class="std std-ref">Shapes</span></a> are named data definitions that describe the
structure of an API. Shapes are referenced and connected by shape IDs.
Relationships between shapes are formed by <a class="reference internal" href="#member"><span class="std std-ref">members</span></a> that
target other shapes, properties of shapes like the <code class="docutils literal notranslate"><span class="pre">input</span></code> and
<code class="docutils literal notranslate"><span class="pre">output</span></code> properties of an <a class="reference internal" href="service-types.html#operation"><span class="std std-ref">operation</span></a>, and
<a class="reference internal" href="#applying-traits"><span class="std std-ref">applied traits</span></a> that attach a trait to a shape.</dd>
<dt>Shape ID</dt><dd>A <a class="reference internal" href="#shape-id"><span class="std std-ref">shape ID</span></a> is used to identify shapes defined in a
model. For example, <code class="docutils literal notranslate"><span class="pre">smithy.example#MyShape</span></code>,
<code class="docutils literal notranslate"><span class="pre">smithy.example#Foo$bar</span></code>, and <code class="docutils literal notranslate"><span class="pre">Baz</span></code> are all different kinds of shape
IDs.</dd>
<dt>Trait</dt><dd><a class="reference internal" href="#traits"><span class="std std-ref">Traits</span></a> are specialized shapes that form the basis of
Smithy's meta-model. Traits are applied to shapes to associate metadata
to a shape. They are typically used by tools to influence validation,
serialization, and code generation.</dd>
<dt>Applied trait</dt><dd>An applied trait is an instance of a trait applied to a shape, configured
using a <a class="reference internal" href="#node-value"><span class="std std-ref">node value</span></a>.</dd>
<dt>Model metadata</dt><dd><a class="reference internal" href="#metadata"><span class="std std-ref">Metadata</span></a> is a schema-less extensibility mechanism used
to associate metadata to an entire model.</dd>
<dt>Prelude</dt><dd>The <a class="reference internal" href="#prelude"><span class="std std-ref">prelude</span></a> defines various simple shapes and every
trait defined in the core specification. All Smithy models automatically
include the prelude.</dd>
</dl>
</div>
<div class="section" id="model-metadata">
<span id="metadata"></span><h2><span class="section-number">1.3. </span>Model metadata<a class="headerlink" href="#model-metadata" title="Permalink to this heading">#</a></h2>
<p>Metadata is a schema-less extensibility mechanism used to associate
metadata to an entire model. For example, metadata is used to define
<a class="reference internal" href="model-validation.html#validator-definition"><span class="std std-ref">validators</span></a> and model-wide
<a class="reference internal" href="model-validation.html#suppression-definition"><span class="std std-ref">suppressions</span></a>. Metadata is defined
using a <a class="reference internal" href="#node-value"><span class="std std-ref">node value</span></a>. The following example configures
a model validator:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">metadata </span><span class="nc">validators </span><span class="nd">=</span><span class="w"> </span>[
<span class="w">    </span>{
<span class="w">        </span><span class="py">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EmitEachSelector&quot;</span>
<span class="w">        </span><span class="py">id</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OperationInputName&quot;</span>
<span class="w">        </span><span class="py">message</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;This shape is referenced as input but the name does not end with &#39;Input&#39;&quot;</span>
<span class="w">        </span><span class="py">configuration</span><span class="p">:</span><span class="w"> </span>{
<span class="w">            </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;operation -[input]-&gt; :not([id|name$=Input i])&quot;</span>
<span class="w">        </span>}
<span class="w">    </span>}
]
</pre></div>
</div>
<div class="section" id="metadata-conflicts">
<span id="merging-metadata"></span><h3><span class="section-number">1.3.1. </span>Metadata conflicts<a class="headerlink" href="#metadata-conflicts" title="Permalink to this heading">#</a></h3>
<p>When a conflict occurs between top-level metadata key-value pairs,
the following conflict resolution logic is used:</p>
<ol class="arabic simple">
<li>If both values are arrays, the values of both arrays are concatenated
into a single array.</li>
<li>Otherwise, if both values are exactly equal, the conflict is ignored.</li>
<li>Otherwise, the conflict is invalid.</li>
</ol>
<p>Given the following two Smithy models:</p>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-text">model-a.smithy</span><a class="headerlink" href="#id13" title="Permalink to this code">#</a></div>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">metadata </span><span class="nc">&quot;foo&quot; </span><span class="nd">=</span><span class="w"> </span>[<span class="s2">&quot;baz&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;bar&quot;</span>]
<span class="kd">metadata </span><span class="nc">&quot;qux&quot; </span><span class="nd">=</span><span class="w"> </span><span class="s2">&quot;test&quot;</span>
<span class="kd">metadata </span><span class="nc">&quot;validConflict&quot; </span><span class="nd">=</span><span class="w"> </span><span class="s2">&quot;hi!&quot;</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id14">
<div class="code-block-caption"><span class="caption-text">model-b.smithy</span><a class="headerlink" href="#id14" title="Permalink to this code">#</a></div>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">metadata </span><span class="nc">&quot;foo&quot; </span><span class="nd">=</span><span class="w"> </span>[<span class="s2">&quot;lorem&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ipsum&quot;</span>]
<span class="kd">metadata </span><span class="nc">&quot;lorem&quot; </span><span class="nd">=</span><span class="w"> </span><span class="s2">&quot;ipsum&quot;</span>
<span class="kd">metadata </span><span class="nc">&quot;validConflict&quot; </span><span class="nd">=</span><span class="w"> </span><span class="s2">&quot;hi!&quot;</span>
</pre></div>
</div>
</div>
<p>Merging <code class="docutils literal notranslate"><span class="pre">model-a.smithy</span></code> and <code class="docutils literal notranslate"><span class="pre">model-b.smithy</span></code> produces the following
model:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">metadata </span><span class="nc">&quot;foo&quot; </span><span class="nd">=</span><span class="w"> </span>[<span class="s2">&quot;baz&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;bar&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;lorem&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ipsum&quot;</span>]
<span class="kd">metadata </span><span class="nc">&quot;qux&quot; </span><span class="nd">=</span><span class="w"> </span><span class="s2">&quot;test&quot;</span>
<span class="kd">metadata </span><span class="nc">&quot;lorem&quot; </span><span class="nd">=</span><span class="w"> </span><span class="s2">&quot;ipsum&quot;</span>
<span class="kd">metadata </span><span class="nc">&quot;validConflict&quot; </span><span class="nd">=</span><span class="w"> </span><span class="s2">&quot;hi!&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="node-values">
<span id="node-value"></span><h2><span class="section-number">1.4. </span>Node values<a class="headerlink" href="#node-values" title="Permalink to this heading">#</a></h2>
<p>Node values are JSON-like values used to define metadata and the value of
an applied trait.</p>
<div class="literal-block-wrapper docutils container" id="figure-1-3">
<div class="code-block-caption"><span class="caption-text"><strong>Figure 1.3</strong>: Node value types</span><a class="headerlink" href="#figure-1-3" title="Permalink to this code">#</a></div>
<div class="no-copybutton highlight-none notranslate"><div class="highlight"><pre><span></span>┌─────────────────┐                     ┌─────────────┐
│ Semantic Model  │                     │Applied Trait│
└─────────────────┘                     └─────────────┘
  │                                            │
  │                                            │
  │                                            ┼ nodeValue
  │                                     ┌─────────────┐
  │                                     │ «abstract»  │
  │                                     │    Value    │
  │metadata                             └─────────────┘
  │                                            △
  ○      ┌───────────────────┬─────────────────┼───────────────┬───────────────┐
  ┼      │                   │                 │               │               │
┌─────────────────┐ ┌─────────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐
│     Object      │ │      Array      │ │   Number    │ │   Boolean   │ │   String    │
├─────────────────┤ ├─────────────────┤ └─────────────┘ └─────────────┘ └─────────────┘
│members:         │ │members: [Value] │
│  [String, Value]│ └─────────────────┘
└─────────────────┘
</pre></div>
</div>
</div>
<p>The following example defines <a class="reference internal" href="#metadata"><span class="std std-ref">metadata</span></a> using a node value:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">metadata </span><span class="nc">foo </span><span class="nd">=</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span>
</pre></div>
</div>
<p>The following example defines a <a class="reference internal" href="#traits"><span class="std std-ref">trait</span></a> using a node value:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="nt">@length</span>(<span class="py">min</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="py">max</span><span class="p">:</span><span class="w"> </span><span class="m">10</span>)
<span class="kd">string </span><span class="nc">MyString</span>
</pre></div>
</div>
<div class="section" id="node-value-types">
<h3><span class="section-number">1.4.1. </span>Node value types<a class="headerlink" href="#node-value-types" title="Permalink to this heading">#</a></h3>
<p>Node values have the same data model as JSON; they consist of the following
kinds of values:</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>null</td>
<td>The lack of a value</td>
</tr>
<tr class="row-odd"><td>string</td>
<td>A UTF-8 string</td>
</tr>
<tr class="row-even"><td>number</td>
<td>A double precision floating point number</td>
</tr>
<tr class="row-odd"><td>boolean</td>
<td>A Boolean, true or false value</td>
</tr>
<tr class="row-even"><td>array</td>
<td>A list of heterogeneous node values</td>
</tr>
<tr class="row-odd"><td>object</td>
<td>A map of string keys to heterogeneous node values</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="merging-model-files">
<span id="merging-models"></span><h2><span class="section-number">1.5. </span>Merging model files<a class="headerlink" href="#merging-model-files" title="Permalink to this heading">#</a></h2>
<p>Multiple <a class="reference internal" href="#model-files"><span class="std std-ref">model files</span></a> can be used to create a
<a class="reference internal" href="#semantic-model"><span class="std std-ref">semantic model</span></a>. Implementations MUST
take the following steps when merging two or more model files:</p>
<ol class="arabic simple">
<li>Merge the metadata objects of all model files. If top-level metadata
key-value pairs conflict, <a class="reference internal" href="#merging-metadata"><span class="std std-ref">merge the metadata</span></a>
if possible or fail.</li>
<li>Shapes defined in a single model file are added to the semantic model as-is.</li>
<li>Shapes with the same shape ID defined in multiple model files are
reconciled using the following rules:<ol class="arabic">
<li>All conflicting shapes MUST have the same shape type.</li>
<li>Conflicting <a class="reference internal" href="aggregate-types.html#aggregate-types"><span class="std std-ref">aggregate shape types</span></a> MUST contain
the same members that target the same shapes.</li>
<li>Conflicting <a class="reference internal" href="service-types.html#service-types"><span class="std std-ref">service shape types</span></a> MUST contain the
same properties and target the same shapes.</li>
<li>The traits from each shape are treated as if they are defined using
an <a class="reference internal" href="#apply-statements"><span class="std std-ref">apply statement</span></a>: non-conflicting traits are
added to the merged shape, and conflicting traits are resolved through
step (4).</li>
</ol>
</li>
<li>Conflicting traits defined in shape definitions or through apply statements
are reconciled using <a class="reference internal" href="#trait-conflict-resolution"><span class="std std-ref">trait conflict resolution</span></a>.</li>
</ol>
</div>
<div class="section" id="shapes">
<span id="id2"></span><h2><span class="section-number">1.6. </span>Shapes<a class="headerlink" href="#shapes" title="Permalink to this heading">#</a></h2>
<p>Smithy models are made up of shapes. Shapes are named definitions of types.</p>
<p>Shapes are visualized using the following diagram:</p>
<div class="literal-block-wrapper docutils container" id="figure-1-4">
<div class="code-block-caption"><span class="caption-text"><strong>Figure 1.4</strong>: Smithy shapes</span><a class="headerlink" href="#figure-1-4" title="Permalink to this code">#</a></div>
<div class="no-copybutton highlight-none notranslate"><div class="highlight"><pre><span></span>                                  ┌─────────────┐
                         members ╱│ «abstract»  │
                        ┌───────○─│    Shape    │
                        │        ╲│             │
                        │         └─────────────┘
                        │                △
              ┌─────────│────────────────┼────────────────────┐
              │         │                │                    │
      ┌───────────────┐ │         ┌─────────────┐      ┌─────────────┐
      │  «abstract»   │ │container│ «abstract»  │      │ «abstract»  │
      │    Simple     │ └────────┼│  Aggregate  │      │   Service   │
      └───────────────┘           └─────────────┘      └─────────────┘
              △                    △                    △
┌──────────┐  │  ┌──────────┐      │    ┌────────────┐  │    ┌─────────────────────────┐
│blob      │──┼──│boolean   │      ├────│    List    │  │    │         Service         │
└──────────┘  │  └──────────┘      │    ├────────────┤  │    ├─────────────────────────┤
┌──────────┐  │  ┌──────────┐      │    │member      │  │    │version                  │
│document  │──┼──│string    │      │    └────────────┘  ├────│operations: [Operation]? │
└──────────┘  │  └──────────┘      │                    │    │resources: [Resource]?   │
┌──────────┐  │       △            │    ┌────────────┐  │    └─────────────────────────┘
│timestamp │──┤       │            ├────│    Map     │  │    ┌─────────────────────────┐
└──────────┘  │  ┌──────────┐      │    ├────────────┤  │    │        Operation        │
              │  │enum      │      │    │key         │  │    ├─────────────────────────┤
              │  └──────────┘      │    │value       │  │    │input: Structure         │
      ┌───────────────┐            │    └────────────┘  ├────│output: Structure        │
      │  «abstract»   │            │                    |    │errors: [Structure]?     │
      │    Number     │            │    ┌────────────┐  │    └─────────────────────────┘
      └───────────────┘            ├────│ Structure  │  │    ┌─────────────────────────┐
              △                    │    └────────────┘  │    │        Resource         │
┌──────────┐  │  ┌──────────┐      │    ┌────────────┐  │    ├─────────────────────────┤
│float     │──┼──│double    │      └────│   Union    │  │    │identifiers?             │
└──────────┘  │  └──────────┘           └────────────┘  │    │create: Operation?       │
┌──────────┐  │  ┌──────────┐                           │    │put: Operation?          │
│bigInteger│──┼──│bigDecimal│                           │    │read: Operation?         │
└──────────┘  │  └──────────┘                           └────│update: Operation?       │
┌──────────┐  │  ┌──────────┐                                │delete: Operation?       │
│byte      │──┼──│short     │                                │list: : Operation?       │
└──────────┘  │  └──────────┘                                │operations: [Operation]? │
┌──────────┐  │  ┌──────────┐                                │collectionOperations:    │
│integer   │──┴──│long      │                                │    [Operation]?         │
└──────────┘     └──────────┘                                │resources: [Resource]?   │
     △                                                       └─────────────────────────┘
     │
┌──────────┐
│intEnum   │
└──────────┘
</pre></div>
</div>
</div>
<div class="section" id="shape-types">
<h3><span class="section-number">1.6.1. </span>Shape types<a class="headerlink" href="#shape-types" title="Permalink to this heading">#</a></h3>
<p>Shape types are grouped into three categories:</p>
<dl class="docutils">
<dt><a class="reference internal" href="simple-types.html#simple-types"><span class="std std-ref">Simple types</span></a></dt><dd><p>Simple types are types that do not contain nested types or shape references.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="simple-types.html#blob"><span class="std std-ref">blob</span></a></td>
<td>Uninterpreted binary data</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="simple-types.html#boolean"><span class="std std-ref">boolean</span></a></td>
<td>Boolean value type</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="simple-types.html#string"><span class="std std-ref">string</span></a></td>
<td>UTF-8 encoded string</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="simple-types.html#enum"><span class="std std-ref">enum</span></a></td>
<td>A string with a fixed set of values.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="simple-types.html#byte"><span class="std std-ref">byte</span></a></td>
<td>8-bit signed integer ranging from -128 to 127 (inclusive)</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="simple-types.html#short"><span class="std std-ref">short</span></a></td>
<td>16-bit signed integer ranging from -32,768 to 32,767 (inclusive)</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="simple-types.html#integer"><span class="std std-ref">integer</span></a></td>
<td>32-bit signed integer ranging from -2^31 to (2^31)-1 (inclusive)</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="simple-types.html#intenum"><span class="std std-ref">intEnum</span></a></td>
<td>An integer with a fixed set of values.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="simple-types.html#long"><span class="std std-ref">long</span></a></td>
<td>64-bit signed integer ranging from -2^63 to (2^63)-1 (inclusive)</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="simple-types.html#float"><span class="std std-ref">float</span></a></td>
<td>Single precision IEEE-754 floating point number</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="simple-types.html#double"><span class="std std-ref">double</span></a></td>
<td>Double precision IEEE-754 floating point number</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="simple-types.html#biginteger"><span class="std std-ref">bigInteger</span></a></td>
<td>Arbitrarily large signed integer</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="simple-types.html#bigdecimal"><span class="std std-ref">bigDecimal</span></a></td>
<td>Arbitrary precision signed decimal number</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="simple-types.html#timestamp"><span class="std std-ref">timestamp</span></a></td>
<td>An instant in time with no UTC offset or timezone.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="simple-types.html#document"><span class="std std-ref">document</span></a></td>
<td>Open content that functions as a kind of &quot;any&quot; type.</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt><a class="reference internal" href="aggregate-types.html#aggregate-types"><span class="std std-ref">Aggregate types</span></a></dt><dd><p>Aggregate types contain configurable member references to others shapes.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="aggregate-types.html#list"><span class="std std-ref">List</span></a></td>
<td>Ordered collection of homogeneous values</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="aggregate-types.html#map"><span class="std std-ref">Map</span></a></td>
<td>Map data structure that maps string keys to homogeneous values</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="aggregate-types.html#structure"><span class="std std-ref">Structure</span></a></td>
<td>Fixed set of named heterogeneous members</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="aggregate-types.html#union"><span class="std std-ref">Union</span></a></td>
<td>Tagged union data structure that can take on one of several
different, but fixed, types</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt><a class="reference internal" href="service-types.html#service-types"><span class="std std-ref">Service types</span></a></dt><dd><p>Types that define the organization and operations of a service.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="service-types.html#service"><span class="std std-ref">service</span></a></td>
<td>Entry point of an API that aggregates resources and operations together</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="service-types.html#operation"><span class="std std-ref">operation</span></a></td>
<td>Represents the input, output, and errors of an API operation</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="service-types.html#resource"><span class="std std-ref">resource</span></a></td>
<td>Entity with an identity that has a set of operations</td>
</tr>
</tbody>
</table>
</div>
</dd>
</dl>
</div>
<div class="section" id="member-shapes">
<span id="member"></span><h3><span class="section-number">1.6.2. </span>Member shapes<a class="headerlink" href="#member-shapes" title="Permalink to this heading">#</a></h3>
<p><em class="dfn">Members</em> are defined in shapes to reference other shapes using
a <a class="reference internal" href="#shape-id"><span class="std std-ref">shape ID</span></a>. Members are found in <a class="reference internal" href="simple-types.html#enum"><span class="std std-ref">enum</span></a>,
<a class="reference internal" href="simple-types.html#intenum"><span class="std std-ref">intEnum</span></a>, <a class="reference internal" href="aggregate-types.html#list"><span class="std std-ref">list</span></a>, <a class="reference internal" href="aggregate-types.html#map"><span class="std std-ref">map</span></a>,
<a class="reference internal" href="aggregate-types.html#structure"><span class="std std-ref">structure</span></a>, and <a class="reference internal" href="aggregate-types.html#union"><span class="std std-ref">union</span></a> shapes. The shape
referenced by a member is called its &quot;target&quot;. A member MUST NOT target a
<a class="reference internal" href="#trait-shapes"><span class="std std-ref">trait</span></a>, <a class="reference internal" href="service-types.html#operation"><span class="std std-ref">operation</span></a>,
<a class="reference internal" href="service-types.html#resource"><span class="std std-ref">resource</span></a>, <a class="reference internal" href="service-types.html#service"><span class="std std-ref">service</span></a>, or <code class="docutils literal notranslate"><span class="pre">member</span></code>.</p>
<p>The following example defines a <a class="reference internal" href="aggregate-types.html#list"><span class="std std-ref">list</span></a>
that contains a member shape. Further examples can be found in the
documentation for <a class="reference internal" href="#shapes"><span class="std std-ref">shape types</span></a>.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="kd">list </span><span class="nc">UserNameList</span><span class="w"> </span>{
<span class="w">    </span><span class="py">member</span><span class="p">:</span><span class="w"> </span><span class="vc">UserName</span>
}
</pre></div>
</div>
</div>
<div class="section" id="shape-id">
<span id="id3"></span><h3><span class="section-number">1.6.3. </span>Shape ID<a class="headerlink" href="#shape-id" title="Permalink to this heading">#</a></h3>
<p>A <em class="dfn">shape ID</em> is used to refer to shapes in the model. All shapes have an
assigned shape ID.</p>
<p>The following example defines a shape in the <code class="docutils literal notranslate"><span class="pre">smithy.example</span></code> namespace named
<code class="docutils literal notranslate"><span class="pre">MyString</span></code>, giving the shape a shape ID of <code class="docutils literal notranslate"><span class="pre">smithy.example#MyString</span></code>:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="kd">string </span><span class="nc">MyString</span>
</pre></div>
</div>
<p>Shape IDs have the following syntax:</p>
<div class="no-copybutton highlight-none notranslate"><div class="highlight"><pre><span></span>smithy.example.foo#ExampleShapeName$memberName
└─────────┬──────┘ └───────┬──────┘ └────┬───┘
     (Namespace)     (Shape name)  (Member name)
                   └──────────────┬────────────┘
                         (Relative shape ID)
└──────────────────────┬───────────────────────┘
              (Absolute shape ID)
</pre></div>
</div>
<dl class="docutils">
<dt>Absolute shape ID</dt><dd>An <em class="dfn">absolute shape ID</em> starts with a <a class="reference internal" href="#grammar-token-smithy-Namespace"><code class="xref std std-token docutils literal notranslate"><span class="pre">namespace</span></code></a>,
followed by &quot;<code class="docutils literal notranslate"><span class="pre">#</span></code>&quot;, followed by a <em>relative shape ID</em>. For example,
<code class="docutils literal notranslate"><span class="pre">smithy.example#Foo</span></code> and <code class="docutils literal notranslate"><span class="pre">smithy.example#Foo$bar</span></code> are absolute shape IDs.</dd>
<dt>Relative shape ID</dt><dd>A <em class="dfn">relative shape ID</em> contains a <a class="reference internal" href="#grammar-token-smithy-Identifier"><code class="xref std std-token docutils literal notranslate"><span class="pre">shape</span> <span class="pre">name</span></code></a>
and an optional <a class="reference internal" href="#grammar-token-smithy-Identifier"><code class="xref std std-token docutils literal notranslate"><span class="pre">member</span> <span class="pre">name</span></code></a>. The shape name and
member name are separated by the &quot;<code class="docutils literal notranslate"><span class="pre">$</span></code>&quot; symbol if a member name is
present. For example, <code class="docutils literal notranslate"><span class="pre">Foo</span></code> and <code class="docutils literal notranslate"><span class="pre">Foo$bar</span></code> are relative shape IDs.</dd>
<dt>Namespace</dt><dd><p>A namespace is a mechanism for logically grouping shapes in a way
that makes them reusable alongside other models without naming
conflicts. A semantic model MAY contain shapes defined across multiple
namespaces. The IDL representation supports zero or one namespace per
model file, while the JSON AST representation supports zero or more
namespaces per model file.</p>
<p>Models SHOULD use a single namespace to model a single logical domain.
Limiting the number of namespaces used to define a logical grouping of
shapes limits the potential for ambiguity if the shapes are used by the
same service or need to be referenced within the same model.</p>
</dd>
<dt>Shape name</dt><dd><p>The name of the shape within a namespace.</p>
<p>Consumers of a Smithy model MAY choose to inflect shape names, structure
member names, and other facets of a Smithy model in order to expose a more
idiomatic experience to particular programming languages. In order to make
this easier for consumers of a model, model authors SHOULD utilize a strict
form of PascalCase in which only the first letter of acronyms,
abbreviations, and initialisms are capitalized. For example, prefer
<code class="docutils literal notranslate"><span class="pre">UserId</span></code> over <code class="docutils literal notranslate"><span class="pre">UserID</span></code>, and <code class="docutils literal notranslate"><span class="pre">Arn</span></code> over <code class="docutils literal notranslate"><span class="pre">ARN</span></code>.</p>
</dd>
<dt>Root shape ID</dt><dd>A <em class="dfn">root shape ID</em> is a shape ID that does not contain a member.
For example, <code class="docutils literal notranslate"><span class="pre">smithy.example#Foo</span></code> and <code class="docutils literal notranslate"><span class="pre">Foo</span></code> are root shape IDs.</dd>
</dl>
<div class="section" id="shape-id-abnf">
<h4><span class="section-number">1.6.3.1. </span>Shape ID ABNF<a class="headerlink" href="#shape-id-abnf" title="Permalink to this heading">#</a></h4>
<p>Shape IDs are formally defined by the following ABNF:</p>
<pre class="productionlist highlight">
<strong id="grammar-token-smithy-ShapeId">ShapeId</strong> =
    <a class="reference internal" href="#grammar-token-smithy-RootShapeId"><code class="xref docutils literal notranslate"><span class="pre">RootShapeId</span></code></a> [<a class="reference internal" href="#grammar-token-smithy-ShapeIdMember"><code class="xref docutils literal notranslate"><span class="pre">ShapeIdMember</span></code></a>]

<strong id="grammar-token-smithy-RootShapeId">RootShapeId</strong> =
    <a class="reference internal" href="#grammar-token-smithy-AbsoluteRootShapeId"><code class="xref docutils literal notranslate"><span class="pre">AbsoluteRootShapeId</span></code></a> / <a class="reference internal" href="#grammar-token-smithy-Identifier"><code class="xref docutils literal notranslate"><span class="pre">Identifier</span></code></a>

<strong id="grammar-token-smithy-AbsoluteRootShapeId">AbsoluteRootShapeId</strong> =
    <a class="reference internal" href="#grammar-token-smithy-Namespace"><code class="xref docutils literal notranslate"><span class="pre">Namespace</span></code></a> &quot;#&quot; <a class="reference internal" href="#grammar-token-smithy-Identifier"><code class="xref docutils literal notranslate"><span class="pre">Identifier</span></code></a>

<strong id="grammar-token-smithy-Namespace">Namespace</strong> =
    <a class="reference internal" href="#grammar-token-smithy-Identifier"><code class="xref docutils literal notranslate"><span class="pre">Identifier</span></code></a> *(&quot;.&quot; <a class="reference internal" href="#grammar-token-smithy-Identifier"><code class="xref docutils literal notranslate"><span class="pre">Identifier</span></code></a>)

<strong id="grammar-token-smithy-Identifier">Identifier</strong> =
    <a class="reference internal" href="#grammar-token-smithy-IdentifierStart"><code class="xref docutils literal notranslate"><span class="pre">IdentifierStart</span></code></a> *<a class="reference internal" href="#grammar-token-smithy-IdentifierChars"><code class="xref docutils literal notranslate"><span class="pre">IdentifierChars</span></code></a>

<strong id="grammar-token-smithy-IdentifierStart">IdentifierStart</strong> =
    (1*&quot;_&quot; (ALPHA / DIGIT)) / ALPHA

<strong id="grammar-token-smithy-IdentifierChars">IdentifierChars</strong> =
    ALPHA / DIGIT / &quot;_&quot;

<strong id="grammar-token-smithy-ShapeIdMember">ShapeIdMember</strong> =
    &quot;$&quot; <a class="reference internal" href="#grammar-token-smithy-Identifier"><code class="xref docutils literal notranslate"><span class="pre">Identifier</span></code></a>
</pre>
</div>
<div class="section" id="shape-id-conflicts">
<span id="id4"></span><h4><span class="section-number">1.6.3.2. </span>Shape ID conflicts<a class="headerlink" href="#shape-id-conflicts" title="Permalink to this heading">#</a></h4>
<p>While shape ID references within the semantic model are case-sensitive, no
two shapes in the semantic model can have the same case-insensitive shape ID.
This restriction makes it easier to use Smithy models for code generation in
programming languages that do not support case-sensitive identifiers or that
perform some kind of normalization on generated identifiers (for example,
a Python code generator might convert all member names to lower snake case).
To illustrate, <code class="docutils literal notranslate"><span class="pre">com.Foo#baz</span></code> and <code class="docutils literal notranslate"><span class="pre">com.foo#BAZ</span></code> are not allowed in the
same semantic model. This restriction also extends to member names:
<code class="docutils literal notranslate"><span class="pre">com.foo#Baz$bar</span></code> and <code class="docutils literal notranslate"><span class="pre">com.foo#Baz$BAR</span></code> are in conflict.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#merging-models"><span class="std std-ref">Merging model files</span></a> for information on how conflicting shape
definitions for the same shape ID are handled when assembling the
semantic model from multiple model files.</p>
</div>
</div>
</div>
</div>
<div class="section" id="traits">
<span id="non-aws-traits"></span><span id="id5"></span><h2><span class="section-number">1.7. </span>Traits<a class="headerlink" href="#traits" title="Permalink to this heading">#</a></h2>
<p><em>Traits</em> are model components that can be attached to <a class="reference internal" href="#shapes"><span class="std std-ref">shapes</span></a>
to describe additional information about the shape; shapes provide the
structure and layout of an API, while traits provide refinement and style.</p>
<div class="section" id="applying-traits">
<span id="id6"></span><h3><span class="section-number">1.7.1. </span>Applying traits<a class="headerlink" href="#applying-traits" title="Permalink to this heading">#</a></h3>
<p>An instance of a trait applied to a shape is called an <em>applied trait</em>. Only
a single instance of a trait can be applied to a shape. The way in which a
trait is applied to a shape depends on the model file representation.</p>
<p>Traits are applied to shapes in the IDL using <a class="reference internal" href="idl.html#grammar-token-smithy-TraitStatements"><code class="xref std std-token docutils literal notranslate"><span class="pre">smithy:TraitStatements</span></code></a> that
immediately precede a shape. The following example applies the
<a class="reference internal" href="constraint-traits.html#length-trait"><span class="std std-ref">length trait</span></a> and <a class="reference internal" href="documentation-traits.html#documentation-trait"><span class="std std-ref">documentation trait</span></a> to <code class="docutils literal notranslate"><span class="pre">MyString</span></code>:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="nt">@length</span>(<span class="py">min</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="py">max</span><span class="p">:</span><span class="w"> </span><span class="m">100</span>)
<span class="nt">@documentation</span>(<span class="s2">&quot;Contains a string&quot;</span>)
<span class="kd">string </span><span class="nc">MyString</span>
</pre></div>
</div>
<ul class="simple">
<li>Refer to the <a class="reference internal" href="idl.html#idl-applying-traits"><span class="std std-ref">IDL specification</span></a> for a
description of how traits are applied in the IDL.</li>
<li>Refer to the <a class="reference internal" href="json-ast.html#json-ast"><span class="std std-ref">JSON AST specification</span></a> for a
description of how traits are applied in the JSON AST.</li>
</ul>
<div class="section" id="scope-of-member-traits">
<h4><span class="section-number">1.7.1.1. </span>Scope of member traits<a class="headerlink" href="#scope-of-member-traits" title="Permalink to this heading">#</a></h4>
<p>Traits that target <a class="reference internal" href="#member"><span class="std std-ref">members</span></a> apply only in the context of
the member shape and do not affect the shape targeted by the member. Traits
applied to a member supersede traits applied to the shape targeted by the
member and do not inherently conflict.</p>
<p>In the following example, the <a class="reference internal" href="constraint-traits.html#range-trait"><span class="std std-ref">range trait</span></a> applied to <code class="docutils literal notranslate"><span class="pre">numberOfItems</span></code>
takes precedence over the trait applied to <code class="docutils literal notranslate"><span class="pre">PositiveInteger</span></code>.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">structure </span><span class="nc">ShoppingCart</span><span class="w"> </span>{
<span class="w">    </span><span class="c">// This trait supersedes the PositiveInteger trait.</span>
<span class="w">    </span><span class="nt">@range</span>(<span class="py">min</span><span class="p">:</span><span class="w"> </span><span class="m">7</span><span class="p">,</span><span class="w"> </span><span class="py">max</span><span class="p">:</span><span class="m">12</span>)
<span class="w">    </span><span class="py">numberOfItems</span><span class="p">:</span><span class="w"> </span><span class="vc">PositiveInteger</span>
}

<span class="nt">@range</span>(<span class="py">min</span><span class="p">:</span><span class="w"> </span><span class="m">1</span>)
<span class="kd">integer </span><span class="nc">PositiveInteger</span>
</pre></div>
</div>
</div>
<div class="section" id="applying-traits-externally">
<span id="apply-statements"></span><h4><span class="section-number">1.7.1.2. </span>Applying traits externally<a class="headerlink" href="#applying-traits-externally" title="Permalink to this heading">#</a></h4>
<p>Both the IDL and JSON AST model representations allow traits to be applied
to shapes outside of a shape's definition. This is done using an
<a class="reference internal" href="idl.html#grammar-token-smithy-ApplyStatement"><code class="xref std std-token docutils literal notranslate"><span class="pre">apply</span></code></a> statement in the IDL, or the
<a class="reference internal" href="json-ast.html#ast-apply"><span class="std std-ref">apply</span></a> type in the JSON AST. For example, this can be
useful to allow different teams within the same organization to independently
own different facets of a model; a service team could own the model that
defines the shapes and traits of the API, and a documentation team could
own a model that applies documentation traits to the shapes.</p>
<p>The following example applies the <a class="reference internal" href="documentation-traits.html#documentation-trait"><span class="std std-ref">documentation trait</span></a> and
<a class="reference internal" href="constraint-traits.html#length-trait"><span class="std std-ref">length trait</span></a> to the <code class="docutils literal notranslate"><span class="pre">smithy.example#MyString</span></code> shape:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="kd">apply </span><span class="nc">MyString</span><span class="w"> </span><span class="nt">@documentation</span>(<span class="s2">&quot;This is my string!&quot;</span>)
<span class="kd">apply </span><span class="nc">MyString</span><span class="w"> </span><span class="nt">@length</span>(<span class="py">min</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="py">max</span><span class="p">:</span><span class="w"> </span><span class="m">10</span>)
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In the semantic model, applying traits outside of a shape definition is
treated exactly the same as applying the trait inside of a shape
definition.</p>
</div>
</div>
<div class="section" id="trait-conflict-resolution">
<span id="id7"></span><h4><span class="section-number">1.7.1.3. </span>Trait conflict resolution<a class="headerlink" href="#trait-conflict-resolution" title="Permalink to this heading">#</a></h4>
<p>Trait conflict resolution is used when the same trait is applied multiple
times to a shape. Duplicate traits applied to shapes are allowed in the
following cases:</p>
<ol class="arabic simple">
<li>If the trait is a <code class="docutils literal notranslate"><span class="pre">list</span></code> or <code class="docutils literal notranslate"><span class="pre">set</span></code> shape, then the conflicting trait
values are concatenated into a single trait value.</li>
<li>If both values are exactly equal, then the conflict is ignored.</li>
</ol>
<p>All other instances of trait collisions are prohibited.</p>
<p>The following model definition is <strong>valid</strong> because the <code class="docutils literal notranslate"><span class="pre">length</span></code> trait is
duplicated on the <code class="docutils literal notranslate"><span class="pre">MyList</span></code> shape with the same values:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="nt">@length</span>(<span class="py">min</span><span class="p">:</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="py">max</span><span class="p">:</span><span class="w"> </span><span class="m">10</span>)
<span class="kd">list </span><span class="nc">MyList</span><span class="w"> </span>{
<span class="w">    </span><span class="py">member</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}

<span class="kd">apply </span><span class="nc">MyList</span><span class="w"> </span><span class="nt">@length</span>(<span class="py">min</span><span class="p">:</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="py">max</span><span class="p">:</span><span class="w"> </span><span class="m">10</span>)
</pre></div>
</div>
<p>The following model definition is <strong>valid</strong> because the <code class="docutils literal notranslate"><span class="pre">tags</span></code> trait
is a list. The resulting value assigned to the <code class="docutils literal notranslate"><span class="pre">tags</span></code> trait on the
<code class="docutils literal notranslate"><span class="pre">Hello</span></code> shape is a list that contains &quot;a&quot;, &quot;b&quot;, and &quot;c&quot;.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="nt">@tags</span>([<span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;b&quot;</span>])
<span class="kd">string </span><span class="nc">Hello</span>

<span class="kd">apply </span><span class="nc">Hello</span><span class="w"> </span><span class="nt">@tags</span>([<span class="s2">&quot;c&quot;</span>])
</pre></div>
</div>
<p>The following model definition is <strong>invalid</strong> because the <code class="docutils literal notranslate"><span class="pre">length</span></code> trait is
duplicated on the <code class="docutils literal notranslate"><span class="pre">MyList</span></code> shape with different values:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="nt">@length</span>(<span class="py">min</span><span class="p">:</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="py">max</span><span class="p">:</span><span class="w"> </span><span class="m">10</span>)
<span class="kd">list </span><span class="nc">MyList</span><span class="w"> </span>{
<span class="w">    </span><span class="py">member</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}

<span class="kd">apply </span><span class="nc">MyList</span><span class="w"> </span><span class="nt">@length</span>(<span class="py">min</span><span class="p">:</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="py">max</span><span class="p">:</span><span class="w"> </span><span class="m">20</span>)
</pre></div>
</div>
</div>
<div class="section" id="trait-node-values">
<span id="id8"></span><h4><span class="section-number">1.7.1.4. </span>Trait node values<a class="headerlink" href="#trait-node-values" title="Permalink to this heading">#</a></h4>
<p>The value provided for a trait MUST be compatible with the <code class="docutils literal notranslate"><span class="pre">shape</span></code> of the
trait. The following table defines each shape type that is available to
target from traits and how their values are defined in
<a class="reference internal" href="idl.html#grammar-token-smithy-NodeValue"><code class="xref std std-token docutils literal notranslate"><span class="pre">node</span></code></a> values.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Smithy type</th>
<th class="head">Node type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>blob</td>
<td>string</td>
<td>A <code class="docutils literal notranslate"><span class="pre">string</span></code> value that is base64 encoded.</td>
</tr>
<tr class="row-odd"><td>boolean</td>
<td>boolean</td>
<td>Can be set to <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>.</td>
</tr>
<tr class="row-even"><td>byte</td>
<td>number</td>
<td>The value MUST fall within the range of -128 to 127</td>
</tr>
<tr class="row-odd"><td>short</td>
<td>number</td>
<td>The value MUST fall within the range of -32,768 to 32,767</td>
</tr>
<tr class="row-even"><td>integer</td>
<td>number</td>
<td>The value MUST fall within the range of -2^31 to (2^31)-1.</td>
</tr>
<tr class="row-odd"><td>long</td>
<td>number</td>
<td>The value MUST fall within the range of -2^63 to (2^63)-1.</td>
</tr>
<tr class="row-even"><td>float</td>
<td>string | number</td>
<td>The value MUST be either a normal JSON number or one of the following
string values: <code class="docutils literal notranslate"><span class="pre">&quot;NaN&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;Infinity&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;-Infinity&quot;</span></code>.</td>
</tr>
<tr class="row-odd"><td>double</td>
<td>string | number</td>
<td>The value MUST be either a normal JSON number or one of the following
string values: <code class="docutils literal notranslate"><span class="pre">&quot;NaN&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;Infinity&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;-Infinity&quot;</span></code>.</td>
</tr>
<tr class="row-even"><td>bigDecimal</td>
<td>string | number</td>
<td>bigDecimal values can be serialized as strings to avoid rounding
issues when parsing a Smithy model in various languages.</td>
</tr>
<tr class="row-odd"><td>bigInteger</td>
<td>string | number</td>
<td>bigInteger values can be serialized as strings to avoid truncation
issues when parsing a Smithy model in various languages.</td>
</tr>
<tr class="row-even"><td>string</td>
<td>string</td>
<td>The provided value SHOULD be compatible with the <code class="docutils literal notranslate"><span class="pre">mediaType</span></code> of the
string shape if present; however, this is not validated by Smithy.</td>
</tr>
<tr class="row-odd"><td>timestamp</td>
<td>number | string</td>
<td>If a number is provided, it represents Unix epoch seconds with optional
millisecond precision. If a string is provided, it MUST be a valid
<span class="target" id="index-0"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3339.html"><strong>RFC 3339</strong></a> string with optional fractional precision but no UTC offset
(for example, <code class="docutils literal notranslate"><span class="pre">1985-04-12T23:20:50.52Z</span></code>).</td>
</tr>
<tr class="row-even"><td>list</td>
<td>array</td>
<td>Each value in the array MUST be compatible with the targeted member.</td>
</tr>
<tr class="row-odd"><td>map</td>
<td>object</td>
<td>Each key MUST be compatible with the <code class="docutils literal notranslate"><span class="pre">key</span></code> member of the map, and
each value MUST be compatible with the <code class="docutils literal notranslate"><span class="pre">value</span></code> member of the map.</td>
</tr>
<tr class="row-even"><td>structure</td>
<td>object</td>
<td>All members marked as required MUST be provided in a corresponding
key-value pair. Each key MUST correspond to a single member name of
the structure. Each value MUST be compatible with the member that
corresponds to the member name.</td>
</tr>
<tr class="row-odd"><td>union</td>
<td>object</td>
<td>The object MUST contain a single key-value pair. The key MUST be
one of the member names of the union shape, and the value MUST be
compatible with the corresponding shape.</td>
</tr>
</tbody>
</table>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Trait values MUST be compatible with the <a class="reference internal" href="type-refinement-traits.html#required-trait"><span class="std std-ref">required trait</span></a> and any
associated <a class="reference internal" href="constraint-traits.html"><span class="doc">constraint traits</span></a>.</p>
</div>
</div>
</div>
<div class="section" id="defining-traits">
<span id="trait-shapes"></span><span id="id9"></span><h3><span class="section-number">1.7.2. </span>Defining traits<a class="headerlink" href="#defining-traits" title="Permalink to this heading">#</a></h3>
<p>Traits are defined by applying <a class="reference internal" href="#trait-trait"><span class="std std-ref">smithy.api#trait</span></a> to a shape.
This trait can only be applied to simple types and aggregate types.
By convention, trait shape names SHOULD use a lowercase name so that they
visually stand out from normal shapes.</p>
<p>The following example defines a trait with a <a class="reference internal" href="#shape-id"><span class="std std-ref">shape ID</span></a> of
<code class="docutils literal notranslate"><span class="pre">smithy.example#myTraitName</span></code> and applies it to <code class="docutils literal notranslate"><span class="pre">smithy.example#MyString</span></code>:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="nt">@trait</span>(<span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;*&quot;</span>)
<span class="kd">structure </span><span class="nc">myTraitName</span><span class="w"> </span>{}

<span class="nt">@myTraitName</span>
<span class="kd">string </span><span class="nc">MyString</span>
</pre></div>
</div>
<p>The following example defines two custom traits: <code class="docutils literal notranslate"><span class="pre">beta</span></code> and
<code class="docutils literal notranslate"><span class="pre">structuredTrait</span></code>:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="c">/// A trait that can be applied to a member.</span>
<span class="nt">@trait</span>(<span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;structure &gt; member&quot;</span>)
<span class="kd">structure </span><span class="nc">beta</span><span class="w"> </span>{}

<span class="c">/// A trait that has members.</span>
<span class="nt">@trait</span>(<span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">conflicts</span><span class="p">:</span><span class="w"> </span>[<span class="vc">beta</span>])
<span class="kd">structure </span><span class="nc">structuredTrait</span><span class="w"> </span>{
<span class="w">    </span><span class="nt">@required</span>
<span class="w">    </span><span class="py">lorem</span><span class="p">:</span><span class="w"> </span><span class="vc">StringShape</span>

<span class="w">    </span><span class="nt">@required</span>
<span class="w">    </span><span class="py">ipsum</span><span class="p">:</span><span class="w"> </span><span class="vc">StringShape</span>

<span class="w">    </span><span class="py">dolor</span><span class="p">:</span><span class="w"> </span><span class="vc">StringShape</span>
}

<span class="c">// Apply the &quot;beta&quot; trait to the &quot;foo&quot; member.</span>
<span class="kd">structure </span><span class="nc">MyShape</span><span class="w"> </span>{
<span class="w">    </span><span class="nt">@required</span>
<span class="w">    </span><span class="nt">@beta</span>
<span class="w">    </span><span class="py">foo</span><span class="p">:</span><span class="w"> </span><span class="vc">StringShape</span>
}

<span class="c">// Apply the structuredTrait to the string.</span>
<span class="nt">@structuredTrait</span>(
<span class="w">    </span><span class="py">lorem</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;This is a custom trait!&quot;</span>
<span class="w">    </span><span class="py">ipsum</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;lorem and ipsum are both required values.&quot;</span>)
<span class="kd">string </span><span class="nc">StringShape</span>
</pre></div>
</div>
<div class="section" id="prelude-traits">
<h4><span class="section-number">1.7.2.1. </span>Prelude traits<a class="headerlink" href="#prelude-traits" title="Permalink to this heading">#</a></h4>
<p>When using the IDL, built-in traits defined in the Smithy
<a class="reference internal" href="#prelude"><span class="std std-ref">prelude</span></a> namespace, <code class="docutils literal notranslate"><span class="pre">smithy.api</span></code>, are automatically
available in every Smithy model and namespace through relative shape IDs.</p>
</div>
<div class="section" id="references-to-traits">
<h4><span class="section-number">1.7.2.2. </span>References to traits<a class="headerlink" href="#references-to-traits" title="Permalink to this heading">#</a></h4>
<p>The only valid reference to a trait is through applying a trait to a
shape. Members and references within a model MUST NOT target shapes.</p>
</div>
<div class="section" id="trait-trait">
<span id="smithy-api-trait-trait"></span><span id="id10"></span><h4><span class="section-number">1.7.2.3. </span><code class="docutils literal notranslate"><span class="pre">trait</span></code> trait<a class="headerlink" href="#trait-trait" title="Permalink to this heading">#</a></h4>
<dl class="docutils">
<dt>Summary</dt><dd>Marks a shape as a <a class="reference internal" href="#traits"><span class="std std-ref">trait</span></a>.</dd>
<dt>Trait selector</dt><dd><p><code class="docutils literal notranslate"><span class="pre">:is(simpleType,</span> <span class="pre">list,</span> <span class="pre">map,</span> <span class="pre">set,</span> <span class="pre">structure,</span> <span class="pre">union)</span></code></p>
<p>This trait can only be applied to simple types, <code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">map</span></code>, <code class="docutils literal notranslate"><span class="pre">set</span></code>,
<code class="docutils literal notranslate"><span class="pre">structure</span></code>, and <code class="docutils literal notranslate"><span class="pre">union</span></code> shapes.</p>
</dd>
<dt>Value type</dt><dd><code class="docutils literal notranslate"><span class="pre">structure</span></code></dd>
</dl>
<div class="section" id="trait-properties">
<h5><span class="section-number">1.7.2.3.1. </span>Trait properties<a class="headerlink" href="#trait-properties" title="Permalink to this heading">#</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">smithy.api#trait</span></code> is a structure that supports the following members:</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>selector</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>A valid <a class="reference internal" href="selectors.html#selectors"><span class="std std-ref">selector</span></a> that defines where the trait
can be applied. For example, a <code class="docutils literal notranslate"><span class="pre">selector</span></code> set to <code class="docutils literal notranslate"><span class="pre">:test(list,</span> <span class="pre">map)</span></code>
means that the trait can be applied to a <a class="reference internal" href="aggregate-types.html#list"><span class="std std-ref">list</span></a> or
<a class="reference internal" href="aggregate-types.html#map"><span class="std std-ref">map</span></a> shape. This value defaults to <code class="docutils literal notranslate"><span class="pre">*</span></code> if not set,
meaning the trait can be applied to any shape.</td>
</tr>
<tr class="row-odd"><td>conflicts</td>
<td>[<code class="docutils literal notranslate"><span class="pre">string</span></code>]</td>
<td>Defines the shape IDs of traits that MUST NOT be applied to the same
shape as the trait being defined. This allows traits to be defined as
mutually exclusive. Provided shape IDs MAY target unknown traits
that are not defined in the model.</td>
</tr>
<tr class="row-even"><td>structurallyExclusive</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>One of &quot;member&quot; or &quot;target&quot;. When set to &quot;member&quot;, only a single
member of a structure can be marked with the trait. When set to
&quot;target&quot;, only a single member of a structure can target a shape
marked with this trait.</td>
</tr>
<tr class="row-odd"><td>breakingChanges</td>
<td>[<a class="reference internal" href="#trait-breaking-change-rules"><span class="std std-ref">BreakingChangeRule</span></a>]</td>
<td>Defines the backward compatibility rules of the trait.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="annotation-traits">
<span id="annotation-trait"></span><h4><span class="section-number">1.7.2.4. </span>Annotation traits<a class="headerlink" href="#annotation-traits" title="Permalink to this heading">#</a></h4>
<p>A structure trait with no members is called an <em>annotation trait</em>. It's hard
to predict what information a trait needs to capture when modeling a domain;
a trait might start out as a simple annotation, but later might benefit
from additional information. By defining an annotation trait rather than a
boolean trait, the trait can safely add optional members over time as needed.</p>
<p>The following example defines an annotation trait named <code class="docutils literal notranslate"><span class="pre">foo</span></code>:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="nt">@trait</span>
<span class="kd">structure </span><span class="nc">foo</span><span class="w"> </span>{}
</pre></div>
</div>
<p>A member can be safely added to an annotation trait if the member is not
marked as <a class="reference internal" href="type-refinement-traits.html#required-trait"><span class="std std-ref">required</span></a>. The applications of the <code class="docutils literal notranslate"><span class="pre">foo</span></code>
trait in the previous example and the following example are all valid even
after adding a member to the <code class="docutils literal notranslate"><span class="pre">foo</span></code> trait:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="nt">@trait</span>
<span class="kd">structure </span><span class="nc">foo</span><span class="w"> </span>{
<span class="w">    </span><span class="py">baz</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}

<span class="nt">@foo</span>(<span class="py">baz</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bar&quot;</span>)
<span class="kd">string </span><span class="nc">MyString4</span>
</pre></div>
</div>
</div>
<div class="section" id="breaking-change-rules">
<span id="trait-breaking-change-rules"></span><h4><span class="section-number">1.7.2.5. </span>Breaking change rules<a class="headerlink" href="#breaking-change-rules" title="Permalink to this heading">#</a></h4>
<p>Backward compatibility rules of a trait can be defined in the <code class="docutils literal notranslate"><span class="pre">breakingChanges</span></code>
member of a trait definition. This member is a list of diff rules. Smithy
tooling that performs semantic diff analysis between two versions of the same
model can use these rules to detect breaking or risky changes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Not every kind of breaking change can be described using the
<code class="docutils literal notranslate"><span class="pre">breakingChanges</span></code> property. Such backward compatibility rules SHOULD
instead be described through documentation and ideally enforced through
custom diff tooling.</p>
</div>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>change</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><p class="first"><strong>Required</strong>. The type of change. This value can be set to one of the
following:</p>
<ul class="last simple">
<li><code class="docutils literal notranslate"><span class="pre">add</span></code>: The trait or value at the given path was added.</li>
<li><code class="docutils literal notranslate"><span class="pre">remove</span></code>: The trait or value at the given path was removed.</li>
<li><code class="docutils literal notranslate"><span class="pre">update</span></code>: The trait or value at the given path was changed.</li>
<li><code class="docutils literal notranslate"><span class="pre">any</span></code>: The trait or value at the given path was added, removed,
or changed.</li>
<li><code class="docutils literal notranslate"><span class="pre">presence</span></code>: The trait or value at the given path was either
added or removed.</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>path</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>A JSON pointer as described in <span class="target" id="index-1"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6901.html"><strong>RFC 6901</strong></a> that points to the values
to compare from the original model to the updated model. If omitted
or if an empty string is provided (<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>), the entire trait is used
as the value for comparison. The provided pointer MUST correctly
correspond to shapes in the model.</td>
</tr>
<tr class="row-even"><td>severity</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><p class="first">Defines the severity of the change. This value can be set to:</p>
<ul class="last simple">
<li><code class="docutils literal notranslate"><span class="pre">ERROR</span></code>: The change is backward incompatible. This is the default
assumed severity.</li>
<li><code class="docutils literal notranslate"><span class="pre">DANGER</span></code>: The change is very likely backward incompatible.</li>
<li><code class="docutils literal notranslate"><span class="pre">WARNING</span></code>: The change might be backward incompatible.</li>
<li><code class="docutils literal notranslate"><span class="pre">NOTE</span></code>: The change is likely ok, but should be noted during
things like code reviews.</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>message</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>Provides an optional plain text message that provides information about
why the detected change could be problematic.</td>
</tr>
</tbody>
</table>
</div>
<p>It is a backward incompatible change to add the following trait to an
existing shape:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@trait</span>(<span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;add&quot;</span>}])
<span class="kd">structure </span><span class="nc">cannotAdd</span><span class="w"> </span>{}
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The above trait definition is equivalent to the following:</p>
<div class="last highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@trait</span>(
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{
<span class="w">            </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;add&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="py">path</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="py">severity</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ERROR&quot;</span>
<span class="w">        </span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">cannotAdd</span><span class="w"> </span>{}
</pre></div>
</div>
</div>
<p>It is a backward incompatible change to add or remove the following trait from
an existing shape:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@trait</span>(<span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;presence&quot;</span>}])
<span class="kd">structure </span><span class="nc">cannotToAddOrRemove</span><span class="w"> </span>{}
</pre></div>
</div>
<p>It is very likely backward incompatible to change the &quot;foo&quot; member of the
following trait or to remove the &quot;baz&quot; member:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@trait</span>(
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{
<span class="w">            </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;update&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="py">path</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/foo&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="py">severity</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DANGER&quot;</span>
<span class="w">        </span>}<span class="p">,</span>
<span class="w">        </span>{
<span class="w">            </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="py">path</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/baz&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="py">severity</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DANGER&quot;</span>
<span class="w">        </span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">fooBaz</span><span class="w"> </span>{
<span class="w">    </span><span class="py">foo</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span>
<span class="w">    </span><span class="py">baz</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}
</pre></div>
</div>
<p>So for example, if the following shape:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@fooBaz</span>(<span class="py">foo</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">baz</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;b&quot;</span>)
<span class="kd">string </span><span class="nc">Example</span>
</pre></div>
</div>
<p>Is changed to:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@fooBaz</span>(<span class="py">foo</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;b&quot;</span>)
<span class="kd">string </span><span class="nc">Example</span>
</pre></div>
</div>
<p>Then the change to the <code class="docutils literal notranslate"><span class="pre">foo</span></code> member from &quot;a&quot; to &quot;b&quot; is backward
incompatible, as is the removal of the <code class="docutils literal notranslate"><span class="pre">baz</span></code> member.</p>
<div class="section" id="referring-to-list-members">
<h5><span class="section-number">1.7.2.5.1. </span>Referring to list members<a class="headerlink" href="#referring-to-list-members" title="Permalink to this heading">#</a></h5>
<p>The JSON pointer can path into the members of a list using a <code class="docutils literal notranslate"><span class="pre">member</span></code>
segment.</p>
<p>In the following example, it is a breaking change to change values of lists
or sets in instances of the <code class="docutils literal notranslate"><span class="pre">names</span></code> trait:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@trait</span>(
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{
<span class="w">            </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;update&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="py">path</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/names/member&quot;</span>
<span class="w">        </span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">names</span><span class="w"> </span>{
<span class="w">    </span><span class="py">names</span><span class="p">:</span><span class="w"> </span><span class="vc">NameList</span>
}

<span class="nt">@private</span>
<span class="kd">list </span><span class="nc">NameList</span><span class="w"> </span>{
<span class="w">    </span><span class="py">member</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}
</pre></div>
</div>
<p>So for example, if the following shape:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@names</span>(<span class="py">names</span><span class="p">:</span><span class="w"> </span>[<span class="s2">&quot;Han&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Luke&quot;</span>])
<span class="kd">string </span><span class="nc">Example</span>
</pre></div>
</div>
<p>Is changed to:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@names</span>(<span class="py">names</span><span class="p">:</span><span class="w"> </span>[<span class="s2">&quot;Han&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Chewy&quot;</span>])
<span class="kd">string </span><span class="nc">Example</span>
</pre></div>
</div>
<p>Then the change to the second value of the <code class="docutils literal notranslate"><span class="pre">names</span></code> member is
backward incompatible because it changed from <code class="docutils literal notranslate"><span class="pre">Luke</span></code> to <code class="docutils literal notranslate"><span class="pre">Chewy</span></code>.</p>
</div>
<div class="section" id="referring-to-map-members">
<h5><span class="section-number">1.7.2.5.2. </span>Referring to map members<a class="headerlink" href="#referring-to-map-members" title="Permalink to this heading">#</a></h5>
<p>Members of a map shape can be referenced in a JSON pointer using
<code class="docutils literal notranslate"><span class="pre">key</span></code> and <code class="docutils literal notranslate"><span class="pre">value</span></code>.</p>
<p>The following example defines a trait where it is backward incompatible
to remove a key value pair from a map:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@trait</span>(
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{
<span class="w">            </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="py">path</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/key&quot;</span>
<span class="w">        </span>}
<span class="w">    </span>]
)
<span class="kd">map </span><span class="nc">jobs</span><span class="w"> </span>{
<span class="w">    </span><span class="py">key</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span>
<span class="w">    </span><span class="py">value</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}
</pre></div>
</div>
<p>So for example, if the following shape:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@jobs</span>(<span class="py">Han</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Smuggler&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">Luke</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Jedi&quot;</span>)
<span class="kd">string </span><span class="nc">Example</span>
</pre></div>
</div>
<p>Is changed to:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@jobs</span>(<span class="py">Luke</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Jedi&quot;</span>)
<span class="kd">string </span><span class="nc">Example</span>
</pre></div>
</div>
<p>Then the removal of the &quot;Han&quot; entry of the map is flagged as backward
incompatible.</p>
<p>The following example detects when values of a map change.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@trait</span>(
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{
<span class="w">            </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;update&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="py">path</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/value&quot;</span>
<span class="w">        </span>}
<span class="w">    </span>]
)
<span class="kd">map </span><span class="nc">jobs</span><span class="w"> </span>{
<span class="w">    </span><span class="py">key</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span>
<span class="w">    </span><span class="py">value</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}
</pre></div>
</div>
<p>So for example, if the following shape:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@jobs</span>(<span class="py">Han</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Smuggler&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">Luke</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Jedi&quot;</span>)
<span class="kd">string </span><span class="nc">Example</span>
</pre></div>
</div>
<p>Is changed to:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@jobs</span>(<span class="py">Han</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Smuggler&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">Luke</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Ghost&quot;</span>)
<span class="kd">string </span><span class="nc">Example</span>
</pre></div>
</div>
<p>Then the change to Luke's mapping from &quot;Jedi&quot; to &quot;Ghost&quot; is
backward incompatible.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Using the &quot;update&quot; <code class="docutils literal notranslate"><span class="pre">change</span></code> type with a map key has no effect.</li>
<li>Using any <code class="docutils literal notranslate"><span class="pre">change</span></code> type other than &quot;update&quot; with map values has no
effect.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="prelude">
<span id="id11"></span><h2><span class="section-number">1.8. </span>Prelude<a class="headerlink" href="#prelude" title="Permalink to this heading">#</a></h2>
<p>All Smithy models automatically include a <em>prelude</em>. The prelude defines
various simple shapes and every trait defined in the core specification.
When using the <a class="reference internal" href="idl.html#idl"><span class="std std-ref">IDL</span></a>, shapes defined in the prelude that are not
marked with the <a class="reference internal" href="constraint-traits.html#private-trait"><span class="std std-ref">private trait</span></a> can be referenced from within any
namespace using a relative shape ID.</p>
<div class="literal-block-wrapper docutils container" id="prelude-shapes">
<div class="code-block-caption"><span class="caption-text">Smithy Prelude</span><a class="headerlink" href="#prelude-shapes" title="Permalink to this code">#</a></div>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="c">// This model defines the Smithy prelude model.</span>
<span class="c">//</span>
<span class="c">// Shapes in the prelude model that are not marked as `@private` can be</span>
<span class="c">// referenced using a relative shape ID.</span>
<span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span>

<span class="kd">namespace </span><span class="nc">smithy.api</span>

<span class="c">// --- The following shapes are publicly available prelude shapes.</span>

<span class="kd">string </span><span class="nc">String</span>

<span class="kd">blob </span><span class="nc">Blob</span>

<span class="kd">bigInteger </span><span class="nc">BigInteger</span>

<span class="kd">bigDecimal </span><span class="nc">BigDecimal</span>

<span class="kd">timestamp </span><span class="nc">Timestamp</span>

<span class="kd">document </span><span class="nc">Document</span>

<span class="kd">boolean </span><span class="nc">Boolean</span>

<span class="kd">byte </span><span class="nc">Byte</span>

<span class="kd">short </span><span class="nc">Short</span>

<span class="kd">integer </span><span class="nc">Integer</span>

<span class="kd">long </span><span class="nc">Long</span>

<span class="kd">float </span><span class="nc">Float</span>

<span class="kd">double </span><span class="nc">Double</span>

<span class="nt">@default</span>(<span class="kc">false</span>)
<span class="kd">boolean </span><span class="nc">PrimitiveBoolean</span>

<span class="nt">@default</span>(<span class="m">0</span>)
<span class="kd">byte </span><span class="nc">PrimitiveByte</span>

<span class="nt">@default</span>(<span class="m">0</span>)
<span class="kd">short </span><span class="nc">PrimitiveShort</span>

<span class="nt">@default</span>(<span class="m">0</span>)
<span class="kd">integer </span><span class="nc">PrimitiveInteger</span>

<span class="nt">@default</span>(<span class="m">0</span>)
<span class="kd">long </span><span class="nc">PrimitiveLong</span>

<span class="nt">@default</span>(<span class="m">0</span>)
<span class="kd">float </span><span class="nc">PrimitiveFloat</span>

<span class="nt">@default</span>(<span class="m">0</span>)
<span class="kd">double </span><span class="nc">PrimitiveDouble</span>

<span class="c">// The `Unit` type is a publicly available &quot;unit&quot; value type. This shape</span>
<span class="c">// is the only shape in Smithy allowed to be marked with the `@unitType` trait.</span>
<span class="nt">@unitType</span>
<span class="kd">structure </span><span class="nc">Unit</span><span class="w"> </span>{}

<span class="c">// --- Shapes below are traits and the private shapes that define them.</span>

<span class="c">/// Makes a shape a trait.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;:is(simpleType, list, map, structure, union)&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;presence&quot;</span>}
<span class="w">        </span>{<span class="py">path</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/structurallyExclusive&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;any&quot;</span>}
<span class="w">        </span>{
<span class="w">            </span><span class="py">path</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/conflicts&quot;</span>
<span class="w">            </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;update&quot;</span>
<span class="w">            </span><span class="py">severity</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NOTE&quot;</span>
<span class="w">            </span><span class="py">message</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Adding more conflicts to a trait could cause previously written models to fail validation.&quot;</span>
<span class="w">        </span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">trait</span><span class="w"> </span>{
<span class="w">    </span><span class="c">/// The valid places in a model that the trait can be applied.</span>
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>

<span class="w">    </span><span class="c">/// Whether or not only a single member in a shape can have this trait.</span>
<span class="w">    </span><span class="py">structurallyExclusive</span><span class="p">:</span><span class="w"> </span><span class="vc">StructurallyExclusive</span>

<span class="w">    </span><span class="c">/// The traits that this trait conflicts with.</span>
<span class="w">    </span><span class="py">conflicts</span><span class="p">:</span><span class="w"> </span><span class="vc">NonEmptyStringList</span>

<span class="w">    </span><span class="c">/// Defines the backward compatibility rules of the trait.</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span><span class="vc">TraitDiffRules</span>
}

<span class="nt">@private</span>
<span class="nt">@length</span>(<span class="py">min</span><span class="p">:</span><span class="w"> </span><span class="m">1</span>)
<span class="kd">list </span><span class="nc">TraitDiffRules</span><span class="w"> </span>{
<span class="w">    </span><span class="py">member</span><span class="p">:</span><span class="w"> </span><span class="vc">TraitDiffRule</span>
}

<span class="nt">@private</span>
<span class="kd">structure </span><span class="nc">TraitDiffRule</span><span class="w"> </span>{
<span class="w">    </span><span class="c">/// Defines a JSON Pointer to the value to evaluate.</span>
<span class="w">    </span><span class="py">path</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>

<span class="w">    </span><span class="c">/// Defines the type of change that is not allowed.</span>
<span class="w">    </span><span class="nt">@required</span>
<span class="w">    </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="vc">TraitChangeType</span>

<span class="w">    </span><span class="c">/// Defines the severity of the change. Defaults to ERROR if not defined.</span>
<span class="w">    </span><span class="py">severity</span><span class="p">:</span><span class="w"> </span><span class="vc">TraitChangeSeverity</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;ERROR&quot;</span>

<span class="w">    </span><span class="c">/// Provides a reason why the change is potentially backward incompatible.</span>
<span class="w">    </span><span class="py">message</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}

<span class="nt">@private</span>
<span class="kd">enum </span><span class="nc">TraitChangeType</span><span class="w"> </span>{
<span class="w">    </span><span class="c">/// Emit when a trait is modified.</span>
<span class="w">    </span><span class="vc">UPDATE</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;update&quot;</span>

<span class="w">    </span><span class="c">/// Emit when a trait or value is added that previously did not exist.</span>
<span class="w">    </span><span class="vc">ADD</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;add&quot;</span>

<span class="w">    </span><span class="c">/// Emit when a trait or value is removed.</span>
<span class="w">    </span><span class="vc">REMOVE</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span>

<span class="w">    </span><span class="c">/// Emit when a trait is added or removed.</span>
<span class="w">    </span><span class="vc">PRESENCE</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;presence&quot;</span>

<span class="w">    </span><span class="c">/// Emit when any change occurs.</span>
<span class="w">    </span><span class="vc">ANY</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;any&quot;</span>
}

<span class="nt">@private</span>
<span class="kd">enum </span><span class="nc">TraitChangeSeverity</span><span class="w"> </span>{
<span class="w">    </span><span class="c">/// A minor infraction occurred.</span>
<span class="w">    </span><span class="vc">NOTE</span>

<span class="w">    </span><span class="c">/// An infraction occurred that needs attention.</span>
<span class="w">    </span><span class="vc">WARNING</span>

<span class="w">    </span><span class="c">/// An infraction occurred that must be resolved.</span>
<span class="w">    </span><span class="vc">DANGER</span>

<span class="w">    </span><span class="c">/// An unrecoverable infraction occurred.</span>
<span class="w">    </span><span class="vc">ERROR</span>
}

<span class="nt">@private</span>
<span class="kd">enum </span><span class="nc">StructurallyExclusive</span><span class="w"> </span>{
<span class="w">    </span><span class="c">/// Only a single member of a shape can be marked with the trait.</span>
<span class="w">    </span><span class="vc">MEMBER</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;member&quot;</span>

<span class="w">    </span><span class="c">/// Only a single member of a shape can target a shape marked with</span>
<span class="w">    </span><span class="c">/// this trait.</span>
<span class="w">    </span><span class="vc">TARGET</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;target&quot;</span>
}

<span class="c">/// Marks a shape or member as deprecated.</span>
<span class="nt">@trait</span>
<span class="kd">structure </span><span class="nc">deprecated</span><span class="w"> </span>{
<span class="w">    </span><span class="c">/// The reason for deprecation.</span>
<span class="w">    </span><span class="py">message</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>

<span class="w">    </span><span class="c">/// A description of when the shape was deprecated (e.g., a date or</span>
<span class="w">    </span><span class="c">/// version).</span>
<span class="w">    </span><span class="py">since</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}

<span class="c">/// Used only in Smithy 1.0 to indicate that a shape is boxed.</span>
<span class="c">///</span>
<span class="c">/// This trait cannot be used in Smithy 2.0 models. When a boxed shape is the</span>
<span class="c">/// target of a member, the member may or may not contain a value, and the</span>
<span class="c">/// member has no default value.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        :test(boolean, byte, short, integer, long, float, double,</span>
<span class="s2">        member &gt; :test(boolean, byte, short, integer, long, float, double))&quot;&quot;&quot;</span>
)
<span class="kd">structure </span><span class="nc">box</span><span class="w"> </span>{}

<span class="c">/// Adds documentation to a shape or member using CommonMark syntax.</span>
<span class="nt">@trait</span>
<span class="kd">string </span><span class="nc">documentation</span>

<span class="c">/// Provides a link to additional documentation.</span>
<span class="nt">@trait</span>
<span class="nt">@length</span>(<span class="py">min</span><span class="p">:</span><span class="w"> </span><span class="m">1</span>)
<span class="kd">map </span><span class="nc">externalDocumentation</span><span class="w"> </span>{
<span class="w">    </span><span class="py">key</span><span class="p">:</span><span class="w"> </span><span class="vc">NonEmptyString</span>
<span class="w">    </span><span class="py">value</span><span class="p">:</span><span class="w"> </span><span class="vc">NonEmptyString</span>
}

<span class="c">/// Defines the ordered list of supported authentication schemes.</span>
<span class="nt">@trait</span>(<span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;:is(service, operation)&quot;</span>)
<span class="nt">@uniqueItems</span>
<span class="kd">list </span><span class="nc">auth</span><span class="w"> </span>{
<span class="w">    </span><span class="py">member</span><span class="p">:</span><span class="w"> </span><span class="vc">AuthTraitReference</span>
}

<span class="c">/// A string that must target an auth trait.</span>
<span class="nt">@idRef</span>(<span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;[trait|authDefinition]&quot;</span>)
<span class="nt">@private</span>
<span class="kd">string </span><span class="nc">AuthTraitReference</span>

<span class="c">/// Marks a trait as a protocol defining trait.</span>
<span class="c">///</span>
<span class="c">/// The targeted trait must only be applied to service shapes, must be a</span>
<span class="c">/// structure, and must have the `trait` trait.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;structure[trait|trait]&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;presence&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">protocolDefinition</span><span class="w"> </span>{
<span class="w">    </span><span class="c">/// The list of traits that protocol implementations must understand in</span>
<span class="w">    </span><span class="c">/// order to successfully use the protocol.</span>
<span class="w">    </span><span class="py">traits</span><span class="p">:</span><span class="w"> </span><span class="vc">TraitShapeIdList</span>

<span class="w">    </span><span class="c">/// Set to true if inline documents are not supported by this protocol.</span>
<span class="w">    </span><span class="py">noInlineDocumentSupport</span><span class="p">:</span><span class="w"> </span><span class="vc">Boolean</span>
}

<span class="nt">@private</span>
<span class="kd">list </span><span class="nc">TraitShapeIdList</span><span class="w"> </span>{
<span class="w">    </span><span class="py">member</span><span class="p">:</span><span class="w"> </span><span class="vc">TraitShapeId</span>
}

<span class="nt">@private</span>
<span class="nt">@idRef</span>(<span class="py">failWhenMissing</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;[trait|trait]&quot;</span>)
<span class="kd">string </span><span class="nc">TraitShapeId</span>

<span class="c">/// Marks a trait as an auth scheme defining trait.</span>
<span class="c">///</span>
<span class="c">/// The targeted trait must only be applied to service shapes or operation</span>
<span class="c">/// shapes, must be a structure, and must have the `trait` trait.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;structure[trait|trait]&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;presence&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">authDefinition</span><span class="w"> </span>{
<span class="w">    </span><span class="c">/// The list of traits that auth implementations must understand in order</span>
<span class="w">    </span><span class="c">/// to successfully use the scheme.</span>
<span class="w">    </span><span class="py">traits</span><span class="p">:</span><span class="w"> </span><span class="vc">TraitShapeIdList</span>
}

<span class="c">/// HTTP Basic Authentication as defined in [RFC 2617](https://tools.ietf.org/html/rfc2617.html).</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;service&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span>}
<span class="w">    </span>]
)
<span class="nt">@authDefinition</span>
<span class="nt">@externalDocumentation</span>(<span class="s2">&quot;RFC 2617&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://tools.ietf.org/html/rfc2617.html&quot;</span>)
<span class="kd">structure </span><span class="nc">httpBasicAuth</span><span class="w"> </span>{}

<span class="c">/// HTTP Digest Authentication as defined in [RFC 2617](https://tools.ietf.org/html/rfc2617.html).</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;service&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span>}
<span class="w">    </span>]
)
<span class="nt">@authDefinition</span>
<span class="nt">@externalDocumentation</span>(<span class="s2">&quot;RFC 2617&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://tools.ietf.org/html/rfc2617.html&quot;</span>)
<span class="kd">structure </span><span class="nc">httpDigestAuth</span><span class="w"> </span>{}

<span class="c">/// HTTP Bearer Authentication as defined in [RFC 6750](https://tools.ietf.org/html/rfc6750.html).</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;service&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span>}
<span class="w">    </span>]
)
<span class="nt">@authDefinition</span>
<span class="nt">@externalDocumentation</span>(<span class="s2">&quot;RFC 6750&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://tools.ietf.org/html/rfc6750.html&quot;</span>)
<span class="kd">structure </span><span class="nc">httpBearerAuth</span><span class="w"> </span>{}

<span class="c">/// An HTTP-specific authentication scheme that sends an arbitrary API key in</span>
<span class="c">/// a header or query string parameter.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;service&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span>}
<span class="w">    </span>]
)
<span class="nt">@authDefinition</span>
<span class="kd">structure </span><span class="nc">httpApiKeyAuth</span><span class="w"> </span>{
<span class="w">    </span><span class="c">/// Defines the name of the HTTP header or query string parameter that</span>
<span class="w">    </span><span class="c">/// contains the API key.</span>
<span class="w">    </span><span class="nt">@required</span>
<span class="w">    </span><span class="py">name</span><span class="p">:</span><span class="w"> </span><span class="vc">NonEmptyString</span>

<span class="w">    </span><span class="c">/// Defines the location of where the key is serialized. This value can</span>
<span class="w">    </span><span class="c">/// be set to `&quot;header&quot;` or `&quot;query&quot;`.</span>
<span class="w">    </span><span class="nt">@required</span>
<span class="w">    </span><span class="py">in</span><span class="p">:</span><span class="w"> </span><span class="vc">HttpApiKeyLocations</span>

<span class="w">    </span><span class="c">/// Defines the security scheme to use in the ``Authorization`` header.</span>
<span class="w">    </span><span class="c">/// This can only be set if the &quot;in&quot; property is set to ``header``.</span>
<span class="w">    </span><span class="py">scheme</span><span class="p">:</span><span class="w"> </span><span class="vc">NonEmptyString</span>
}

<span class="c">/// Provides a structure member with a default value. When added to root</span>
<span class="c">/// level shapes, requires that every targeting structure member defines the</span>
<span class="c">/// same default value on the member or sets a default of null.</span>
<span class="c">///</span>
<span class="c">/// This trait can currently only be used in Smithy 2.0 models.</span>
<span class="nt">@trait</span>(<span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;:is(simpleType, list, map, structure &gt; member :test(&gt; :is(simpleType, list, map)))&quot;</span>)
<span class="kd">document </span><span class="nc">default</span>

<span class="c">/// Indicates that the default trait was added to a member.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;structure &gt; member [trait|default]&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">addedDefault</span><span class="w"> </span>{}

<span class="c">/// Requires that non-authoritative generators like clients treat a structure</span>
<span class="c">/// member as nullable regardless of if the member is also marked with the</span>
<span class="c">/// required trait.</span>
<span class="nt">@trait</span>(<span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;structure &gt; member&quot;</span>)
<span class="kd">structure </span><span class="nc">clientOptional</span><span class="w"> </span>{}

<span class="nt">@private</span>
<span class="kd">enum </span><span class="nc">HttpApiKeyLocations</span><span class="w"> </span>{
<span class="w">    </span><span class="vc">HEADER</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;header&quot;</span>
<span class="w">    </span><span class="vc">QUERY</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;query&quot;</span>
}

<span class="c">/// Indicates that an operation can be called without authentication.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;operation&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">optionalAuth</span><span class="w"> </span>{}

<span class="c">/// Provides example inputs and outputs for operations.</span>
<span class="nt">@trait</span>(<span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;operation&quot;</span>)
<span class="kd">list </span><span class="nc">examples</span><span class="w"> </span>{
<span class="w">    </span><span class="py">member</span><span class="p">:</span><span class="w"> </span><span class="vc">Example</span>
}

<span class="nt">@private</span>
<span class="kd">structure </span><span class="nc">Example</span><span class="w"> </span>{
<span class="w">    </span><span class="nt">@required</span>
<span class="w">    </span><span class="py">title</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>

<span class="w">    </span><span class="py">documentation</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>

<span class="w">    </span><span class="py">input</span><span class="p">:</span><span class="w"> </span><span class="vc">Document</span>

<span class="w">    </span><span class="py">output</span><span class="p">:</span><span class="w"> </span><span class="vc">Document</span>

<span class="w">    </span><span class="py">error</span><span class="p">:</span><span class="w"> </span><span class="vc">ExampleError</span>

<span class="w">    </span><span class="py">allowConstraintErrors</span><span class="p">:</span><span class="w"> </span><span class="vc">Boolean</span>
}

<span class="nt">@private</span>
<span class="kd">structure </span><span class="nc">ExampleError</span><span class="w"> </span>{
<span class="w">    </span><span class="nt">@idRef</span>(<span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;structure[trait|error]&quot;</span>)
<span class="w">    </span><span class="py">shapeId</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>

<span class="w">    </span><span class="py">content</span><span class="p">:</span><span class="w"> </span><span class="vc">Document</span>
}

<span class="c">/// Indicates that a structure shape represents an error.</span>
<span class="c">///</span>
<span class="c">/// All shapes referenced by the errors list of an operation MUST be targeted</span>
<span class="c">/// with this trait.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;structure&quot;</span>
<span class="w">    </span><span class="py">conflicts</span><span class="p">:</span><span class="w"> </span>[<span class="vc">trait</span>]
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;any&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">enum </span><span class="nc">error</span><span class="w"> </span>{
<span class="w">    </span><span class="vc">CLIENT</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;client&quot;</span>
<span class="w">    </span><span class="vc">SERVER</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;server&quot;</span>
}

<span class="c">/// Indicates that an error MAY be retried by the client.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;structure[trait|error]&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">retryable</span><span class="w"> </span>{
<span class="w">    </span><span class="c">/// Classifies the retry as throttling.</span>
<span class="w">    </span><span class="py">throttling</span><span class="p">:</span><span class="w"> </span><span class="vc">Boolean</span>
}

<span class="c">/// Indicates that an operation is effectively read-only.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;operation&quot;</span>
<span class="w">    </span><span class="py">conflicts</span><span class="p">:</span><span class="w"> </span>[<span class="vc">idempotent</span>]
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">readonly</span><span class="w"> </span>{}

<span class="c">/// Indicates that the intended effect on the server of multiple identical</span>
<span class="c">/// requests with an operation is the same as the effect for a single such</span>
<span class="c">/// request.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;operation&quot;</span>
<span class="w">    </span><span class="py">conflicts</span><span class="p">:</span><span class="w"> </span>[<span class="vc">readonly</span>]
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">idempotent</span><span class="w"> </span>{}

<span class="c">/// Defines the input member of an operation that is used by the server to</span>
<span class="c">/// identify and discard replayed requests.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;structure &gt; :test(member &gt; string)&quot;</span>
<span class="w">    </span><span class="py">structurallyExclusive</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;member&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span>}
<span class="w">    </span>]
)
<span class="nt">@notProperty</span>
<span class="kd">structure </span><span class="nc">idempotencyToken</span><span class="w"> </span>{}

<span class="c">/// Shapes marked with the internal trait are meant only for internal use and</span>
<span class="c">/// must not be exposed to customers.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{
<span class="w">            </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span>
<span class="w">            </span><span class="py">severity</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;WARNING&quot;</span>
<span class="w">            </span><span class="py">message</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Removing the @internal trait makes a shape externally visible.&quot;</span>
<span class="w">        </span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">internal</span><span class="w"> </span>{}

<span class="c">/// Allows a serialized object property name to differ from a structure member</span>
<span class="c">/// name used in the model.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;:is(structure, union) &gt; member&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;any&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">string </span><span class="nc">jsonName</span>

<span class="c">/// Serializes an object property as an XML attribute rather than a nested XML</span>
<span class="c">/// element.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;structure &gt; :test(member &gt; :test(boolean, number, string, timestamp))&quot;</span>
<span class="w">    </span><span class="py">conflicts</span><span class="p">:</span><span class="w"> </span>[<span class="vc">xmlNamespace</span>]
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;any&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">xmlAttribute</span><span class="w"> </span>{}

<span class="c">/// Unwraps the values of a list, set, or map into the containing</span>
<span class="c">/// structure/union.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;:is(structure, union) &gt; :test(member &gt; :test(list, map))&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;any&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">xmlFlattened</span><span class="w"> </span>{}

<span class="c">/// Changes the serialized element or attribute name of a structure, union,</span>
<span class="c">/// or member.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;:is(structure, union, member)&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;any&quot;</span>}
<span class="w">    </span>]
)
<span class="nt">@pattern</span>(<span class="s2">&quot;^[a-zA-Z_][a-zA-Z_0-9-]*(:[a-zA-Z_][a-zA-Z_0-9-]*)?$&quot;</span>)
<span class="kd">string </span><span class="nc">xmlName</span>

<span class="c">/// Adds an xmlns namespace definition URI to an XML element.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;:is(service, member, simpleType, list, map, structure, union)&quot;</span>
<span class="w">    </span><span class="py">conflicts</span><span class="p">:</span><span class="w"> </span>[<span class="vc">xmlAttribute</span>]
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;any&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">xmlNamespace</span><span class="w"> </span>{
<span class="w">    </span><span class="c">/// The namespace URI for scoping this XML element.</span>
<span class="w">    </span><span class="nt">@required</span>
<span class="w">    </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="vc">NonEmptyString</span>

<span class="w">    </span><span class="c">/// The prefix for the given namespace.</span>
<span class="w">    </span><span class="nt">@pattern</span>(<span class="s2">&quot;^[a-zA-Z_][a-zA-Z_0-9-]*$&quot;</span>)
<span class="w">    </span><span class="py">prefix</span><span class="p">:</span><span class="w"> </span><span class="vc">NonEmptyString</span>
}

<span class="nt">@private</span>
<span class="nt">@length</span>(<span class="py">min</span><span class="p">:</span><span class="w"> </span><span class="m">1</span>)
<span class="kd">string </span><span class="nc">NonEmptyString</span>

<span class="c">/// Indicates that the put lifecycle operation of a resource can only be used</span>
<span class="c">/// to create a resource and cannot replace an existing resource.</span>
<span class="nt">@trait</span>(<span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;resource:test(-[put]-&gt;)&quot;</span>)
<span class="kd">structure </span><span class="nc">noReplace</span><span class="w"> </span>{}

<span class="c">/// Describes the contents of a blob shape using a media type as defined by</span>
<span class="c">/// RFC 6838 (e.g., &quot;video/quicktime&quot;).</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;:is(blob, string)&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">string </span><span class="nc">mediaType</span>

<span class="c">/// Defines the resource shapes that are referenced by a string shape or a</span>
<span class="c">/// structure shape and the members of the structure that provide values for</span>
<span class="c">/// the identifiers of the resource.</span>
<span class="nt">@trait</span>(<span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;:is(structure, string)&quot;</span>)
<span class="kd">list </span><span class="nc">references</span><span class="w"> </span>{
<span class="w">    </span><span class="py">member</span><span class="p">:</span><span class="w"> </span><span class="vc">Reference</span>
}

<span class="nt">@private</span>
<span class="kd">structure </span><span class="nc">Reference</span><span class="w"> </span>{
<span class="w">    </span><span class="c">/// The shape ID of the referenced resource.</span>
<span class="w">    </span><span class="nt">@required</span>
<span class="w">    </span><span class="py">resource</span><span class="p">:</span><span class="w"> </span><span class="vc">NonEmptyString</span>

<span class="w">    </span><span class="c">/// Defines a mapping of each resource identifier name to a structure member</span>
<span class="w">    </span><span class="c">/// name that provides its value. Each key in the map MUST refer to one of the</span>
<span class="w">    </span><span class="c">/// identifier names in the identifiers property of the resource, and each</span>
<span class="w">    </span><span class="c">/// value in the map MUST refer to a valid structure member name that targets</span>
<span class="w">    </span><span class="c">/// a string shape.</span>
<span class="w">    </span><span class="py">ids</span><span class="p">:</span><span class="w"> </span><span class="vc">NonEmptyStringMap</span>

<span class="w">    </span><span class="c">/// Providing a service makes the reference specific to a particular binding</span>
<span class="w">    </span><span class="c">/// of the resource to a service. When omitted, the reference is late-bound to</span>
<span class="w">    </span><span class="c">/// a service, meaning the reference is assumed to be a reference to the</span>
<span class="w">    </span><span class="c">/// resource bound to the service currently in use by the client or server.</span>
<span class="w">    </span><span class="py">service</span><span class="p">:</span><span class="w"> </span><span class="vc">NonEmptyString</span>

<span class="w">    </span><span class="c">/// Defines the semantics of the relationship. The rel property SHOULD</span>
<span class="w">    </span><span class="c">/// contain a link relation as defined in RFC 5988#section-4.</span>
<span class="w">    </span><span class="py">rel</span><span class="p">:</span><span class="w"> </span><span class="vc">NonEmptyString</span>
}

<span class="nt">@private</span>
<span class="kd">map </span><span class="nc">NonEmptyStringMap</span><span class="w"> </span>{
<span class="w">    </span><span class="py">key</span><span class="p">:</span><span class="w"> </span><span class="vc">NonEmptyString</span>
<span class="w">    </span><span class="py">value</span><span class="p">:</span><span class="w"> </span><span class="vc">NonEmptyString</span>
}

<span class="c">/// Indicates that the targeted structure member provides an identifier for</span>
<span class="c">/// a resource.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;structure &gt; :test(member[trait|required] &gt; string)&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span>}
<span class="w">    </span>]
)
<span class="nt">@length</span>(<span class="py">min</span><span class="p">:</span><span class="w"> </span><span class="m">1</span>)
<span class="nt">@notProperty</span>
<span class="kd">string </span><span class="nc">resourceIdentifier</span>

<span class="c">/// Prevents models defined in a different namespace from referencing the</span>
<span class="c">/// targeted shape.</span>
<span class="nt">@trait</span>
<span class="kd">structure </span><span class="nc">private</span><span class="w"> </span>{}

<span class="c">/// Indicates that the data stored in the shape is sensitive and MUST be</span>
<span class="c">/// handled with care.</span>
<span class="nt">@trait</span>(<span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;:not(:test(service, operation, resource, member))&quot;</span>)
<span class="kd">structure </span><span class="nc">sensitive</span><span class="w"> </span>{}

<span class="c">/// Defines the version or date in which a shape or member was added to the</span>
<span class="c">/// model.</span>
<span class="nt">@trait</span>
<span class="kd">string </span><span class="nc">since</span>

<span class="c">/// Indicates that the data stored in the shape is very large and should not</span>
<span class="c">/// be stored in memory, or that the size of the data stored in the shape is</span>
<span class="c">/// unknown at the start of a request. If the target is a union then the shape</span>
<span class="c">/// represents a stream of events.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;:is(blob, union)&quot;</span>
<span class="w">    </span><span class="py">structurallyExclusive</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;target&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;any&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">streaming</span><span class="w"> </span>{}

<span class="c">/// Indicates that the streaming blob must be finite and has a known size.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;blob[trait|streaming]&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;presence&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">requiresLength</span><span class="w"> </span>{}

<span class="c">/// Tags a shape with arbitrary tag names that can be used to filter and</span>
<span class="c">/// group shapes in the model.</span>
<span class="nt">@trait</span>
<span class="kd">list </span><span class="nc">tags</span><span class="w"> </span>{
<span class="w">    </span><span class="py">member</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}

<span class="c">/// Defines a proper name for a service or resource shape.</span>
<span class="c">///</span>
<span class="c">/// This title can be used in automatically generated documentation</span>
<span class="c">/// and other contexts to provide a user friendly name for services</span>
<span class="c">/// and resources.</span>
<span class="nt">@trait</span>(<span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;:is(service, resource)&quot;</span>)
<span class="kd">string </span><span class="nc">title</span>

<span class="c">/// Constrains the acceptable values of a string to a fixed set</span>
<span class="c">/// of constant values.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string :not(enum)&quot;</span>
<span class="w">    </span><span class="c">// It&#39;s a breaking change to change values or enums or the ordering of</span>
<span class="w">    </span><span class="c">// enums, but that validation happens in code to provide better error</span>
<span class="w">    </span><span class="c">// messages.</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;presence&quot;</span>}
<span class="w">    </span>]
)
<span class="nt">@length</span>(<span class="py">min</span><span class="p">:</span><span class="w"> </span><span class="m">1</span>)
<span class="nt">@deprecated</span>(<span class="py">message</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The enum trait is replaced by the enum shape in Smithy 2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">since</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span>)
<span class="kd">list </span><span class="nc">enum</span><span class="w"> </span>{
<span class="w">    </span><span class="py">member</span><span class="p">:</span><span class="w"> </span><span class="vc">EnumDefinition</span>
}

<span class="c">/// An enum definition for the enum trait.</span>
<span class="nt">@private</span>
<span class="kd">structure </span><span class="nc">EnumDefinition</span><span class="w"> </span>{
<span class="w">    </span><span class="c">/// Defines the enum value that is sent over the wire.</span>
<span class="w">    </span><span class="nt">@required</span>
<span class="w">    </span><span class="py">value</span><span class="p">:</span><span class="w"> </span><span class="vc">NonEmptyString</span>

<span class="w">    </span><span class="c">/// Defines the name that is used in code to represent this variant.</span>
<span class="w">    </span><span class="py">name</span><span class="p">:</span><span class="w"> </span><span class="vc">EnumConstantBodyName</span>

<span class="w">    </span><span class="c">/// Provides optional documentation about the enum constant value.</span>
<span class="w">    </span><span class="py">documentation</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>

<span class="w">    </span><span class="c">/// Applies a list of tags to the enum constant.</span>
<span class="w">    </span><span class="py">tags</span><span class="p">:</span><span class="w"> </span><span class="vc">NonEmptyStringList</span>

<span class="w">    </span><span class="c">/// Whether the enum value should be considered deprecated.</span>
<span class="w">    </span><span class="py">deprecated</span><span class="p">:</span><span class="w"> </span><span class="vc">Boolean</span>
}

<span class="c">/// The optional name or label of the enum constant value.</span>
<span class="c">///</span>
<span class="c">/// This property is used in code generation to provide a label for</span>
<span class="c">/// each enum value. No two enums can have the same &#39;name&#39; value.</span>
<span class="nt">@private</span>
<span class="nt">@pattern</span>(<span class="s2">&quot;^[a-zA-Z_]+[a-zA-Z_0-9]*$&quot;</span>)
<span class="kd">string </span><span class="nc">EnumConstantBodyName</span>

<span class="c">/// Defines the value of an enum member.</span>
<span class="nt">@trait</span>(<span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;:is(enum, intEnum) &gt; member&quot;</span>)
<span class="nt">@tags</span>([<span class="s2">&quot;diff.error.const&quot;</span>])
<span class="kd">document </span><span class="nc">enumValue</span>

<span class="c">/// Constrains a shape to minimum and maximum number of elements or size.</span>
<span class="nt">@trait</span>(<span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;:test(list, map, string, blob, member &gt; :is(list, map, string, blob))&quot;</span>)
<span class="kd">structure </span><span class="nc">length</span><span class="w"> </span>{
<span class="w">    </span><span class="c">/// Integer value that represents the minimum inclusive length of a shape.</span>
<span class="w">    </span><span class="py">min</span><span class="p">:</span><span class="w"> </span><span class="vc">Long</span>

<span class="w">    </span><span class="c">/// Integer value that represents the maximum inclusive length of a shape.</span>
<span class="w">    </span><span class="py">max</span><span class="p">:</span><span class="w"> </span><span class="vc">Long</span>
}

<span class="c">/// Restricts allowed values of byte, short, integer, long, float, double,</span>
<span class="c">/// bigDecimal, and bigInteger shapes within an acceptable lower and upper</span>
<span class="c">/// bound.</span>
<span class="nt">@trait</span>(<span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;:test(number, member &gt; number)&quot;</span>)
<span class="kd">structure </span><span class="nc">range</span><span class="w"> </span>{
<span class="w">    </span><span class="c">/// Specifies the allowed inclusive minimum value.</span>
<span class="w">    </span><span class="py">min</span><span class="p">:</span><span class="w"> </span><span class="vc">BigDecimal</span>

<span class="w">    </span><span class="c">/// Specifies the allowed inclusive maximum value.</span>
<span class="w">    </span><span class="py">max</span><span class="p">:</span><span class="w"> </span><span class="vc">BigDecimal</span>
}

<span class="c">/// Restricts string shape values to a specified regular expression.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;:test(string, member &gt; string)&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{
<span class="w">            </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;add&quot;</span>
<span class="w">            </span><span class="py">severity</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;WARNING&quot;</span>
<span class="w">            </span><span class="py">message</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The @pattern trait should only be added if the string already had adhered to the pattern.&quot;</span>
<span class="w">        </span>}
<span class="w">        </span>{
<span class="w">            </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;update&quot;</span>
<span class="w">            </span><span class="py">severity</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NOTE&quot;</span>
<span class="w">            </span><span class="py">message</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Changes to the @pattern trait should generally make the string more permissive, not less.&quot;</span>
<span class="w">        </span>}
<span class="w">    </span>]
)
<span class="kd">string </span><span class="nc">pattern</span>

<span class="c">/// Marks a structure member as required, meaning a value for the member MUST</span>
<span class="c">/// be present.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;structure &gt; member&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{
<span class="w">            </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;add&quot;</span>
<span class="w">            </span><span class="py">severity</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;WARNING&quot;</span>
<span class="w">            </span><span class="py">message</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;If any consumers were previously omitting this member in operation inputs, making it required is backwards incompatible&quot;</span>
<span class="w">        </span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">required</span><span class="w"> </span>{}

<span class="c">/// Configures a structure member&#39;s resource property mapping behavior.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;structure &gt; member&quot;</span>
<span class="w">    </span><span class="py">conflicts</span><span class="p">:</span><span class="w"> </span>[<span class="vc">resourceIdentifier</span>]
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span>}
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;update&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">property</span><span class="w"> </span>{
<span class="w">    </span><span class="py">name</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}

<span class="c">/// Explicitly excludes a member from resource property mapping or enables</span>
<span class="c">/// another trait to carry the same implied meaning.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;:is(operation -[input, output]-&gt; structure &gt; member, [trait|trait])&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;add&quot;</span>}
<span class="w">    </span>]
)
<span class="nt">@notProperty</span>
<span class="kd">structure </span><span class="nc">notProperty</span><span class="w"> </span>{}

<span class="c">/// Adjusts the resource property mapping of a lifecycle operation to the</span>
<span class="c">/// targeted member.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;operation -[input, output]-&gt; structure &gt; member :test(&gt; structure)&quot;</span>
<span class="w">    </span><span class="py">structurallyExclusive</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;member&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;any&quot;</span>}
<span class="w">    </span>]
)
<span class="nt">@notProperty</span>
<span class="kd">structure </span><span class="nc">nestedProperties</span><span class="w"> </span>{}

<span class="c">/// Indicates that a structure member SHOULD be set.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;structure &gt; member&quot;</span>
<span class="w">    </span><span class="py">conflicts</span><span class="p">:</span><span class="w"> </span>[<span class="vc">required</span>]
)
<span class="kd">structure </span><span class="nc">recommended</span><span class="w"> </span>{
<span class="w">    </span><span class="c">/// Provides a reason why the member is recommended.</span>
<span class="w">    </span><span class="py">reason</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}

<span class="c">/// Marks a list or map as sparse.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;:is(list, map)&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;presence&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">sparse</span><span class="w"> </span>{}

<span class="c">/// Indicates that the items in a list MUST be unique.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;list :not(&gt; member ~&gt; :is(float, double, document))&quot;</span>
<span class="w">    </span><span class="py">conflicts</span><span class="p">:</span><span class="w"> </span>[<span class="vc">sparse</span>]
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;presence&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">severity</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;WARNING&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">uniqueItems</span><span class="w"> </span>{}

<span class="c">/// Indicates that the shape is unstable and could change in the future.</span>
<span class="nt">@trait</span>
<span class="kd">structure </span><span class="nc">unstable</span><span class="w"> </span>{}

<span class="c">/// The paginated trait indicates that an operation intentionally limits the</span>
<span class="c">/// number of results returned in a single response and that multiple</span>
<span class="c">/// invocations might be necessary to retrieve all results.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;:is(service, operation)&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span>}
<span class="w">        </span>{<span class="py">path</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/inputToken&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;update&quot;</span>}
<span class="w">        </span>{<span class="py">path</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/outputToken&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;update&quot;</span>}
<span class="w">        </span>{<span class="py">path</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/items&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span>}
<span class="w">        </span>{<span class="py">path</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/items&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;add&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">severity</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NOTE&quot;</span>}
<span class="w">        </span>{<span class="py">path</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/items&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;update&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">severity</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NOTE&quot;</span>}
<span class="w">        </span>{<span class="py">path</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/pageSize&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;update&quot;</span>}
<span class="w">        </span>{<span class="py">path</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/pageSize&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">paginated</span><span class="w"> </span>{
<span class="w">    </span><span class="c">/// The name of the operation input member that represents the continuation</span>
<span class="w">    </span><span class="c">/// token.</span>
<span class="w">    </span><span class="c">///</span>
<span class="w">    </span><span class="c">/// When this value is provided as operation input, the service returns</span>
<span class="w">    </span><span class="c">/// results from where the previous response left off. This input member</span>
<span class="w">    </span><span class="c">/// MUST NOT be required and MUST target a string shape.</span>
<span class="w">    </span><span class="py">inputToken</span><span class="p">:</span><span class="w"> </span><span class="vc">NonEmptyString</span>

<span class="w">    </span><span class="c">/// The name of the operation output member that represents the</span>
<span class="w">    </span><span class="c">/// continuation token.</span>
<span class="w">    </span><span class="c">///</span>
<span class="w">    </span><span class="c">/// When this value is present in operation output, it indicates that there</span>
<span class="w">    </span><span class="c">/// are more results to retrieve. To get the next page of results, the</span>
<span class="w">    </span><span class="c">/// client uses the output token as the input token of the next request.</span>
<span class="w">    </span><span class="c">/// This output member MUST NOT be required and MUST target a string shape.</span>
<span class="w">    </span><span class="py">outputToken</span><span class="p">:</span><span class="w"> </span><span class="vc">NonEmptyString</span>

<span class="w">    </span><span class="c">/// The name of a top-level output member of the operation that is the data</span>
<span class="w">    </span><span class="c">/// that is being paginated across many responses.</span>
<span class="w">    </span><span class="c">///</span>
<span class="w">    </span><span class="c">/// The named output member, if specified, MUST target a list or map.</span>
<span class="w">    </span><span class="py">items</span><span class="p">:</span><span class="w"> </span><span class="vc">NonEmptyString</span>

<span class="w">    </span><span class="c">/// The name of an operation input member that limits the maximum number of</span>
<span class="w">    </span><span class="c">/// results to include in the operation output. This input member MUST NOT</span>
<span class="w">    </span><span class="c">/// be required and MUST target an integer shape.</span>
<span class="w">    </span><span class="py">pageSize</span><span class="p">:</span><span class="w"> </span><span class="vc">NonEmptyString</span>
}

<span class="c">/// Configures the HTTP bindings of an operation.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;operation&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span>}
<span class="w">        </span>{<span class="py">path</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/method&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;update&quot;</span>}
<span class="w">        </span>{<span class="py">path</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/uri&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;update&quot;</span>}
<span class="w">        </span>{<span class="py">path</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/code&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;update&quot;</span>}
<span class="w">        </span>{
<span class="w">            </span><span class="py">path</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/code&quot;</span>
<span class="w">            </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;presence&quot;</span>
<span class="w">            </span><span class="py">severity</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DANGER&quot;</span>
<span class="w">            </span><span class="py">message</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Adding or removing is backward compatible only if the value is the default value of 200&quot;</span>
<span class="w">        </span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">http</span><span class="w"> </span>{
<span class="w">    </span><span class="c">/// The HTTP method of the operation.</span>
<span class="w">    </span><span class="nt">@required</span>
<span class="w">    </span><span class="py">method</span><span class="p">:</span><span class="w"> </span><span class="vc">NonEmptyString</span>

<span class="w">    </span><span class="c">/// The URI pattern of the operation.</span>
<span class="w">    </span><span class="c">///</span>
<span class="w">    </span><span class="c">/// Labels defined in the URI pattern are used to bind operation input</span>
<span class="w">    </span><span class="c">/// members to the URI.</span>
<span class="w">    </span><span class="nt">@required</span>
<span class="w">    </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="vc">NonEmptyString</span>

<span class="w">    </span><span class="c">// The HTTP status code of a successful response.</span>
<span class="w">    </span><span class="nt">@range</span>(<span class="py">min</span><span class="p">:</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="py">max</span><span class="p">:</span><span class="w"> </span><span class="m">999</span>)
<span class="w">    </span><span class="py">code</span><span class="p">:</span><span class="w"> </span><span class="vc">Integer</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">200</span>
}

<span class="c">/// Binds an operation input structure member to an HTTP label.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;structure &gt; member[trait|required] :test(&gt; :test(string, number, boolean, timestamp))&quot;</span>
<span class="w">    </span><span class="py">conflicts</span><span class="p">:</span><span class="w"> </span>[<span class="vc">httpHeader</span><span class="p">,</span><span class="w"> </span><span class="vc">httpQuery</span><span class="p">,</span><span class="w"> </span><span class="vc">httpPrefixHeaders</span><span class="p">,</span><span class="w"> </span><span class="vc">httpPayload</span><span class="p">,</span><span class="w"> </span><span class="vc">httpResponseCode</span><span class="p">,</span><span class="w"> </span><span class="vc">httpQueryParams</span>]
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;presence&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">httpLabel</span><span class="w"> </span>{}

<span class="c">/// Binds an operation input structure member to a query string parameter.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        structure &gt; member</span>
<span class="s2">        :test(&gt; :test(string, number, boolean, timestamp),</span>
<span class="s2">        &gt; list &gt; member &gt; :test(string, number, boolean, timestamp))&quot;&quot;&quot;</span>
<span class="w">    </span><span class="py">conflicts</span><span class="p">:</span><span class="w"> </span>[<span class="vc">httpLabel</span><span class="p">,</span><span class="w"> </span><span class="vc">httpHeader</span><span class="p">,</span><span class="w"> </span><span class="vc">httpPrefixHeaders</span><span class="p">,</span><span class="w"> </span><span class="vc">httpPayload</span><span class="p">,</span><span class="w"> </span><span class="vc">httpResponseCode</span><span class="p">,</span><span class="w"> </span><span class="vc">httpQueryParams</span>]
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;any&quot;</span>}
<span class="w">    </span>]
)
<span class="nt">@length</span>(<span class="py">min</span><span class="p">:</span><span class="w"> </span><span class="m">1</span>)
<span class="kd">string </span><span class="nc">httpQuery</span>

<span class="c">/// Binds an operation input structure member to the HTTP query string.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        structure &gt; member</span>
<span class="s2">        :test(&gt; map &gt; member[id|member=value] &gt; :test(string, list &gt; member &gt; string))&quot;&quot;&quot;</span>
<span class="w">    </span><span class="py">structurallyExclusive</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;member&quot;</span>
<span class="w">    </span><span class="py">conflicts</span><span class="p">:</span><span class="w"> </span>[<span class="vc">httpLabel</span><span class="p">,</span><span class="w"> </span><span class="vc">httpQuery</span><span class="p">,</span><span class="w"> </span><span class="vc">httpHeader</span><span class="p">,</span><span class="w"> </span><span class="vc">httpPayload</span><span class="p">,</span><span class="w"> </span><span class="vc">httpResponseCode</span><span class="p">,</span><span class="w"> </span><span class="vc">httpPrefixHeaders</span>]
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;any&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">httpQueryParams</span><span class="w"> </span>{}

<span class="c">/// Binds a structure member to an HTTP header.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        structure &gt; :test(member &gt; :test(boolean, number, string, timestamp,</span>
<span class="s2">        list &gt; member &gt; :test(boolean, number, string, timestamp)))&quot;&quot;&quot;</span>
<span class="w">    </span><span class="py">conflicts</span><span class="p">:</span><span class="w"> </span>[<span class="vc">httpLabel</span><span class="p">,</span><span class="w"> </span><span class="vc">httpQuery</span><span class="p">,</span><span class="w"> </span><span class="vc">httpPrefixHeaders</span><span class="p">,</span><span class="w"> </span><span class="vc">httpPayload</span><span class="p">,</span><span class="w"> </span><span class="vc">httpResponseCode</span><span class="p">,</span><span class="w"> </span><span class="vc">httpQueryParams</span>]
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;any&quot;</span>}
<span class="w">    </span>]
)
<span class="nt">@length</span>(<span class="py">min</span><span class="p">:</span><span class="w"> </span><span class="m">1</span>)
<span class="kd">string </span><span class="nc">httpHeader</span>

<span class="c">/// Binds a map of key-value pairs to prefixed HTTP headers.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        structure &gt; member</span>
<span class="s2">        :test(&gt; map :not([trait|sparse]) &gt; member[id|member=value] &gt; string)&quot;&quot;&quot;</span>
<span class="w">    </span><span class="py">structurallyExclusive</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;member&quot;</span>
<span class="w">    </span><span class="py">conflicts</span><span class="p">:</span><span class="w"> </span>[<span class="vc">httpLabel</span><span class="p">,</span><span class="w"> </span><span class="vc">httpQuery</span><span class="p">,</span><span class="w"> </span><span class="vc">httpHeader</span><span class="p">,</span><span class="w"> </span><span class="vc">httpPayload</span><span class="p">,</span><span class="w"> </span><span class="vc">httpResponseCode</span><span class="p">,</span><span class="w"> </span><span class="vc">httpQueryParams</span>]
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;any&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">string </span><span class="nc">httpPrefixHeaders</span>

<span class="c">/// Binds a single structure member to the body of an HTTP request.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;structure &gt; member&quot;</span>
<span class="w">    </span><span class="py">conflicts</span><span class="p">:</span><span class="w"> </span>[<span class="vc">httpLabel</span><span class="p">,</span><span class="w"> </span><span class="vc">httpQuery</span><span class="p">,</span><span class="w"> </span><span class="vc">httpHeader</span><span class="p">,</span><span class="w"> </span><span class="vc">httpPrefixHeaders</span><span class="p">,</span><span class="w"> </span><span class="vc">httpResponseCode</span><span class="p">,</span><span class="w"> </span><span class="vc">httpQueryParams</span>]
<span class="w">    </span><span class="py">structurallyExclusive</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;member&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;presence&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">httpPayload</span><span class="w"> </span>{}

<span class="c">/// Defines an HTTP response code for an operation error.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;structure[trait|error]&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;any&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">integer </span><span class="nc">httpError</span>

<span class="c">/// Indicates that the structure member represents the HTTP response</span>
<span class="c">/// status code. The value MAY differ from the HTTP status code provided</span>
<span class="c">/// on the response.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;structure :not([trait|input]) &gt; member :test(&gt; integer)&quot;</span>
<span class="w">    </span><span class="py">structurallyExclusive</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;member&quot;</span>
<span class="w">    </span><span class="py">conflicts</span><span class="p">:</span><span class="w"> </span>[<span class="vc">httpLabel</span><span class="p">,</span><span class="w"> </span><span class="vc">httpQuery</span><span class="p">,</span><span class="w"> </span><span class="vc">httpHeader</span><span class="p">,</span><span class="w"> </span><span class="vc">httpPrefixHeaders</span><span class="p">,</span><span class="w"> </span><span class="vc">httpPayload</span><span class="p">,</span><span class="w"> </span><span class="vc">httpQueryParams</span>]
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;any&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">httpResponseCode</span><span class="w"> </span>{}

<span class="c">/// Defines how a service supports cross-origin resource sharing.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;service&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">cors</span><span class="w"> </span>{
<span class="w">    </span><span class="c">/// The origin from which browser script-originating requests will be</span>
<span class="w">    </span><span class="c">/// allowed.</span>
<span class="w">    </span><span class="py">origin</span><span class="p">:</span><span class="w"> </span><span class="vc">NonEmptyString</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;*&quot;</span>

<span class="w">    </span><span class="c">/// The maximum number of seconds for which browsers are allowed to cache</span>
<span class="w">    </span><span class="c">/// the results of a preflight OPTIONS request.</span>
<span class="w">    </span><span class="c">///</span>
<span class="w">    </span><span class="c">/// Defaults to 600, the maximum age permitted by several browsers.</span>
<span class="w">    </span><span class="c">/// Set to -1 to disable caching entirely.</span>
<span class="w">    </span><span class="py">maxAge</span><span class="p">:</span><span class="w"> </span><span class="vc">Integer</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">600</span>

<span class="w">    </span><span class="c">/// The names of headers that should be included in the</span>
<span class="w">    </span><span class="c">/// Access-Control-Allow-Headers header in responses to preflight OPTIONS</span>
<span class="w">    </span><span class="c">/// requests. This list will be used in addition to the names of all</span>
<span class="w">    </span><span class="c">/// request headers bound to an input data member via the httpHeader, as</span>
<span class="w">    </span><span class="c">/// well as any headers required by the protocol or authentication scheme.</span>
<span class="w">    </span><span class="py">additionalAllowedHeaders</span><span class="p">:</span><span class="w"> </span><span class="vc">NonEmptyStringList</span>

<span class="w">    </span><span class="c">/// The names of headers that should be included in the</span>
<span class="w">    </span><span class="c">/// Access-Control-Expose-Headers header in all responses sent by the</span>
<span class="w">    </span><span class="c">/// service. This list will be used in addition to the names of all</span>
<span class="w">    </span><span class="c">/// request headers bound to an output data member via the httpHeader,</span>
<span class="w">    </span><span class="c">/// as well as any headers required by the protocol or authentication</span>
<span class="w">    </span><span class="c">/// scheme.</span>
<span class="w">    </span><span class="py">additionalExposedHeaders</span><span class="p">:</span><span class="w"> </span><span class="vc">NonEmptyStringList</span>
}

<span class="nt">@private</span>
<span class="kd">list </span><span class="nc">NonEmptyStringList</span><span class="w"> </span>{
<span class="w">    </span><span class="py">member</span><span class="p">:</span><span class="w"> </span><span class="vc">NonEmptyString</span>
}

<span class="c">/// Marks a member as the payload of an event.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;structure &gt; :test(member &gt; :test(blob, string, structure, union))&quot;</span>
<span class="w">    </span><span class="py">conflicts</span><span class="p">:</span><span class="w"> </span>[<span class="vc">eventHeader</span>]
<span class="w">    </span><span class="py">structurallyExclusive</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;member&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;any&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">eventPayload</span><span class="w"> </span>{}

<span class="c">/// Marks a member as a header of an event.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        structure &gt;</span>
<span class="s2">        :test(member &gt; :test(boolean, byte, short, integer, long, blob, string, timestamp))&quot;&quot;&quot;</span>
<span class="w">    </span><span class="py">conflicts</span><span class="p">:</span><span class="w"> </span>[<span class="vc">eventPayload</span>]
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;any&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">eventHeader</span><span class="w"> </span>{}

<span class="c">/// Indicates that a string value MUST contain a valid shape ID.</span>
<span class="c">///</span>
<span class="c">/// The provided shape ID MAY be absolute or relative to the shape to which</span>
<span class="c">/// the trait is applied. A relative shape ID that does not resolve to a</span>
<span class="c">/// shape defined in the same namespace resolves to a shape defined in the</span>
<span class="c">/// prelude if the prelude shape is not marked with the private trait.</span>
<span class="nt">@trait</span>(<span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;:test(string, member &gt; string)&quot;</span>)
<span class="kd">structure </span><span class="nc">idRef</span><span class="w"> </span>{
<span class="w">    </span><span class="c">/// Defines the selector that the resolved shape, if found, MUST match.</span>
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;*&quot;</span>

<span class="w">    </span><span class="c">/// When set to `true`, the shape ID MUST target a shape that can be</span>
<span class="w">    </span><span class="c">/// found in the model.</span>
<span class="w">    </span><span class="py">failWhenMissing</span><span class="p">:</span><span class="w"> </span><span class="vc">Boolean</span>

<span class="w">    </span><span class="c">/// Defines a custom error message to use when the shape ID cannot be</span>
<span class="w">    </span><span class="c">/// found or does not match the selector.</span>
<span class="w">    </span><span class="c">///</span>
<span class="w">    </span><span class="c">/// A default message is generated when errorMessage is not defined.</span>
<span class="w">    </span><span class="py">errorMessage</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}

<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;:test(timestamp, member &gt; timestamp)&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;any&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">enum </span><span class="nc">timestampFormat</span><span class="w"> </span>{
<span class="w">    </span><span class="c">/// Date time as defined by the date-time production in RFC3339 section 5.6</span>
<span class="w">    </span><span class="c">/// with no UTC offset (for example, 1985-04-12T23:20:50.52Z).</span>
<span class="w">    </span><span class="vc">DATE_TIME</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;date-time&quot;</span>

<span class="w">    </span><span class="c">/// Also known as Unix time, the number of seconds that have elapsed since</span>
<span class="w">    </span><span class="c">/// 00:00:00 Coordinated Universal Time (UTC), Thursday, 1 January 1970,</span>
<span class="w">    </span><span class="c">/// with decimal precision (for example, 1515531081.1234).</span>
<span class="w">    </span><span class="vc">EPOCH_SECONDS</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;epoch-seconds&quot;</span>

<span class="w">    </span><span class="c">/// An HTTP date as defined by the IMF-fixdate production in</span>
<span class="w">    </span><span class="c">/// RFC 7231#section-7.1.1.1 (for example, Tue, 29 Apr 2014 18:30:38 GMT).</span>
<span class="w">    </span><span class="vc">HTTP_DATE</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;http-date&quot;</span>
}

<span class="c">/// Configures a custom operation endpoint.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;operation&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;any&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">endpoint</span><span class="w"> </span>{
<span class="w">    </span><span class="c">/// A host prefix pattern for the operation.</span>
<span class="w">    </span><span class="c">///</span>
<span class="w">    </span><span class="c">/// Labels defined in the host pattern are used to bind top-level</span>
<span class="w">    </span><span class="c">/// operation input members to the host.</span>
<span class="w">    </span><span class="nt">@required</span>
<span class="w">    </span><span class="py">hostPrefix</span><span class="p">:</span><span class="w"> </span><span class="vc">NonEmptyString</span>
}

<span class="c">/// Binds a top-level operation input structure member to a label</span>
<span class="c">/// in the hostPrefix of an endpoint trait.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;structure &gt; :test(member[trait|required] &gt; string)&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;any&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">hostLabel</span><span class="w"> </span>{}

<span class="c">/// Suppresses validation events by ID for a given shape.</span>
<span class="nt">@trait</span>
<span class="kd">list </span><span class="nc">suppress</span><span class="w"> </span>{
<span class="w">    </span><span class="nt">@length</span>(<span class="py">min</span><span class="p">:</span><span class="w"> </span><span class="m">1</span>)
<span class="w">    </span><span class="py">member</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}

<span class="c">/// Marks an operation as requiring checksum in its HTTP request.</span>
<span class="c">/// By default, the checksum used for a service is a MD5 checksum</span>
<span class="c">/// passed in the Content-MD5 header.</span>
<span class="nt">@unstable</span>
<span class="nt">@trait</span>(<span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;operation&quot;</span>)
<span class="kd">structure </span><span class="nc">httpChecksumRequired</span><span class="w"> </span>{}

<span class="c">/// Specializes a structure for use only as the input of a single operation.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;structure&quot;</span>
<span class="w">    </span><span class="py">conflicts</span><span class="p">:</span><span class="w"> </span>[<span class="vc">output</span><span class="p">,</span><span class="w"> </span><span class="vc">error</span>]
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;presence&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">input</span><span class="w"> </span>{}

<span class="c">/// Specializes a structure for use only as the output of a single operation.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;structure&quot;</span>
<span class="w">    </span><span class="py">conflicts</span><span class="p">:</span><span class="w"> </span>[<span class="vc">input</span><span class="p">,</span><span class="w"> </span><span class="vc">error</span>]
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{<span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;presence&quot;</span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">output</span><span class="w"> </span>{}

<span class="c">/// Specializes a structure as a unit type that has no meaningful value.</span>
<span class="c">/// This trait can only be applied to smithy.api#Unit, which ensures that</span>
<span class="c">/// only a single Unit shape can be created.</span>
<span class="nt">@trait</span>(<span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;[id=smithy.api#Unit]&quot;</span>)
<span class="kd">structure </span><span class="nc">unitType</span><span class="w"> </span>{}

<span class="c">/// Makes a structure or union a mixin.</span>
<span class="nt">@trait</span>(<span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;:not(member)&quot;</span>)
<span class="kd">structure </span><span class="nc">mixin</span><span class="w"> </span>{
<span class="w">    </span><span class="py">localTraits</span><span class="p">:</span><span class="w"> </span><span class="vc">LocalMixinTraitList</span>
}

<span class="nt">@private</span>
<span class="kd">list </span><span class="nc">LocalMixinTraitList</span><span class="w"> </span>{
<span class="w">    </span><span class="py">member</span><span class="p">:</span><span class="w"> </span><span class="vc">LocalMixinTrait</span>
}

<span class="nt">@idRef</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;[trait|trait]&quot;</span>
<span class="w">    </span><span class="py">failWhenMissing</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="py">errorMessage</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        Strings provided to the localTraits property of a mixin trait</span>
<span class="s2">        must target a valid trait.&quot;&quot;&quot;</span>
)
<span class="nt">@private</span>
<span class="kd">string </span><span class="nc">LocalMixinTrait</span>

<span class="c">/// Defines the priority-ordered list of compression algorithms supported by</span>
<span class="c">/// the service operation.</span>
<span class="nt">@private</span>
<span class="kd">list </span><span class="nc">RequestCompressionEncodingsList</span><span class="w"> </span>{
<span class="w">    </span><span class="c">// Encodings are NOT constrained in a Smithy enum since supported encodings</span>
<span class="w">    </span><span class="c">// are case-insensitive</span>
<span class="w">    </span><span class="py">member</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}

<span class="c">/// Indicates that an operation supports compressing requests from clients to</span>
<span class="c">/// services.</span>
<span class="nt">@trait</span>(
<span class="w">    </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;operation&quot;</span>
<span class="w">    </span><span class="py">breakingChanges</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span>{
<span class="w">            </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span>
<span class="w">            </span><span class="py">severity</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DANGER&quot;</span>
<span class="w">            </span><span class="py">message</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                Trait was removed so newly generated clients will no longer compress requests, </span><span class="se">\</span>
<span class="s2">                but the service MUST continue to support removed compression algorithms in `encodings`.&quot;&quot;&quot;</span>
<span class="w">        </span>}
<span class="w">        </span>{
<span class="w">            </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span>
<span class="w">            </span><span class="py">path</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/encodings&quot;</span>
<span class="w">            </span><span class="py">message</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;`encodings` was removed, but is required for the requestCompression trait.&quot;</span>
<span class="w">        </span>}
<span class="w">        </span>{
<span class="w">            </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;add&quot;</span>
<span class="w">            </span><span class="py">severity</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NOTE&quot;</span>
<span class="w">            </span><span class="py">path</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/encodings/member&quot;</span>
<span class="w">            </span><span class="py">message</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                Members of `encodings` were added. Once a compression algorithm is added, </span><span class="se">\</span>
<span class="s2">                the service MUST support the compression algorithm.&quot;&quot;&quot;</span>
<span class="w">        </span>}
<span class="w">        </span>{
<span class="w">            </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;remove&quot;</span>
<span class="w">            </span><span class="py">severity</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DANGER&quot;</span>
<span class="w">            </span><span class="py">path</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/encodings/member&quot;</span>
<span class="w">            </span><span class="py">message</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                Members of `encodings` were removed so newly generated clients will no longer compress requests </span><span class="se">\</span>
<span class="s2">                for removed compression algorithms. The service MUST continue to support old clients by supporting </span><span class="se">\</span>
<span class="s2">                removed compression algorithms.&quot;&quot;&quot;</span>
<span class="w">        </span>}
<span class="w">        </span>{
<span class="w">            </span><span class="py">change</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;update&quot;</span>
<span class="w">            </span><span class="py">severity</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DANGER&quot;</span>
<span class="w">            </span><span class="py">path</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/encodings/member&quot;</span>
<span class="w">            </span><span class="py">message</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                Members of `encodings` were updated so newly generated clients will no longer compress requests </span><span class="se">\</span>
<span class="s2">                for compression algorithms prior to the updates. The service MUST continue to support old clients by </span><span class="se">\</span>
<span class="s2">                supporting compression algorithms prior to the updates.&quot;&quot;&quot;</span>
<span class="w">        </span>}
<span class="w">    </span>]
)
<span class="kd">structure </span><span class="nc">requestCompression</span><span class="w"> </span>{
<span class="w">    </span><span class="nt">@required</span>
<span class="w">    </span><span class="py">encodings</span><span class="p">:</span><span class="w"> </span><span class="vc">RequestCompressionEncodingsList</span>
}
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Private shapes defined in the prelude are subject to change at any time.</p>
</div>
<div class="section" id="unit-type">
<span id="id12"></span><h3><span class="section-number">1.8.1. </span>Unit type<a class="headerlink" href="#unit-type" title="Permalink to this heading">#</a></h3>
<p>Smithy provides a singular <a class="reference internal" href="#id12">unit type</a> named <code class="docutils literal notranslate"><span class="pre">smithy.api#Unit</span></code>. The unit
type in Smithy is similar to <code class="docutils literal notranslate"><span class="pre">Void</span></code> and <code class="docutils literal notranslate"><span class="pre">None</span></code> in other languages. It is
used when the input or output of an <a class="reference internal" href="service-types.html#operation"><span class="std std-ref">operation</span></a> has no
meaningful value or if a <a class="reference internal" href="aggregate-types.html#union"><span class="std std-ref">union</span></a> member has no meaningful value.
<code class="docutils literal notranslate"><span class="pre">smithy.api#Unit</span></code> MUST NOT be referenced in any other context.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">smithy.api#Unit</span></code> shape is defined in Smithy's <a class="reference internal" href="#prelude"><span class="std std-ref">prelude</span></a>
as a structure shape marked with the <code class="docutils literal notranslate"><span class="pre">smithy.api#unitType</span></code> trait to
differentiate it from other structures. It is the only such structure in the
model that can be marked with the <code class="docutils literal notranslate"><span class="pre">smithy.api#unitType</span></code> trait.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="aggregate-types.html#union"><span class="std std-ref">Union</span></a>, <a class="reference internal" href="service-types.html#operation"><span class="std std-ref">Operation</span></a></p>
</div>
</div>
</div>
</div>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="simple-types.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title"><span class="section-number">2. </span>Simple types</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Smithy specification</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Amazon Web Services
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/awslabs/smithy" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">1. The Smithy model</a><ul>
<li><a class="reference internal" href="#smithy-overview">1.1. Smithy overview</a></li>
<li><a class="reference internal" href="#the-semantic-model">1.2. The semantic model</a></li>
<li><a class="reference internal" href="#model-metadata">1.3. Model metadata</a><ul>
<li><a class="reference internal" href="#metadata-conflicts">1.3.1. Metadata conflicts</a></li>
</ul>
</li>
<li><a class="reference internal" href="#node-values">1.4. Node values</a><ul>
<li><a class="reference internal" href="#node-value-types">1.4.1. Node value types</a></li>
</ul>
</li>
<li><a class="reference internal" href="#merging-model-files">1.5. Merging model files</a></li>
<li><a class="reference internal" href="#shapes">1.6. Shapes</a><ul>
<li><a class="reference internal" href="#shape-types">1.6.1. Shape types</a></li>
<li><a class="reference internal" href="#member-shapes">1.6.2. Member shapes</a></li>
<li><a class="reference internal" href="#shape-id">1.6.3. Shape ID</a><ul>
<li><a class="reference internal" href="#shape-id-abnf">1.6.3.1. Shape ID ABNF</a></li>
<li><a class="reference internal" href="#shape-id-conflicts">1.6.3.2. Shape ID conflicts</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#traits">1.7. Traits</a><ul>
<li><a class="reference internal" href="#applying-traits">1.7.1. Applying traits</a><ul>
<li><a class="reference internal" href="#scope-of-member-traits">1.7.1.1. Scope of member traits</a></li>
<li><a class="reference internal" href="#applying-traits-externally">1.7.1.2. Applying traits externally</a></li>
<li><a class="reference internal" href="#trait-conflict-resolution">1.7.1.3. Trait conflict resolution</a></li>
<li><a class="reference internal" href="#trait-node-values">1.7.1.4. Trait node values</a></li>
</ul>
</li>
<li><a class="reference internal" href="#defining-traits">1.7.2. Defining traits</a><ul>
<li><a class="reference internal" href="#prelude-traits">1.7.2.1. Prelude traits</a></li>
<li><a class="reference internal" href="#references-to-traits">1.7.2.2. References to traits</a></li>
<li><a class="reference internal" href="#trait-trait">1.7.2.3. <code class="docutils literal notranslate"><span class="pre">trait</span></code> trait</a><ul>
<li><a class="reference internal" href="#trait-properties">1.7.2.3.1. Trait properties</a></li>
</ul>
</li>
<li><a class="reference internal" href="#annotation-traits">1.7.2.4. Annotation traits</a></li>
<li><a class="reference internal" href="#breaking-change-rules">1.7.2.5. Breaking change rules</a><ul>
<li><a class="reference internal" href="#referring-to-list-members">1.7.2.5.1. Referring to list members</a></li>
<li><a class="reference internal" href="#referring-to-map-members">1.7.2.5.2. Referring to map members</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#prelude">1.8. Prelude</a><ul>
<li><a class="reference internal" href="#unit-type">1.8.1. Unit type</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/tabs.js"></script>
    </body>
</html>