<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html"><link rel="search" title="Search" href="../search.html"><link rel="next" title="7. Type refinement traits" href="type-refinement-traits.html"><link rel="prev" title="5. Mixins" href="mixins.html">
        <link rel="prefetch" href="../_static/smithy.svg" as="image">
        <link rel="prefetch" href="../_static/smithy-dark.svg" as="image">

    <link rel="shortcut icon" href="../_static/favicon.svg"><!-- Generated with Sphinx 8.2.3 and Furo 2025.09.25 -->
        <title>6. Constraint traits - Smithy 2.0</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=580074bf" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=8dab3a3b" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=0abfef4d" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --admonition-font-size: 100%;
  --admonition-title-font-size: 100%;
  --color-brand-primary: #C44536;
  --color-brand-content: #00808b;
  --color-announcement-background: #f8f8f8;
  --color-announcement-text: #383838;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #282828;
  --color-code-foreground: #dddddd;
  --color-brand-primary: #ed9d13;
  --color-brand-content: #58d3ff;
  --color-announcement-background: ##1a1c1e;;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #282828;
  --color-code-foreground: #dddddd;
  --color-brand-primary: #ed9d13;
  --color-brand-content: #58d3ff;
  --color-announcement-background: ##1a1c1e;;
  
      }
    }
  }
</style><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js"></script>
<script src="https://d2c.aws.amazon.com/client/loader/v1/d2c-load.js"></script></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Smithy 2.0</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="/index.html">
  
  <div class="sidebar-brand-icon">
    <img class="sidebar-logo only-light" src="../_static/smithy.svg" alt="Logo">
    <img class="sidebar-logo only-dark" src="../_static/smithy-dark.svg" alt="Logo">
  </div>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick start</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Smithy specification</a><input aria-label="Toggle navigation of Smithy specification" checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="model.html">1. The Smithy model</a></li>
<li class="toctree-l2"><a class="reference internal" href="simple-types.html">2. Simple types</a></li>
<li class="toctree-l2"><a class="reference internal" href="aggregate-types.html">3. Aggregate types</a></li>
<li class="toctree-l2"><a class="reference internal" href="service-types.html">4. Service types</a></li>
<li class="toctree-l2"><a class="reference internal" href="mixins.html">5. Mixins</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">6. Constraint traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="type-refinement-traits.html">7. Type refinement traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="documentation-traits.html">8. Documentation traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="behavior-traits.html">9. Behavior traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="resource-traits.html">10. Resource traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication-traits.html">11. Authentication traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="protocol-traits.html">12. Serialization and Protocol traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="streaming.html">13. Streaming</a></li>
<li class="toctree-l2"><a class="reference internal" href="http-bindings.html">14. HTTP bindings</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-traits.html">15. Endpoint traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="selectors.html">16. Selectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="model-validation.html">17. Model validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="idl.html">18. Smithy IDL</a></li>
<li class="toctree-l2"><a class="reference internal" href="json-ast.html">19. JSON AST</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../trait-index.html">Trait index</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../guides/index.html">Guides</a><input aria-label="Toggle navigation of Guides" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../guides/smithy-cli/index.html">The Smithy CLI</a><input aria-label="Toggle navigation of The Smithy CLI" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../guides/smithy-cli/cli_installation.html">Installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guides/smithy-build-json.html">smithy-build.json</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../guides/gradle-plugin/index.html">Smithy Gradle Plugins</a><input aria-label="Toggle navigation of Smithy Gradle Plugins" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../guides/gradle-plugin/gradle-migration-guide.html">Migrating to Gradle plugin version 0.10.0+</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../guides/using-code-generation/index.html">Code Generation</a><input aria-label="Toggle navigation of Code Generation" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../guides/using-code-generation/update-model.html">Updating the Smithy Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/using-code-generation/generating-a-client.html">Generating a client</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guides/model-linters.html">Linting Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/model-validation-examples.html">Model Validation Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/evolving-models.html">Evolving Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/style-guide.html">Style Guide</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../guides/model-translations/index.html">Model Translations</a><input aria-label="Toggle navigation of Model Translations" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../guides/model-translations/converting-to-openapi.html">Converting Smithy to OpenAPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/model-translations/migrating-idl-1-to-2.html">Smithy IDL 1.0 to 2.0 Migration Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/model-translations/generating-cloudformation-resources.html">Generating CloudFormation Resource Schemas from Smithy</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../guides/building-codegen/index.html">Creating a Code Generator</a><input aria-label="Toggle navigation of Creating a Code Generator" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/overview-and-concepts.html">Overview and Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/mapping-shapes-to-languages.html">Mapping Smithy Shapes to Your Language</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/creating-codegen-repo.html">Creating a Codegen Repo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/configuring-the-generator.html">Configuring the Generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/implementing-the-generator.html">Implementing the Generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/making-codegen-pluggable.html">Making Codegen Pluggable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/generating-code.html">Generating Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/decoupling-codegen-with-symbols.html">Decoupling Codegen with Symbols</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/building-codegen/using-the-semantic-model.html">Using the Semantic Model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guides/glossary.html">Glossary</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials/index.html">Tutorials</a><input aria-label="Toggle navigation of Tutorials" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/full-stack-tutorial.html">Full Stack Application</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../additional-specs/index.html">Additional specs</a><input aria-label="Toggle navigation of Additional specs" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../additional-specs/ai-traits.html">Smithy AI Traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../additional-specs/http-protocol-compliance-tests.html">HTTP Protocol Compliance Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../additional-specs/smoke-tests.html">Smoke Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../additional-specs/waiters.html">Waiters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../additional-specs/mqtt.html">MQTT Protocol Bindings</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../additional-specs/rules-engine/index.html">Rules engine</a><input aria-label="Toggle navigation of Rules engine" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../additional-specs/rules-engine/specification.html">Rules engine specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../additional-specs/rules-engine/parameters.html">Rules engine parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../additional-specs/rules-engine/standard-library.html">Rules engine standard library</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../additional-specs/protocols/index.html">Protocols</a><input aria-label="Toggle navigation of Protocols" class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../additional-specs/protocols/smithy-rpc-v2.html">Smithy RPC v2 CBOR protocol</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../aws/index.html">AWS integrations</a><input aria-label="Toggle navigation of AWS integrations" class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../aws/aws-core.html">AWS Core Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aws/aws-auth.html">AWS Authentication Traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aws/aws-endpoints-region.html">AWS Declarative Endpoint Traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aws/aws-iam.html">AWS IAM traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aws/amazon-apigateway.html">Amazon API Gateway traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aws/aws-cloudformation.html">AWS CloudFormation Traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aws/amazon-eventstream.html">Amazon Event Stream Specification</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../aws/protocols/index.html">AWS Protocols</a><input aria-label="Toggle navigation of AWS Protocols" class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../aws/protocols/aws-restjson1-protocol.html">AWS restJson1 protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/protocols/aws-json-1_0-protocol.html">AWS JSON 1.0 protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/protocols/aws-json-1_1-protocol.html">AWS JSON 1.1 protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/protocols/aws-restxml-protocol.html">AWS restXml protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/protocols/aws-query-protocol.html">AWS query protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/protocols/aws-ec2-query-protocol.html">AWS EC2 query protocol</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../aws/customizations/index.html">AWS Service Customizations</a><input aria-label="Toggle navigation of AWS Service Customizations" class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../aws/customizations/apigateway-customizations.html">Amazon API Gateway Customizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/customizations/glacier-customizations.html">Amazon Glacier Customizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/customizations/machinelearning-customizations.html">Amazon Machine Learning Customizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/customizations/s3-customizations.html">Amazon S3 Customizations</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../aws/rules-engine/index.html">AWS rules engine extensions</a><input aria-label="Toggle navigation of AWS rules engine extensions" class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../aws/rules-engine/built-ins.html">AWS rules engine built-ins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/rules-engine/library-functions.html">AWS rules engine library functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/rules-engine/auth-schemes.html">AWS rules engine authentication scheme validators</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Languages</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../languages/java/index.html">Java</a><input aria-label="Toggle navigation of Java" class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../languages/java/quickstart.html">Java Quickstart</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../languages/java/client/index.html">Client User Guide</a><input aria-label="Toggle navigation of Client User Guide" class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../languages/java/client/generating-clients.html">Generating Clients</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/java/client/configuration.html">Configuring Clients</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/java/client/customization.html">Customizing Client Behavior</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/java/client/plugins.html">Client Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/java/client/dynamic-client.html">Dynamic Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/java/client/codegen-integrations.html">Codegen Integrations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-java">Source code</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-java/tree/0.0.3/examples">Smithy Java Examples</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../languages/typescript/index.html">TypeScript</a><input aria-label="Toggle navigation of TypeScript" class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../languages/typescript/quickstart.html">TypeScript Quickstart</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../languages/typescript/ts-ssdk/index.html">Server Generator for TypeScript</a><input aria-label="Toggle navigation of Server Generator for TypeScript" class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../languages/typescript/ts-ssdk/introduction.html">Introduction to the Smithy Server Generator for TypeScript</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/typescript/ts-ssdk/handlers.html">Smithy Server Generator for TypeScript handlers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/typescript/ts-ssdk/validation.html">Smithy Server Generator for TypeScript validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/typescript/ts-ssdk/error-handling.html">Smithy Server Generator for TypeScript error handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/typescript/ts-ssdk/supported-endpoints.html">Smithy Server Generator for TypeScript supported endpoints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-typescript">Source code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/full-stack-tutorial.html">Smithy Full Stack Application</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../languages/rust/index.html">Rust</a><input aria-label="Toggle navigation of Rust" class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://smithy-lang.github.io/smithy-rs/design/">Design Documentation</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-rs">Source code</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../languages/python/index.html">Python</a><input aria-label="Toggle navigation of Python" class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-python">Source code</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../languages/kotlin/index.html">Kotlin</a><input aria-label="Toggle navigation of Kotlin" class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-kotlin">Source code</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../languages/golang/index.html">GoLang</a><input aria-label="Toggle navigation of GoLang" class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://github.com/aws/smithy-go">Source code</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../languages/scala/index.html">Scala</a><input aria-label="Toggle navigation of Scala" class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://disneystreaming.github.io/smithy4s/">Documentation</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/disneystreaming/smithy4s">Source code</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/smithy-lang/smithy">Source code</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/smithy-lang/awesome-smithy">Awesome Smithy</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/smithy-lang/smithy-examples">Smithy Examples</a></li>
<li class="toctree-l1"><a class="reference external" href="https://smithy.io/1.0/">1.0 Documentation</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/smithy-lang/smithy/blob/main/docs/source-2.0/spec/constraint-traits.rst?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/smithy-lang/smithy/edit/main/docs/source-2.0/spec/constraint-traits.rst" rel="edit" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="constraint-traits">
<span id="id1"></span><h1><span class="section-number">6. </span>Constraint traits<a class="headerlink" href="#constraint-traits" title="Link to this heading">¶</a></h1>
<p>Constraint traits are used to constrain the values that can be provided
for a shape. Constraint traits are for validation only and SHOULD NOT
impact the types signatures of generated code.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="type-refinement-traits.html#required-trait"><span class="std std-ref">required trait</span></a>, a <a class="reference internal" href="type-refinement-traits.html"><span class="doc">type refinement trait</span></a>
that also functions like a constraint.</p>
</div>
<section id="constraint-trait-enforcement">
<h2><span class="section-number">6.1. </span>Constraint trait enforcement<a class="headerlink" href="#constraint-trait-enforcement" title="Link to this heading">¶</a></h2>
<p>Constraint traits SHOULD be enforced after deserializing input. For example,
when a server deserializes a request from a client, the server SHOULD enforce
any defined constraint traits and reject the request if appropriate.</p>
<p>Constraint traits SHOULD NOT be enforced when serializing shapes or when
deserializing output. For example, when returning a response from a server
to a client, failing to serialize a response due to a constraint trait
violation would prevent a client from observing a state change of the server
and would provide no real recourse for the client or server to recover.</p>
</section>
<section id="idref-trait">
<span id="smithy-api-idref-trait"></span><span id="id2"></span><h2><span class="section-number">6.2. </span><code class="docutils literal notranslate"><span class="pre">idRef</span></code> trait<a class="headerlink" href="#idref-trait" title="Link to this heading">¶</a></h2>
<dl>
<dt>Summary</dt><dd><p>Indicates that a string value MUST contain a valid absolute
<a class="reference internal" href="model.html#shape-id"><span class="std std-ref">shape ID</span></a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">idRef</span></code> trait is used primarily when declaring
<a class="reference internal" href="model.html#trait-shapes"><span class="std std-ref">trait shapes</span></a> in a model. A trait shape
that targets a string shape with the <code class="docutils literal notranslate"><span class="pre">idRef</span></code> trait indicates that when
the defined trait is applied to a shape, the value of the trait MUST be
a valid shape ID. The <code class="docutils literal notranslate"><span class="pre">idRef</span></code> trait can also be applied at any level of
nesting on shapes referenced by trait shapes.</p>
</dd>
<dt>Trait selector</dt><dd><p><code class="docutils literal notranslate"><span class="pre">:test(string,</span> <span class="pre">member</span> <span class="pre">&gt;</span> <span class="pre">string)</span></code></p>
<p><em>A string shape or a member that targets a string shape</em></p>
</dd>
<dt>Value type</dt><dd><p><code class="docutils literal notranslate"><span class="pre">structure</span></code></p>
</dd>
</dl>
<p>The <code class="docutils literal notranslate"><span class="pre">idRef</span></code> trait is a structure that supports the following optional
members:</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 10.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>failWhenMissing</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></td>
<td><p>When set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the shape ID MUST target a shape that can be
found in the model.</p></td>
</tr>
<tr class="row-odd"><td><p>selector</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>Defines the <a class="reference internal" href="selectors.html#selectors"><span class="std std-ref">selector</span></a> that the resolved shape,
if found, MUST match.</p>
<p><code class="docutils literal notranslate"><span class="pre">selector</span></code> defaults to <code class="docutils literal notranslate"><span class="pre">*</span></code> when not defined.</p>
</td>
</tr>
<tr class="row-even"><td><p>errorMessage</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>Defines a custom error message to use when the shape ID cannot be
found or does not match the <code class="docutils literal notranslate"><span class="pre">selector</span></code>.</p>
<p>A default message is generated when <code class="docutils literal notranslate"><span class="pre">errorMessage</span></code> is not defined.</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>To illustrate an example, a custom trait named <code class="docutils literal notranslate"><span class="pre">integerRef</span></code> is defined.
This trait can be attached to any shape, and the value of the trait MUST
contain a valid shape ID that targets an integer shape in the model.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="nt">@trait</span>
<span class="nt">@idRef</span>(<span class="py">failWhenMissing</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="py">selector</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span>)
<span class="kd">string </span><span class="nc">integerRef</span>
</pre></div>
</div>
<p>Given the following model,</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="nt">@integerRef</span>(<span class="vc">NotFound</span>)
<span class="kd">string </span><span class="nc">InvalidShape1</span>

<span class="nt">@integerRef</span>(<span class="vc">String</span>)
<span class="kd">string </span><span class="nc">InvalidShape2</span>

<span class="nt">@integerRef</span>(<span class="s2">&quot;invalid-shape-id!&quot;</span>)
<span class="kd">string </span><span class="nc">InvalidShape3</span>

<span class="nt">@integerRef</span>(<span class="vc">Integer</span>)
<span class="kd">string </span><span class="nc">ValidShape</span>

<span class="nt">@integerRef</span>(<span class="vc">MyShape</span>)
<span class="kd">string </span><span class="nc">ValidShape2</span>

<span class="kd">integer </span><span class="nc">MyShape</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">InvalidShape1</span></code> is invalid because the &quot;NotFound&quot; shape cannot be
found in the model.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">InvalidShape2</span></code> is invalid because &quot;smithy.api#String&quot; targets a
string which does not match the &quot;integer&quot; selector.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">InvalidShape3</span></code> is invalid because &quot;invalid-shape-id!&quot; is not a
syntactically correct absolute shape ID.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ValidShape</span></code> is valid because &quot;smithy.api#Integer&quot; targets an integer.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ValidShape2</span></code> is valid because &quot;MyShape&quot; is a relative ID that targets
<code class="docutils literal notranslate"><span class="pre">smithy.example#MyShape</span></code>.</p></li>
</ul>
</section>
<section id="length-trait">
<span id="smithy-api-length-trait"></span><span id="id3"></span><h2><span class="section-number">6.3. </span><code class="docutils literal notranslate"><span class="pre">length</span></code> trait<a class="headerlink" href="#length-trait" title="Link to this heading">¶</a></h2>
<dl>
<dt>Summary</dt><dd><p>Constrains a shape to minimum and maximum number of elements or size.</p>
</dd>
<dt>Trait selector</dt><dd><p><code class="docutils literal notranslate"><span class="pre">:test(list,</span> <span class="pre">map,</span> <span class="pre">string,</span> <span class="pre">blob,</span> <span class="pre">member</span> <span class="pre">&gt;</span> <span class="pre">:is(list,</span> <span class="pre">map,</span> <span class="pre">string,</span> <span class="pre">blob))</span></code></p>
<p><em>Any list, map, string, or blob; or a member that targets one of these shapes</em></p>
</dd>
<dt>Value type</dt><dd><p><code class="docutils literal notranslate"><span class="pre">structure</span></code></p>
</dd>
</dl>
<p>The length trait is a structure that contains the following members:</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 10.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>min</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">number</span></code></p></td>
<td><p>Integer value that represents the minimum inclusive length of a shape.</p></td>
</tr>
<tr class="row-odd"><td><p>max</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">number</span></code></p></td>
<td><p>Integer value that represents the maximum inclusive length of a shape.</p></td>
</tr>
</tbody>
</table>
</div>
<p>At least one of min, max is required.</p>
<p>The following table describes what a length trait constrains when applied to
the corresponding shape:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Shape</p></th>
<th class="head"><p>Length constrains</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>list</p></td>
<td><p>The number of members</p></td>
</tr>
<tr class="row-odd"><td><p>map</p></td>
<td><p>The number of key-value pairs</p></td>
</tr>
<tr class="row-even"><td><p>string</p></td>
<td><p>The number of <a class="reference external" href="https://www.unicode.org/glossary/#unicode_scalar_value">Unicode scalar values</a></p></td>
</tr>
<tr class="row-odd"><td><p>blob</p></td>
<td><p>The size of the blob in bytes</p></td>
</tr>
</tbody>
</table>
</div>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@length</span>(<span class="py">min</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="py">max</span><span class="p">:</span><span class="w"> </span><span class="m">10</span>)
<span class="kd">string </span><span class="nc">MyString</span>

<span class="nt">@length</span>(<span class="py">min</span><span class="p">:</span><span class="w"> </span><span class="m">1</span>)
<span class="kd">string </span><span class="nc">NonEmptyString</span>

<span class="nt">@length</span>(<span class="py">max</span><span class="p">:</span><span class="w"> </span><span class="m">10</span>)
<span class="kd">string </span><span class="nc">StringLessThanOrEqualToTen</span>
</pre></div>
</div>
</section>
<section id="pattern-trait">
<span id="smithy-api-pattern-trait"></span><span id="id4"></span><h2><span class="section-number">6.4. </span><code class="docutils literal notranslate"><span class="pre">pattern</span></code> trait<a class="headerlink" href="#pattern-trait" title="Link to this heading">¶</a></h2>
<dl>
<dt>Summary</dt><dd><p>Restricts string shape values to a specified regular expression.</p>
</dd>
<dt>Trait selector</dt><dd><p><code class="docutils literal notranslate"><span class="pre">:test(string,</span> <span class="pre">member</span> <span class="pre">&gt;</span> <span class="pre">string)</span></code></p>
<p><em>A string or a member that targets a string</em></p>
</dd>
<dt>Value type</dt><dd><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p>
</dd>
</dl>
<p>Smithy regular expressions MUST be valid regular expressions according to the
<a class="reference external" href="https://www.ecma-international.org/ecma-262/8.0/index.html#sec-patterns">ECMA 262 regular expression dialect</a>. Patterns SHOULD avoid the use of
conditionals, directives, recursion, lookahead, look-behind, back-references,
and look-around in order to ensure maximum compatibility across programming
languages.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@pattern</span>(<span class="s2">&quot;^[A-Za-z]+$&quot;</span>)
<span class="kd">string </span><span class="nc">Alphabetic</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Pattern values should be chosen with care, as regex evaluation can be
expensive. Regular expressions SHOULD be tested against a range of
potentially malformed inputs to ensure that the execution of the regular
expression match does not lead to a potential denial of service. See
<a class="reference external" href="https://owasp.org/www-community/attacks/Regular_expression_Denial_of_Service_-_ReDoS">OWASP Regular expression Denial of Service</a> for more information.</p>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The <code class="docutils literal notranslate"><span class="pre">pattern</span></code> trait does not implicitly add a leading <code class="docutils literal notranslate"><span class="pre">^</span></code> or trailing
<code class="docutils literal notranslate"><span class="pre">$</span></code> to match an entire string. For example, <code class="docutils literal notranslate"><span class="pre">&#64;pattern(&quot;\\w+&quot;)</span></code> matches
both &quot;hello&quot; and &quot;!hello!&quot; because it requires that just part of the
string matches the regular expression, whereas <code class="docutils literal notranslate"><span class="pre">&#64;pattern(&quot;^\\w+$&quot;)</span></code>
requires that the entire string matches the regular expression.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Pattern values that contain <code class="docutils literal notranslate"><span class="pre">\</span></code> need to <a class="reference internal" href="idl.html#string-escape-characters"><span class="std std-ref">escape it</span></a>.
For example, the regular expression <code class="docutils literal notranslate"><span class="pre">^\w+$</span></code> would be specified as
<code class="docutils literal notranslate"><span class="pre">&#64;pattern(&quot;^\\w+$&quot;)</span></code>.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@pattern</span>(<span class="s2">&quot;</span><span class="se">\\</span><span class="s2">w+&quot;</span>)
<span class="kd">string </span><span class="nc">ContainsWords</span>
</pre></div>
</div>
</div>
</section>
<section id="private-trait">
<span id="smithy-api-private-trait"></span><span id="id5"></span><h2><span class="section-number">6.5. </span><code class="docutils literal notranslate"><span class="pre">private</span></code> trait<a class="headerlink" href="#private-trait" title="Link to this heading">¶</a></h2>
<dl class="simple">
<dt>Summary</dt><dd><p>Prevents models defined in a different namespace from referencing the
targeted shape.</p>
</dd>
<dt>Trait selector</dt><dd><p><code class="docutils literal notranslate"><span class="pre">*</span></code></p>
</dd>
<dt>Value type</dt><dd><p>Annotation trait</p>
</dd>
</dl>
<p>Shapes marked as <code class="docutils literal notranslate"><span class="pre">private</span></code> cannot be accessed outside of the namespace in
which the shape is defined. The <code class="docutils literal notranslate"><span class="pre">private</span></code> trait is meant only to control
access from within the model itself and SHOULD NOT influence code-generation
of the targeted shape.</p>
<p>Consider the following model:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="nt">@private</span>
<span class="kd">string </span><span class="nc">PrivateString</span>
</pre></div>
</div>
<p>The following model is invalid because it attempts to refer to
<code class="docutils literal notranslate"><span class="pre">PrivateString</span></code> from another namespace:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">namespace </span><span class="nc">smithy.example.other</span>

<span class="kd">list </span><span class="nc">StringList</span><span class="w"> </span>{
<span class="w">    </span><span class="py">member</span><span class="p">:</span><span class="w"> </span><span class="vc">PrivateString</span>
}
</pre></div>
</div>
</section>
<section id="range-trait">
<span id="smithy-api-range-trait"></span><span id="id6"></span><h2><span class="section-number">6.6. </span><code class="docutils literal notranslate"><span class="pre">range</span></code> trait<a class="headerlink" href="#range-trait" title="Link to this heading">¶</a></h2>
<dl>
<dt>Summary</dt><dd><p>Restricts allowed values of number shapes within an acceptable lower and
upper bound.</p>
</dd>
<dt>Trait selector</dt><dd><p><code class="docutils literal notranslate"><span class="pre">:test(number,</span> <span class="pre">member</span> <span class="pre">&gt;</span> <span class="pre">number)</span></code></p>
<p><em>A number or a member that targets a number</em></p>
</dd>
<dt>Value type</dt><dd><p><code class="docutils literal notranslate"><span class="pre">structure</span></code></p>
</dd>
</dl>
<p>The range trait is a structure that contains the following members:</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 10.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>min</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bigDecimal</span></code></p></td>
<td><p>Specifies the allowed inclusive minimum value.</p></td>
</tr>
<tr class="row-odd"><td><p>max</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bigDecimal</span></code></p></td>
<td><p>Specifies the allowed inclusive maximum value.</p></td>
</tr>
</tbody>
</table>
</div>
<p>At least one of <code class="docutils literal notranslate"><span class="pre">min</span></code> or <code class="docutils literal notranslate"><span class="pre">max</span></code> is required. <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code> accept both
integers and real numbers. Real numbers may only be applied to float, double,
or bigDecimal shapes. <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code> MUST fall within the allowable range
of the targeted numeric shape to which it is applied.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@range</span>(<span class="py">min</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="py">max</span><span class="p">:</span><span class="w"> </span><span class="m">10</span>)
<span class="kd">integer </span><span class="nc">OneToTen</span>

<span class="nt">@range</span>(<span class="py">min</span><span class="p">:</span><span class="w"> </span><span class="m">1</span>)
<span class="kd">integer </span><span class="nc">GreaterThanOne</span>

<span class="nt">@range</span>(<span class="py">max</span><span class="p">:</span><span class="w"> </span><span class="m">10</span>)
<span class="kd">integer </span><span class="nc">LessThanTen</span>
</pre></div>
</div>
</section>
<section id="uniqueitems-trait">
<span id="smithy-api-uniqueitems-trait"></span><span id="id7"></span><h2><span class="section-number">6.7. </span><code class="docutils literal notranslate"><span class="pre">uniqueItems</span></code> trait<a class="headerlink" href="#uniqueitems-trait" title="Link to this heading">¶</a></h2>
<dl>
<dt>Summary</dt><dd><p>Requires the items in a <a class="reference internal" href="aggregate-types.html#list"><span class="std std-ref">list</span></a> to be unique
based on <a class="reference internal" href="#value-equality"><span class="std std-ref">Value equality</span></a>.</p>
</dd>
<dt>Trait selector</dt><dd><p><code class="docutils literal notranslate"><span class="pre">list</span> <span class="pre">:not(&gt;</span> <span class="pre">member</span> <span class="pre">~&gt;</span> <span class="pre">:is(float,</span> <span class="pre">double,</span> <span class="pre">document))</span></code></p>
<p><em>A list that does not transitively contain floats, doubles, or documents</em></p>
</dd>
<dt>Conflicts with</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="type-refinement-traits.html#sparse-trait"><span class="std std-ref">sparse trait</span></a></p></li>
</ul>
</dd>
<dt>Value type</dt><dd><p>Annotation trait.</p>
</dd>
</dl>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@uniqueItems</span>
<span class="kd">list </span><span class="nc">MyList</span><span class="w"> </span>{
<span class="w">    </span><span class="py">member</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}
</pre></div>
</div>
<section id="value-equality">
<span id="id8"></span><h3><span class="section-number">6.7.1. </span>Value equality<a class="headerlink" href="#value-equality" title="Link to this heading">¶</a></h3>
<p>Two values are considered equal if:</p>
<ul class="simple">
<li><p>They are the same type.</p></li>
<li><p>Both are strings and are the same codepoint-for-codepoint.</p></li>
<li><p>Both are blobs and are the same byte-for-byte.</p></li>
<li><p>Both are booleans and are both true or are both false.</p></li>
<li><p>Both are timestamps and refer to the same instant in time.</p></li>
<li><p>Both are lists and have an equal value item-for-item. Note that
sets, a deprecated data type, are treated exactly like lists.</p></li>
<li><p>Both are maps, have the same number of entries, and each key value
pair in one map has an equal key value pair in the other map. The
order of entries does not matter.</p></li>
<li><p>Both are numbers of the same type and have the same mathematical value.</p></li>
<li><p>Both are structures of the same type and have the same members with
equal values.</p></li>
<li><p>Both are unions of the same type, are set to the same member, and the
set members have the same value.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Floats, doubles, and documents are not allowed in <code class="docutils literal notranslate"><span class="pre">&#64;uniqueItems</span></code> lists
because they only allow for partial equivalence and require special care
to determine if two values are considered equal.</p>
</div>
</section>
</section>
<section id="enum-trait">
<span id="smithy-api-enum-trait"></span><span id="id9"></span><h2><span class="section-number">6.8. </span><code class="docutils literal notranslate"><span class="pre">enum</span></code> trait<a class="headerlink" href="#enum-trait" title="Link to this heading">¶</a></h2>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>This trait is deprecated. An <a class="reference internal" href="simple-types.html#enum"><span class="std std-ref">enum shape</span></a> should be used
instead.</p>
</div>
<dl class="simple">
<dt>Summary</dt><dd><p>Constrains the acceptable values of a string to a fixed set.</p>
</dd>
<dt>Trait selector</dt><dd><p><code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">:not(enum)</span></code></p>
</dd>
<dt>Value type</dt><dd><p><code class="docutils literal notranslate"><span class="pre">list</span></code> of <em>enum definition</em> structures.</p>
</dd>
</dl>
<p>An <em>enum definition</em> is a structure that supports the following members:</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 10.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>value</p></td>
<td><p>string</p></td>
<td><p><strong>Required</strong>. Defines the enum value that is sent over the wire. Values
MUST NOT be empty. Values MUST be unique across all enum definitions in
an <code class="docutils literal notranslate"><span class="pre">enum</span></code> trait.</p></td>
</tr>
<tr class="row-odd"><td><p>name</p></td>
<td><p>string</p></td>
<td><p>Defines a constant name that can be used in programming languages to
reference an enum <code class="docutils literal notranslate"><span class="pre">value</span></code>. A <code class="docutils literal notranslate"><span class="pre">name</span></code> is not required, though
their use is strongly encouraged to help tools like code generators
safely and reliably create symbols that represent specific values.</p>
<p>Validation constraints:</p>
<ul class="simple">
<li><p>Names MUST start with an upper or lower case ASCII Latin letter
(<code class="docutils literal notranslate"><span class="pre">A-Z</span></code> or <code class="docutils literal notranslate"><span class="pre">a-z</span></code>), or the ASCII underscore (<code class="docutils literal notranslate"><span class="pre">_</span></code>) and be
followed by zero or more upper or lower case ASCII Latin letters
(<code class="docutils literal notranslate"><span class="pre">A-Z</span></code> or <code class="docutils literal notranslate"><span class="pre">a-z</span></code>), ASCII underscores (<code class="docutils literal notranslate"><span class="pre">_</span></code>), or ASCII digits
(<code class="docutils literal notranslate"><span class="pre">0-9</span></code>). That is, names MUST match the following regular
expression: <code class="docutils literal notranslate"><span class="pre">^[a-zA-Z_]+[a-zA-Z_0-9]*$</span></code>.</p></li>
<li><p>The following stricter rules are recommended for consistency: Enum
constant names SHOULD NOT contain any lowercase ASCII Latin letters
(<code class="docutils literal notranslate"><span class="pre">a-z</span></code>) and SHOULD NOT start with an ASCII underscore (<code class="docutils literal notranslate"><span class="pre">_</span></code>).
That is, enum names SHOULD match the following regular expression:
<code class="docutils literal notranslate"><span class="pre">^[A-Z]+[A-Z_0-9]*$</span></code>.</p></li>
<li><p>Names MUST be unique across all enum definitions of an <code class="docutils literal notranslate"><span class="pre">enum</span></code>
trait.</p></li>
<li><p>If any enum definition has a <code class="docutils literal notranslate"><span class="pre">name</span></code>, then all entries in the
<code class="docutils literal notranslate"><span class="pre">enum</span></code> trait MUST have a <code class="docutils literal notranslate"><span class="pre">name</span></code>.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>documentation</p></td>
<td><p>string</p></td>
<td><p>Defines documentation about the enum value in the <a class="reference external" href="https://spec.commonmark.org/">CommonMark</a> format.</p></td>
</tr>
<tr class="row-odd"><td><p>tags</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[string]</span></code></p></td>
<td><p>Attaches a list of tags that allow the enum value to be categorized and
grouped.</p></td>
</tr>
<tr class="row-even"><td><p>deprecated</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></td>
<td><p>Whether the enum value should be considered deprecated for consumers of
the Smithy model.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While the <a class="reference internal" href="../guides/smithy-build-json.html#changestringenumstoenumshapes"><span class="std std-ref">changeStringEnumsToEnumShapes</span></a>
transform can be used to convert to an enum shape, it is recommended to use
the <a class="reference internal" href="simple-types.html#enum"><span class="std std-ref">enum shape</span></a> instead.</p>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="type-refinement-traits.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title"><span class="section-number">7. </span>Type refinement traits</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="mixins.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title"><span class="section-number">5. </span>Mixins</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Amazon Web Services
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/smithy-lang/smithy" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">6. Constraint traits</a><ul>
<li><a class="reference internal" href="#constraint-trait-enforcement">6.1. Constraint trait enforcement</a></li>
<li><a class="reference internal" href="#idref-trait">6.2. <code class="docutils literal notranslate"><span class="pre">idRef</span></code> trait</a></li>
<li><a class="reference internal" href="#length-trait">6.3. <code class="docutils literal notranslate"><span class="pre">length</span></code> trait</a></li>
<li><a class="reference internal" href="#pattern-trait">6.4. <code class="docutils literal notranslate"><span class="pre">pattern</span></code> trait</a></li>
<li><a class="reference internal" href="#private-trait">6.5. <code class="docutils literal notranslate"><span class="pre">private</span></code> trait</a></li>
<li><a class="reference internal" href="#range-trait">6.6. <code class="docutils literal notranslate"><span class="pre">range</span></code> trait</a></li>
<li><a class="reference internal" href="#uniqueitems-trait">6.7. <code class="docutils literal notranslate"><span class="pre">uniqueItems</span></code> trait</a><ul>
<li><a class="reference internal" href="#value-equality">6.7.1. Value equality</a></li>
</ul>
</li>
<li><a class="reference internal" href="#enum-trait">6.8. <code class="docutils literal notranslate"><span class="pre">enum</span></code> trait</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=60dbed4a"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=6b89569b"></script>
    <script src="../_static/tabs.js?v=3ee01567"></script>
    </body>
</html>