<!doctype html>
<html class="no-js" lang="en" data-content_root="../../../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../../genindex.html"><link rel="search" title="Search" href="../../../search.html"><link rel="next" title="Customizing Client Behavior" href="customization.html"><link rel="prev" title="Generating Clients" href="generating-clients.html">
        <link rel="prefetch" href="../../../_static/smithy.svg" as="image">
        <link rel="prefetch" href="../../../_static/smithy-dark.svg" as="image">

    <link rel="shortcut icon" href="../../../_static/favicon.svg"><!-- Generated with Sphinx 9.1.0 and Furo 2025.12.19 -->
        <title>Configuring Clients - Smithy 2.0</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?v=7bdb33bb" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?v=8dab3a3b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=0abfef4d" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --admonition-font-size: 100%;
  --admonition-title-font-size: 100%;
  --color-brand-primary: #C44536;
  --color-brand-content: #00808b;
  --color-announcement-background: #f8f8f8;
  --color-announcement-text: #383838;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #282828;
  --color-code-foreground: #dddddd;
  --color-brand-primary: #ed9d13;
  --color-brand-content: #58d3ff;
  --color-announcement-background: ##1a1c1e;;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #282828;
  --color-code-foreground: #dddddd;
  --color-brand-primary: #ed9d13;
  --color-brand-content: #58d3ff;
  --color-announcement-background: ##1a1c1e;;
  
      }
    }
  }
</style><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js"></script>
<script src="https://d2c.aws.amazon.com/client/loader/v1/d2c-load.js"></script></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand">Smithy 2.0</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="/index.html">
  
  <div class="sidebar-brand-icon">
    <img class="sidebar-logo only-light" src="../../../_static/smithy.svg" alt="Logo">
    <img class="sidebar-logo only-dark" src="../../../_static/smithy-dark.svg" alt="Logo">
  </div>
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../quickstart.html">Quick start</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../spec/index.html">Smithy specification</a><input aria-label="Toggle navigation of Smithy specification" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../spec/model.html">1. The Smithy model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../spec/simple-types.html">2. Simple types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../spec/aggregate-types.html">3. Aggregate types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../spec/service-types.html">4. Service types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../spec/mixins.html">5. Mixins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../spec/constraint-traits.html">6. Constraint traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../spec/type-refinement-traits.html">7. Type refinement traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../spec/documentation-traits.html">8. Documentation traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../spec/behavior-traits.html">9. Behavior traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../spec/resource-traits.html">10. Resource traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../spec/authentication-traits.html">11. Authentication traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../spec/protocol-traits.html">12. Serialization and Protocol traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../spec/streaming.html">13. Streaming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../spec/http-bindings.html">14. HTTP bindings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../spec/endpoint-traits.html">15. Endpoint traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../spec/selectors.html">16. Selectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../spec/model-validation.html">17. Model validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../spec/idl.html">18. Smithy IDL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../spec/json-ast.html">19. JSON AST</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../trait-index.html">Trait index</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../guides/index.html">Guides</a><input aria-label="Toggle navigation of Guides" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../guides/smithy-cli/index.html">The Smithy CLI</a><input aria-label="Toggle navigation of The Smithy CLI" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../guides/smithy-cli/cli_installation.html">Installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../guides/smithy-build-json.html">smithy-build.json</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../guides/gradle-plugin/index.html">Smithy Gradle Plugins</a><input aria-label="Toggle navigation of Smithy Gradle Plugins" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../guides/gradle-plugin/gradle-migration-guide.html">Migrating to Gradle plugin version 0.10.0+</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../guides/using-code-generation/index.html">Code Generation</a><input aria-label="Toggle navigation of Code Generation" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../guides/using-code-generation/update-model.html">Updating the Smithy Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../guides/using-code-generation/generating-a-client.html">Generating a client</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../guides/model-linters.html">Linting Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../guides/model-validation-examples.html">Model Validation Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../guides/evolving-models.html">Evolving Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../guides/wire-protocol-selection.html">Wire protocol selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../guides/style-guide.html">Style Guide</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../guides/model-translations/index.html">Model Translations</a><input aria-label="Toggle navigation of Model Translations" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../guides/model-translations/converting-to-openapi.html">Converting Smithy to OpenAPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../guides/model-translations/migrating-idl-1-to-2.html">Smithy IDL 1.0 to 2.0 Migration Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../guides/model-translations/generating-cloudformation-resources.html">Generating CloudFormation Resource Schemas from Smithy</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../guides/building-codegen/index.html">Creating a Code Generator</a><input aria-label="Toggle navigation of Creating a Code Generator" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../guides/building-codegen/overview-and-concepts.html">Overview and Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../guides/building-codegen/mapping-shapes-to-languages.html">Mapping Smithy Shapes to Your Language</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../guides/building-codegen/creating-codegen-repo.html">Creating a Codegen Repo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../guides/building-codegen/configuring-the-generator.html">Configuring the Generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../guides/building-codegen/implementing-the-generator.html">Implementing the Generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../guides/building-codegen/making-codegen-pluggable.html">Making Codegen Pluggable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../guides/building-codegen/generating-code.html">Generating Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../guides/building-codegen/decoupling-codegen-with-symbols.html">Decoupling Codegen with Symbols</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../guides/building-codegen/using-the-semantic-model.html">Using the Semantic Model</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../guides/client-guidance/index.html">Smithy Client Guidance</a><input aria-label="Toggle navigation of Smithy Client Guidance" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../guides/client-guidance/application-protocols/index.html">Application Protocols</a><input aria-label="Toggle navigation of Application Protocols" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../guides/client-guidance/application-protocols/http.html">HTTP</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../guides/glossary.html">Glossary</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../tutorials/index.html">Tutorials</a><input aria-label="Toggle navigation of Tutorials" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../tutorials/full-stack-tutorial.html">Full Stack Application</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../additional-specs/index.html">Additional specs</a><input aria-label="Toggle navigation of Additional specs" class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../additional-specs/ai-traits.html">Smithy AI Traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../additional-specs/http-protocol-compliance-tests.html">HTTP Protocol Compliance Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../additional-specs/smoke-tests.html">Smoke Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../additional-specs/waiters.html">Waiters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../additional-specs/mqtt.html">MQTT Protocol Bindings</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../additional-specs/rules-engine/index.html">Rules engine</a><input aria-label="Toggle navigation of Rules engine" class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../additional-specs/rules-engine/specification.html">Rules engine specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../additional-specs/rules-engine/parameters.html">Rules engine parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../additional-specs/rules-engine/standard-library.html">Rules engine standard library</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../additional-specs/protocols/index.html">Protocols</a><input aria-label="Toggle navigation of Protocols" class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../additional-specs/protocols/smithy-rpc-v2.html">Smithy RPC v2 CBOR protocol</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../aws/index.html">AWS integrations</a><input aria-label="Toggle navigation of AWS integrations" class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../aws/aws-core.html">AWS Core Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../aws/aws-auth.html">AWS Authentication Traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../aws/aws-endpoints-region.html">AWS Declarative Endpoint Traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../aws/aws-iam.html">AWS IAM traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../aws/amazon-apigateway.html">Amazon API Gateway traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../aws/aws-cloudformation.html">AWS CloudFormation Traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../aws/amazon-eventstream.html">Amazon Event Stream Specification</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../aws/protocols/index.html">AWS Protocols</a><input aria-label="Toggle navigation of AWS Protocols" class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../aws/protocols/aws-restjson1-protocol.html">AWS restJson1 protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../aws/protocols/aws-json-1_0-protocol.html">AWS JSON 1.0 protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../aws/protocols/aws-json-1_1-protocol.html">AWS JSON 1.1 protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../aws/protocols/aws-restxml-protocol.html">AWS restXml protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../aws/protocols/aws-query-protocol.html">AWS query protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../aws/protocols/aws-ec2-query-protocol.html">AWS EC2 query protocol</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../aws/customizations/index.html">AWS Service Customizations</a><input aria-label="Toggle navigation of AWS Service Customizations" class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../aws/customizations/apigateway-customizations.html">Amazon API Gateway Customizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../aws/customizations/glacier-customizations.html">Amazon Glacier Customizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../aws/customizations/machinelearning-customizations.html">Amazon Machine Learning Customizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../aws/customizations/s3-customizations.html">Amazon S3 Customizations</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../aws/rules-engine/index.html">AWS rules engine extensions</a><input aria-label="Toggle navigation of AWS rules engine extensions" class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../aws/rules-engine/built-ins.html">AWS rules engine built-ins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../aws/rules-engine/library-functions.html">AWS rules engine library functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../aws/rules-engine/auth-schemes.html">AWS rules engine authentication scheme validators</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Languages</span></p>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">Java</a><input aria-label="Toggle navigation of Java" checked="" class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html">Java Quickstart</a></li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="index.html">Client User Guide</a><input aria-label="Toggle navigation of Client User Guide" checked="" class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="generating-clients.html">Generating Clients</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Configuring Clients</a></li>
<li class="toctree-l3"><a class="reference internal" href="customization.html">Customizing Client Behavior</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugins.html">Client Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamic-client.html">Dynamic Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="codegen-integrations.html">Codegen Integrations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-java">Source code</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-java/tree/0.0.3/examples">Smithy Java Examples</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../typescript/index.html">TypeScript</a><input aria-label="Toggle navigation of TypeScript" class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../typescript/quickstart.html">TypeScript Quickstart</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../typescript/ts-ssdk/index.html">Server Generator for TypeScript</a><input aria-label="Toggle navigation of Server Generator for TypeScript" class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../typescript/ts-ssdk/introduction.html">Introduction to the Smithy Server Generator for TypeScript</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../typescript/ts-ssdk/handlers.html">Smithy Server Generator for TypeScript handlers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../typescript/ts-ssdk/validation.html">Smithy Server Generator for TypeScript validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../typescript/ts-ssdk/error-handling.html">Smithy Server Generator for TypeScript error handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../typescript/ts-ssdk/supported-endpoints.html">Smithy Server Generator for TypeScript supported endpoints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-typescript">Source code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tutorials/full-stack-tutorial.html">Smithy Full Stack Application</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../rust/index.html">Rust</a><input aria-label="Toggle navigation of Rust" class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://smithy-lang.github.io/smithy-rs/design/">Design Documentation</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-rs">Source code</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../python/index.html">Python</a><input aria-label="Toggle navigation of Python" class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-python">Source code</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../kotlin/index.html">Kotlin</a><input aria-label="Toggle navigation of Kotlin" class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-kotlin">Source code</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../golang/index.html">GoLang</a><input aria-label="Toggle navigation of GoLang" class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" role="switch" type="checkbox"/><label for="toctree-checkbox-25"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://github.com/aws/smithy-go">Source code</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../scala/index.html">Scala</a><input aria-label="Toggle navigation of Scala" class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" role="switch" type="checkbox"/><label for="toctree-checkbox-26"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://disneystreaming.github.io/smithy4s/">Documentation</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/disneystreaming/smithy4s">Source code</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/smithy-lang/smithy">Source code</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/smithy-lang/awesome-smithy">Awesome Smithy</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/smithy-lang/smithy-examples">Smithy Examples</a></li>
<li class="toctree-l1"><a class="reference external" href="https://smithy.io/1.0/">1.0 Documentation</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/smithy-lang/smithy/blob/main/docs/source-2.0/languages/java/client/configuration.rst?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/smithy-lang/smithy/edit/main/docs/source-2.0/languages/java/client/configuration.rst" rel="edit" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="configuring-clients">
<h1>Configuring Clients<a class="headerlink" href="#configuring-clients" title="Link to this heading">¶</a></h1>
<p>Smithy Java clients are composed of several components which are configurable at runtime:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#java-client-protocols"><span class="std std-ref">Protocols</span></a> - Defines how to serialize and deserialize a client request.</p></li>
<li><p><a class="reference internal" href="#java-client-transports"><span class="std std-ref">Transports</span></a> - Manages connections and the sending of data on the wire.</p></li>
<li><p><a class="reference internal" href="#java-client-authschemes"><span class="std std-ref">Auth Schemes</span></a> - Adds authentication/authorization information to a client request.</p></li>
<li><p><a class="reference internal" href="#java-client-endpoints"><span class="std std-ref">Endpoint Resolvers</span></a> - Resolves the service endpoint to call.</p></li>
<li><p><a class="reference internal" href="#java-client-context"><span class="std std-ref">Context Properties</span></a> - Sets typed properties on the client.</p></li>
</ul>
<section id="protocols">
<span id="java-client-protocols"></span><h2>Protocols<a class="headerlink" href="#protocols" title="Link to this heading">¶</a></h2>
<p>A protocol defines how to (de)serialize and bind data into a request. For example, an HTTP+JSON protocol
would handle the serialization of data into the HTTP message body as JSON and might bind some data to the
HTTP message headers.</p>
<section id="configure-a-protocol">
<h3>Configure a protocol<a class="headerlink" href="#configure-a-protocol" title="Link to this heading">¶</a></h3>
<p>The Smithy IDL is protocol-agnostic and allows a service to support any number of protocols for transport and
(de)serialization of data. Like the Smithy IDL, Smithy Java clients are also protocol-agnostic and allow users
to configure a protocol at runtime.</p>
<p>To set a protocol at runtime, add the protocol to the client builder:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Set protocol at runtime</span><a class="headerlink" href="#id1" title="Link to this code">¶</a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyGeneratedClient</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">protocol</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">MyProtocol</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="note admonition">
<p class="admonition-title">Important</p>
<p>The input/output types of the configured protocol must be compatible with the configured transport.</p>
</div>
</section>
<section id="set-a-default-protocol">
<h3>Set a default protocol<a class="headerlink" href="#set-a-default-protocol" title="Link to this heading">¶</a></h3>
<p>While users can set protocols at runtime, a default protocol should be set when generating the client.</p>
<p>To configure the client plugin with a default protocol, add the protocol’s fully qualified Smithy ID to the protocol setting in the smithy-build.json configuration file:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id2" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;java-client-codegen&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// Set the default protocol for the client.</span>
<span class="w">      </span><span class="nt">&quot;protocol&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;smithy.protocols#rpcv2Cbor&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="c1">// ... additional settings</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>A service declares compatible protocols by applying the corresponding protocol trait on the service shape.
For example, if a service supports the rpcV2 protocol, it MUST have the protocol trait applied:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">model.smithy</span><a class="headerlink" href="#id3" title="Link to this code">¶</a></div>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@rpcV2Cbor</span><span class="w"> </span><span class="c">// &lt;- Protocol trait</span>
<span class="kd">service </span><span class="nc">MyService</span>()
</pre></div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The rpcv2-cbor protocol is a generic binary protocol and is good choice for services that want a fast, compact data format.</p>
</div>
</section>
<section id="provided-protocols">
<h3>Provided protocols<a class="headerlink" href="#provided-protocols" title="Link to this heading">¶</a></h3>
<p>The Smithy Java framework provides the following protocols:</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 5.0%" />
<col style="width: 30.0%" />
<col style="width: 35.0%" />
<col style="width: 10.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Trait</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Package</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>rpcv2Cbor</p></td>
<td><p>Smithy</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">smithy.protocols#rpcv2Cbor</span></code></p></td>
<td><p>HTTP RPC protocol that sends requests and responses with CBOR payloads.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">client-rpcv2-cbor</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>AWS JSON 1.1</p></td>
<td><p>AWS</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">aws.protocols#awsJson1_1</span></code></p></td>
<td><p>HTTP protocol that sends &quot;POST&quot; requests and responses with JSON payloads.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">aws-client-awsjson</span></code></p></td>
</tr>
<tr class="row-even"><td><p>AWS Rest JSON 1.0</p></td>
<td><p>AWS</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">aws.protocols#restJson1</span></code></p></td>
<td><p>HTTP protocol that sends requests and responses with JSON payloads</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">aws-client-awsjson</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>AWS Rest XML</p></td>
<td><p>AWS</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">aws.protocols#restXml</span></code></p></td>
<td><p>HTTP protocol that sends requests and responses with XML payloads.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">aws-client-restxml</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="writing-custom-protocols">
<h3>Writing custom protocols<a class="headerlink" href="#writing-custom-protocols" title="Link to this heading">¶</a></h3>
<p>To create a custom protocol, implement the <code class="docutils literal notranslate"><span class="pre">ClientProtocol</span></code> interface from the <code class="docutils literal notranslate"><span class="pre">client-core</span></code> package.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you are writing a service that uses a custom HTTP protocol, you may extend the <code class="docutils literal notranslate"><span class="pre">HttpClientProtocol</span></code>
and use one of the codecs provided by Smithy Java to get started.</p>
</div>
<p>Protocols are discovered via Service Provider Interface (SPI).  To use a custom protocol, you
must implement a protocol factory that implements <code class="docutils literal notranslate"><span class="pre">ClientProtocolFactory</span></code>.
Once you have defined your factory, add it’s fully qualified name to the service provider file
(<code class="docutils literal notranslate"><span class="pre">META-INF/services/software.amazon.smithy.java.runtime.client.core.ClientProtocolFactory</span></code>).
As a reminder, make sure the custom protocol trait is applied to the service shape.</p>
<p>Codec‘s are used by client and server protocols for generic (de)serialization of types into wire data, such as JSON
Protocols SHOULD use an appropriate codec for (de)serialization where possible.
Smithy Java provides XML, JSON, and CBOR codecs.</p>
<p>When writing a custom protocol, we recommend writing compliance tests, which are used to validate the protocol across
multiple language implementations. The <code class="docutils literal notranslate"><span class="pre">protocol-test-harness</span></code> package provides a <a class="reference external" href="https://junit.org/junit5/">JUnit5</a>
test harness for running protocol compliance tests with Smithy Java.</p>
</section>
</section>
<section id="transports">
<span id="java-client-transports"></span><h2>Transports<a class="headerlink" href="#transports" title="Link to this heading">¶</a></h2>
<p>Transports manage connections, and handle the sending/receiving of serialized requests/responses.</p>
<p><code class="docutils literal notranslate"><span class="pre">ClientTransport</span></code>'s can also configure default functionality like adding a user-agent header for an HTTP request
by modifying the client builder using the <code class="docutils literal notranslate"><span class="pre">configureClient</span></code> method.</p>
<div class="note admonition">
<p class="admonition-title">Important</p>
<p>When overriding the <code class="docutils literal notranslate"><span class="pre">configureClient</span></code> method of a <code class="docutils literal notranslate"><span class="pre">ClientTransport</span></code>, you need to also call the <code class="docutils literal notranslate"><span class="pre">configureClient</span></code>
method of the <code class="docutils literal notranslate"><span class="pre">MessageExchange</span></code>, if you want it to take effect. This allows for transports to override
or even completely remove <code class="docutils literal notranslate"><span class="pre">MessageExchange</span></code>-wide functionality.</p>
</div>
<section id="transport-discovery">
<h3>Transport discovery<a class="headerlink" href="#transport-discovery" title="Link to this heading">¶</a></h3>
<p>Transport implementations can be discovered by client code generators and dynamic clients via SPI.
To make a transport implementation discoverable, implement the <code class="docutils literal notranslate"><span class="pre">ClientTransportFactory</span></code> service provider.</p>
<p>If no transport is set on a client, the client will attempt to resolve a transport compatible with the current protocol
from the discoverable transport implementations.</p>
</section>
<section id="setting-a-default-transport">
<h3>Setting a default transport<a class="headerlink" href="#setting-a-default-transport" title="Link to this heading">¶</a></h3>
<p>To set a default transport, add the following to your <a class="reference internal" href="../../../guides/smithy-build-json.html#smithy-build"><span class="std std-ref">smithy-build.json</span></a>:</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id4" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;java-client-codegen&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">//...</span>
<span class="w">    </span><span class="nt">&quot;transport&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;http-java&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="note admonition">
<p class="admonition-title">Important</p>
<p>Transports MUST implement the <code class="docutils literal notranslate"><span class="pre">ClientTransportFactory</span></code> service provider to
be discoverable by the code generation plugin.</p>
</div>
</section>
<section id="provided-transports">
<h3>Provided transports<a class="headerlink" href="#provided-transports" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt><strong>http-java</strong> - Uses the <code class="docutils literal notranslate"><span class="pre">java.net.http.HttpClient</span></code> to send and receive HTTP messages.</dt><dd><p>This transport is provided by the <code class="docutils literal notranslate"><span class="pre">client-http</span></code> module.</p>
</dd>
</dl>
</li>
</ul>
</section>
</section>
<section id="auth-schemes">
<span id="java-client-authschemes"></span><h2>Auth schemes<a class="headerlink" href="#auth-schemes" title="Link to this heading">¶</a></h2>
<p>Auth schemes add authentication/authorization information to a client request. An auth scheme is composed of:</p>
<p>1. Scheme ID - A unique identifier for the auth scheme. It SHOULD correspond to the ID of a Smithy trait
defining an auth scheme (see: <a class="reference external" href="https://smithy.io/2.0/spec/authentication-traits.html#smithy-api-authdefinition-trait">https://smithy.io/2.0/spec/authentication-traits.html#smithy-api-authdefinition-trait</a>).
2. Identity resolver - An API to acquire the customer's identity.
3. Signer - An API to sign requests using the resolved identity.</p>
<p>Auth Schemes may be registered by the client at runtime. To register an auth scheme,
use the <code class="docutils literal notranslate"><span class="pre">putSupportedAuthSchemes</span></code> method:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyClient</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">putSupportedAuthSchemes</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">MyAuthScheme</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
</pre></div>
</div>
<section id="automatic-registration">
<h3>Automatic registration<a class="headerlink" href="#automatic-registration" title="Link to this heading">¶</a></h3>
<p>The Client code generation plugin can discover auth schemes on the classpath. To be discoverable, the auth scheme
must provide an <code class="docutils literal notranslate"><span class="pre">AuthSchemeFactory</span></code> implementation and register that implementation via SPI. Smithy Java client
codegen plugin will automatically search the classpath for relevant <code class="docutils literal notranslate"><span class="pre">AuthSchemeFactory`</span></code> implementations and attempt
to match those with a corresponding trait in the model.</p>
</section>
<section id="effective-auth-schemes">
<h3>Effective auth schemes<a class="headerlink" href="#effective-auth-schemes" title="Link to this heading">¶</a></h3>
<p>Operations may have one or more “effective auth schemes” that could be used to authenticate a request.
Auth scheme traits applied to the service shape are inherited by all service operations unless those
operations have the auth trait applied.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">&#64;auth</span></code> trait define a priority-ordered list of authentication schemes supported by a service or operation.
When applied to a service, it defines the default authentication schemes of every operation in the service.
When applied to an operation, it defines the list of all authentication schemes supported by the operation,
overriding any auth trait specified on a service.</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">model.smithy</span><a class="headerlink" href="#id5" title="Link to this code">¶</a></div>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nt">@httpBasicAuth</span>
<span class="nt">@httpDigestAuth</span>
<span class="nt">@httpBearerAuth</span>
<span class="kd">service </span><span class="nc">MyService</span><span class="w"> </span>{
<span class="w">    </span><span class="py">version</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2020-01-29&quot;</span>
<span class="w">    </span><span class="py">operations</span><span class="p">:</span><span class="w"> </span>[
<span class="w">        </span><span class="vc">OperationA</span>
<span class="w">        </span><span class="vc">OperationB</span>
<span class="w">    </span>]
}

<span class="c">// This operation does not have the @auth trait and is bound to a service</span>
<span class="c">// without the @auth trait. The effective set of authentication schemes it</span>
<span class="c">// supports are: httpBasicAuth, httpDigestAuth and httpBearerAuth</span>
<span class="kd">operation </span><span class="nc">OperationA</span><span class="w"> </span>{}

<span class="c">// This operation does have the @auth trait and is bound to a service</span>
<span class="c">// without the @auth trait. The effective set of authentication schemes it</span>
<span class="c">// supports are: httpDigestAuth.</span>
<span class="nt">@auth</span>([<span class="vc">httpDigestAuth</span>])
<span class="kd">operation </span><span class="nc">OperationB</span><span class="w"> </span>{}
</pre></div>
</div>
</div>
<p><a class="reference external" href="https://smithy.io/2.0/spec/authentication-traits.html#smithy-api-auth-trait">https://smithy.io/2.0/spec/authentication-traits.html#smithy-api-auth-trait</a>
See <a class="reference internal" href="../../../spec/authentication-traits.html#auth-trait"><span class="std std-ref">&#64;auth</span></a> trait for a more thorough discussion on how auth schemes are resolved.</p>
</section>
<section id="identity-resolution">
<h3>Identity resolution<a class="headerlink" href="#identity-resolution" title="Link to this heading">¶</a></h3>
<p>To use an auth scheme in a client, the client must register a corresponding identity resolver
that provides a compatible identity class. Auth schemes can provide a default resolver themselves
or clients can register resolvers via the client builder or via a client plugin.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Multiple identity resolvers can be chained together using the <code class="docutils literal notranslate"><span class="pre">IdentityResolver.chain</span></code> method.</p>
</div>
</section>
<section id="provided-auth-schemes">
<h3>Provided auth schemes<a class="headerlink" href="#provided-auth-schemes" title="Link to this heading">¶</a></h3>
<p>A number of auth schemes are provided by default in the <code class="docutils literal notranslate"><span class="pre">client-http</span></code> package. These include:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../spec/authentication-traits.html#httpbearerauth-trait"><span class="std std-ref">httpBearerAuth</span></a> - Supports HTTP Bearer authentication as defined in RFC 6750.</p></li>
<li><p><a class="reference internal" href="../../../spec/authentication-traits.html#httpapikeyauth-trait"><span class="std std-ref">httpApiKeyAuth</span></a> - Supports HTTP authentication using an API key sent in a header or query string parameter.</p></li>
<li><p><a class="reference internal" href="../../../spec/authentication-traits.html#httpbasicauth-trait"><span class="std std-ref">httpBasicAuth</span></a> - Supports HTTP Basic authentication as defined in RFC 2617.</p></li>
</ul>
<p>Add the <code class="docutils literal notranslate"><span class="pre">client-http</span></code> package as a dependency of your project to make these auth schemes available in your service.</p>
</section>
<section id="worked-example-adding-http-api-key-authentication">
<h3>Worked example: Adding HTTP API key authentication<a class="headerlink" href="#worked-example-adding-http-api-key-authentication" title="Link to this heading">¶</a></h3>
<p>Consider a Smithy modeled API for a service, <code class="docutils literal notranslate"><span class="pre">ExampleService</span></code>. We would like to enable users of our generated SDK
to authenticate to the API using an API key sent via an <code class="docutils literal notranslate"><span class="pre">x-api-key</span></code> HTTP header.
Smithy Java already provides an <code class="docutils literal notranslate"><span class="pre">httpApiKeyAuth</span></code> auth scheme that we can use to allow
this API key authentication.</p>
<p>Before we can add any auth scheme implementations to our generated client we must first add the associated
<a class="reference internal" href="../../../spec/authentication-traits.html#httpapikeyauth-trait"><span class="std std-ref">&#64;httpApiKeyAuth</span></a> scheme trait to our service model:</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">model.smithy</span><a class="headerlink" href="#id6" title="Link to this code">¶</a></div>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace </span><span class="nc">com.example</span>

<span class="nt">@httpApiKeyAuth</span>(<span class="py">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;X-Api-Key&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">in</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;header&quot;</span>)<span class="w"> </span><span class="c">// &lt;- Add auth scheme trait</span>
<span class="kd">service </span><span class="nc">ExampleService</span><span class="w"> </span>{
<span class="w">    </span><span class="py">version</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-05-05&quot;</span>
<span class="w">    </span><span class="c">// ...</span>
}
</pre></div>
</div>
</div>
<p>Authentication schemes are effectively part of your services interface and so (outside of testing)
SHOULD always be modeled in your Smithy model using a trait. See the <a class="reference internal" href="../../../spec/authentication-traits.html#authdefinition-trait"><span class="std std-ref">&#64;authDefinition</span></a>
trait for more information on how to define a custom auth scheme in your Smithy model.</p>
<p>Now that we have added our auth trait to the Smithy model we need to add a corresponding auth scheme implementation
to our client’s dependencies. The <code class="docutils literal notranslate"><span class="pre">client-http</span> <span class="pre">package</span></code> provides an <code class="docutils literal notranslate"><span class="pre">HttpApiKeyAuthScheme</span></code> implementation corresponding
to the <code class="docutils literal notranslate"><span class="pre">&#64;httpApiKeyAuth</span></code> trait:</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">build.gradle.kts</span><a class="headerlink" href="#id7" title="Link to this code">¶</a></div>
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="n">dependencies</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Add the HTTP auth scheme to the classpath</span>
<span class="w">    </span><span class="n">implementation</span><span class="p">(</span><span class="s">&quot;software.amazon.smithy.java:client-http:0.0.3&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">HttpApiKeyAuthScheme</span></code> class implements the <code class="docutils literal notranslate"><span class="pre">AuthSchemeFactory</span></code> service provider, making the auth scheme
discoverable by the client codegen plugin.</p>
<p>The built-in Smithy Java HTTP auth schemes all require one or more compatible <code class="docutils literal notranslate"><span class="pre">IdentityResolver</span></code>
to be register with the client. This resolver will handle actually fetching the clients credentials.
The <code class="docutils literal notranslate"><span class="pre">HttpApiKeyAuthScheme</span></code> scheme needs an identity resolver that returns an <code class="docutils literal notranslate"><span class="pre">ApiKeyIdentity</span></code>.
For testing purposes we will provide a static resolver as follows:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ExampleService</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="na">addIdentityResolver</span><span class="p">(</span>
<span class="w">            </span><span class="n">IdentityResolver</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ApiKeyIdentity</span><span class="p">.</span><span class="na">create</span><span class="p">(</span><span class="s">&quot;example-api-key&quot;</span><span class="p">))</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
</pre></div>
</div>
<p>Or, we could create a custom resolver that resolves the <code class="docutils literal notranslate"><span class="pre">ApiKeyIdentity</span></code> from an environment variable, <code class="docutils literal notranslate"><span class="pre">EXAMPLE_API_KEY</span></code>:</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">Environment variable identity resolver implementation</span><a class="headerlink" href="#id8" title="Link to this code">¶</a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kd">class</span> <span class="nc">EnvironmentVariableIdentityResolver</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">IdentityResolver</span><span class="o">&lt;</span><span class="n">ApiKeyIdentity</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">API_KEY_PROPERTY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;EXAMPLE_API_KEY&quot;</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Class</span><span class="o">&lt;</span><span class="n">ApiKeyIdentity</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">identityType</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ApiKeyIdentity</span><span class="p">.</span><span class="na">class</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">CompletableFuture</span><span class="o">&lt;</span><span class="n">IdentityResult</span><span class="o">&lt;</span><span class="n">AwsCredentialsIdentity</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">resolveIdentity</span><span class="p">(</span><span class="n">AuthProperties</span><span class="w"> </span><span class="n">requestProperties</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">apiKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">getenv</span><span class="p">(</span><span class="n">API_KEY_PROPERTY</span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">apiKey</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">apiKey</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">CompletableFuture</span><span class="p">.</span><span class="na">completedFuture</span><span class="p">(</span>
<span class="w">                </span><span class="n">IdentityResult</span><span class="p">.</span><span class="na">ofError</span><span class="p">(</span><span class="n">getClass</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;Could not find API KEY&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">CompletableFuture</span><span class="p">.</span><span class="na">completedFuture</span><span class="p">(</span><span class="n">IdentityResult</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">ApiKeyIdentity</span><span class="p">.</span><span class="na">create</span><span class="p">(</span><span class="n">apiKey</span><span class="p">)));</span>
<span class="w">    </span><span class="p">}</span>
</pre></div>
</div>
</div>
<p>Smithy Java also allows identity resolvers to be chained together if we want to check multiple locations for the client:</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">Chaining identity resolvers</span><a class="headerlink" href="#id9" title="Link to this code">¶</a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">IdentityResolver</span><span class="p">.</span><span class="na">chain</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FirstResolver</span><span class="p">(),</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SecondResolver</span><span class="p">())</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="endpoint-resolver">
<span id="java-client-endpoints"></span><h2>Endpoint resolver<a class="headerlink" href="#endpoint-resolver" title="Link to this heading">¶</a></h2>
<p>Endpoint resolvers determine the endpoint to use for an operation. For example, an endpoint resolver could
determine what subdomain to use, i.e. <code class="docutils literal notranslate"><span class="pre">us-east-2.myservice.com</span></code> based on a region setting on the client.</p>
<p>To set a static endpoint for a client use the following client builder setter:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">client</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">endpointResolver</span><span class="p">(</span><span class="n">EndpointResolver</span><span class="p">.</span><span class="na">staticResolver</span><span class="p">(</span><span class="s">&quot;https://example.com&quot;</span><span class="p">))</span>
<span class="w">    </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Create a common endpoint resolver for your organization that can be shared across clients.</p>
</div>
</section>
<section id="context-properties">
<span id="java-client-context"></span><h2>Context properties<a class="headerlink" href="#context-properties" title="Link to this heading">¶</a></h2>
<p>Smithy Java clients allow users to add any configurations to a typed property bag, via the putConfig method.
The properties are tied to a typed key and used by client pipeline components such as request signers.</p>
<p>For example, a <code class="docutils literal notranslate"><span class="pre">REGION</span></code> property might need to be set on the client in order for a <code class="docutils literal notranslate"><span class="pre">Sigv4</span></code> request signer to correctly function.
Configuration parameters can be set on a client using a typed property key via the putConfig method:</p>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">Setting REGION context property</span><a class="headerlink" href="#id10" title="Link to this code">¶</a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">static</span><span class="w"> </span><span class="n">Context</span><span class="p">.</span><span class="na">Key</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">MY_PROPERTY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Context</span><span class="p">.</span><span class="na">key</span><span class="p">(</span><span class="s">&quot;a config property&quot;</span><span class="p">);</span>

<span class="p">...</span>

<span class="kd">var</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyClient</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">putContext</span><span class="p">(</span><span class="n">MY_PROPERTY</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</pre></div>
</div>
</div>
<section id="custom-builder-setters">
<h3>Custom builder setters<a class="headerlink" href="#custom-builder-setters" title="Link to this heading">¶</a></h3>
<p>For common settings on a client, it is often desirable to use specifically-named setter methods such as <code class="docutils literal notranslate"><span class="pre">.region(&quot;us-east-1&quot;)</span></code>
rather than requiring users to know the specific context property to use for a configuration parameter.
The <code class="docutils literal notranslate"><span class="pre">ClientSetting</span></code> interface can be used to create a custom setter that for client builders.</p>
<p>For example we would write a custom setting as:</p>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text">custom client setting implementation</span><a class="headerlink" href="#id11" title="Link to this code">¶</a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">CustomSetting</span><span class="o">&lt;</span><span class="n">B</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Client</span><span class="p">.</span><span class="na">Builder</span><span class="o">&lt;?</span><span class="p">,</span><span class="w"> </span><span class="n">B</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">ClientSetting</span><span class="o">&lt;</span><span class="n">B</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Context</span><span class="p">.</span><span class="na">Key</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">MY_PROPERTY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Context</span><span class="p">.</span><span class="na">key</span><span class="p">(</span><span class="s">&quot;A custom string configuration property&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="k">default</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="nf">custom</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">custom</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">putConfig</span><span class="p">(</span><span class="n">MY_PROPERTY</span><span class="p">,</span><span class="w"> </span><span class="n">custom</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If a config property is required, make sure to validate that it exists using a default plugin (see below)</p>
</div>
<p>A client setting can then be added to our generated clients using the defaultSettings setting in the smithy-build.json file:</p>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id12" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;java-client-codegen&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">//...</span>
<span class="w">    </span><span class="nt">&quot;defaultSettings&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;com.example.settings.CustomSetting&quot;</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="c1">//...</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>Now we can use our new setting as follows:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyClient</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">custom</span><span class="p">(</span><span class="s">&quot;that was easy!&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Default settings are typically paired with a default plugin to add the configuration and behavior of a feature
(respectively) to a client by default.</p>
</div>
</section>
<section id="composing-settings">
<h3>Composing settings<a class="headerlink" href="#composing-settings" title="Link to this heading">¶</a></h3>
<p>Some features require multiple custom settings. Because custom settings are simply Java interfaces, we can compose them.</p>
<p>For example, the SigV4 auth scheme requires that region, clock, and signing name settings be configured on a client. We can define the <code class="docutils literal notranslate"><span class="pre">SigV4Settings</span></code> interface as follows:</p>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-text">composed setting</span><a class="headerlink" href="#id13" title="Link to this code">¶</a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">SigV4Settings</span><span class="o">&lt;</span><span class="n">B</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">ClientSetting</span><span class="o">&lt;</span><span class="n">B</span><span class="o">&gt;&gt;</span>
<span class="w">    </span><span class="kd">extends</span><span class="w"> </span><span class="n">ClockSetting</span><span class="o">&lt;</span><span class="n">B</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">RegionSetting</span><span class="o">&lt;</span><span class="n">B</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Service name to use for signing. For example {@code lambda}.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">Context</span><span class="p">.</span><span class="na">Key</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">SIGNING_NAME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Context</span><span class="p">.</span><span class="na">key</span><span class="p">(</span><span class="s">&quot;Signing name to use for computing SigV4 signatures.&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Signing name to use for the SigV4 signing process.</span>
<span class="cm">     *</span>
<span class="cm">     * &lt;p&gt;The signing name is typically the name of the service. For example {@code &quot;lambda&quot;}.</span>
<span class="cm">     *</span>
<span class="cm">     * @param signingName signing name.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="k">default</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="nf">signingName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">signingName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Validation of the signing name</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">signingName</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">signingName</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;signingName cannot be null or empty&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">putConfig</span><span class="p">(</span><span class="n">SIGNING_NAME</span><span class="p">,</span><span class="w"> </span><span class="n">signingName</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>When the <code class="docutils literal notranslate"><span class="pre">SigV4Settings</span></code> interface is added to the codegen configuration as a default setting, the
<code class="docutils literal notranslate"><span class="pre">ClockSetting</span></code> and <code class="docutils literal notranslate"><span class="pre">RegionSetting</span></code> setters will be included in the generated client’s builder.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Create a custom setting class for your organization that aggregates all common settings for your clients.
This minimizes the number of code generation configurations you need to provide to create a functional client.
Add new settings to the aggregate setting to add them to clients without changing the codegen configuration.</p>
</div>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="customization.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Customizing Client Behavior</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="generating-clients.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Generating Clients</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Amazon Web Services
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/smithy-lang/smithy" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Configuring Clients</a><ul>
<li><a class="reference internal" href="#protocols">Protocols</a><ul>
<li><a class="reference internal" href="#configure-a-protocol">Configure a protocol</a></li>
<li><a class="reference internal" href="#set-a-default-protocol">Set a default protocol</a></li>
<li><a class="reference internal" href="#provided-protocols">Provided protocols</a></li>
<li><a class="reference internal" href="#writing-custom-protocols">Writing custom protocols</a></li>
</ul>
</li>
<li><a class="reference internal" href="#transports">Transports</a><ul>
<li><a class="reference internal" href="#transport-discovery">Transport discovery</a></li>
<li><a class="reference internal" href="#setting-a-default-transport">Setting a default transport</a></li>
<li><a class="reference internal" href="#provided-transports">Provided transports</a></li>
</ul>
</li>
<li><a class="reference internal" href="#auth-schemes">Auth schemes</a><ul>
<li><a class="reference internal" href="#automatic-registration">Automatic registration</a></li>
<li><a class="reference internal" href="#effective-auth-schemes">Effective auth schemes</a></li>
<li><a class="reference internal" href="#identity-resolution">Identity resolution</a></li>
<li><a class="reference internal" href="#provided-auth-schemes">Provided auth schemes</a></li>
<li><a class="reference internal" href="#worked-example-adding-http-api-key-authentication">Worked example: Adding HTTP API key authentication</a></li>
</ul>
</li>
<li><a class="reference internal" href="#endpoint-resolver">Endpoint resolver</a></li>
<li><a class="reference internal" href="#context-properties">Context properties</a><ul>
<li><a class="reference internal" href="#custom-builder-setters">Custom builder setters</a></li>
<li><a class="reference internal" href="#composing-settings">Composing settings</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../../_static/documentation_options.js?v=60dbed4a"></script>
    <script src="../../../_static/doctools.js?v=fd6eb6e6"></script>
    <script src="../../../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="../../../_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=6b89569b"></script>
    <script src="../../../_static/tabs.js?v=3ee01567"></script>
    </body>
</html>