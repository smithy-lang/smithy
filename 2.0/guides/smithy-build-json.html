<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Smithy Gradle Plugins" href="gradle-plugin/index.html" /><link rel="prev" title="Installation" href="smithy-cli/cli_installation.html" />

    <link rel="shortcut icon" href="../_static/favicon.svg"/><meta name="generator" content="sphinx-5.3.0, furo 2022.06.21"/>
        <title>smithy-build.json - Smithy 2.0</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=40978830699223671f4072448e654b5958f38b89" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --admonition-font-size: 100%;
  --admonition-title-font-size: 100%;
  --color-brand-primary: #C44536;
  --color-brand-content: #00808b;
  --color-announcement-background: #f8f8f8;
  --color-announcement-text: #383838;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #282828;
  --color-code-foreground: #dddddd;
  --color-brand-primary: #ed9d13;
  --color-brand-content: #58d3ff;
  --color-announcement-background: ##1a1c1e;;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #282828;
  --color-code-foreground: #dddddd;
  --color-brand-primary: #ed9d13;
  --color-brand-content: #58d3ff;
  --color-announcement-background: ##1a1c1e;;
  
      }
    }
  }
</style><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js"></script>
<script src="https://d2c.aws.amazon.com/client/loader/v1/d2c-load.js"></script></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Smithy 2.0</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../_static/smithy.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../_static/smithy-dark.svg" alt="Dark Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick start</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../spec/index.html">Smithy specification</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../spec/model.html">1. The Smithy model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spec/simple-types.html">2. Simple types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spec/aggregate-types.html">3. Aggregate types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spec/service-types.html">4. Service types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spec/mixins.html">5. Mixins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spec/constraint-traits.html">6. Constraint traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spec/type-refinement-traits.html">7. Type refinement traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spec/documentation-traits.html">8. Documentation traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spec/behavior-traits.html">9. Behavior traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spec/resource-traits.html">10. Resource traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spec/authentication-traits.html">11. Authentication traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spec/protocol-traits.html">12. Serialization and Protocol traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spec/streaming.html">13. Streaming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spec/http-bindings.html">14. HTTP bindings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spec/endpoint-traits.html">15. Endpoint traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spec/selectors.html">16. Selectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spec/model-validation.html">17. Model validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spec/idl.html">18. Smithy IDL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spec/json-ast.html">19. JSON AST</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../trait-index.html">Trait index</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Guides</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="smithy-cli/index.html">The Smithy CLI</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="smithy-cli/cli_installation.html">Installation</a></li>
</ul>
</li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">smithy-build.json</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="gradle-plugin/index.html">Smithy Gradle Plugins</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="gradle-plugin/gradle-migration-guide.html">Migrating to Gradle plugin version 0.10.0+</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="using-code-generation/index.html">Code Generation</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="using-code-generation/update-model.html">Updating the Smithy Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="using-code-generation/generating-a-client.html">Generating a client</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="model-linters.html">Linting Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="model-validation-examples.html">Model Validation Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="evolving-models.html">Evolving Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="style-guide.html">Style Guide</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="model-translations/index.html">Model Translations</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="model-translations/converting-to-openapi.html">Converting Smithy to OpenAPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-translations/migrating-idl-1-to-2.html">Smithy IDL 1.0 to 2.0 Migration Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-translations/generating-cloudformation-resources.html">Generating CloudFormation Resource Schemas from Smithy</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="building-codegen/index.html">Creating a Code Generator</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="building-codegen/overview-and-concepts.html">Overview and Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="building-codegen/mapping-shapes-to-languages.html">Mapping Smithy Shapes to Your Language</a></li>
<li class="toctree-l3"><a class="reference internal" href="building-codegen/creating-codegen-repo.html">Creating a Codegen Repo</a></li>
<li class="toctree-l3"><a class="reference internal" href="building-codegen/configuring-the-generator.html">Configuring the Generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="building-codegen/implementing-the-generator.html">Implementing the Generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="building-codegen/making-codegen-pluggable.html">Making Codegen Pluggable</a></li>
<li class="toctree-l3"><a class="reference internal" href="building-codegen/generating-code.html">Generating Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="building-codegen/decoupling-codegen-with-symbols.html">Decoupling Codegen with Symbols</a></li>
<li class="toctree-l3"><a class="reference internal" href="building-codegen/using-the-semantic-model.html">Using the Semantic Model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials/index.html">Tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/full-stack-tutorial.html">Full Stack Application</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../additional-specs/index.html">Additional specs</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../additional-specs/http-protocol-compliance-tests.html">HTTP Protocol Compliance Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../additional-specs/smoke-tests.html">Smoke Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../additional-specs/waiters.html">Waiters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../additional-specs/mqtt.html">MQTT Protocol Bindings</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../additional-specs/rules-engine/index.html">Rules engine</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../additional-specs/rules-engine/specification.html">Rules engine specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../additional-specs/rules-engine/parameters.html">Rules engine parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../additional-specs/rules-engine/standard-library.html">Rules engine standard library</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../additional-specs/protocols/index.html">Protocols</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../additional-specs/protocols/smithy-rpc-v2.html">Smithy RPC v2 CBOR protocol</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../aws/index.html">AWS integrations</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../aws/aws-core.html">AWS Core Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aws/aws-auth.html">AWS Authentication Traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aws/aws-endpoints-region.html">AWS Declarative Endpoint Traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aws/aws-iam.html">AWS IAM traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aws/amazon-apigateway.html">Amazon API Gateway traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aws/aws-cloudformation.html">AWS CloudFormation Traits</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../aws/protocols/index.html">AWS Protocols</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../aws/protocols/aws-restjson1-protocol.html">AWS restJson1 protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/protocols/aws-json-1_0-protocol.html">AWS JSON 1.0 protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/protocols/aws-json-1_1-protocol.html">AWS JSON 1.1 protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/protocols/aws-restxml-protocol.html">AWS restXml protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/protocols/aws-query-protocol.html">AWS query protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/protocols/aws-ec2-query-protocol.html">AWS EC2 query protocol</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../aws/customizations/index.html">AWS Service Customizations</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../aws/customizations/apigateway-customizations.html">Amazon API Gateway Customizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/customizations/glacier-customizations.html">Amazon Glacier Customizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/customizations/machinelearning-customizations.html">Amazon Machine Learning Customizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/customizations/s3-customizations.html">Amazon S3 Customizations</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../aws/rules-engine/index.html">AWS rules engine extensions</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../aws/rules-engine/built-ins.html">AWS rules engine built-ins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/rules-engine/library-functions.html">AWS rules engine library functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws/rules-engine/auth-schemes.html">AWS rules engine authentication scheme validators</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Languages</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../languages/java/index.html">Java</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../languages/java/quickstart.html">Java Quickstart</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../languages/java/client/index.html">Client User Guide</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../languages/java/client/generating-clients.html">Generating Clients</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/java/client/configuration.html">Configuring Clients</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/java/client/customization.html">Customizing Client Behavior</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/java/client/plugins.html">Client Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/java/client/dynamic-client.html">Dynamic Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/java/client/codegen-integrations.html">Codegen Integrations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-java">Source code</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-java/tree/0.0.1/examples">Smithy Java Examples</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../languages/typescript/index.html">TypeScript</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../languages/typescript/ts-ssdk/index.html">Server Generator for TypeScript</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../languages/typescript/ts-ssdk/introduction.html">Introduction to the Smithy Server Generator for TypeScript</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/typescript/ts-ssdk/handlers.html">Smithy Server Generator for TypeScript handlers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/typescript/ts-ssdk/validation.html">Smithy Server Generator for TypeScript validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/typescript/ts-ssdk/error-handling.html">Smithy Server Generator for TypeScript error handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../languages/typescript/ts-ssdk/supported-endpoints.html">Smithy Server Generator for TypeScript supported endpoints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-typescript">Source code</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../languages/rust/index.html">Rust</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://smithy-lang.github.io/smithy-rs/design/">Design Documentation</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-rs">Source code</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../languages/python/index.html">Python</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-python">Source code</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../languages/kotlin/index.html">Kotlin</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-kotlin">Source code</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../languages/golang/index.html">GoLang</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://github.com/aws/smithy-go">Source code</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../languages/scala/index.html">Scala</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://disneystreaming.github.io/smithy4s/">Documentation</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/disneystreaming/smithy4s">Source code</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/smithy-lang/smithy">Source code</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/smithy-lang/awesome-smithy">Awesome Smithy</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/smithy-lang/smithy-examples">Smithy Examples</a></li>
<li class="toctree-l1"><a class="reference external" href="https://smithy.io/1.0/">1.0 Documentation</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/awslabs/smithy/edit/main/docs/source-2.0/guides/smithy-build-json.rst" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <div class="section" id="smithy-build-json">
<span id="smithy-build"></span><h1>smithy-build.json<a class="headerlink" href="#smithy-build-json" title="Permalink to this heading">#</a></h1>
<p>Building a Smithy model requires constructing a configuration file,
<code class="docutils literal notranslate"><span class="pre">smithy-build.json</span></code>. This file is used to describe how a model is created
and what projections of the model to create.</p>
<div class="section" id="using-smithy-build-json">
<span id="id1"></span><h2>Using <code class="docutils literal notranslate"><span class="pre">smithy-build.json</span></code><a class="headerlink" href="#using-smithy-build-json" title="Permalink to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">smithy-build.json</span></code> file is used to describe how a model is created and
what projections of the model to create.</p>
<p>The configuration file accepts the following properties:</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>version</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><strong>Required.</strong> Defines the version of smithy-build. Set to <cite>1.0</cite>.</td>
</tr>
<tr class="row-odd"><td>outputDirectory</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>The location where projections are written. Each
projection will create a subdirectory named after the projection, and
the artifacts from the projection, including a <code class="docutils literal notranslate"><span class="pre">model.json</span></code> file,
will be placed in the directory.</td>
</tr>
<tr class="row-even"><td>sources</td>
<td><code class="docutils literal notranslate"><span class="pre">[string]</span></code></td>
<td>Provides a list of relative files or directories that contain the
models that are considered the source models of the build. When a
directory is encountered, all files in the entire directory tree are
added as sources. Sources are relative to the configuration file.</td>
</tr>
<tr class="row-odd"><td>imports</td>
<td><code class="docutils literal notranslate"><span class="pre">[string]</span></code></td>
<td><p class="first">Provides a list of model files and directories to load when validating
and building the model. Imports are a local dependency: they are not
considered part of model package being built, but are required to build
the model package. Models added through <code class="docutils literal notranslate"><span class="pre">imports</span></code> are not present in
the output of the built-in <code class="docutils literal notranslate"><span class="pre">sources</span></code> plugin.</p>
<p class="last">When a directory is encountered, all files in the entire directory
tree are imported. Imports defined at the top-level are used in every
projection. Imports are relative to the configuration file.</p>
</td>
</tr>
<tr class="row-even"><td>projections</td>
<td><code class="docutils literal notranslate"><span class="pre">map&lt;string,</span> <span class="pre">object&gt;</span></code></td>
<td>A map of projection names to projection configurations.</td>
</tr>
<tr class="row-odd"><td>plugins</td>
<td><code class="docutils literal notranslate"><span class="pre">map&lt;string,</span> <span class="pre">object&gt;</span></code></td>
<td>Defines the plugins to apply to the model when building every
projection. Plugins are a mapping of <a class="reference internal" href="#plugin-id"><span class="std std-ref">plugin IDs</span></a> to
plugin-specific configuration objects.</td>
</tr>
<tr class="row-even"><td>ignoreMissingPlugins</td>
<td><code class="docutils literal notranslate"><span class="pre">boolean</span></code></td>
<td>If a plugin can't be found, Smithy will by default fail the build. This
setting can be set to <code class="docutils literal notranslate"><span class="pre">true</span></code> to allow the build to progress even if
a plugin can't be found on the classpath.</td>
</tr>
<tr class="row-odd"><td>maven</td>
<td><a class="reference internal" href="#maven-configuration"><span class="std std-ref">Maven configuration</span></a> structure</td>
<td>Defines Java Maven dependencies needed to build the model.
Dependencies are used to bring in model imports, build plugins,
validators, transforms, and other extensions.</td>
</tr>
</tbody>
</table>
</div>
<p>The following is an example <code class="docutils literal notranslate"><span class="pre">smithy-build.json</span></code> configuration:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;outputDirectory&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;build/output&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;sources&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;model&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;imports&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;foo.json&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;some/directory&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;maven&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="s2">&quot;software.amazon.smithy:smithy-aws-traits:1.54.0&quot;</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;my-abstract-projection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;abstract&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;projection-name&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;imports&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;projection-specific-imports/&quot;</span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;excludeShapesByTag&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;internal&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;beta&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;...&quot;</span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;excludeShapesByTrait&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;traits&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;internal&quot;</span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;plugin-name&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;plugin-config&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;value&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;run::custom-artifact-name&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;command&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;my-codegenerator&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;--debug&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;...&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;plugin-name&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;plugin-config&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;value&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;...&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">smithy-build.json</span></code> file supports comments using <code class="docutils literal notranslate"><span class="pre">//</span></code> syntax. Any
content between two consecutive <code class="docutils literal notranslate"><span class="pre">/</span></code> characters and a new line (<code class="docutils literal notranslate"><span class="pre">\n</span></code>) or
the end of the file is considered a comment and ignored when parsing.</p>
</div>
</div>
<div class="section" id="plugin-id-and-artifact-names">
<span id="plugin-id"></span><h2>Plugin ID and artifact names<a class="headerlink" href="#plugin-id-and-artifact-names" title="Permalink to this heading">#</a></h2>
<p>A plugin ID defines a <em>plugin name</em> and <em>artifact name</em> in the form of
<code class="docutils literal notranslate"><span class="pre">plugin-name::artifact-name</span></code>.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">plugin-name</span></code> is the name of the plugin Smithy finds and runs with the
plugin-specific configuration.</li>
<li><code class="docutils literal notranslate"><span class="pre">artifact-name</span></code> is the optional artifact name and directory where the
plugin writes artifacts. If no <code class="docutils literal notranslate"><span class="pre">::artifact-name</span></code> is specific,
the artifact name defaults to the plugin name. No two plugin IDs in a
single projection can use the same artifact name.</li>
</ul>
<p>The following example shows that the <a class="reference internal" href="#run-plugin"><span class="std std-ref">run plugin</span></a> can be used in the
same projection multiple times using a custom artifact name.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;run::foo&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;command&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;sh&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;foo.sh&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;run::baz&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;command&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;baz&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;A&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The above example will generate source projection artifacts in the
&quot;source/foo&quot; and &quot;source/baz&quot; directories.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#projection-artifacts"><span class="std std-ref">Projection artifacts</span></a></p>
</div>
</div>
<div class="section" id="maven-configuration">
<span id="id2"></span><h2>Maven configuration<a class="headerlink" href="#maven-configuration" title="Permalink to this heading">#</a></h2>
<p>Maven dependencies and repositories can be defined in smithy-build.json files,
and the Smithy CLI will automatically resolve these dependencies using the
<a class="reference external" href="https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html">Apache Maven</a> dependency resolver.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">maven</span></code> property accepts the following configuration:</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>dependencies</td>
<td><code class="docutils literal notranslate"><span class="pre">[string]</span></code></td>
<td>A list of Maven dependency coordinates in the form of
<code class="docutils literal notranslate"><span class="pre">groupId:artifactId:version</span></code>. The Smithy CLI will search each
registered Maven repository for the dependency.</td>
</tr>
<tr class="row-odd"><td>repositories</td>
<td><code class="docutils literal notranslate"><span class="pre">[</span></code> <a class="reference internal" href="#maven-repositories"><span class="std std-ref">Maven Repositories</span></a> <code class="docutils literal notranslate"><span class="pre">]</span></code></td>
<td>A list of Maven repositories to search for dependencies. If no
repositories are defined and the <a class="reference internal" href="#smithy-maven-repos"><span class="std std-ref">SMITHY_MAVEN_REPOS environment variable</span></a>
is not defined, then this value defaults to <a class="reference external" href="https://search.maven.org">Maven Central</a>.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="dependency-versions">
<h3>Dependency versions<a class="headerlink" href="#dependency-versions" title="Permalink to this heading">#</a></h3>
<p>Maven dependencies are defined using GAV coordinates
(<code class="docutils literal notranslate"><span class="pre">groupId:artifactId:version</span></code>). The version of a dependency can specify
<em>version requirements</em> that are used to control how versions are resolved.
Requirements can be given as <em>soft requirements</em>, meaning the version can be
replaced by other versions found in the dependency graph. Hard requirements
can be used to mandate a particular version and override soft requirements.
Maven picks the highest version of each project that satisfies all the hard
requirements of the dependencies on that project. If no version satisfies
all the hard requirements, dependency resolution fails.</p>
<p>The following table demonstrates version requirement syntax as defined in
the <a class="reference external" href="https://maven.apache.org/pom.html#dependency-version-requirement-specification">official Maven documentation</a>:</p>
<div class="table-wrapper colwidths-given docutils container" id="id17">
<table border="1" class="docutils align-default" id="id17">
<caption><span class="caption-text">Dependency version syntax</span><a class="headerlink" href="#id17" title="Permalink to this table">#</a></caption>
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Version</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">1.0</span></code></td>
<td>Soft requirement for 1.0. Use 1.0 if no other version appears earlier
in the dependency tree.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">[1.0]</span></code></td>
<td>Hard requirement for 1.0. Use 1.0 and only 1.0.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">(,1.0]</span></code></td>
<td>Hard requirement for any version &lt;= 1.0.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">[1.2,1.3]</span></code></td>
<td>Hard requirement for any version between 1.2 and 1.3 inclusive.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">[1.0,2.0)</span></code></td>
<td>1.0 &lt;= x &lt; 2.0; Hard requirement for any version between 1.0 inclusive
and 2.0 exclusive.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">[1.5,)</span></code></td>
<td>Hard requirement for any version greater than or equal to 1.5.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">(,1.0],[1.2,)</span></code></td>
<td>Multiple requirements are separated by commas. This requirement
forbids version 1.1 by adding a hard requirement for any version less
than or equal to 1.0 or greater than or equal to 1.2.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">(,1.1),(1.1,)</span></code></td>
<td>Hard requirement for any version except 1.1 (for example, if 1.1
has a critical vulnerability).</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="unsupported-version-requirements">
<h4>Unsupported version requirements<a class="headerlink" href="#unsupported-version-requirements" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li>LATEST, RELEASE, latest-status, and latest.* versions are not supported.</li>
<li>Gradle style <code class="docutils literal notranslate"><span class="pre">+</span></code> versions are not supported.</li>
</ul>
</div>
</div>
<div class="section" id="maven-repositories">
<span id="id3"></span><h3>Maven Repositories<a class="headerlink" href="#maven-repositories" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">repositories</span></code> property accepts a list of structures that each accept
the following configuration:</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>url</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>The URL of the repository (for example, <code class="docutils literal notranslate"><span class="pre">https://repo.maven.apache.org/maven2</span></code>).</td>
</tr>
<tr class="row-odd"><td>httpCredentials</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><p class="first">HTTP basic or digest credentials to use with the repository.
Credentials are provided in the form of &quot;username:password&quot;.</p>
<div class="last admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Credentials SHOULD NOT be defined statically in a smithy-build.json
file. Instead, use <a class="reference internal" href="#build-envars"><span class="std std-ref">environment variables</span></a> to
keep credentials out of source control.</p>
</div>
</td>
</tr>
<tr class="row-even"><td>proxyHost</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>The URL of the proxy to configure for this repository (for example, <code class="docutils literal notranslate"><span class="pre">http://proxy.maven.apache.org:8080</span></code>).</td>
</tr>
<tr class="row-odd"><td>proxyCredentials</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><p class="first">HTTP credentials to use with the proxy for the repository.
Credentials are provided in the form of &quot;username:password&quot;.</p>
<div class="last admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Credentials SHOULD NOT be defined statically in a smithy-build.json
file. Instead, use <a class="reference internal" href="#build-envars"><span class="std std-ref">environment variables</span></a> to
keep credentials out of source control.</p>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;maven&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;repositories&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://my_domain-111122223333.d.codeartifact.region.amazonaws.com/maven/my_repo/&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;httpCredentials&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aws:${CODEARTIFACT_AUTH_TOKEN}&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;proxyHost&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://localhost:8080&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;proxyCredentials&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user:${PROXY_AUTH_TOKEN}&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="s2">&quot;software.amazon.smithy:smithy-aws-traits:1.54.0&quot;</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="smithy-maven-repos-environment-variable">
<span id="smithy-maven-repos"></span><h3>SMITHY_MAVEN_REPOS environment variable<a class="headerlink" href="#smithy-maven-repos-environment-variable" title="Permalink to this heading">#</a></h3>
<p>When using the Smithy CLI, the <code class="docutils literal notranslate"><span class="pre">SMITHY_MAVEN_REPOS</span></code> environment variable can
be used to configure Maven repositories automatically. The
<code class="docutils literal notranslate"><span class="pre">SMITHY_MAVEN_REPOS</span></code> environment variable is a pipe-delimited value (<code class="docutils literal notranslate"><span class="pre">|</span></code>)
that contains the URL of each repository to use.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SMITHY_MAVEN_REPOS</span><span class="o">=</span><span class="s2">&quot;https://repo.maven.apache.org/maven2|https://example.repo.com/maven&quot;</span>
</pre></div>
</div>
<p>Credentials can be provided in the URL. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SMITHY_MAVEN_REPOS</span><span class="o">=</span><span class="s1">&#39;https://user:password@example.repo.com/maven&#39;</span>
</pre></div>
</div>
<p>When repositories are provided through the <code class="docutils literal notranslate"><span class="pre">SMITHY_MAVEN_REPOS</span></code> environment
variable, no default repositories are assumed when resolving the
<code class="docutils literal notranslate"><span class="pre">maven.repositories</span></code> setting.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Repositories defined in <code class="docutils literal notranslate"><span class="pre">SMITHY_MAVEN_REPOS</span></code> take precedence over
repositories defined through smithy-build.json configuration.</p>
</div>
</div>
<div class="section" id="proxy-environment-variables">
<h3>Proxy environment variables<a class="headerlink" href="#proxy-environment-variables" title="Permalink to this heading">#</a></h3>
<p>When using the Smithy CLI, the <code class="docutils literal notranslate"><span class="pre">SMITHY_PROXY_HOST</span></code> and <code class="docutils literal notranslate"><span class="pre">SMITHY_PROXY_CREDENTIALS</span></code> environment variables can be used
to configure a proxy to use for dependency resolution. Setting these environment variables will configure a common
proxy configuration for all repositories.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">If a <a class="reference internal" href="#maven-repositories"><span class="std std-ref">Maven Repository</span></a> definition provides a proxy configuration, that configuration will
override the proxy configuration defined by the <code class="docutils literal notranslate"><span class="pre">SMITHY_PROXY_HOST</span></code> and <code class="docutils literal notranslate"><span class="pre">SMITHY_PROXY_CREDENTIALS</span></code>
environment variables.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">SMITHY_PROXY_HOST</span></code> environment variable is a URL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SMITHY_PROXY_HOST</span><span class="o">=</span><span class="s1">&#39;http://localhost:8080&#39;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">SMITHY_PROXY_CREDENTIALS</span></code> environment variable is a colon-delimited value (<code class="docutils literal notranslate"><span class="pre">:</span></code>) containing both the
username and password to use for authenticating to the proxy configured by the <code class="docutils literal notranslate"><span class="pre">SMITHY_PROXY_HOST</span></code> environment
variable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SMITHY_PROXY_CREDENTIALS</span><span class="o">=</span><span class="s1">&#39;user:$PROXY_PASSWORD&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="projections">
<span id="id4"></span><h2>Projections<a class="headerlink" href="#projections" title="Permalink to this heading">#</a></h2>
<p>A projection of a model is a filtered and modified version of a Smithy model
that is intended for specific audiences or customers. Projections are
useful to companies that maintain internal and external versions of an API
or include parameters and operations that are available to only a subset of
their customers.</p>
<p>Projections are defined in the smithy-build.json file in the <code class="docutils literal notranslate"><span class="pre">projections</span></code>
property. Projection names MUST match the following pattern:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>^[A-Za-z0-9]+[A-Za-z0-9\\-_.]*$
</pre></div>
</div>
<p>A projection accepts the following configuration:</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>abstract</td>
<td><code class="docutils literal notranslate"><span class="pre">boolean</span></code></td>
<td>Defines the projection as a placeholder that other projections apply.
Smithy will not build artifacts for abstract projections. Abstract
projections must not define <code class="docutils literal notranslate"><span class="pre">imports</span></code> or <code class="docutils literal notranslate"><span class="pre">plugins</span></code>.</td>
</tr>
<tr class="row-odd"><td>imports</td>
<td><code class="docutils literal notranslate"><span class="pre">[string]</span></code></td>
<td>Provides a list of relative imports to include when building this
specific projection (in addition to any imports defined at the
top-level). When a directory is encountered, all files in the
directory tree are imported. Note: imports are relative to the
configuration file.</td>
</tr>
<tr class="row-even"><td>transforms</td>
<td><code class="docutils literal notranslate"><span class="pre">list&lt;Transforms&gt;</span></code></td>
<td>Defines the transformations to apply to the projection.
Transformations are used to remove shapes, remove traits, modify trait
contents, and any other kind of transformation necessary for the
projection. Transforms are applied in the order defined.</td>
</tr>
<tr class="row-odd"><td>plugins</td>
<td><code class="docutils literal notranslate"><span class="pre">map&lt;string,</span> <span class="pre">object&gt;</span></code></td>
<td>Defines the plugins to apply to the model when building this
projection. <code class="docutils literal notranslate"><span class="pre">plugins</span></code> is a mapping of a <a class="reference internal" href="#plugin-id"><span class="std std-ref">plugin IDs</span></a>
to plugin-specific configuration objects. smithy-build will attempt
to resolve plugin names using <a class="reference external" href="https://docs.oracle.com/javase/tutorial/sound/SPI-intro.html">Java SPI</a> to locate an instance of
<code class="docutils literal notranslate"><span class="pre">software.amazon.smithy.build.SmithyBuildPlugin</span></code> that returns a
matching name when calling <code class="docutils literal notranslate"><span class="pre">getName</span></code>. smithy-build will emit a
warning when a plugin cannot be resolved.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="projection-artifacts">
<span id="id5"></span><h3>Projection artifacts<a class="headerlink" href="#projection-artifacts" title="Permalink to this heading">#</a></h3>
<p>smithy-build will write artifacts for each projection inside of
<cite>outputDirectory</cite>.</p>
<ul class="simple">
<li>The model that is projected is placed inside of <code class="docutils literal notranslate"><span class="pre">${outputDirectory}/${projectionName}/model/model.json</span></code>.</li>
<li>Build information about the projection build result, including the
configuration of the projection and the validation events encountered when
validating the projected model, are written to <code class="docutils literal notranslate"><span class="pre">${outputDirectory}/${projectionName}/build-info/smithy-build-info.json</span></code>.</li>
<li>All plugin artifacts are written to <code class="docutils literal notranslate"><span class="pre">${outputDirectory}/${projectionName}/${artifactName}/${files...}</span></code>,
where <code class="docutils literal notranslate"><span class="pre">${artifactName}</span></code> is the artifact name of the <a class="reference internal" href="#plugin-id"><span class="std std-ref">plugin ID</span></a>,
and <code class="docutils literal notranslate"><span class="pre">${files...}</span></code> are the artifacts created by a plugin.</li>
</ul>
</div>
</div>
<div class="section" id="transforms">
<span id="id6"></span><h2>Transforms<a class="headerlink" href="#transforms" title="Permalink to this heading">#</a></h2>
<p>Transforms are used to filter and modify the model for the projection.
Transforms are applied to the model, in order.</p>
<p>A transform accepts the following configuration:</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>name</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>The required name of the transform.</td>
</tr>
<tr class="row-odd"><td>args</td>
<td><code class="docutils literal notranslate"><span class="pre">structure</span></code></td>
<td>A structure that contains configuration key-value pairs.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="apply">
<span id="apply-transform"></span><h3>apply<a class="headerlink" href="#apply" title="Permalink to this heading">#</a></h3>
<p>Applies the transforms defined in the given projection names.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>projections</td>
<td><code class="docutils literal notranslate"><span class="pre">[string]</span></code></td>
<td>The ordered list of projection names to apply. Each provided
name must be a valid projection name. The transforms of the
referenced projections are applied in the order provided.
No cycles are allowed in <code class="docutils literal notranslate"><span class="pre">apply</span></code>.</td>
</tr>
</tbody>
</table>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;my-abstract-projection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;abstract&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;foo&quot;</span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;projection-name&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;imports&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;projection-specific-imports/&quot;</span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;baz&quot;</span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;apply&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;my-abstract-projection&quot;</span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bar&quot;</span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="changestringenumstoenumshapes">
<span id="id7"></span><h3>changeStringEnumsToEnumShapes<a class="headerlink" href="#changestringenumstoenumshapes" title="Permalink to this heading">#</a></h3>
<p>Changes string shapes with enum traits into enum shapes.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>synthesizeNames</td>
<td><code class="docutils literal notranslate"><span class="pre">boolean</span></code></td>
<td>Whether enums without names should have names synthesized if possible.</td>
</tr>
</tbody>
</table>
</div>
<p>This transformer will attempt to convert strings with <a class="reference internal" href="../spec/constraint-traits.html#enum-trait"><span class="std std-ref">enum traits</span></a>
into enum shapes. To successfully convert to an enum shape, each enum
definition within the source enum trait must have a <code class="docutils literal notranslate"><span class="pre">name</span></code> property, or the
<code class="docutils literal notranslate"><span class="pre">synthesizeNames</span></code> transform config option must be enabled. By default, <code class="docutils literal notranslate"><span class="pre">synthesizeNames</span></code>
is disabled. If an enum definition from the enum trait is marked as deprecated, the
<a class="reference internal" href="../spec/documentation-traits.html#deprecated-trait"><span class="std std-ref">deprecated trait</span></a> will be applied to the resulting
enum shape member. Tags on the enum definition will be converted to a <a class="reference internal" href="../spec/documentation-traits.html#tags-trait"><span class="std std-ref">tags trait</span></a>
on the enum shape member. Additionally, if the enum definition is tagged as
internal, the enum shape member will have the <a class="reference internal" href="../spec/documentation-traits.html#internal-trait"><span class="std std-ref">internal trait</span></a>
applied.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;changeStringEnumsToEnumShapes&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;synthesizeNames&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <a class="reference internal" href="../spec/constraint-traits.html#enum-trait"><span class="std std-ref">enum trait</span></a> is deprecated. It is recommended to
use an <a class="reference internal" href="../spec/simple-types.html#enum"><span class="std std-ref">enum shape</span></a> instead to avoid needing to use this
transform.</p>
</div>
</div>
<div class="section" id="makeidempotencytokensclientoptional">
<span id="id8"></span><h3>makeIdempotencyTokensClientOptional<a class="headerlink" href="#makeidempotencytokensclientoptional" title="Permalink to this heading">#</a></h3>
<p>Makes required <a class="reference internal" href="../spec/behavior-traits.html#idempotencytoken-trait"><span class="std std-ref">&#64;idempotencyToken</span></a> members <a class="reference internal" href="../spec/type-refinement-traits.html#clientoptional-trait"><span class="std std-ref">&#64;clientOptional</span></a>.</p>
<p>Idempotency tokens that are required should fail validation, but shouldn't be required to create a type.
This allows a default value to get injected when missing.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;makeIdempotencyTokensClientOptional&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="changetypes">
<span id="id9"></span><h3>changeTypes<a class="headerlink" href="#changetypes" title="Permalink to this heading">#</a></h3>
<p>Changes the types of shapes.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>shapeTypes</td>
<td><code class="docutils literal notranslate"><span class="pre">Map&lt;ShapeId,</span> <span class="pre">String&gt;</span></code></td>
<td>A map of shape IDs to the type to assign to the shape.</td>
</tr>
<tr class="row-odd"><td>synthesizeEnumNames</td>
<td><code class="docutils literal notranslate"><span class="pre">boolean</span></code></td>
<td>Whether enums without names should have names synthesized if possible.</td>
</tr>
</tbody>
</table>
</div>
<p>Only the following shape type changes are supported:</p>
<ul class="simple">
<li>Any simple type to any other simple type</li>
<li>List to set</li>
<li>Set to list</li>
<li>Structure to union</li>
<li>Union to structure</li>
<li>String to enum</li>
</ul>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;changeTypes&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;shapeTypes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;smithy.example#Foo&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;smithy.example#Baz&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;union&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;smithy.example#Qux&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;enum&quot;</span>
<span class="w">                        </span><span class="p">},</span>
<span class="w">                        </span><span class="nt">&quot;synthesizeEnumNames&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#changestringenumstoenumshapes"><span class="std std-ref">changeStringEnumsToEnumShapes</span></a></p>
</div>
</div>
<div class="section" id="excludeshapesbyselector">
<span id="excludeshapesbyselector-transform"></span><h3>excludeShapesBySelector<a class="headerlink" href="#excludeshapesbyselector" title="Permalink to this heading">#</a></h3>
<p>Removes all shapes matching the given <a class="reference internal" href="../spec/selectors.html#selectors"><span class="std std-ref">selector</span></a>.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>selector</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>A valid <a class="reference internal" href="../spec/selectors.html#selectors"><span class="std std-ref">selector</span></a> used to exclude shapes.</td>
</tr>
</tbody>
</table>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;excludeShapesBySelector&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="c1">// Excludes all operations that use event streams.</span>
<span class="w">                        </span><span class="nt">&quot;selector&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;[trait|streaming] :test(&lt;) :is(&lt; member &lt; structure &lt;-[input, output]- operation)&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This transformer does not remove shapes from the prelude.</p>
</div>
</div>
<div class="section" id="excludeshapesbytag">
<span id="excludeshapesbytag-transform"></span><h3>excludeShapesByTag<a class="headerlink" href="#excludeshapesbytag" title="Permalink to this heading">#</a></h3>
<p>Removes shapes if they are tagged with one or more of the given <code class="docutils literal notranslate"><span class="pre">tags</span></code> via
the <a class="reference internal" href="../spec/documentation-traits.html#tags-trait"><span class="std std-ref">tags trait</span></a>.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>tags</td>
<td><code class="docutils literal notranslate"><span class="pre">[string]</span></code></td>
<td>The set of tags that causes shapes to be removed.</td>
</tr>
</tbody>
</table>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;excludeShapesByTag&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;baz&quot;</span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This transformer does not remove shapes from the prelude.</p>
</div>
</div>
<div class="section" id="excludeshapesbytrait">
<span id="excludeshapesbytrait-transform"></span><h3>excludeShapesByTrait<a class="headerlink" href="#excludeshapesbytrait" title="Permalink to this heading">#</a></h3>
<p>Removes shapes if they are marked with one or more specific traits.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>traits</td>
<td><code class="docutils literal notranslate"><span class="pre">[string]</span></code></td>
<td>A list of trait <a class="reference internal" href="../spec/model.html#shape-id"><span class="std std-ref">shape IDs</span></a>. If any of these traits
are found on a shape, the shape is removed from the model. Relative
shape IDs are assumed to be in the <code class="docutils literal notranslate"><span class="pre">smithy.api</span></code>
<a class="reference internal" href="../spec/model.html#prelude"><span class="std std-ref">prelude</span></a> namespace.</td>
</tr>
</tbody>
</table>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;excludeShapesByTrait&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;traits&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;internal&quot;</span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="includeshapesbyselector">
<span id="includeshapesbyselector-transform"></span><h3>includeShapesBySelector<a class="headerlink" href="#includeshapesbyselector" title="Permalink to this heading">#</a></h3>
<p>Includes only the shapes matching the given <a class="reference internal" href="../spec/selectors.html#selectors"><span class="std std-ref">selector</span></a>.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>selector</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>A valid <a class="reference internal" href="../spec/selectors.html#selectors"><span class="std std-ref">selector</span></a> used to include shapes.</td>
</tr>
</tbody>
</table>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;includeShapesBySelector&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="c1">// Includes only shapes in the FooService closure.</span>
<span class="w">                        </span><span class="nt">&quot;selector&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;[id=smithy.example#FooService] :is(*, ~&gt; *)&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This transformer does not remove shapes from the prelude.</p>
</div>
</div>
<div class="section" id="includeshapesbytag">
<span id="includeshapesbytag-transform"></span><h3>includeShapesByTag<a class="headerlink" href="#includeshapesbytag" title="Permalink to this heading">#</a></h3>
<p>Removes shapes that are not tagged with at least one of the given <code class="docutils literal notranslate"><span class="pre">tags</span></code>
via the <a class="reference internal" href="../spec/documentation-traits.html#tags-trait"><span class="std std-ref">tags trait</span></a>.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>tags</td>
<td><code class="docutils literal notranslate"><span class="pre">[string]</span></code></td>
<td>The set of tags that causes shapes to be retained in the model.</td>
</tr>
</tbody>
</table>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;includeShapesByTag&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;baz&quot;</span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This transformer does not remove shapes from the prelude.</p>
</div>
</div>
<div class="section" id="includenamespaces">
<span id="includenamespaces-transform"></span><h3>includeNamespaces<a class="headerlink" href="#includenamespaces" title="Permalink to this heading">#</a></h3>
<p>Filters out shapes that are not part of one of the given <a class="reference internal" href="../spec/idl.html#namespaces"><span class="std std-ref">namespaces</span></a>.
Note that this does not filter out traits based on namespaces.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>namespaces</td>
<td><code class="docutils literal notranslate"><span class="pre">[string]</span></code></td>
<td>The namespaces to include in the model.</td>
</tr>
</tbody>
</table>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;includeNamespaces&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;namespaces&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;com.foo.bar&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;my.api&quot;</span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This transformer does not remove shapes from the prelude.</p>
</div>
</div>
<div class="section" id="includeservices">
<span id="includeservices-transform"></span><h3>includeServices<a class="headerlink" href="#includeservices" title="Permalink to this heading">#</a></h3>
<p>Filters out service shapes that are not included in the <code class="docutils literal notranslate"><span class="pre">services</span></code> list of
shape IDs.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>services</td>
<td><code class="docutils literal notranslate"><span class="pre">[string]</span></code></td>
<td>The service shape IDs to include in the model. Each entry MUST be
a valid service shape ID.</td>
</tr>
</tbody>
</table>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;includeServices&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;services&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;my.api#MyService&quot;</span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="excludetags">
<span id="excludetags-transform"></span><h3>excludeTags<a class="headerlink" href="#excludetags" title="Permalink to this heading">#</a></h3>
<p>Removes tags from shapes and trait definitions that match any of the
provided <code class="docutils literal notranslate"><span class="pre">tags</span></code>.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>tags</td>
<td><code class="docutils literal notranslate"><span class="pre">[string]</span></code></td>
<td>The set of tags that are removed from the model.</td>
</tr>
</tbody>
</table>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;excludeTags&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;tagA&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;tagB&quot;</span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="excludetraits">
<span id="excludetraits-transform"></span><h3>excludeTraits<a class="headerlink" href="#excludetraits" title="Permalink to this heading">#</a></h3>
<p>Removes trait definitions from a model if the trait name is present in the
provided list of <code class="docutils literal notranslate"><span class="pre">traits</span></code>. Any instance of a removed trait is also removed
from shapes in the model.</p>
<p>The shapes that make up trait definitions that are removed <em>are not</em>
automatically removed from the model. Use <code class="docutils literal notranslate"><span class="pre">removeUnusedShapes</span></code> to remove
orphaned shapes.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>traits</td>
<td><code class="docutils literal notranslate"><span class="pre">[string]</span></code></td>
<td>The set of traits that are removed from the model. Arguments that
end with &quot;#&quot; exclude the traits of an entire namespace. Trait
shape IDs that are relative are assumed to be part of the
<code class="docutils literal notranslate"><span class="pre">smithy.api</span></code> prelude namespace.</td>
</tr>
</tbody>
</table>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;excludeTraits&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;traits&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;since&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;com.foo#customTrait&quot;</span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can exclude all of the traits in a namespace by ending one of the
arguments with &quot;#&quot;. For example, the following configuration excludes
all traits in the &quot;example.foo&quot; namespace:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;excludeTraits&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;traits&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;example.foo#&quot;</span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="excludetraitsbytag">
<span id="excludetraitsbytag-transform"></span><h3>excludeTraitsByTag<a class="headerlink" href="#excludetraitsbytag" title="Permalink to this heading">#</a></h3>
<p>Removes trait definitions from a model if the trait definition has any of
the provided <a class="reference internal" href="../spec/documentation-traits.html#tags-trait"><span class="std std-ref">tags</span></a>. Any instance of a removed trait is
also removed from shapes in the model.</p>
<p>The shapes that make up trait definitions that are removed <em>are not</em>
automatically removed from the model. Use <code class="docutils literal notranslate"><span class="pre">removeUnusedShapes</span></code> to remove
orphaned shapes.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>tags</td>
<td><code class="docutils literal notranslate"><span class="pre">[string]</span></code></td>
<td>The list of tags that, if present, cause a trait to be removed.</td>
</tr>
</tbody>
</table>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;excludeTraitsByTag&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;internal&quot;</span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This transformer does not remove shapes from the prelude.</p>
</div>
</div>
<div class="section" id="filtersuppressions">
<span id="filtersuppressions-transform"></span><h3>filterSuppressions<a class="headerlink" href="#filtersuppressions" title="Permalink to this heading">#</a></h3>
<p>Removes and modifies suppressions found in <a class="reference internal" href="../spec/model-validation.html#suppression-definition"><span class="std std-ref">metadata</span></a>
and the <a class="reference internal" href="../spec/model-validation.html#suppress-trait"><span class="std std-ref">suppress trait</span></a>.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>removeUnused</td>
<td><code class="docutils literal notranslate"><span class="pre">boolean</span></code></td>
<td><p class="first">Set to true to remove suppressions that have no effect.</p>
<p>Shapes and validators are often removed when creating a filtered
version of model. After removing shapes and validators, suppressions
could be left in the model that no longer have any effect. These
suppressions could inadvertently disclose information about private
or unreleased features.</p>
<p class="last">If a validation event ID is never emitted, then <code class="docutils literal notranslate"><span class="pre">&#64;suppress</span></code> traits
will be updated to no longer refer to the ID and removed if they no
longer refer to any event. Metadata suppressions are also removed if
they have no effect.</p>
</td>
</tr>
<tr class="row-odd"><td>removeReasons</td>
<td><code class="docutils literal notranslate"><span class="pre">boolean</span></code></td>
<td>Set to true to remove the <code class="docutils literal notranslate"><span class="pre">reason</span></code> property from metadata suppressions.
The reason for a suppression could reveal internal or sensitive
information. Removing the &quot;reason&quot; from metadata suppressions is an
extra step teams can take to ensure they do not leak internal
information when publishing models outside of their organization.</td>
</tr>
<tr class="row-even"><td>eventIdAllowList</td>
<td><code class="docutils literal notranslate"><span class="pre">[string]</span></code></td>
<td><p class="first">Sets a list of event IDs that can be referred to in suppressions.
Suppressions that refer to any other event ID will be updated to
no longer refer to them, or removed if they no longer refer to any
events.</p>
<p class="last">This setting cannot be used in tandem with <code class="docutils literal notranslate"><span class="pre">eventIdDenyList</span></code>.</p>
</td>
</tr>
<tr class="row-odd"><td>eventIdDenyList</td>
<td><code class="docutils literal notranslate"><span class="pre">[string]</span></code></td>
<td><p class="first">Sets a list of event IDs that cannot be referred to in suppressions.
Suppressions that refer to any of these event IDs will be updated to
no longer refer to them, or removed if they no longer refer to any
events.</p>
<p class="last">This setting cannot be used in tandem with <code class="docutils literal notranslate"><span class="pre">eventIdAllowList</span></code>.</p>
</td>
</tr>
<tr class="row-even"><td>namespaceAllowList</td>
<td><code class="docutils literal notranslate"><span class="pre">[string]</span></code></td>
<td><p class="first">Sets a list of namespaces that can be referred to in metadata
suppressions. Metadata suppressions that refer to namespaces
outside of this list, including &quot;*&quot;, will be removed.</p>
<p class="last">This setting cannot be used in tandem with <code class="docutils literal notranslate"><span class="pre">namespaceDenyList</span></code>.</p>
</td>
</tr>
<tr class="row-odd"><td>namespaceDenyList</td>
<td><code class="docutils literal notranslate"><span class="pre">[string]</span></code></td>
<td><p class="first">Sets a list of namespaces that cannot be referred to in metadata
suppressions. Metadata suppressions that refer to namespaces
in this list, including &quot;*&quot;, will be removed.</p>
<p class="last">This setting cannot be used in tandem with <code class="docutils literal notranslate"><span class="pre">namespaceAllowList</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>The following example removes suppressions that have no effect in the
<code class="docutils literal notranslate"><span class="pre">exampleProjection</span></code>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;filterSuppressions&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;removeUnused&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The following example removes suppressions from metadata that refer to
deny-listed namespaces:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;filterSuppressions&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;namespaceDenyList&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;com.internal&quot;</span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The following example removes suppressions from metadata that refer to
namespaces outside of the allow-listed namespaces:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;filterSuppressions&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;namespaceAllowList&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;com.external&quot;</span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The following example removes suppressions that refer to deny-listed event IDs:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;filterSuppressions&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;eventIdDenyList&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;MyInternalValidator&quot;</span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The following example removes suppressions that refer to event IDs outside
of the event ID allow list:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;filterSuppressions&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;eventIdAllowList&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;B&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;C&quot;</span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The following example removes the <code class="docutils literal notranslate"><span class="pre">reason</span></code> property from metadata
suppressions:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;filterSuppressions&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;removeReasons&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="includetags">
<span id="includetags-transform"></span><h3>includeTags<a class="headerlink" href="#includetags" title="Permalink to this heading">#</a></h3>
<p>Removes tags from shapes and trait definitions that are not in the <code class="docutils literal notranslate"><span class="pre">tags</span></code>
list.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>tags</td>
<td><code class="docutils literal notranslate"><span class="pre">[string]</span></code></td>
<td>The set of tags that are retained in the model.</td>
</tr>
</tbody>
</table>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;includeTags&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;baz&quot;</span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="includetraits">
<span id="includetraits-transform"></span><h3>includeTraits<a class="headerlink" href="#includetraits" title="Permalink to this heading">#</a></h3>
<p>Removes trait definitions from a model if the trait name is not present in the
provided list of <code class="docutils literal notranslate"><span class="pre">traits</span></code>. Any instance of a removed trait is also removed
from shapes in the model.</p>
<p>The shapes that make up trait definitions that are removed <em>are not</em>
automatically removed from the model. Use <code class="docutils literal notranslate"><span class="pre">removeUnusedShapes</span></code> to remove
orphaned shapes.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>traits</td>
<td><code class="docutils literal notranslate"><span class="pre">[string]</span></code></td>
<td>The list of trait shape IDs to include. A trait ID that ends with &quot;#&quot;
will include all traits from a namespace. Trait shape IDs that are
relative are assumed to be part of the <code class="docutils literal notranslate"><span class="pre">smithy.api</span></code>
prelude namespace.</td>
</tr>
</tbody>
</table>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;includeTraits&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;traits&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;sensitive&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;com.foo.baz#customTrait&quot;</span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can include all of the traits in a namespace by ending one of the
arguments with &quot;#&quot;. For example, the following configuration includes
all traits in the &quot;smithy.api&quot; namespace:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;includeTraits&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;traits&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;smithy.api#&quot;</span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="includetraitsbytag">
<span id="includetraitsbytag-transform"></span><h3>includeTraitsByTag<a class="headerlink" href="#includetraitsbytag" title="Permalink to this heading">#</a></h3>
<p>Removes trait definitions from a model if the trait definition does not
contain one of the provided <a class="reference internal" href="../spec/documentation-traits.html#tags-trait"><span class="std std-ref">tags</span></a>. Any instance of a
removed trait definition is also removed from shapes in the model.</p>
<p>The shapes that make up trait definitions that are removed <em>are not</em>
automatically removed from the model. Use <code class="docutils literal notranslate"><span class="pre">removeUnusedShapes</span></code> to remove
orphaned shapes.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>tags</td>
<td><code class="docutils literal notranslate"><span class="pre">[string]</span></code></td>
<td>The list of tags that must be present for a trait to be included
in the filtered model.</td>
</tr>
</tbody>
</table>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;includeTraitsByTag&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;public&quot;</span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This transformer does not remove shapes from the prelude.</p>
</div>
</div>
<div class="section" id="excludemetadata">
<span id="excludemetadata-transform"></span><h3>excludeMetadata<a class="headerlink" href="#excludemetadata" title="Permalink to this heading">#</a></h3>
<p>Removes model <a class="reference internal" href="../spec/model.html#metadata"><span class="std std-ref">metadata</span></a> key-value pairs from a model if the
key is in the provided <code class="docutils literal notranslate"><span class="pre">keys</span></code> list.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>keys</td>
<td><code class="docutils literal notranslate"><span class="pre">[string]</span></code></td>
<td>The set of metadata keys that are removed from the model.</td>
</tr>
</tbody>
</table>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;excludeMetadata&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;keys&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;suppressions&quot;</span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="includemetadata">
<span id="includemetadata-transform"></span><h3>includeMetadata<a class="headerlink" href="#includemetadata" title="Permalink to this heading">#</a></h3>
<p>Removes model <a class="reference internal" href="../spec/model.html#metadata"><span class="std std-ref">metadata</span></a> key-value pairs from a model if the
key is not in the provided <code class="docutils literal notranslate"><span class="pre">keys</span></code> list.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>keys</td>
<td><code class="docutils literal notranslate"><span class="pre">[string]</span></code></td>
<td>The set of metadata keys that are retained in the model.</td>
</tr>
</tbody>
</table>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;includeMetadata&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;keys&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;authors&quot;</span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="flattenandremovemixins">
<span id="id10"></span><h3>flattenAndRemoveMixins<a class="headerlink" href="#flattenandremovemixins" title="Permalink to this heading">#</a></h3>
<p>Flattens <a class="reference internal" href="../spec/mixins.html#mixins"><span class="std std-ref">mixins</span></a> out of the model and into their local shapes.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;flattenAndRemoveMixins&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="flattennamespaces">
<span id="id11"></span><h3>flattenNamespaces<a class="headerlink" href="#flattennamespaces" title="Permalink to this heading">#</a></h3>
<p>Flattens namespaces of any shapes connected to a service into a target
namespace. Shapes not connected to a service will not be flattened.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>namespace</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><strong>REQUIRED</strong> The target namespace.</td>
</tr>
<tr class="row-odd"><td>service</td>
<td><code class="docutils literal notranslate"><span class="pre">shapeId</span></code></td>
<td><strong>REQUIRED</strong> The service to be flattened. All shapes within this
<a class="reference internal" href="../spec/service-types.html#service-closure"><span class="std std-ref">service closure</span></a> will be replaced with equivalent
shapes in the target namespace.</td>
</tr>
<tr class="row-even"><td>includeTagged</td>
<td><code class="docutils literal notranslate"><span class="pre">[string]</span></code></td>
<td>The set of tags that, if found on a shape not connected to the service,
forces the shape to have its namespace flattened into the target
namespace. When additional shapes are included, the shapes are replaced
entirely, along with any references to the shapes which may exist within
separate <a class="reference internal" href="../spec/service-types.html#service-closure"><span class="std std-ref">service closures</span></a>.</td>
</tr>
</tbody>
</table>
</div>
<p>The following example will flatten the namespaces of the shapes connected to
the <code class="docutils literal notranslate"><span class="pre">ns.bar#MyService</span></code> service into the target namespace, <code class="docutils literal notranslate"><span class="pre">ns.foo</span></code>. All
shapes within <a class="reference internal" href="../spec/service-types.html#service-closure"><span class="std std-ref">service closure</span></a> with be flattened into
the target namespace, including shapes that have been renamed to disambiguate
them through the service shape's <code class="docutils literal notranslate"><span class="pre">rename</span></code> property. Shapes tagged with
<code class="docutils literal notranslate"><span class="pre">baz</span></code> or <code class="docutils literal notranslate"><span class="pre">qux</span></code> will also be flattened into the <code class="docutils literal notranslate"><span class="pre">ns.foo</span></code> namespace, so
long as they don't conflict with a shape within the
<a class="reference internal" href="../spec/service-types.html#service-closure"><span class="std std-ref">service closure</span></a>.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;flattenNamespaces&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;namespace&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ns.foo&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ns.bar#MyService&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;includeTagged&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;baz&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;qux&quot;</span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="removetraitdefinitions">
<span id="removetraitdefinitions-transform"></span><h3>removeTraitDefinitions<a class="headerlink" href="#removetraitdefinitions" title="Permalink to this heading">#</a></h3>
<p>Removes trait definitions from the model, but leaves the instances of traits
intact on any shapes.</p>
<p>You can <em>export</em> trait definitions by applying specific tags to the trait
definition and adding the list of export tags in the <code class="docutils literal notranslate"><span class="pre">exportTagged</span></code> argument.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>exportTagged</td>
<td><code class="docutils literal notranslate"><span class="pre">[string]</span></code></td>
<td>The set of tags that, if found on a trait definition, forces the trait
to be retained in the transformed model.</td>
</tr>
</tbody>
</table>
</div>
<p>The following example removes trait definitions but keeps the instances of the
trait intact on shapes in the model:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;removeTraitDefinitions&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;exportTagged&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                            </span><span class="s2">&quot;export-tag1&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="s2">&quot;another-export-tag&quot;</span>
<span class="w">                        </span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="removeunusedshapes">
<span id="removeunusedshapes-transform"></span><h3>removeUnusedShapes<a class="headerlink" href="#removeunusedshapes" title="Permalink to this heading">#</a></h3>
<p>Removes shapes from the model that are not connected to any service shape
or to a shape definition.</p>
<p>You can <em>export</em> shapes that are not connected to any service shape by
applying specific tags to the shape and adding the list of export tags in
the <code class="docutils literal notranslate"><span class="pre">exportTagged</span></code> argument.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>exportTagged</td>
<td><code class="docutils literal notranslate"><span class="pre">[string]</span></code></td>
<td>The set of tags that, if found on a shape, forces the shape to be
present in the transformed model regardless of if it was connected
to a service.</td>
</tr>
</tbody>
</table>
</div>
<p>The following example removes shapes that are not connected to any service,
but keeps the shape if it has any of the provided tags:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;removeUnusedShapes&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;exportTagged&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                            </span><span class="s2">&quot;export-tag1&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="s2">&quot;another-export-tag&quot;</span>
<span class="w">                        </span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="removedeprecatedshapes">
<span id="removedeprecatedshapes-transform"></span><h3>removeDeprecatedShapes<a class="headerlink" href="#removedeprecatedshapes" title="Permalink to this heading">#</a></h3>
<p>Removes any shapes that were marked as <code class="docutils literal notranslate"><span class="pre">&#64;deprecated</span></code> before the specified version or date.</p>
<p>This transform can be used to filter out shapes with the <a class="reference internal" href="../spec/documentation-traits.html#deprecated-trait"><span class="std std-ref">deprecated trait</span></a> applied if the
<code class="docutils literal notranslate"><span class="pre">since</span></code> property of the trait specifies a version or date. Versions are expected to follow the
<a class="reference external" href="https://semver.org/">SemVer Specification</a> and dates are expected to be <a class="reference external" href="https://www.iso.org/iso-8601-date-and-time-format.html">ISO 8601</a> calendar dates (YYYY-MM-DD).
If the value of the <code class="docutils literal notranslate"><span class="pre">since</span></code> property is not a valid SemVer version or ISO 8601 calendar date then the
<code class="docutils literal notranslate"><span class="pre">&#64;deprecated</span></code> trait will be ignored by this transform.</p>
<p>If the version or date in the <code class="docutils literal notranslate"><span class="pre">since</span></code> property of a <code class="docutils literal notranslate"><span class="pre">&#64;deprecated</span></code> trait is before the configured version or date, then
the shape the <code class="docutils literal notranslate"><span class="pre">&#64;deprecated</span></code> trait is applied to will be removed from the model. Shapes with the <code class="docutils literal notranslate"><span class="pre">&#64;deprecated</span></code> trait,
but no <code class="docutils literal notranslate"><span class="pre">since</span></code> property will be ignored by this transform.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>relativeDate</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>Date, in <a class="reference external" href="https://www.iso.org/iso-8601-date-and-time-format.html">ISO 8601</a> calendar date format (YYYY-MM-DD), to use to filter out deprecated shapes.
Any shapes deprecated before this date will be removed from the model.</td>
</tr>
<tr class="row-odd"><td>relativeVersion</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>Version, following the <a class="reference external" href="https://semver.org/">SemVer Specification</a>, to use to filter out deprecated shapes.
Any shapes deprecated in an earlier version will be removed from the model.</td>
</tr>
</tbody>
</table>
</div>
<p>The following example removes any deprecated shapes that were deprecated before <code class="docutils literal notranslate"><span class="pre">2024-10-10</span></code>
or before version <code class="docutils literal notranslate"><span class="pre">1.1.0</span></code>.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;removeDeprecatedShapes&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;relativeDate&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-10-10&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;relativeVersion&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.1.0&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="renameshapes">
<span id="renameshapes-transform"></span><h3>renameShapes<a class="headerlink" href="#renameshapes" title="Permalink to this heading">#</a></h3>
<p>Renames shapes within the model, including updating any references to the
shapes that are being renamed.</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>renamed</td>
<td><code class="docutils literal notranslate"><span class="pre">Map&lt;shapeId,</span> <span class="pre">shapeId&gt;</span></code></td>
<td>The map of <a class="reference internal" href="../spec/model.html#shape-id"><span class="std std-ref">shape IDs</span></a> to rename. Each key <code class="docutils literal notranslate"><span class="pre">shapeId</span></code> will be
renamed to the value <code class="docutils literal notranslate"><span class="pre">shapeId</span></code>. Each <a class="reference internal" href="../spec/model.html#shape-id"><span class="std std-ref">shape ID</span></a> must be
be an absolute shape ID.</td>
</tr>
</tbody>
</table>
</div>
<p>The following example renames the <code class="docutils literal notranslate"><span class="pre">ns.foo#Bar</span></code> shape to <code class="docutils literal notranslate"><span class="pre">ns.foo#Baz</span></code>.
Any references to <code class="docutils literal notranslate"><span class="pre">ns.foo#Bar</span></code> on other shapes will also be updated.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;exampleProjection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;renameShapes&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;renamed&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;ns.foo#Bar&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ns.foo#Baz&quot;</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="environment-variables">
<span id="build-envars"></span><h2>Environment variables<a class="headerlink" href="#environment-variables" title="Permalink to this heading">#</a></h2>
<p>Strings in <code class="docutils literal notranslate"><span class="pre">smithy-build.json</span></code> files can contain environment variable place
holders that are expanded at load-time into the value of a Java system
property or environment variable. The syntax of a placeholder is
<code class="docutils literal notranslate"><span class="pre">${NAME}</span></code> where &quot;NAME&quot; is the name of the system property or environment
variable. A placeholder can be escaped using a backslash (<code class="docutils literal notranslate"><span class="pre">\</span></code>) before the
&quot;$&quot;. For example, <code class="docutils literal notranslate"><span class="pre">\${FOO}</span></code> expands to the literal string <code class="docutils literal notranslate"><span class="pre">${FOO}</span></code>.
A non-existent system property or environment variable will cause the file
to fail to load. System property values take precedence over environment
variables.</p>
<p>Consider the following <code class="docutils literal notranslate"><span class="pre">smithy-build.json</span></code> file:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;a&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;${NAME_KEY}&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;includeShapesByTag&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;${FOO}&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;\\${BAZ}&quot;</span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Assuming that <code class="docutils literal notranslate"><span class="pre">NAME_KEY</span></code> is a system property set to &quot;name&quot;, and <code class="docutils literal notranslate"><span class="pre">FOO</span></code> is an
environment variable set to &quot;hi&quot;, this file is equivalent to:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;a&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;includeShapesByTag&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;Hi&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;${BAZ}&quot;</span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                 </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In addition to environment variables of the process, smithy-build.json
files have access to the following environment variables:</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">SMITHY_ROOT_DIR</span></code></td>
<td>The root directory of the build (e.g., where the Smithy CLI was invoked).</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="plugins">
<span id="id12"></span><h2>Plugins<a class="headerlink" href="#plugins" title="Permalink to this heading">#</a></h2>
<p>Plugins are defined in either the top-level &quot;plugins&quot; key-value pair of the
configuration file, or in the &quot;plugins&quot; key-value pair of a projection.
Plugins defined at the top-level of the configuration file are applied to
every projection. Projections that define plugins of the same name as a
top-level plugin completely overwrite the top-level plugin for that projection;
projection settings are not merged in any way.</p>
<p>Plugin names MUST match the following pattern:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>^[A-Za-z0-9]+[A-Za-z0-9\\-_.]*(::[A-Za-z0-9]+[A-Za-z0-9\\-_.]*)?$
</pre></div>
</div>
<p>smithy-build will attempt to resolve plugin names using <a class="reference external" href="https://docs.oracle.com/javase/tutorial/sound/SPI-intro.html">Java SPI</a>
to locate an instance of <code class="docutils literal notranslate"><span class="pre">software.amazon.smithy.build.SmithyBuildPlugin</span></code>
that matches the given plugin name (via <code class="docutils literal notranslate"><span class="pre">matchesPluginName</span></code>). smithy-build
will log a warning when a plugin cannot be resolved.</p>
<p>smithy-build DOES NOT attempt to automatically download and install plugins.
Plugins MUST be available in the Java class path or module path in order for
them to be discovered.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">model</span></code>, <code class="docutils literal notranslate"><span class="pre">build-info</span></code>, and <code class="docutils literal notranslate"><span class="pre">sources</span></code> plugins are plugins that are
always run in every non-abstract projection.</p>
<div class="section" id="model-plugin">
<span id="id13"></span><h3>model plugin<a class="headerlink" href="#model-plugin" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">model</span></code> plugin serializes a self-contained and filtered version of the
model as a single file. All of the dependencies of the model are included
in the file. By default the serialized model excludes <a class="reference internal" href="../spec/model.html#prelude"><span class="std std-ref">prelude</span></a> shapes.</p>
<p>To include prelude shapes in the serialized model, add the <code class="docutils literal notranslate"><span class="pre">model</span></code> plugin with an <a class="reference internal" href="#plugin-id"><span class="std std-ref">artifact-name</span></a>
to the <code class="docutils literal notranslate"><span class="pre">smithy-build.json</span></code> file with the <code class="docutils literal notranslate"><span class="pre">includePreludeShapes</span></code> property set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;model::withPrelude&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;includePreludeShapes&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="build-info-plugin">
<span id="id14"></span><h3>build-info plugin<a class="headerlink" href="#build-info-plugin" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">build-info</span></code> plugin produces a JSON document that contains information
about the projection and model.</p>
</div>
<div class="section" id="sources-plugin">
<span id="id15"></span><h3>sources plugin<a class="headerlink" href="#sources-plugin" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">sources</span></code> plugin copies the source models and creates a manifest.
When building the <code class="docutils literal notranslate"><span class="pre">source</span></code> projection, the models that were used to build the
model are copied over literally. When a JAR is used as a source model, the
Smithy models contained within the JAR are copied as a source model while the
JAR itself is not copied. If there are no source models, an empty manifest is
created.</p>
<p>When building projections other than <code class="docutils literal notranslate"><span class="pre">source</span></code>, a new model file is created
that contains only the shapes, trait definitions, and metadata that were
defined in a source model <em>and</em> all of the newly added shapes, traits, and
metadata.</p>
<p>The manifest file is a newline (<code class="docutils literal notranslate"><span class="pre">\n</span></code>) separated file that contains the
relative path from the manifest file to each model file created by the
sources plugin. Lines that start with a number sign (#) are comments and are
ignored. A Smithy manifest file is stored in a JAR as <code class="docutils literal notranslate"><span class="pre">META-INF/smithy/manifest</span></code>.
All model files referenced by the manifest are relative to <code class="docutils literal notranslate"><span class="pre">META-INF/smithy/</span></code>.</p>
</div>
<div class="section" id="run-plugin">
<span id="id16"></span><h3>run plugin<a class="headerlink" href="#run-plugin" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">run</span></code> plugin runs an external program during the build. This plugin is
useful when integrating Smithy's build process with Smithy implementations
that are not written in Java.</p>
<p>When invoking the process, the Smithy model of the projection is serialized
using the <a class="reference internal" href="../spec/json-ast.html#json-ast"><span class="std std-ref">JSON AST</span></a> and sent to the standard input of the
process.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">run</span></code> plugin requires a custom artifact name in its
<a class="reference internal" href="#plugin-id"><span class="std std-ref">plugin ID</span></a> (e.g., <code class="docutils literal notranslate"><span class="pre">run::artifact-name</span></code>).</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">run</span></code> plugin supports the following properties:</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>command</td>
<td><code class="docutils literal notranslate"><span class="pre">[string]</span></code></td>
<td><strong>REQUIRED</strong> The name of the program to run, followed by an optional
list of arguments. If the command uses a relative path, Smithy will
first check if the command can be found relative to the current working
directory. Otherwise, the program must use an absolute path or be
available on the user's <code class="docutils literal notranslate"><span class="pre">$PATH</span></code> if Unix-like environments or its
equivalent in other operating systems. No arguments are sent other
than the arguments configured in the <code class="docutils literal notranslate"><span class="pre">command</span></code> setting.</td>
</tr>
<tr class="row-odd"><td>env</td>
<td><code class="docutils literal notranslate"><span class="pre">Map&lt;String,</span> <span class="pre">String&gt;</span></code></td>
<td>A map of environment variables to send to the process. The process
will inherit the environment variables of the containing process.
The values defined in <code class="docutils literal notranslate"><span class="pre">env</span></code> add new variables or overwrite
inherited variables.</td>
</tr>
<tr class="row-even"><td>sendPrelude</td>
<td><code class="docutils literal notranslate"><span class="pre">boolean</span></code></td>
<td>Set to true to include prelude shapes when sending the Smithy model to
the standard input of the process. By default, the prelude is omitted.</td>
</tr>
</tbody>
</table>
</div>
<p>Smithy will make the following environment variables available to the program:</p>
<div class="table-wrapper colwidths-given docutils container">
<table border="1" class="docutils align-default">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">SMITHY_ROOT_DIR</span></code></td>
<td>The root directory of the build (e.g., where the Smithy CLI was invoked).</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">SMITHY_PLUGIN_DIR</span></code></td>
<td>The working directory of the program. All files written by the program
should be relative to this directory.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">SMITHY_PROJECTION_NAME</span></code></td>
<td>The projection name the program was called within (e.g., &quot;source&quot;).</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">SMITHY_ARTIFACT_NAME</span></code></td>
<td>The <a class="reference internal" href="#plugin-id"><span class="std std-ref">plugin ID</span></a> artifact name.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">SMITHY_INCLUDES_PRELUDE</span></code></td>
<td>Contains the value of <code class="docutils literal notranslate"><span class="pre">sendPrelude</span></code> in the form of <code class="docutils literal notranslate"><span class="pre">true</span></code> or
<code class="docutils literal notranslate"><span class="pre">false</span></code> to tell the process if the prelude is included in the
serialized model.</td>
</tr>
</tbody>
</table>
</div>
<p>The following example applies the <code class="docutils literal notranslate"><span class="pre">run</span></code> command with an artifact name
of <code class="docutils literal notranslate"><span class="pre">custom-process</span></code>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;projections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;run::hello&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;command&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;hello.sh&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;--arg&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;arg-value&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Assuming <code class="docutils literal notranslate"><span class="pre">hello.sh</span></code> is on the PATH and might look something like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>

<span class="c1"># Command line arguments are provided.</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;--arg: </span><span class="nv">$2</span><span class="s2">&quot;</span>

<span class="c1"># Print out the provided environment variables.</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;SMITHY_ROOT_DIR: </span><span class="si">${</span><span class="nv">SMITHY_ROOT_DIR</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;SMITHY_PLUGIN_DIR: </span><span class="si">${</span><span class="nv">SMITHY_PLUGIN_DIR</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;SMITHY_PROJECTION_NAME: </span><span class="si">${</span><span class="nv">SMITHY_PROJECTION_NAME</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;SMITHY_ARTIFACT_NAME: </span><span class="si">${</span><span class="nv">SMITHY_ARTIFACT_NAME</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;SMITHY_INCLUDES_PRELUDE: </span><span class="si">${</span><span class="nv">SMITHY_INCLUDES_PRELUDE</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="c1"># Copy the model from stdin and write it to copy-model.json.</span>
<span class="c1"># The process is run in the appropriate working directory for the</span>
<span class="c1"># plugin ID&#39;s artifact name.</span>
cat<span class="w"> </span>&gt;&gt;<span class="w"> </span>copy-model.json
</pre></div>
</div>
</div>
</div>
</div>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="gradle-plugin/index.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Smithy Gradle Plugins</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="smithy-cli/cli_installation.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Installation</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Amazon Web Services
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/awslabs/smithy" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">smithy-build.json</a><ul>
<li><a class="reference internal" href="#using-smithy-build-json">Using <code class="docutils literal notranslate"><span class="pre">smithy-build.json</span></code></a></li>
<li><a class="reference internal" href="#plugin-id-and-artifact-names">Plugin ID and artifact names</a></li>
<li><a class="reference internal" href="#maven-configuration">Maven configuration</a><ul>
<li><a class="reference internal" href="#dependency-versions">Dependency versions</a><ul>
<li><a class="reference internal" href="#unsupported-version-requirements">Unsupported version requirements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#maven-repositories">Maven Repositories</a></li>
<li><a class="reference internal" href="#smithy-maven-repos-environment-variable">SMITHY_MAVEN_REPOS environment variable</a></li>
<li><a class="reference internal" href="#proxy-environment-variables">Proxy environment variables</a></li>
</ul>
</li>
<li><a class="reference internal" href="#projections">Projections</a><ul>
<li><a class="reference internal" href="#projection-artifacts">Projection artifacts</a></li>
</ul>
</li>
<li><a class="reference internal" href="#transforms">Transforms</a><ul>
<li><a class="reference internal" href="#apply">apply</a></li>
<li><a class="reference internal" href="#changestringenumstoenumshapes">changeStringEnumsToEnumShapes</a></li>
<li><a class="reference internal" href="#makeidempotencytokensclientoptional">makeIdempotencyTokensClientOptional</a></li>
<li><a class="reference internal" href="#changetypes">changeTypes</a></li>
<li><a class="reference internal" href="#excludeshapesbyselector">excludeShapesBySelector</a></li>
<li><a class="reference internal" href="#excludeshapesbytag">excludeShapesByTag</a></li>
<li><a class="reference internal" href="#excludeshapesbytrait">excludeShapesByTrait</a></li>
<li><a class="reference internal" href="#includeshapesbyselector">includeShapesBySelector</a></li>
<li><a class="reference internal" href="#includeshapesbytag">includeShapesByTag</a></li>
<li><a class="reference internal" href="#includenamespaces">includeNamespaces</a></li>
<li><a class="reference internal" href="#includeservices">includeServices</a></li>
<li><a class="reference internal" href="#excludetags">excludeTags</a></li>
<li><a class="reference internal" href="#excludetraits">excludeTraits</a></li>
<li><a class="reference internal" href="#excludetraitsbytag">excludeTraitsByTag</a></li>
<li><a class="reference internal" href="#filtersuppressions">filterSuppressions</a></li>
<li><a class="reference internal" href="#includetags">includeTags</a></li>
<li><a class="reference internal" href="#includetraits">includeTraits</a></li>
<li><a class="reference internal" href="#includetraitsbytag">includeTraitsByTag</a></li>
<li><a class="reference internal" href="#excludemetadata">excludeMetadata</a></li>
<li><a class="reference internal" href="#includemetadata">includeMetadata</a></li>
<li><a class="reference internal" href="#flattenandremovemixins">flattenAndRemoveMixins</a></li>
<li><a class="reference internal" href="#flattennamespaces">flattenNamespaces</a></li>
<li><a class="reference internal" href="#removetraitdefinitions">removeTraitDefinitions</a></li>
<li><a class="reference internal" href="#removeunusedshapes">removeUnusedShapes</a></li>
<li><a class="reference internal" href="#removedeprecatedshapes">removeDeprecatedShapes</a></li>
<li><a class="reference internal" href="#renameshapes">renameShapes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#environment-variables">Environment variables</a></li>
<li><a class="reference internal" href="#plugins">Plugins</a><ul>
<li><a class="reference internal" href="#model-plugin">model plugin</a></li>
<li><a class="reference internal" href="#build-info-plugin">build-info plugin</a></li>
<li><a class="reference internal" href="#sources-plugin">sources plugin</a></li>
<li><a class="reference internal" href="#run-plugin">run plugin</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/tabs.js"></script>
    </body>
</html>