<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html"><link rel="search" title="Search" href="../../search.html"><link rel="next" title="Smithy IDL 1.0 to 2.0 Migration Guide" href="migrating-idl-1-to-2.html"><link rel="prev" title="Model Translations" href="index.html">
        <link rel="prefetch" href="../../_static/smithy.svg" as="image">
        <link rel="prefetch" href="../../_static/smithy-dark.svg" as="image">

    <link rel="shortcut icon" href="../../_static/favicon.svg"><!-- Generated with Sphinx 9.1.0 and Furo 2025.12.19 -->
        <title>Converting Smithy to OpenAPI - Smithy 2.0</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=7bdb33bb" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=8dab3a3b" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=0abfef4d" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --admonition-font-size: 100%;
  --admonition-title-font-size: 100%;
  --color-brand-primary: #C44536;
  --color-brand-content: #00808b;
  --color-announcement-background: #f8f8f8;
  --color-announcement-text: #383838;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #282828;
  --color-code-foreground: #dddddd;
  --color-brand-primary: #ed9d13;
  --color-brand-content: #58d3ff;
  --color-announcement-background: ##1a1c1e;;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #282828;
  --color-code-foreground: #dddddd;
  --color-brand-primary: #ed9d13;
  --color-brand-content: #58d3ff;
  --color-announcement-background: ##1a1c1e;;
  
      }
    }
  }
</style><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js"></script>
<script src="https://d2c.aws.amazon.com/client/loader/v1/d2c-load.js"></script></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Smithy 2.0</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="/index.html">
  
  <div class="sidebar-brand-icon">
    <img class="sidebar-logo only-light" src="../../_static/smithy.svg" alt="Logo">
    <img class="sidebar-logo only-dark" src="../../_static/smithy-dark.svg" alt="Logo">
  </div>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../quickstart.html">Quick start</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../spec/index.html">Smithy specification</a><input aria-label="Toggle navigation of Smithy specification" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../spec/model.html">1. The Smithy model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../spec/simple-types.html">2. Simple types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../spec/aggregate-types.html">3. Aggregate types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../spec/service-types.html">4. Service types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../spec/mixins.html">5. Mixins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../spec/constraint-traits.html">6. Constraint traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../spec/type-refinement-traits.html">7. Type refinement traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../spec/documentation-traits.html">8. Documentation traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../spec/behavior-traits.html">9. Behavior traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../spec/resource-traits.html">10. Resource traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../spec/authentication-traits.html">11. Authentication traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../spec/protocol-traits.html">12. Serialization and Protocol traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../spec/streaming.html">13. Streaming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../spec/http-bindings.html">14. HTTP bindings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../spec/endpoint-traits.html">15. Endpoint traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../spec/selectors.html">16. Selectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../spec/model-validation.html">17. Model validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../spec/idl.html">18. Smithy IDL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../spec/json-ast.html">19. JSON AST</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../trait-index.html">Trait index</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">Guides</a><input aria-label="Toggle navigation of Guides" checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../smithy-cli/index.html">The Smithy CLI</a><input aria-label="Toggle navigation of The Smithy CLI" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../smithy-cli/cli_installation.html">Installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../smithy-build-json.html">smithy-build.json</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../gradle-plugin/index.html">Smithy Gradle Plugins</a><input aria-label="Toggle navigation of Smithy Gradle Plugins" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../gradle-plugin/gradle-migration-guide.html">Migrating to Gradle plugin version 0.10.0+</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../using-code-generation/index.html">Code Generation</a><input aria-label="Toggle navigation of Code Generation" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../using-code-generation/update-model.html">Updating the Smithy Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using-code-generation/generating-a-client.html">Generating a client</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../model-linters.html">Linting Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../model-validation-examples.html">Model Validation Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../evolving-models.html">Evolving Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../wire-protocol-selection.html">Wire protocol selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../style-guide.html">Style Guide</a></li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="index.html">Model Translations</a><input aria-label="Toggle navigation of Model Translations" checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul class="current">
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Converting Smithy to OpenAPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="migrating-idl-1-to-2.html">Smithy IDL 1.0 to 2.0 Migration Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="generating-cloudformation-resources.html">Generating CloudFormation Resource Schemas from Smithy</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../building-codegen/index.html">Creating a Code Generator</a><input aria-label="Toggle navigation of Creating a Code Generator" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../building-codegen/overview-and-concepts.html">Overview and Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-codegen/mapping-shapes-to-languages.html">Mapping Smithy Shapes to Your Language</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-codegen/creating-codegen-repo.html">Creating a Codegen Repo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-codegen/configuring-the-generator.html">Configuring the Generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-codegen/implementing-the-generator.html">Implementing the Generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-codegen/making-codegen-pluggable.html">Making Codegen Pluggable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-codegen/generating-code.html">Generating Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-codegen/decoupling-codegen-with-symbols.html">Decoupling Codegen with Symbols</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-codegen/using-the-semantic-model.html">Using the Semantic Model</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../client-guidance/index.html">Smithy Client Guidance</a><input aria-label="Toggle navigation of Smithy Client Guidance" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../client-guidance/application-protocols/index.html">Application Protocols</a><input aria-label="Toggle navigation of Application Protocols" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../client-guidance/application-protocols/http.html">HTTP</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a><input aria-label="Toggle navigation of Tutorials" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/full-stack-tutorial.html">Full Stack Application</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../additional-specs/index.html">Additional specs</a><input aria-label="Toggle navigation of Additional specs" class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../additional-specs/ai-traits.html">Smithy AI Traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../additional-specs/http-protocol-compliance-tests.html">HTTP Protocol Compliance Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../additional-specs/smoke-tests.html">Smoke Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../additional-specs/waiters.html">Waiters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../additional-specs/mqtt.html">MQTT Protocol Bindings</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../additional-specs/rules-engine/index.html">Rules engine</a><input aria-label="Toggle navigation of Rules engine" class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../additional-specs/rules-engine/specification.html">Rules engine specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../additional-specs/rules-engine/parameters.html">Rules engine parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../additional-specs/rules-engine/standard-library.html">Rules engine standard library</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../additional-specs/protocols/index.html">Protocols</a><input aria-label="Toggle navigation of Protocols" class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../additional-specs/protocols/smithy-rpc-v2.html">Smithy RPC v2 CBOR protocol</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../aws/index.html">AWS integrations</a><input aria-label="Toggle navigation of AWS integrations" class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../aws/aws-core.html">AWS Core Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../aws/aws-auth.html">AWS Authentication Traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../aws/aws-endpoints-region.html">AWS Declarative Endpoint Traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../aws/aws-iam.html">AWS IAM traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../aws/amazon-apigateway.html">Amazon API Gateway traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../aws/aws-cloudformation.html">AWS CloudFormation Traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../aws/amazon-eventstream.html">Amazon Event Stream Specification</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../aws/protocols/index.html">AWS Protocols</a><input aria-label="Toggle navigation of AWS Protocols" class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../aws/protocols/aws-restjson1-protocol.html">AWS restJson1 protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../aws/protocols/aws-json-1_0-protocol.html">AWS JSON 1.0 protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../aws/protocols/aws-json-1_1-protocol.html">AWS JSON 1.1 protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../aws/protocols/aws-restxml-protocol.html">AWS restXml protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../aws/protocols/aws-query-protocol.html">AWS query protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../aws/protocols/aws-ec2-query-protocol.html">AWS EC2 query protocol</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../aws/customizations/index.html">AWS Service Customizations</a><input aria-label="Toggle navigation of AWS Service Customizations" class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../aws/customizations/apigateway-customizations.html">Amazon API Gateway Customizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../aws/customizations/glacier-customizations.html">Amazon Glacier Customizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../aws/customizations/machinelearning-customizations.html">Amazon Machine Learning Customizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../aws/customizations/s3-customizations.html">Amazon S3 Customizations</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../aws/rules-engine/index.html">AWS rules engine extensions</a><input aria-label="Toggle navigation of AWS rules engine extensions" class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../aws/rules-engine/built-ins.html">AWS rules engine built-ins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../aws/rules-engine/library-functions.html">AWS rules engine library functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../aws/rules-engine/auth-schemes.html">AWS rules engine authentication scheme validators</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Languages</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../languages/java/index.html">Java</a><input aria-label="Toggle navigation of Java" class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../languages/java/quickstart.html">Java Quickstart</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../languages/java/client/index.html">Client User Guide</a><input aria-label="Toggle navigation of Client User Guide" class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../languages/java/client/generating-clients.html">Generating Clients</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../languages/java/client/configuration.html">Configuring Clients</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../languages/java/client/customization.html">Customizing Client Behavior</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../languages/java/client/plugins.html">Client Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../languages/java/client/dynamic-client.html">Dynamic Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../languages/java/client/codegen-integrations.html">Codegen Integrations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-java">Source code</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-java/tree/0.0.3/examples">Smithy Java Examples</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../languages/typescript/index.html">TypeScript</a><input aria-label="Toggle navigation of TypeScript" class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../languages/typescript/quickstart.html">TypeScript Quickstart</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../languages/typescript/ts-ssdk/index.html">Server Generator for TypeScript</a><input aria-label="Toggle navigation of Server Generator for TypeScript" class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../languages/typescript/ts-ssdk/introduction.html">Introduction to the Smithy Server Generator for TypeScript</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../languages/typescript/ts-ssdk/handlers.html">Smithy Server Generator for TypeScript handlers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../languages/typescript/ts-ssdk/validation.html">Smithy Server Generator for TypeScript validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../languages/typescript/ts-ssdk/error-handling.html">Smithy Server Generator for TypeScript error handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../languages/typescript/ts-ssdk/supported-endpoints.html">Smithy Server Generator for TypeScript supported endpoints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-typescript">Source code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/full-stack-tutorial.html">Smithy Full Stack Application</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../languages/rust/index.html">Rust</a><input aria-label="Toggle navigation of Rust" class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://smithy-lang.github.io/smithy-rs/design/">Design Documentation</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-rs">Source code</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../languages/python/index.html">Python</a><input aria-label="Toggle navigation of Python" class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-python">Source code</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../languages/kotlin/index.html">Kotlin</a><input aria-label="Toggle navigation of Kotlin" class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://github.com/smithy-lang/smithy-kotlin">Source code</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../languages/golang/index.html">GoLang</a><input aria-label="Toggle navigation of GoLang" class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" role="switch" type="checkbox"/><label for="toctree-checkbox-25"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://github.com/aws/smithy-go">Source code</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../languages/scala/index.html">Scala</a><input aria-label="Toggle navigation of Scala" class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" role="switch" type="checkbox"/><label for="toctree-checkbox-26"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://disneystreaming.github.io/smithy4s/">Documentation</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/disneystreaming/smithy4s">Source code</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/smithy-lang/smithy">Source code</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/smithy-lang/awesome-smithy">Awesome Smithy</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/smithy-lang/smithy-examples">Smithy Examples</a></li>
<li class="toctree-l1"><a class="reference external" href="https://smithy.io/1.0/">1.0 Documentation</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/smithy-lang/smithy/blob/main/docs/source-2.0/guides/model-translations/converting-to-openapi.rst?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/smithy-lang/smithy/edit/main/docs/source-2.0/guides/model-translations/converting-to-openapi.rst" rel="edit" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="converting-smithy-to-openapi">
<span id="smithy-to-openapi"></span><h1>Converting Smithy to OpenAPI<a class="headerlink" href="#converting-smithy-to-openapi" title="Link to this heading">¶</a></h1>
<p>This guide describes how Smithy models can be converted to <a class="reference external" href="https://github.com/OAI/OpenAPI-Specification">OpenAPI</a>
specifications.</p>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>OpenAPI is a standard for describing RESTful APIs. While Smithy has its own
interface definition language that's completely independent of OpenAPI,
there are use cases for authoring API models in Smithy and converting
them to OpenAPI using both ad-hoc and automated workflows. For example,
integration with <a class="reference external" href="https://aws.amazon.com/api-gateway/">Amazon API Gateway</a>, access to OpenAPI tools like
SwaggerUI, or access to OpenAPI client and server code generators when
Smithy generators are not available.</p>
<p>Smithy models can be converted to OpenAPI through smithy-build using the
<code class="docutils literal notranslate"><span class="pre">openapi</span></code> plugin or through code using the
<a class="reference external" href="https://search.maven.org/search?q=g:software.amazon.smithy%20and%20a:smithy-openapi">software.amazon.smithy:smithy-openapi</a> Java package.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Smithy <code class="docutils literal notranslate"><span class="pre">openapi</span></code> plugin currently supports OpenAPI 3.0.2 and OpenAPI 3.1.0.</p>
</div>
</section>
<section id="differences-between-smithy-and-openapi">
<h2>Differences between Smithy and OpenAPI<a class="headerlink" href="#differences-between-smithy-and-openapi" title="Link to this heading">¶</a></h2>
<p>Smithy and OpenAPI take very different approaches to modeling APIs. Smithy is
<em>protocol agnostic</em>, which means it focuses on the interfaces and abstractions
that are provided to end-users rather than how the data is sent over the wire.
While Smithy can define RESTful APIs, RPC APIs, pub/sub APIs, and more, OpenAPI
<em>only</em> defines RESTful APIs. Both approaches have their own strengths and
weaknesses. For example, while Smithy can define a much broader set of
functionality, services, and client behaviors, it requires abstractions that
have their own underlying complexity. OpenAPI is more permissive in the kinds
of services it can describe, making it easier to adapt to existing web
services, but at the same time making it easier to author APIs that provide
a poor customer experience when using clients in strongly-typed languages.</p>
<section id="unsupported-features">
<h3>Unsupported features<a class="headerlink" href="#unsupported-features" title="Link to this heading">¶</a></h3>
<p>Converting a Smithy model to OpenAPI is a lossy conversion. Various features
in a Smithy model are not currently supported in the OpenAPI conversion.</p>
<p><strong>Unsupported features</strong></p>
<ul>
<li><p><a class="reference internal" href="../../spec/endpoint-traits.html#endpoint-trait"><span class="std std-ref">endpoint trait</span></a> and <a class="reference internal" href="../../spec/endpoint-traits.html#hostlabel-trait"><span class="std std-ref">hostLabel trait</span></a>: These traits are used
to dynamically alter the endpoint of an operation based on input. They
are not supported in OpenAPI.</p></li>
<li><p><a class="reference internal" href="../../spec/http-bindings.html#httpprefixheaders-trait"><span class="std std-ref">HTTP prefix headers</span></a>: &quot;Prefix headers&quot;
are used in Smithy to bind all headers under a common prefix into a
single property of the input or output of an API operation. This can
be used for things like Amazon S3's <a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectPUT.html">x-amz-meta-* headers</a>. OpenAPI
does not currently support this kind of header.</p></li>
<li><p><a class="reference internal" href="../../spec/http-bindings.html#greedy-labels"><span class="std std-ref">Greedy labels</span></a>: Greedy labels are used in HTTP URIs to act as a
placeholder for multiple segments of a URI (for example,
<code class="docutils literal notranslate"><span class="pre">/foo/{baz+}/bar</span></code>). Some OpenAPI vendors/tooling support greedy labels
(for example, Amazon API Gateway) while other do not. The converter will
pass greedy labels through into the OpenAPI document by default, but they
can be forbidden through the <code class="docutils literal notranslate"><span class="pre">forbidGreedyLabels</span></code> flag.</p></li>
<li><p>Non-RESTful routing: HTTP routing schemes that aren't based on
methods and unique URIs are not supported in OpenAPI (for example,
routing to operations based on a specific header or query string
parameter).</p></li>
<li><p>Non-HTTP protocols: Protocols that do not send requests over HTTP are
not supported with OpenAPI (for example, an MQTT-based protocol modeled
with Smithy would need to also support an HTTP-based protocol to be
converted to OpenAPI).</p></li>
<li><p><a class="reference internal" href="../../aws/aws-core.html#aws-api-arn-trait"><span class="std std-ref">aws.api#arn trait</span></a>: This trait does not influence resources defined
in the OpenAPI model natively, nor via any of the <a class="reference external" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-swagger-extensions.html">Amazon API Gateway extensions</a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#other-traits"><span class="std std-ref">Other traits that influence API Gateway</span></a></p>
</div>
</li>
</ul>
<p><strong>Compatibility notes</strong></p>
<ul class="simple">
<li><p>Streaming: Smithy allows blob and string shapes to be marked as
streaming, meaning that their contents should not be loaded into
memory by clients or servers. While this isn't technically unsupported in
OpenAPI, some vendors like API Gateway do not currently support streaming
large payloads.</p></li>
</ul>
<p><strong>Lossy metadata</strong></p>
<ul class="simple">
<li><p>Resources: Smithy resource metadata is not carried over into the OpenAPI
specification.</p></li>
<li><p><a class="reference internal" href="../../spec/model.html#trait-shapes"><span class="std std-ref">Custom traits</span></a>: Custom traits defined in a Smithy
model are not converted and added to the OpenAPI specification. Copying
Smithy traits into OpenAPI as extensions requires the use of a custom
<code class="docutils literal notranslate"><span class="pre">software.amazon.smithy.openapi.fromsmithy.OpenApiExtension</span></code>.</p></li>
</ul>
</section>
</section>
<section id="converting-to-openapi-with-smithy-build">
<h2>Converting to OpenAPI with smithy-build<a class="headerlink" href="#converting-to-openapi-with-smithy-build" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">openapi</span></code> plugin contained in the <code class="docutils literal notranslate"><span class="pre">software.amazon.smithy:smithy-openapi</span></code>
package can be used with smithy-build and the <a class="reference external" href="https://github.com/smithy-lang/smithy-gradle-plugin">Smithy Gradle plugin</a> to build
OpenAPI specifications from Smithy models.</p>
<div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--1-input--1" name="tab-set--1" type="radio" /><label class="tab-label" for="tab-set--1-input--1">Smithy CLI</label><div class="tab-content docutils">
<div class="tip admonition">
<p class="admonition-title">Install required tools</p>
<p>Before you proceed, make sure you have the <a class="reference internal" href="../smithy-cli/cli_installation.html#cli-installation"><span class="std std-ref">Smithy CLI installed</span></a>.</p>
</div>
<p>The following example shows how to use the Smithy CLI to build an OpenAPI
specification from a Smithy model.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id3" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;sources&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;models&quot;</span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;maven&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="s2">&quot;software.amazon.smithy:smithy-openapi:1.67.0&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="c1">// Required for restJson1 trait.</span>
<span class="w">      </span><span class="s2">&quot;software.amazon.smithy:smithy-aws-traits:1.67.0&quot;</span>
<span class="w">    </span><span class="p">]</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;smithy.example#Weather&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;protocol&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aws.protocols#restJson1&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3.1.0&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>To build the Smithy model and generate the OpenAPI artifact, run <code class="docutils literal notranslate"><span class="pre">smithy</span> <span class="pre">build</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can clone a working version of this example using the
<a class="reference internal" href="../smithy-cli/index.html#smithy-cli"><span class="std std-ref">Smithy CLI</span></a> <code class="docutils literal notranslate"><span class="pre">init</span></code> command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">smithy</span> <span class="n">init</span> <span class="o">-</span><span class="n">t</span> <span class="n">smithy</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">openapi</span> <span class="o">-</span><span class="n">o</span> <span class="o">&lt;</span><span class="n">output_directory</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
</div>
<input class="tab-input" id="tab-set--1-input--2" name="tab-set--1" type="radio" /><label class="tab-label" for="tab-set--1-input--2">Gradle</label><div class="tab-content docutils">
<div class="tip admonition">
<p class="admonition-title">Install required tools</p>
<p>Before you proceed, make sure you have <a class="reference external" href="https://gradle.org/install/">gradle installed</a>.</p>
</div>
<div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio" /><label class="tab-label" for="tab-set--0-input--1">Kotlin</label><div class="tab-content docutils">
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">build.gradle.kts</span><a class="headerlink" href="#id4" title="Link to this code">¶</a></div>
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="n">plugins</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">java</span>
<span class="w">    </span><span class="c1">// Use the `smithy-jar` plugin if you also want to package</span>
<span class="w">    </span><span class="c1">// smithy models into the JAR created by the `java` plugin.</span>
<span class="w">    </span><span class="n">id</span><span class="p">(</span><span class="s">&quot;software.amazon.smithy-base&quot;</span><span class="p">).</span><span class="na">version</span><span class="p">(</span><span class="s">&quot;1.3.0&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">dependencies</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">smithyBuild</span><span class="p">(</span><span class="s">&quot;software.amazon.smithy:smithy-aws-traits:1.67.0&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="c1">// Required for restJson1 trait.</span>
<span class="w">    </span><span class="n">implementation</span><span class="p">(</span><span class="s">&quot;software.amazon.smithy:smithy-aws-traits:1.67.0&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio" /><label class="tab-label" for="tab-set--0-input--2">Groovy</label><div class="tab-content docutils">
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">build.gradle</span><a class="headerlink" href="#id5" title="Link to this code">¶</a></div>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">plugins</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="s1">&#39;java&#39;</span>
<span class="w">    </span><span class="c1">// Use the `smithy-jar` plugin if you also want to package</span>
<span class="w">    </span><span class="c1">// smithy models into the JAR created by the `java` plugin.</span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="s1">&#39;software.amazon.smithy-base&#39;</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="s1">&#39;1.3.0&#39;</span>
<span class="o">}</span>

<span class="n">dependencies</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">smithyBuild</span><span class="w"> </span><span class="s1">&#39;software.amazon.smithy:smithy-aws-traits:1.67.0&#39;</span>

<span class="w">    </span><span class="c1">// Required for restJson1 trait.</span>
<span class="w">    </span><span class="n">implementation</span><span class="w"> </span><span class="s1">&#39;software.amazon.smithy:smithy-aws-traits:1.67.0&#39;</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>A build-only dependency on &quot;software.amazon.smithy:smithy-openapi:1.67.0&quot; is
required in order for smithy-build to map the &quot;openapi&quot; plugin name to the
correct Java library implementation.</p>
</div>
<p>The Smithy Gradle plugin relies on a <code class="docutils literal notranslate"><span class="pre">smithy-build.json</span></code> file found at the
root of a project to define the actual process of building the OpenAPI
specification. The following example defines a <code class="docutils literal notranslate"><span class="pre">smithy-build.json</span></code> file
that builds an OpenAPI specification from a service for the
<code class="docutils literal notranslate"><span class="pre">example.weather#Weather</span></code> service using the <code class="docutils literal notranslate"><span class="pre">aws.protocols#restJson1</span></code> protocol:</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id6" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;smithy.example#Weather&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;protocol&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aws.protocols#restJson1&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3.1.0&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>To build the Smithy model and generate the OpenAPI artifact, run <code class="docutils literal notranslate"><span class="pre">gradle</span> <span class="pre">build</span></code>.</p>
</div>
</div>
</section>
<section id="openapi-configuration-settings">
<h2>OpenAPI configuration settings<a class="headerlink" href="#openapi-configuration-settings" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">openapi</span></code> plugin is highly configurable to support different OpenAPI
tools and vendors.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You typically only need to configure the <code class="docutils literal notranslate"><span class="pre">service</span></code> and
<code class="docutils literal notranslate"><span class="pre">protocol</span></code> settings to create a valid OpenAPI specification.</p>
</div>
<section id="service-string">
<span id="generate-openapi-setting-service"></span><h3>service (<code class="docutils literal notranslate"><span class="pre">string</span></code>)<a class="headerlink" href="#service-string" title="Link to this heading">¶</a></h3>
<p><strong>Required</strong>. The Smithy service <a class="reference internal" href="../../spec/model.html#shape-id"><span class="std std-ref">shape ID</span></a> to convert.
For example, <code class="docutils literal notranslate"><span class="pre">example.weather#Weather</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id7" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Any <a class="reference internal" href="../../spec/service-types.html#service-closure"><span class="std std-ref">rename</span></a> defined in the given service
affects the generated schema names when converting to OpenAPI.</p>
</div>
</section>
<section id="protocol-string">
<span id="generate-openapi-setting-protocol"></span><h3>protocol (<code class="docutils literal notranslate"><span class="pre">string</span></code>)<a class="headerlink" href="#protocol-string" title="Link to this heading">¶</a></h3>
<p>The protocol shape ID to use when converting Smithy to OpenAPI.
For example, <code class="docutils literal notranslate"><span class="pre">aws.protocols#restJson1</span></code>.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">protocol</span></code> is required if a service supports multiple protocols.</p></li>
<li><p>A Smithy model can only be converted to OpenAPI if a corresponding
<code class="docutils literal notranslate"><span class="pre">software.amazon.smithy.openapi.fromsmithy.OpenApiProtocol</span></code>
implementation is registered by a <code class="docutils literal notranslate"><span class="pre">software.amazon.smithy.openapi.fromsmithy.CoreExtension</span></code>
service provider found on the classpath.</p></li>
</ul>
</div>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id8" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;protocol&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aws.protocols#restJson1&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="version-string">
<span id="generate-openapi-setting-version"></span><h3>version (<code class="docutils literal notranslate"><span class="pre">string</span></code>)<a class="headerlink" href="#version-string" title="Link to this heading">¶</a></h3>
<p>Specifies the OpenAPI specification version.
Currently supports OpenAPI 3.0.2 and OpenAPI 3.1.0.
This option defaults to <code class="docutils literal notranslate"><span class="pre">3.0.2</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The JSON schema version used for model schemas is the latest JSON schema
version supported by the specified OpenAPI version. For example, OpenAPI version
<code class="docutils literal notranslate"><span class="pre">3.1.0</span></code> will use JSON schema version <code class="docutils literal notranslate"><span class="pre">draft2020-12</span></code> for model schemas.</p>
</div>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id9" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;smithy.example#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3.1.0&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="tags-boolean">
<span id="generate-openapi-setting-tags"></span><h3>tags (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)<a class="headerlink" href="#tags-boolean" title="Link to this heading">¶</a></h3>
<p>Whether or not to include Smithy <a class="reference internal" href="../../spec/documentation-traits.html#tags-trait"><span class="std std-ref">tags</span></a> in the result
as <a class="reference external" href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md#tagObject">OpenAPI tags</a>. The following example adds all tags in the Smithy
model to the OpenAPI model.</p>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id10" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="supportedtags-string">
<span id="generate-openapi-setting-supportedtags"></span><h3>supportedTags (<code class="docutils literal notranslate"><span class="pre">[string]</span></code>)<a class="headerlink" href="#supportedtags-string" title="Link to this heading">¶</a></h3>
<p>Limits the exported <code class="docutils literal notranslate"><span class="pre">tags</span></code> to a specific set of tags. The value
must be a list of strings. This property requires that <code class="docutils literal notranslate"><span class="pre">tags</span></code> is set to
<code class="docutils literal notranslate"><span class="pre">true</span></code> in order to have an effect.</p>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id11" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;supportedTags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;baz&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;bar&quot;</span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="defaultblobformat-string">
<span id="generate-openapi-setting-defaultblobformat"></span><h3>defaultBlobFormat (<code class="docutils literal notranslate"><span class="pre">string</span></code>)<a class="headerlink" href="#defaultblobformat-string" title="Link to this heading">¶</a></h3>
<p>Sets the default format property used when converting blob shapes in
Smithy to strings in OpenAPI. Defaults to &quot;byte&quot;, meaning Base64 encoded.
See <a class="reference external" href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md#data-types">OpenAPI Data types</a> for more information.</p>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id12" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;defaultBlobFormat&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;byte&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="externaldocs-string">
<span id="generate-openapi-setting-externaldocs"></span><h3>externalDocs (<code class="docutils literal notranslate"><span class="pre">[string]</span></code>)<a class="headerlink" href="#externaldocs-string" title="Link to this heading">¶</a></h3>
<p>Limits the source of converted &quot;externalDocs&quot; fields to the specified
priority ordered list of names in an <a class="reference internal" href="../../spec/documentation-traits.html#externaldocumentation-trait"><span class="std std-ref">externalDocumentation trait</span></a>.
This list is case insensitive. By default, this is a list of the following
values: &quot;Homepage&quot;, &quot;API Reference&quot;, &quot;User Guide&quot;, &quot;Developer Guide&quot;,
&quot;Reference&quot;, and &quot;Guide&quot;.</p>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id13" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;externalDocs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="s2">&quot;Homepage&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;Custom&quot;</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="keepunusedcomponents-boolean">
<span id="generate-openapi-setting-keepunusedcomponents"></span><h3>keepUnusedComponents (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)<a class="headerlink" href="#keepunusedcomponents-boolean" title="Link to this heading">¶</a></h3>
<p>Set to <code class="docutils literal notranslate"><span class="pre">true</span></code> to prevent unused OpenAPI <code class="docutils literal notranslate"><span class="pre">components</span></code> from being
removed from the created specification.</p>
<div class="literal-block-wrapper docutils container" id="id14">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id14" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;keepUnusedComponents&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="jsoncontenttype-string">
<span id="generate-openapi-setting-jsoncontenttype"></span><h3>jsonContentType (<code class="docutils literal notranslate"><span class="pre">string</span></code>)<a class="headerlink" href="#jsoncontenttype-string" title="Link to this heading">¶</a></h3>
<p>Sets a custom media-type to associate with the JSON payload of
JSON-based protocols.</p>
<div class="literal-block-wrapper docutils container" id="id15">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id15" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;jsonContentType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;application/x-amz-json-1.1&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="forbidgreedylabels-boolean">
<span id="generate-openapi-setting-forbidgreedylabels"></span><h3>forbidGreedyLabels (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)<a class="headerlink" href="#forbidgreedylabels-boolean" title="Link to this heading">¶</a></h3>
<p>Set to true to forbid greedy URI labels. By default, greedy labels will
appear as-is in the path generated for an operation. For example,
&quot;/{foo+}&quot;.</p>
<div class="literal-block-wrapper docutils container" id="id16">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id16" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;forbidGreedyLabels&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="removegreedyparametersuffix-boolean">
<span id="generate-openapi-setting-removegreedyparametersuffix"></span><h3>removeGreedyParameterSuffix (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)<a class="headerlink" href="#removegreedyparametersuffix-boolean" title="Link to this heading">¶</a></h3>
<p>Set to true to remove the <code class="docutils literal notranslate"><span class="pre">+</span></code> suffix on the parameter name. By default, greedy
labels will have a corresponding parameter name generated that will include
the <code class="docutils literal notranslate"><span class="pre">+</span></code> suffix. Given a label &quot;/{foo+}&quot;, the parameter name will be &quot;foo+&quot;.
If enabled, the parameter name will instead be &quot;foo&quot;.</p>
<div class="literal-block-wrapper docutils container" id="id17">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id17" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;removeGreedyParameterSuffix&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="onhttpprefixheaders-string">
<span id="generate-openapi-setting-onhttpprefixheaders"></span><h3>onHttpPrefixHeaders (<code class="docutils literal notranslate"><span class="pre">string</span></code>)<a class="headerlink" href="#onhttpprefixheaders-string" title="Link to this heading">¶</a></h3>
<p>Specifies what to do when the <a class="reference internal" href="../../spec/http-bindings.html#httpprefixheaders-trait"><span class="std std-ref">httpPrefixHeaders trait</span></a> is found in
a model. OpenAPI does not support <code class="docutils literal notranslate"><span class="pre">httpPrefixHeaders</span></code>. By default, the
conversion will fail when this trait is encountered, but this behavior
can be customized using the following values for the <code class="docutils literal notranslate"><span class="pre">onHttpPrefixHeaders</span></code>
setting:</p>
<ul class="simple">
<li><p>FAIL: The default setting that causes the build to fail.</p></li>
<li><p>WARN: The header is omitted from the OpenAPI model and a warning is logged.</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id18">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id18" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;onHttpPrefixHeaders&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;WARN&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="ignoreunsupportedtraits-boolean">
<span id="generate-openapi-setting-ignoreunsupportedtraits"></span><h3>ignoreUnsupportedTraits (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)<a class="headerlink" href="#ignoreunsupportedtraits-boolean" title="Link to this heading">¶</a></h3>
<p>Emits warnings rather than failing when unsupported traits like
<code class="docutils literal notranslate"><span class="pre">endpoint</span></code> and <code class="docutils literal notranslate"><span class="pre">hostLabel</span></code> are encountered.</p>
<div class="literal-block-wrapper docutils container" id="id19">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id19" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;ignoreUnsupportedTraits&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="substitutions-map-string-any">
<span id="generate-openapi-setting-substitutions"></span><h3>substitutions (<code class="docutils literal notranslate"><span class="pre">map&lt;string,</span> <span class="pre">any&gt;</span></code>)<a class="headerlink" href="#substitutions-map-string-any" title="Link to this heading">¶</a></h3>
<p>Defines a map of strings to any JSON value to find and replace in the
generated OpenAPI model.</p>
<p>String values are replaced if the string in its entirety matches
one of the keys provided in the <code class="docutils literal notranslate"><span class="pre">substitutions</span></code> map. The
corresponding value is then substituted for the string; this could
even result in a string changing into an object, array, etc.</p>
<p>The following example will find all strings with a value of &quot;REPLACE_ME&quot;
and replace the string with an array value of
<code class="docutils literal notranslate"><span class="pre">[&quot;this</span> <span class="pre">is</span> <span class="pre">a&quot;,</span> <span class="pre">&quot;</span> <span class="pre">replacement&quot;]</span></code> and replace all strings with a value
of <code class="docutils literal notranslate"><span class="pre">ANOTHER_REPLACEMENT</span></code> with <code class="docutils literal notranslate"><span class="pre">Hello!!!</span></code>:</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When possible, prefer <code class="docutils literal notranslate"><span class="pre">jsonAdd</span></code> instead because the update
performed on the generated document is more explicit and resilient to
change.</p>
</div>
<div class="literal-block-wrapper docutils container" id="id20">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id20" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;substitutions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;REPLACE_ME&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;this is a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot; replacement&quot;</span><span class="p">],</span>
<span class="w">                </span><span class="nt">&quot;ANOTHER_REPLACEMENT&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Hello!!!&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="jsonadd-map-string-any">
<span id="generate-openapi-setting-jsonadd"></span><h3>jsonAdd (<code class="docutils literal notranslate"><span class="pre">map&lt;string,</span> <span class="pre">any&gt;</span></code>)<a class="headerlink" href="#jsonadd-map-string-any" title="Link to this heading">¶</a></h3>
<p>Adds or replaces the JSON value in the generated OpenAPI document at the
given JSON pointer locations with a different JSON value. The value must
be a map where each key is a valid JSON pointer string as defined in
<span class="target" id="index-0"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6901.html"><strong>RFC 6901</strong></a>. Each value in the map is the JSON value to add or replace
at the given target.</p>
<p>Values are added using similar semantics of the &quot;add&quot; operation of
JSON Patch, as specified in <span class="target" id="index-1"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6902.html"><strong>RFC 6902</strong></a>, with the exception that adding
properties to an undefined object will create nested objects in the
result as needed.</p>
<div class="literal-block-wrapper docutils container" id="id21">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id21" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;jsonAdd&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;/info/title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Replaced title value&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;/info/nested/foo&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;hi&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Adding this object created intermediate objects too!&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;/info/nested/foo/baz&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="useintegertype-boolean">
<span id="generate-openapi-setting-useintegertype"></span><h3>useIntegerType (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)<a class="headerlink" href="#useintegertype-boolean" title="Link to this heading">¶</a></h3>
<p>Set to true to use the &quot;integer&quot; type when converting <code class="docutils literal notranslate"><span class="pre">byte</span></code>, <code class="docutils literal notranslate"><span class="pre">short</span></code>,
<code class="docutils literal notranslate"><span class="pre">integer</span></code>, and <code class="docutils literal notranslate"><span class="pre">long</span></code> shapes to OpenAPI. Configuring this setting to
true, like the example below, is recommended.</p>
<p>By default, these shape types are converted to OpenAPI with a type of
&quot;number&quot;.</p>
<div class="literal-block-wrapper docutils container" id="id22">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id22" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;useIntegerType&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="disableintegerformat-boolean">
<span id="generate-openapi-setting-disableintegerformat"></span><h3>disableIntegerFormat (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)<a class="headerlink" href="#disableintegerformat-boolean" title="Link to this heading">¶</a></h3>
<p>Set to true to disable setting the <code class="docutils literal notranslate"><span class="pre">format</span></code> property when using the
&quot;integer&quot; type that is enabled by the <a class="reference internal" href="#generate-openapi-setting-useintegertype"><span class="std std-ref">useIntegerType</span></a>
configuration setting.</p>
<div class="literal-block-wrapper docutils container" id="id23">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id23" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;useIntegerType&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;disableIntegerFormat&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>With this enabled (the default), the <code class="docutils literal notranslate"><span class="pre">format</span></code> property is set to <code class="docutils literal notranslate"><span class="pre">int32</span></code>
or <code class="docutils literal notranslate"><span class="pre">int64</span></code> for Integer or Long shapes respectively.</p>
<div class="literal-block-wrapper docutils container" id="id24">
<div class="code-block-caption"><span class="caption-text">Weather.openapi.json</span><a class="headerlink" href="#id24" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;Foo&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;myInteger&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;int32&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;myLong&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;int64&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="onerrorstatusconflict-string">
<span id="generate-openapi-setting-onerrorstatusconflict"></span><h3>onErrorStatusConflict (<code class="docutils literal notranslate"><span class="pre">string</span></code>)<a class="headerlink" href="#onerrorstatusconflict-string" title="Link to this heading">¶</a></h3>
<p>Specifies how to resolve multiple error responses that share the same HTTP
status code. This behavior can be enabled using the following values for
the <code class="docutils literal notranslate"><span class="pre">onErrorStatusConflict</span></code> setting:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">oneOf</span></code></dt><dd><p>Use OpenAPI's <code class="docutils literal notranslate"><span class="pre">oneOf</span></code> keyword to combine error responses with same
HTTP status code. The <code class="docutils literal notranslate"><span class="pre">oneOf</span></code> option wraps schemas for contents of
conflicting errors responses schemas into a synthetic union schema
using OpenAPI's <code class="docutils literal notranslate"><span class="pre">oneOf</span></code> keyword.</p>
</dd>
</dl>
<p>By default, this setting is disabled. When enabled, a single combined
response object will be included in the OpenAPI model output. Any member of
the conflicting errors bound to a HTTP header will be added to the
top-level response. If any headers conflict, an error will be thrown.
Remaining members will be left in place on the conflicting errors. The
modified conflicting errors are then added to the combined response object.</p>
<div class="literal-block-wrapper docutils container" id="id25">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id25" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;smithy.example#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;onErrorStatusConflict&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;oneOf&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="json-schema-configuration-settings">
<h2>JSON schema configuration settings<a class="headerlink" href="#json-schema-configuration-settings" title="Link to this heading">¶</a></h2>
<section id="alphanumericonlyrefs-boolean">
<span id="generate-openapi-jsonschema-setting-alphanumericonlyrefs"></span><h3>alphanumericOnlyRefs (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)<a class="headerlink" href="#alphanumericonlyrefs-boolean" title="Link to this heading">¶</a></h3>
<p>Creates JSON schema names that strip out non-alphanumeric characters.</p>
<p>This is necessary for compatibility with some vendors like
Amazon API Gateway that only allow alphanumeric shape names.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This setting is enabled by default when
<code class="docutils literal notranslate"><span class="pre">software.amazon.smithy:smithy-aws-apigateway-openapi</span></code> is on the classpath
and <code class="docutils literal notranslate"><span class="pre">apiGatewayType</span></code> is not set to <code class="docutils literal notranslate"><span class="pre">DISABLED</span></code>.</p>
</div>
</section>
<section id="usejsonname-boolean">
<span id="generate-openapi-jsonschema-setting-usejsonname"></span><h3>useJsonName (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)<a class="headerlink" href="#usejsonname-boolean" title="Link to this heading">¶</a></h3>
<p>Uses the value of the <a class="reference internal" href="../../spec/protocol-traits.html#jsonname-trait"><span class="std std-ref">jsonName trait</span></a> when creating JSON schema
properties for structure and union shapes. This property MAY be
automatically set to <code class="docutils literal notranslate"><span class="pre">true</span></code> depending on the protocol being converted.</p>
<div class="literal-block-wrapper docutils container" id="id26">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id26" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;useJsonName&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="defaulttimestampformat-string">
<span id="generate-openapi-jsonschema-setting-defaulttimestampformat"></span><h3>defaultTimestampFormat (<code class="docutils literal notranslate"><span class="pre">string</span></code>)<a class="headerlink" href="#defaulttimestampformat-string" title="Link to this heading">¶</a></h3>
<p>Sets the assumed <a class="reference internal" href="../../spec/protocol-traits.html#timestampformat-trait"><span class="std std-ref">timestampFormat trait</span></a> value for timestamps with
no explicit timestampFormat trait. The provided value is expected to be
a string. Defaults to &quot;date-time&quot; if not set. Can be set to &quot;date-time&quot;,
&quot;epoch-seconds&quot;, or &quot;http-date&quot;.</p>
<div class="literal-block-wrapper docutils container" id="id27">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id27" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;defaultTimestampFormat&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;epoch-seconds&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="unionstrategy-string">
<span id="generate-openapi-jsonschema-setting-unionstrategy"></span><h3>unionStrategy (<code class="docutils literal notranslate"><span class="pre">string</span></code>)<a class="headerlink" href="#unionstrategy-string" title="Link to this heading">¶</a></h3>
<p>Configures how Smithy union shapes are converted to JSON Schema.</p>
<p>This property must be a string set to one of the following values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">oneOf</span></code>: Converts to a schema that uses &quot;oneOf&quot;. This is the
default setting used if not configured.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">object</span></code>: Converts to an empty object &quot;{}&quot;.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">structure</span></code>: Converts to an object with properties just like a
structure.</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id28">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id28" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;unionStrategy&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;oneOf&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="enumstrategy-string">
<span id="generate-openapi-jsonschema-setting-enumstrategy"></span><h3>enumStrategy (<code class="docutils literal notranslate"><span class="pre">string</span></code>)<a class="headerlink" href="#enumstrategy-string" title="Link to this heading">¶</a></h3>
<p>Configures how Smithy enum shapes are converted to JSON Schema.</p>
<p>This property must be a string set to one of the following values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">enum</span></code>: Converts to a string schema that use the &quot;enum&quot; property. This
is the default setting used if not configured.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oneOf</span></code>: Converts to a schema that uses &quot;oneOf&quot;.</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id29">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id29" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;enumStrategy&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;oneOf&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="mapstrategy-string">
<span id="generate-openapi-jsonschema-setting-mapstrategy"></span><h3>mapStrategy (<code class="docutils literal notranslate"><span class="pre">string</span></code>)<a class="headerlink" href="#mapstrategy-string" title="Link to this heading">¶</a></h3>
<p>Configures how Smithy map shapes are converted to JSON Schema.</p>
<p>This property must be a string set to one of the following values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">propertyNames</span></code>:  Converts to a schema that uses a combination of
&quot;propertyNames&quot; and &quot;additionalProperties&quot;. This is the default setting
used if not configured.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">patternProperties</span></code>: Converts to a schema that uses
&quot;patternProperties&quot;. If a map's key member or its target does not have a
&quot;pattern&quot; trait, a default indicating one or more of any character (&quot;.+&quot;)
is applied.</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id30">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id30" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;mapStrategy&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;propertyNames&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="useinlinemaps-boolean">
<span id="generate-openapi-jsonschema-setting-useinlinemaps"></span><h3>useInlineMaps (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)<a class="headerlink" href="#useinlinemaps-boolean" title="Link to this heading">¶</a></h3>
<p>Configures Smithy to generate <code class="docutils literal notranslate"><span class="pre">map</span></code> shapes inline instead of as
references. This is necessary for some code generators to distinguish
between <code class="docutils literal notranslate"><span class="pre">maps</span></code> and <code class="docutils literal notranslate"><span class="pre">structure</span></code> shapes when generating.</p>
<div class="literal-block-wrapper docutils container" id="id31">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id31" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;useInlineMaps&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="schemadocumentextensions-map-string-any">
<span id="generate-openapi-jsonschema-setting-schemadocumentextensions"></span><h3>schemaDocumentExtensions (<code class="docutils literal notranslate"><span class="pre">map&lt;string,</span> <span class="pre">any&gt;</span></code>)<a class="headerlink" href="#schemadocumentextensions-map-string-any" title="Link to this heading">¶</a></h3>
<p>Adds custom top-level key-value pairs to the created OpenAPI specification.
Any existing value is overwritten.</p>
<div class="literal-block-wrapper docutils container" id="id32">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id32" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;schemaDocumentExtensions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;x-my-custom-top-level-property&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Hello!&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;x-another-custom-top-level-property&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;can be&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;complex&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;value&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;too!&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="disablefeatures-string">
<span id="generate-openapi-jsonschema-setting-disablefeatures"></span><h3>disableFeatures (<code class="docutils literal notranslate"><span class="pre">[string]</span></code>)<a class="headerlink" href="#disablefeatures-string" title="Link to this heading">¶</a></h3>
<p>Disables JSON schema and OpenAPI property names from appearing in the
generated OpenAPI model.</p>
<div class="literal-block-wrapper docutils container" id="id33">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id33" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;disableFeatures&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;propertyNames&quot;</span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="supportnonnumericfloats-boolean">
<span id="generate-openapi-setting-supportnonnumericfloats"></span><h3>supportNonNumericFloats (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)<a class="headerlink" href="#supportnonnumericfloats-boolean" title="Link to this heading">¶</a></h3>
<p>Set to true to add support for NaN, Infinity, and -Infinity in float
and double shapes. These values will be serialized as strings. The
JSON Schema document will be updated to refer to them as a &quot;oneOf&quot; of
number and string.</p>
<p>By default, these non-numeric values are not supported.</p>
<div class="literal-block-wrapper docutils container" id="id34">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id34" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;supportNonNumericFloats&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>When this is disabled (the default), references to floats/doubles will
look like this:</p>
<div class="literal-block-wrapper docutils container" id="id35">
<div class="code-block-caption"><span class="caption-text">Weather.openapi.json</span><a class="headerlink" href="#id35" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;floatMember&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>With this enabled, references to floats/doubles will look like this:</p>
<div class="literal-block-wrapper docutils container" id="id36">
<div class="code-block-caption"><span class="caption-text">Weather.openapi.json</span><a class="headerlink" href="#id36" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;floatMember&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;oneOf&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;enum&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="s2">&quot;NaN&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;Infinity&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;-Infinity&quot;</span>
<span class="w">                </span><span class="p">]</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="disabledefaultvalues-boolean">
<span id="generate-openapi-setting-disabledefaultvalues"></span><h3>disableDefaultValues (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)<a class="headerlink" href="#disabledefaultvalues-boolean" title="Link to this heading">¶</a></h3>
<p>Set to true to disable adding default values.</p>
<div class="literal-block-wrapper docutils container" id="id37">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id37" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;disableDefaultValues&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>With this disabled, default values will not appear in the output:</p>
<div class="literal-block-wrapper docutils container" id="id38">
<div class="code-block-caption"><span class="caption-text">Weather.openapi.json</span><a class="headerlink" href="#id38" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;Foo&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;bam&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;bar&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;bat&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/definitions/MyEnum&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;baz&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>With this enabled (the default), default values will be added, with <code class="docutils literal notranslate"><span class="pre">$ref</span></code>
pointers wrapped in an <code class="docutils literal notranslate"><span class="pre">allOf</span></code>:</p>
<div class="literal-block-wrapper docutils container" id="id39">
<div class="code-block-caption"><span class="caption-text">Weather.openapi.json</span><a class="headerlink" href="#id39" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;Foo&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;bam&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;bar&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;bat&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;allOf&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/definitions/MyEnum&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FOO&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">]</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;baz&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="disableintenums-boolean">
<span id="generate-openapi-setting-disableintenums"></span><h3>disableIntEnums (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)<a class="headerlink" href="#disableintenums-boolean" title="Link to this heading">¶</a></h3>
<p>Set to true to disable setting the <code class="docutils literal notranslate"><span class="pre">enum</span></code> property for intEnum shapes.</p>
<div class="literal-block-wrapper docutils container" id="id40">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id40" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;disableIntEnums&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>With this disabled, intEnum shapes will be inlined and the <code class="docutils literal notranslate"><span class="pre">enum</span></code> property
will not be set:</p>
<div class="literal-block-wrapper docutils container" id="id41">
<div class="code-block-caption"><span class="caption-text">Weather.openapi.json</span><a class="headerlink" href="#id41" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;Foo&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;bar&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>With this enabled (the default), intEnum shapes will have the <code class="docutils literal notranslate"><span class="pre">enum</span></code>
property set and the schema will use a <code class="docutils literal notranslate"><span class="pre">$ref</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id42">
<div class="code-block-caption"><span class="caption-text">Weather.openapi.json</span><a class="headerlink" href="#id42" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;Foo&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;bar&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/definitions/MyIntEnum&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;MyIntEnum&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;enum&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="mi">1</span><span class="p">,</span>
<span class="w">            </span><span class="mi">2</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="addreferencedescriptions-boolean">
<span id="generate-openapi-setting-addreferencedescriptions"></span><h3>addReferenceDescriptions (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)<a class="headerlink" href="#addreferencedescriptions-boolean" title="Link to this heading">¶</a></h3>
<p>Set to <code class="docutils literal notranslate"><span class="pre">true</span></code> to add the <code class="docutils literal notranslate"><span class="pre">description</span></code> property to <code class="docutils literal notranslate"><span class="pre">$ref</span></code> members
with the value of the member's <a class="reference internal" href="../../spec/documentation-traits.html#documentation-trait"><span class="std std-ref">documentation trait</span></a> trait.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This property is only supported when <a class="reference internal" href="#generate-openapi-setting-version"><span class="std std-ref">version</span></a>
is set to <code class="docutils literal notranslate"><span class="pre">3.1.0</span></code>.</p>
</div>
<p>By default, <code class="docutils literal notranslate"><span class="pre">$ref</span></code> members will have no <code class="docutils literal notranslate"><span class="pre">description</span></code>:</p>
<div class="literal-block-wrapper docutils container" id="id43">
<div class="code-block-caption"><span class="caption-text">example.smithy</span><a class="headerlink" href="#id43" title="Link to this code">¶</a></div>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">structure </span><span class="nc">Foo</span><span class="w"> </span>{
<span class="w">    </span><span class="c">/// Member docs</span>
<span class="w">    </span><span class="py">bar</span><span class="p">:</span><span class="w"> </span><span class="vc">Bar</span>
}
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id44">
<div class="code-block-caption"><span class="caption-text">Example.openapi.json</span><a class="headerlink" href="#id44" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;Foo&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;bar&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/definitions/Bar&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>With this enabled, member docs will be added:</p>
<div class="literal-block-wrapper docutils container" id="id45">
<div class="code-block-caption"><span class="caption-text">Example.openapi.json</span><a class="headerlink" href="#id45" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;Foo&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;bar&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/definitions/Bar&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Member docs&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="security-schemes">
<h2>Security schemes<a class="headerlink" href="#security-schemes" title="Link to this heading">¶</a></h2>
<p>Smithy <a class="reference internal" href="../../spec/authentication-traits.html#authentication-traits"><span class="std std-ref">authentication traits</span></a> applied to a service,
resource, or operation are converted to <a class="reference external" href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md#securitySchemeObject">OpenAPI security schemes</a> that are
defined and attached to the corresponding OpenAPI definitions.</p>
<p>Smithy will look for service providers on the classpath that implement
<code class="docutils literal notranslate"><span class="pre">software.amazon.smithy.openapi.fromsmithy.Smithy2OpenApiExtension</span></code>. These
service providers register <code class="docutils literal notranslate"><span class="pre">software.amazon.smithy.openapi.fromsmithy.SecuritySchemeConverter</span></code>
implementations used to convert Smithy authentication traits to
OpenAPI security schemes.</p>
<p>Smithy provides built-in support for the following authentication traits:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../aws/aws-auth.html#aws-auth-sigv4-trait"><span class="std std-ref">aws.auth#sigv4</span></a></p></li>
<li><p><a class="reference internal" href="../../spec/authentication-traits.html#httpapikeyauth-trait"><span class="std std-ref">httpApiKeyAuth</span></a></p></li>
<li><p><a class="reference internal" href="../../spec/authentication-traits.html#httpbasicauth-trait"><span class="std std-ref">httpBasicAuth</span></a></p></li>
<li><p><a class="reference internal" href="../../spec/authentication-traits.html#httpbearerauth-trait"><span class="std std-ref">httpBearerAuth</span></a></p></li>
<li><p><a class="reference internal" href="../../spec/authentication-traits.html#httpdigestauth-trait"><span class="std std-ref">httpDigestAuth</span></a></p></li>
</ul>
<p>For example, given the following Smithy model:</p>
<div class="literal-block-wrapper docutils container" id="id46">
<div class="code-block-caption"><span class="caption-text">main.smithy</span><a class="headerlink" href="#id46" title="Link to this code">¶</a></div>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="kd">use </span><span class="nc">aws.protocols#restJson1</span>

<span class="nt">@restJson1</span>
<span class="nt">@httpApiKeyAuth</span>(<span class="py">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;x-api-key&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">in</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;header&quot;</span>)
<span class="kd">service </span><span class="nc">Foo</span><span class="w"> </span>{
<span class="w">    </span><span class="py">version</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2006-03-01&quot;</span>
<span class="w">    </span><span class="py">operations</span><span class="p">:</span><span class="w"> </span>[<span class="vc">ExampleOperation</span>]
}

<span class="nt">@http</span>(<span class="py">method</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;GET&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/&quot;</span>)
<span class="kd">operation </span><span class="nc">ExampleOperation</span><span class="w"> </span>{}
</pre></div>
</div>
</div>
<p>Smithy will generate the following OpenAPI model:</p>
<div class="literal-block-wrapper docutils container" id="id47">
<div class="code-block-caption"><span class="caption-text">Foo.openapi.json</span><a class="headerlink" href="#id47" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3.0.2&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Foo&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2006-03-01&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;paths&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;/&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;get&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;operationId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ExampleOperation&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;responses&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;200&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ExampleOperation response&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;components&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;securitySchemes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;smithy.api#httpApiKeyAuth&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;apiKey&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;x-api-key&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;in&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;header&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;security&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;smithy.api#httpApiKeyAuth&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="examples-trait-conversion">
<h2><code class="docutils literal notranslate"><span class="pre">&#64;examples</span></code> trait conversion<a class="headerlink" href="#examples-trait-conversion" title="Link to this heading">¶</a></h2>
<p>In Smithy, example values of input structure members and the corresponding
output or error structure members for an operation are grouped together
into one set of example values for an operation. Below is an example &quot;unit&quot; of <code class="docutils literal notranslate"><span class="pre">FooOperation</span></code>
operation shape, which shows this logical grouping.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">apply </span><span class="nc">FooOperation</span><span class="w"> </span><span class="nt">@examples</span>(
<span class="w">    </span>[
<span class="w">        </span>{
<span class="w">            </span><span class="py">title</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;valid example&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="py">documentation</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;valid example doc&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="py">input</span><span class="p">:</span><span class="w"> </span>{
<span class="w">                </span><span class="py">bar</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1234&quot;</span>
<span class="w">            </span>}<span class="p">,</span>
<span class="w">            </span><span class="py">output</span><span class="p">:</span><span class="w"> </span>{
<span class="w">                </span><span class="py">baz</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5678&quot;</span>
<span class="w">            </span>}<span class="p">,</span>
<span class="w">        </span>}
<span class="w">    </span>]
)
</pre></div>
</div>
<p>However, example values in OpenAPI are scattered throughout the model, with each example value
contained by the OpenAPI object the example value is for.
The following is an example OpenAPI model for the above Smithy example value.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;paths&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;/&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;get&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;operationId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FooOperation&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;requestBody&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;application/json&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;examples&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;FooOperation_example1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                </span><span class="nt">&quot;summary&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;valid example&quot;</span><span class="p">,</span>
<span class="w">                                </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;valid example doc&quot;</span><span class="p">,</span>
<span class="w">                                </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                    </span><span class="nt">&quot;bar&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1234&quot;</span>
<span class="w">                                </span><span class="p">}</span>
<span class="w">                            </span><span class="p">}</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="nt">&quot;responses&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;200&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FooOperation response&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;application/json&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;examples&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                </span><span class="nt">&quot;FooOperation_example1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                    </span><span class="nt">&quot;summary&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;valid example&quot;</span><span class="p">,</span>
<span class="w">                                    </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;valid example doc&quot;</span><span class="p">,</span>
<span class="w">                                    </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                        </span><span class="nt">&quot;baz&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5678&quot;</span>
<span class="w">                                    </span><span class="p">}</span>
<span class="w">                                </span><span class="p">}</span>
<span class="w">                            </span><span class="p">}</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="openapi-conversion-traits">
<h2>OpenAPI conversion traits<a class="headerlink" href="#openapi-conversion-traits" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">software.amazon.smithy:smithy-openapi-traits</span></code> package defines traits used to augment the conversion
of a Smithy model into an OpenAPI specification.</p>
<div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--3-input--1" name="tab-set--3" type="radio" /><label class="tab-label" for="tab-set--3-input--1">Smithy CLI</label><div class="tab-content docutils">
<div class="literal-block-wrapper docutils container" id="id48">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id48" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;sources&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;models&quot;</span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;maven&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="s2">&quot;software.amazon.smithy:smithy-openapi:1.67.0&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;software.amazon.smithy:smithy-openapi-traits:1.67.0&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="c1">// Required for restJson1 trait.</span>
<span class="w">      </span><span class="s2">&quot;software.amazon.smithy:smithy-aws-traits:1.67.0&quot;</span>
<span class="w">    </span><span class="p">]</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;...&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input class="tab-input" id="tab-set--3-input--2" name="tab-set--3" type="radio" /><label class="tab-label" for="tab-set--3-input--2">Gradle</label><div class="tab-content docutils">
<p>The following example shows how to add the package to your Gradle build alongside the
<code class="docutils literal notranslate"><span class="pre">smithy-openapi</span></code> plugin:</p>
<div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--2-input--1" name="tab-set--2" type="radio" /><label class="tab-label" for="tab-set--2-input--1">Kotlin</label><div class="tab-content docutils">
<div class="literal-block-wrapper docutils container" id="id49">
<div class="code-block-caption"><span class="caption-text">build.gradle.kts</span><a class="headerlink" href="#id49" title="Link to this code">¶</a></div>
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="n">plugins</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">java</span>
<span class="w">    </span><span class="n">id</span><span class="p">(</span><span class="s">&quot;software.amazon.smithy.gradle.smithy-base&quot;</span><span class="p">).</span><span class="na">version</span><span class="p">(</span><span class="s">&quot;1.3.0&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">dependencies</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">smithyBuild</span><span class="p">(</span><span class="s">&quot;software.amazon.smithy:smithy-openapi:1.67.0&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="n">implementation</span><span class="p">(</span><span class="s">&quot;software.amazon.smithy:smithy-openapi-traits:1.67.0&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="c1">// Required for restJson1 trait.</span>
<span class="w">    </span><span class="n">implementation</span><span class="p">(</span><span class="s">&quot;software.amazon.smithy:smithy-aws-traits:1.67.0&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input class="tab-input" id="tab-set--2-input--2" name="tab-set--2" type="radio" /><label class="tab-label" for="tab-set--2-input--2">Groovy</label><div class="tab-content docutils">
<div class="literal-block-wrapper docutils container" id="id50">
<div class="code-block-caption"><span class="caption-text">build.gradle</span><a class="headerlink" href="#id50" title="Link to this code">¶</a></div>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">plugins</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="s1">&#39;java&#39;</span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="s1">&#39;software.amazon.smithy.gradle.smithy-base&#39;</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="s1">&#39;1.3.0&#39;</span>
<span class="o">}</span>

<span class="n">dependencies</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">smithyBuild</span><span class="w"> </span><span class="s1">&#39;software.amazon.smithy:smithy-openapi:1.67.0&#39;</span>

<span class="w">    </span><span class="n">implementation</span><span class="w"> </span><span class="s1">&#39;software.amazon.smithy:smithy-openapi-traits:1.67.0&#39;</span>
<span class="w">    </span><span class="c1">// Required for restJson1 trait.</span>
<span class="w">    </span><span class="n">implementation</span><span class="w"> </span><span class="s1">&#39;software.amazon.smithy:smithy-aws-traits:1.67.0&#39;</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Refer to <a class="reference internal" href="#converting-to-openapi-with-smithy-build">Converting to OpenAPI with smithy-build</a> for more detailed information about using the plugin and Gradle.</p>
<section id="specificationextension-trait">
<span id="specification-extension-trait"></span><span id="smithy-openapi-specificationextension-trait"></span><h3><code class="docutils literal notranslate"><span class="pre">specificationExtension</span></code> trait<a class="headerlink" href="#specificationextension-trait" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>Summary</dt><dd><p>Indicates a trait shape should be converted into an <a class="reference external" href="https://spec.openapis.org/oas/v3.1.0#specification-extensions">OpenAPI specification extension</a>.
Any custom trait that has been annotated with this trait will be serialized into the OpenAPI specification using
its <a class="reference internal" href="../../spec/json-ast.html#json-ast"><span class="std std-ref">Smithy JSON AST representation</span></a>.</p>
</dd>
<dt>Trait selector</dt><dd><p><code class="docutils literal notranslate"><span class="pre">[trait|trait]</span></code></p>
</dd>
<dt>Value type</dt><dd><p><code class="docutils literal notranslate"><span class="pre">structure</span></code></p>
</dd>
</dl>
<p>The <code class="docutils literal notranslate"><span class="pre">specificationExtension</span></code> trait is a structure that supports the following members:</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 25.0%" />
<col style="width: 65.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>as</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>Explicitly name the specification extension.
If set, it must begin with <code class="docutils literal notranslate"><span class="pre">&quot;x-&quot;</span></code>.
Otherwise, it defaults to the target trait's shape ID normalized with hyphens and prepended with <code class="docutils literal notranslate"><span class="pre">&quot;x-&quot;</span></code>.</p></td>
</tr>
</tbody>
</table>
</div>
<p>The following example defines a specification extension representing a custom metadata structure using the <code class="docutils literal notranslate"><span class="pre">specificationExtension</span></code> trait:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="kd">use </span><span class="nc">smithy.openapi#specificationExtension</span>

<span class="nt">@trait</span>
<span class="nt">@specificationExtension</span>(<span class="py">as</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;x-meta&quot;</span>)
<span class="kd">structure </span><span class="nc">metadata</span><span class="w"> </span>{
<span class="w">    </span><span class="py">owner</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}

<span class="nt">@output</span>
<span class="nt">@metadata</span>(<span class="py">owner</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;greetings-team-b&quot;</span>)
<span class="kd">structure </span><span class="nc">GreetResponse</span><span class="w"> </span>{
<span class="w">    </span><span class="py">greeting</span><span class="p">:</span><span class="w"> </span><span class="vc">String</span>
}

<span class="nt">@readonly</span>
<span class="nt">@http</span>(<span class="py">method</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;GET&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/greet&quot;</span>)
<span class="nt">@metadata</span>(<span class="py">owner</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;greetings-team-a&quot;</span>)
<span class="kd">operation </span><span class="nc">Greet</span><span class="w"> </span>{
<span class="w">    </span><span class="py">output</span><span class="p">:</span><span class="w"> </span><span class="vc">GreetResponse</span>
}
</pre></div>
</div>
<p>This results in an <code class="docutils literal notranslate"><span class="pre">x-meta</span></code> property being added to the respective objects in the OpenAPI output:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;...&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;...&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;paths&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;/greet&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;get&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;operationId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Greet&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;responses&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;200&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Greet 200 response&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;application/json&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                </span><span class="nt">&quot;schema&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                    </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/components/schemas/GreetResponseContent&quot;</span>
<span class="w">                                </span><span class="p">}</span>
<span class="w">                            </span><span class="p">}</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;x-meta&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;owner&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;greetings-team-a&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;components&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;schemas&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;GreetResponseContent&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;greeting&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;x-meta&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;owner&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;greetings-team-b&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<section id="supported-trait-locations">
<h4>Supported trait locations<a class="headerlink" href="#supported-trait-locations" title="Link to this heading">¶</a></h4>
<p>Only a subset of OpenAPI locations are supported in the conversion:</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 50.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Smithy Location</p></th>
<th class="head"><p>OpenAPI Location</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Service shape</p></td>
<td><p><a class="reference external" href="https://spec.openapis.org/oas/v3.1.0#openapi-object">Root OpenAPI schema</a></p></td>
</tr>
<tr class="row-odd"><td><p>Operation shape</p></td>
<td><p><a class="reference external" href="https://spec.openapis.org/oas/v3.1.0#operation-object">Operation object</a></p></td>
</tr>
<tr class="row-even"><td><p>Simple &amp; Aggregate shapes</p></td>
<td><p><a class="reference external" href="https://spec.openapis.org/oas/v3.1.0#schema-object">Schema object</a></p></td>
</tr>
</tbody>
</table>
</div>
<p>Unsupported use cases can likely be covered by the <a class="reference internal" href="#generate-openapi-setting-jsonadd"><span class="std std-ref">jsonAdd</span></a> feature of the <code class="docutils literal notranslate"><span class="pre">smithy-openapi</span></code> plugin.</p>
</section>
</section>
</section>
<section id="amazon-api-gateway-extensions">
<h2>Amazon API Gateway extensions<a class="headerlink" href="#amazon-api-gateway-extensions" title="Link to this heading">¶</a></h2>
<p>Smithy models can be converted to OpenAPI specifications that contain
<a class="reference external" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-swagger-extensions.html">Amazon API Gateway extensions</a> for defining things like
<a class="reference internal" href="../../aws/amazon-apigateway.html#aws-apigateway-integration-trait"><span class="std std-ref">integrations</span></a> . These
API Gateway extensions are automatically picked up by Smithy by adding a
dependency on <code class="docutils literal notranslate"><span class="pre">software.amazon.smithy:smithy-aws-apigateway-openapi</span></code>.</p>
<div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--5-input--1" name="tab-set--5" type="radio" /><label class="tab-label" for="tab-set--5-input--1">Smithy CLI</label><div class="tab-content docutils">
<div class="literal-block-wrapper docutils container" id="id51">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id51" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;sources&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;models&quot;</span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;maven&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="s2">&quot;...&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;software.amazon.smithy:smithy-aws-apigateway-openapi:1.67.0&quot;</span>
<span class="w">    </span><span class="p">]</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;...&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input class="tab-input" id="tab-set--5-input--2" name="tab-set--5" type="radio" /><label class="tab-label" for="tab-set--5-input--2">Gradle</label><div class="tab-content docutils">
<div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--4-input--1" name="tab-set--4" type="radio" /><label class="tab-label" for="tab-set--4-input--1">Kotlin</label><div class="tab-content docutils">
<div class="literal-block-wrapper docutils container" id="id52">
<div class="code-block-caption"><span class="caption-text">build.gradle.kts</span><a class="headerlink" href="#id52" title="Link to this code">¶</a></div>
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="n">dependencies</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">smithyBuild</span><span class="p">(</span><span class="s">&quot;software.amazon.smithy:smithy-aws-apigateway-openapi:1.67.0&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input class="tab-input" id="tab-set--4-input--2" name="tab-set--4" type="radio" /><label class="tab-label" for="tab-set--4-input--2">Groovy</label><div class="tab-content docutils">
<div class="literal-block-wrapper docutils container" id="id53">
<div class="code-block-caption"><span class="caption-text">build.gradle</span><a class="headerlink" href="#id53" title="Link to this code">¶</a></div>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">dependencies</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">smithyBuild</span><span class="w"> </span><span class="s1">&#39;software.amazon.smithy:smithy-aws-apigateway-openapi:1.67.0&#39;</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<section id="amazon-api-gateway-configuration-settings">
<h3>Amazon API Gateway configuration settings<a class="headerlink" href="#amazon-api-gateway-configuration-settings" title="Link to this heading">¶</a></h3>
<section id="apigatewaydefaults-string">
<span id="generate-openapi-apigateway-setting-apigatewaydefault"></span><h4>apiGatewayDefaults (<code class="docutils literal notranslate"><span class="pre">string</span></code>)<a class="headerlink" href="#apigatewaydefaults-string" title="Link to this heading">¶</a></h4>
<p>Sets recommended default configuration settings and allows for those defaults
to be disabled.</p>
<p>This setting can be set to one of the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">2023-08-11</span></code> Set the defaults described below.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DISABLED</span></code> Disables setting defaults.</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">2023-08-11</span></code> version sets the following configuration settings:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#generate-openapi-jsonschema-setting-alphanumericonlyrefs"><span class="std std-ref">alphanumericOnlyRefs</span></a>: <code class="docutils literal notranslate"><span class="pre">true</span></code></p></li>
<li><p><a class="reference internal" href="#generate-openapi-setting-disabledefaultvalues"><span class="std std-ref">disableDefaultValues</span></a>: <code class="docutils literal notranslate"><span class="pre">true</span></code></p></li>
<li><p><a class="reference internal" href="#generate-openapi-setting-disableintegerformat"><span class="std std-ref">disableIntegerFormat</span></a>: <code class="docutils literal notranslate"><span class="pre">true</span></code></p></li>
<li><p><a class="reference internal" href="#generate-openapi-jsonschema-setting-disablefeatures"><span class="std std-ref">disableFeatures</span></a>: <code class="docutils literal notranslate"><span class="pre">[&quot;default&quot;]</span></code></p></li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This setting should be set explicitly to one of the allowed values.
If omitted, it will default to <code class="docutils literal notranslate"><span class="pre">2023-08-11</span></code>.</p>
</div>
<div class="literal-block-wrapper docutils container" id="id54">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id54" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;apiGatewayDefaults&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2023-08-11&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="apigatewaytype-string">
<span id="generate-openapi-apigateway-setting-apigatewaytype"></span><h4>apiGatewayType (<code class="docutils literal notranslate"><span class="pre">string</span></code>)<a class="headerlink" href="#apigatewaytype-string" title="Link to this heading">¶</a></h4>
<p>Defines the type of API Gateway to define in the generated OpenAPI model.
This setting influences which API Gateway specific plugins apply
to the generated OpenAPI model.</p>
<p>This setting can be set to one of the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">REST</span></code>: Generates a <a class="reference external" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-rest-api.html">REST API</a>. This is the default setting if not
configured.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HTTP</span></code>: Generates an <a class="reference external" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api.html">HTTP API</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DISABLED</span></code>: Disables all API Gateway modifications made to the
OpenAPI model. This is useful if <code class="docutils literal notranslate"><span class="pre">software.amazon.smithy:smithy-aws-apigateway-openapi</span></code>
is inadvertently placed on the classpath by a dependency.</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id55">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id55" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;apiGatewayType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;REST&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="disablecloudformationsubstitution-boolean">
<span id="generate-openapi-apigateway-setting-disablecloudformationsubstitution"></span><h4>disableCloudFormationSubstitution (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)<a class="headerlink" href="#disablecloudformationsubstitution-boolean" title="Link to this heading">¶</a></h4>
<p>Disables automatically converting <code class="docutils literal notranslate"><span class="pre">${}</span></code> templates in specific properties
into CloudFormation intrinsic functions.</p>
<div class="literal-block-wrapper docutils container" id="id56">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id56" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;disableCloudFormationSubstitution&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#openapi-cfn-substitutions"><span class="std std-ref">AWS CloudFormation substitutions</span></a></p>
</div>
</section>
<section id="additionalallowedcorsheaders-string">
<span id="generate-openapi-apigateway-setting-additionalallowedcorsheaders"></span><h4>additionalAllowedCorsHeaders (<code class="docutils literal notranslate"><span class="pre">[string]</span></code>)<a class="headerlink" href="#additionalallowedcorsheaders-string" title="Link to this heading">¶</a></h4>
<p>Sets additional allowed CORS headers on the preflight requests. If this
option is not set, the default <code class="docutils literal notranslate"><span class="pre">amz-sdk-invocation-id</span></code> and <code class="docutils literal notranslate"><span class="pre">amz-sdk-request</span></code>
headers will be added. By setting this option to an empty array, those default
headers will be omitted.</p>
<div class="literal-block-wrapper docutils container" id="id57">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id57" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;additionalAllowedCorsHeaders&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;foo-header&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;bar-header&quot;</span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="synccorspreflightintegration-boolean">
<span id="generate-openapi-apigateway-setting-synccorspreflightintegration"></span><h4>syncCorsPreflightIntegration (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)<a class="headerlink" href="#synccorspreflightintegration-boolean" title="Link to this heading">¶</a></h4>
<p>Set to true to sync CORS preflight integration request templates with all possible content-types
from other methods within the same path resource.</p>
<div class="literal-block-wrapper docutils container" id="id58">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id58" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example.weather#Weather&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;syncCorsPreflightIntegration&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>With this enabled, the <a class="reference external" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/integration-passthrough-behaviors.html">integration's passthroughBehavior</a> for CORS preflight integration
will be set to <code class="docutils literal notranslate"><span class="pre">never</span></code>.</p>
</section>
</section>
<section id="binary-types">
<h3>Binary types<a class="headerlink" href="#binary-types" title="Link to this heading">¶</a></h3>
<p>The list of binary media types used by an API need to be specified for
API Gateway in a top-level extension named <a class="reference external" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-swagger-extensions-binary-media-types.html">x-amazon-apigateway-binary-media-types</a>.
Smithy will automatically detect every media type used in a service by
collecting all of the <a class="reference internal" href="../../spec/protocol-traits.html#mediatype-trait"><span class="std std-ref">mediaType trait</span></a> values for all members marked
with <a class="reference internal" href="../../spec/http-bindings.html#httppayload-trait"><span class="std std-ref">httpPayload trait</span></a>.</p>
</section>
<section id="request-validators">
<span id="apigateway-request-validators"></span><h3>Request validators<a class="headerlink" href="#request-validators" title="Link to this heading">¶</a></h3>
<p>Amazon API Gateway can perform request validation before forwarding a request
to an integration. You can opt-in to this feature using the
<code class="docutils literal notranslate"><span class="pre">aws.apigateway#requestValidator</span></code> trait.</p>
<p>Smithy will populate the value of the <a class="reference external" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-swagger-extensions-request-validators.html">x-amazon-apigateway-request-validators</a>
and <a class="reference external" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-swagger-extensions-request-validator.html">x-amazon-apigateway-request-validator</a> OpenAPI extensions using the
<code class="docutils literal notranslate"><span class="pre">aws.apigateway#requestValidator</span></code> traits found in a service. The
<code class="docutils literal notranslate"><span class="pre">aws.apigateway#requestValidator</span></code> trait can be applied to a service to
enable a specific kind of request validation on all operations within a
service. It can also be applied to an operation to set a specific validator
for the operation.</p>
<p>Smithy defines the following canned request validators:</p>
<dl>
<dt>full</dt><dd><p>Creates a request validator configured as</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;validateRequestBody&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;validateRequestParameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>params-only</dt><dd><p>Creates a request validator configured as</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;validateRequestBody&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;validateRequestParameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>body-only</dt><dd><p>Creates a request validator configured as</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;validateRequestBody&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;validateRequestParameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
<p>Smithy will gather all of the utilized request validators and add their
declarations in a top-level <code class="docutils literal notranslate"><span class="pre">x-amazon-apigateway-request-validators</span></code>
OpenAPI extension.</p>
</section>
<section id="integrations">
<span id="apigateway-integrations"></span><h3>Integrations<a class="headerlink" href="#integrations" title="Link to this heading">¶</a></h3>
<p>Smithy models can specify the backend integration configuration that
Amazon API Gateway uses to for an operation.</p>
<ul class="simple">
<li><p>The <a class="reference internal" href="../../aws/amazon-apigateway.html#aws-apigateway-integration-trait"><span class="std std-ref">aws.apigateway#integration trait</span></a> defines an API Gateway
integration that calls an actual backend.</p></li>
<li><p>The <a class="reference internal" href="../../aws/amazon-apigateway.html#aws-apigateway-mockintegration-trait"><span class="std std-ref">aws.apigateway#mockIntegration trait</span></a> defines an API Gateway mock
integration that doesn't call a backend.</p></li>
</ul>
<p>If either of the above traits are applied to a service shape, then all
operations in the service inherit the applied integration. If either trait is
applied to a resource shape, then all operations of the resource and all child
resources inherit the applied integration. If either trait is applied to an
operation, then the operation uses a specific integration that overrides any
integration inherited from a resource or service.</p>
</section>
<section id="cors-functionality">
<h3>CORS functionality<a class="headerlink" href="#cors-functionality" title="Link to this heading">¶</a></h3>
<p>When the <code class="docutils literal notranslate"><span class="pre">smithy.api#cors</span></code> trait is applied to a service and
<code class="docutils literal notranslate"><span class="pre">apiGatewayType</span></code> is set to <code class="docutils literal notranslate"><span class="pre">REST</span></code>, then Smithy performs the following
additions during the OpenAPI conversion:</p>
<ul class="simple">
<li><p>Adds CORS-preflight OPTIONS requests using mock API Gateway integrations.</p></li>
<li><p>Adds CORS-specific headers to every response in the API, including <code class="docutils literal notranslate"><span class="pre">Access-Control-Allow-Origin</span></code>,
<code class="docutils literal notranslate"><span class="pre">Access-Control-Expose-Headers</span></code>, and <code class="docutils literal notranslate"><span class="pre">Access-Control-Allow-Credentials</span></code> where appropriate.</p></li>
<li><p>Adds static CORS response headers to API Gateway &quot;gateway&quot; responses.  These are added only when
no gateway responses are defined in the OpenAPI model.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <a class="reference internal" href="#generate-openapi-apigateway-setting-synccorspreflightintegration"><span class="std std-ref">syncCorsPreflightIntegration</span></a> is
set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the CORS preflight <a class="reference external" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/integration-passthrough-behaviors.html">integration's passthroughBehavior</a> will be set to <code class="docutils literal notranslate"><span class="pre">never</span></code> and the integration's
request templates will be synced with all possible content-types from other methods within the same path resource.</p>
</div>
</section>
<section id="authorizers">
<span id="id1"></span><h3>Authorizers<a class="headerlink" href="#authorizers" title="Link to this heading">¶</a></h3>
<p>The <a class="reference external" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-swagger-extensions-authorizer.html">x-amazon-apigateway-authorizer</a> security scheme extension is added
using the <a class="reference internal" href="../../aws/amazon-apigateway.html#aws-apigateway-authorizers-trait"><span class="std std-ref">aws.apigateway#authorizers trait</span></a> and
<a class="reference internal" href="../../aws/amazon-apigateway.html#aws-apigateway-authorizer-trait"><span class="std std-ref">aws.apigateway#authorizer trait</span></a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">aws.apigateway#authorizers</span></code> trait defines <a class="reference external" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-swagger-extensions-authorizer.html">Lambda authorizers</a> to
attach to authentication schemes defined on a service. Authorizers are
first defined on a service, and then attached to the service, resources,
or operations using the <code class="docutils literal notranslate"><span class="pre">aws.apigateway#authorizer-trait</span></code>.</p>
<p>The following Smithy model:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="kd">use </span><span class="nc">aws.apigateway#authorizer</span>
<span class="kd">use </span><span class="nc">aws.apigateway#authorizers</span>
<span class="kd">use </span><span class="nc">aws.auth#sigv4</span>
<span class="kd">use </span><span class="nc">aws.protocols#restJson1</span>

<span class="nt">@restJson1</span>
<span class="nt">@sigv4</span>(<span class="py">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;service&quot;</span>)
<span class="nt">@authorizer</span>(<span class="s2">&quot;foo&quot;</span>)
<span class="nt">@authorizers</span>(
<span class="w">    </span><span class="py">foo</span><span class="p">:</span><span class="w"> </span>{<span class="py">scheme</span><span class="p">:</span><span class="w"> </span><span class="vc">sigv4</span><span class="p">,</span><span class="w"> </span><span class="py">type</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aws&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;arn:foo&quot;</span>}
<span class="w">    </span><span class="py">baz</span><span class="p">:</span><span class="w"> </span>{<span class="py">scheme</span><span class="p">:</span><span class="w"> </span><span class="vc">sigv4</span><span class="p">,</span><span class="w"> </span><span class="py">type</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aws&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">uri</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;arn:foo&quot;</span>}
)
<span class="kd">service </span><span class="nc">Example</span><span class="w"> </span>{
<span class="w">  </span><span class="py">version</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2019-06-17&quot;</span>
<span class="w">  </span><span class="py">operations</span><span class="p">:</span><span class="w"> </span>[<span class="vc">OperationA</span><span class="p">,</span><span class="w"> </span><span class="vc">OperationB</span>]
<span class="w">  </span><span class="py">resources</span><span class="p">:</span><span class="w"> </span>[<span class="vc">ResourceA</span><span class="p">,</span><span class="w"> </span><span class="vc">ResourceB</span>]
}

<span class="c">// Inherits the authorizer of the service</span>
<span class="kd">operation </span><span class="nc">OperationA</span><span class="w"> </span>{}

<span class="c">// Overrides the authorizer of the service</span>
<span class="nt">@authorizer</span>(<span class="s2">&quot;baz&quot;</span>)
<span class="kd">operation </span><span class="nc">OperationB</span><span class="w"> </span>{}

<span class="c">// Inherits the authorizer of the service</span>
<span class="kd">resource </span><span class="nc">ResourceA</span><span class="w"> </span>{
<span class="w">  </span><span class="py">operations</span><span class="p">:</span><span class="w"> </span>[<span class="vc">OperationC</span><span class="p">,</span><span class="w"> </span><span class="vc">OperationD</span>]
}

<span class="c">// Inherits the authorizer of the service</span>
<span class="kd">operation </span><span class="nc">OperationC</span><span class="w"> </span>{}

<span class="c">// Overrides the authorizer of the service</span>
<span class="nt">@authorizer</span>(<span class="s2">&quot;baz&quot;</span>)
<span class="kd">operation </span><span class="nc">OperationD</span><span class="w"> </span>{}

<span class="c">// Overrides the authorizer of the service</span>
<span class="nt">@authorizer</span>(<span class="s2">&quot;baz&quot;</span>)
<span class="kd">resource </span><span class="nc">ResourceB</span><span class="w"> </span>{
<span class="w">  </span><span class="py">operations</span><span class="p">:</span><span class="w"> </span>[<span class="vc">OperationE</span><span class="p">,</span><span class="w"> </span><span class="vc">OperationF</span>]
}

<span class="c">// Inherits the authorizer of ResourceB</span>
<span class="kd">operation </span><span class="nc">OperationE</span><span class="w"> </span>{}

<span class="c">// Overrides the authorizer of ResourceB</span>
<span class="nt">@authorizer</span>(<span class="s2">&quot;foo&quot;</span>)
<span class="kd">operation </span><span class="nc">OperationF</span><span class="w"> </span>{}
</pre></div>
</div>
<p>Is converted to the following OpenAPI model:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;openapi&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3.0.2&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Example&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2019-06-17&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;paths&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;/a&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;get&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;operationId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OperationA&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;responses&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;200&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OperationA response&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;/b&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;get&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;operationId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OperationB&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;responses&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;200&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OperationB response&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;security&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;baz&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">]</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;/c&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;get&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;operationId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OperationC&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;responses&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;200&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OperationC response&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;/d&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;get&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;operationId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OperationD&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;responses&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;200&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OperationD response&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;security&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;baz&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">]</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;/e&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;get&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;operationId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OperationE&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;responses&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;200&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OperationE response&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;security&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;baz&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">]</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;/f&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;get&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;operationId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OperationF&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;responses&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;200&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OperationF response&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;components&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;securitySchemes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;baz&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;apiKey&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AWS Signature Version 4 authentication&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Authorization&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;in&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;header&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;x-amazon-apigateway-authorizer&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aws&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;authorizerUri&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;arn:foo&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;x-amazon-apigateway-authtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;awsSigv4&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;foo&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;apiKey&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AWS Signature Version 4 authentication&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Authorization&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;in&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;header&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;x-amazon-apigateway-authorizer&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aws&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;authorizerUri&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;arn:foo&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;x-amazon-apigateway-authtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;awsSigv4&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;security&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;foo&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="aws-cloudformation-substitutions">
<span id="openapi-cfn-substitutions"></span><h3>AWS CloudFormation substitutions<a class="headerlink" href="#aws-cloudformation-substitutions" title="Link to this heading">¶</a></h3>
<p>OpenAPI specifications used with Amazon API Gateway are commonly deployed
through AWS CloudFormation. Values within an OpenAPI specification for things
like the region a service is deployed and resources used within the service
are often unknown until deployment-time. CloudFormation offers the ability
to use <a class="reference external" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference.html">intrinsic functions</a> in a JSON document to resolve, find, and
replace this unknown data at deployment-time.</p>
<p>When the <code class="docutils literal notranslate"><span class="pre">software.amazon.smithy:smithy-aws-apigateway-openapi</span></code> library
is loaded on the classpath, Smithy will treat specific, well-known parts
of an OpenAPI specification as an <a class="reference external" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-sub.html">Fn::Sub</a>. This allows Smithy models
to refer to variables that aren't available until a stack is created
using the format of <code class="docutils literal notranslate"><span class="pre">${x}</span></code> where &quot;x&quot; is the variable name.</p>
<p>Smithy will automatically wrap the following locations of an OpenAPI
specification in an <code class="docutils literal notranslate"><span class="pre">Fn::Sub</span></code> if the value contained in the location
uses the <code class="docutils literal notranslate"><span class="pre">Fn::Sub</span></code> variable syntax (<code class="docutils literal notranslate"><span class="pre">*</span></code> means any value):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">components/securitySchemes/*/x-amazon-apigateway-authorizer/providerARNs/*</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">components/securitySchemes/*/x-amazon-apigateway-authorizer/authorizerCredentials</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">components/securitySchemes/*/x-amazon-apigateway-authorizer/authorizerUri</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">paths/*/*/x-amazon-apigateway-integration/connectionId</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">paths/*/*/x-amazon-apigateway-integration/credentials</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">paths/*/*/x-amazon-apigateway-integration/uri</span></code></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality can be disabled by setting the <code class="docutils literal notranslate"><span class="pre">disableCloudFormationSubstitution</span></code>
configuration property to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
</div>
</section>
<section id="amazon-cognito-user-pools">
<h3>Amazon Cognito User Pools<a class="headerlink" href="#amazon-cognito-user-pools" title="Link to this heading">¶</a></h3>
<p>Smithy adds Cognito User Pool based authentication to the OpenAPI model when
the <a class="reference internal" href="../../aws/aws-auth.html#aws-auth-cognitouserpools-trait"><span class="std std-ref">aws.auth#cognitoUserPools trait</span></a> is added to a service shape.
When this trait is present, Smithy will add a <code class="docutils literal notranslate"><span class="pre">securitySchemes</span></code> components
entry:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;aws.auth#cognitoUserPools&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;apiKey&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Amazon Cognito User Pools authentication&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Authorization&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;in&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;header&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;x-amazon-apigateway-authtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cognito_user_pools&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;x-amazon-apigateway-authorizer&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cognito_user_pools&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;providerARNs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="s2">&quot;arn:aws:cognito-idp:us-east-1:123:userpool/123&quot;</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In the entry, <code class="docutils literal notranslate"><span class="pre">providerARNs</span></code> will be populated from the <code class="docutils literal notranslate"><span class="pre">providerArns</span></code> list
from the trait.</p>
</section>
<section id="amazon-api-gateway-api-key-usage-plans">
<h3>Amazon API Gateway API key usage plans<a class="headerlink" href="#amazon-api-gateway-api-key-usage-plans" title="Link to this heading">¶</a></h3>
<p>Smithy enables <a class="reference external" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-api-usage-plans.html">API Gateway's API key usage plans</a> when a scheme based on the
<a class="reference internal" href="../../spec/authentication-traits.html#httpapikeyauth-trait"><span class="std std-ref">httpApiKeyAuth trait</span></a> is set and configured as <a class="reference internal" href="../../aws/amazon-apigateway.html#aws-apigateway-authorizers-trait"><span class="std std-ref">an authorizer</span></a> with no <code class="docutils literal notranslate"><span class="pre">type</span></code> property set.</p>
<p>The following Smithy model enables API Gateway's API key usage plans on the
<code class="docutils literal notranslate"><span class="pre">OperationA</span></code> operation:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="kd">namespace </span><span class="nc">smithy.example</span>

<span class="kd">use </span><span class="nc">aws.apigateway#authorizer</span>
<span class="kd">use </span><span class="nc">aws.apigateway#authorizers</span>
<span class="kd">use </span><span class="nc">aws.protocols#restJson1</span>

<span class="nt">@restJson1</span>
<span class="nt">@httpApiKeyAuth</span>(<span class="py">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;x-api-key&quot;</span><span class="p">,</span><span class="w"> </span><span class="py">in</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;header&quot;</span>)
<span class="nt">@authorizer</span>(<span class="s2">&quot;api_key&quot;</span>)
<span class="nt">@authorizers</span>(<span class="py">api_key</span><span class="p">:</span><span class="w"> </span>{<span class="py">scheme</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;smithy.api#httpApiKeyAuth&quot;</span>})
<span class="kd">service </span><span class="nc">Example</span><span class="w"> </span>{
<span class="w">  </span><span class="py">version</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2019-06-17&quot;</span>
<span class="w">  </span><span class="py">operations</span><span class="p">:</span><span class="w"> </span>[<span class="vc">OperationA</span>]
}

<span class="kd">operation </span><span class="nc">OperationA</span><span class="w"> </span>{}
</pre></div>
</div>
</section>
<section id="other-traits-that-influence-api-gateway">
<span id="other-traits"></span><h3>Other traits that influence API Gateway<a class="headerlink" href="#other-traits-that-influence-api-gateway" title="Link to this heading">¶</a></h3>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">aws.apigateway#apiKeySource</span></code></dt><dd><p>Specifies the source of the caller identifier that will be used to
throttle API methods that require a key. This trait is converted into
the <a class="reference external" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-swagger-extensions-api-key-source.html">x-amazon-apigateway-api-key-source</a> OpenAPI extension.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">aws.apigateway#authorizers</span></code></dt><dd><p>Lambda authorizers to attach to the authentication schemes defined on
this service.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See <a class="reference internal" href="#authorizers"><span class="std std-ref">Authorizers</span></a></p>
</div>
</dd>
</dl>
</section>
<section id="amazon-api-gateway-limitations">
<h3>Amazon API Gateway limitations<a class="headerlink" href="#amazon-api-gateway-limitations" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">default</span></code> property in OpenAPI is not currently supported by Amazon
API Gateway. The <code class="docutils literal notranslate"><span class="pre">default</span></code> property is automatically removed from OpenAPI
models when they are generated for Amazon API Gateway. Additionally, <code class="docutils literal notranslate"><span class="pre">default</span></code>
values will not be set on <code class="docutils literal notranslate"><span class="pre">$ref</span></code> pointers or wrapped in an <code class="docutils literal notranslate"><span class="pre">allOf</span></code> as
described in <a class="reference internal" href="#generate-openapi-setting-disabledefaultvalues"><span class="std std-ref">disableDefaultValues</span></a>.</p>
</section>
</section>
<section id="converting-to-openapi-with-code">
<h2>Converting to OpenAPI with code<a class="headerlink" href="#converting-to-openapi-with-code" title="Link to this heading">¶</a></h2>
<p>Developers that need more advanced control over the Smithy to OpenAPI
conversion can use the <code class="docutils literal notranslate"><span class="pre">software.amazon.smithy:smithy-openapi</span></code> Java library
to perform the conversion.</p>
<p>First, you'll need to get a copy of the library. The following example
shows how to install <code class="docutils literal notranslate"><span class="pre">software.amazon.smithy:smithy-openapi</span></code> through Gradle:</p>
<div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--6-input--1" name="tab-set--6" type="radio" /><label class="tab-label" for="tab-set--6-input--1">Kotlin</label><div class="tab-content docutils">
<div class="literal-block-wrapper docutils container" id="id59">
<div class="code-block-caption"><span class="caption-text">build.gradle.kts</span><a class="headerlink" href="#id59" title="Link to this code">¶</a></div>
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="n">dependencies</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">implementation</span><span class="p">(</span><span class="s">&quot;software.amazon.smithy:smithy-openapi:1.67.0&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input class="tab-input" id="tab-set--6-input--2" name="tab-set--6" type="radio" /><label class="tab-label" for="tab-set--6-input--2">Groovy</label><div class="tab-content docutils">
<div class="literal-block-wrapper docutils container" id="id60">
<div class="code-block-caption"><span class="caption-text">build.gradle</span><a class="headerlink" href="#id60" title="Link to this code">¶</a></div>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">dependencies</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">implementation</span><span class="w"> </span><span class="s1">&#39;software.amazon.smithy:smithy-openapi:1.67.0&#39;</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<p>Next, you need to create and configure an <code class="docutils literal notranslate"><span class="pre">OpenApiConverter</span></code>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">software.amazon.smithy.model.shapes.ShapeId</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">software.amazon.smithy.openapi.OpenApiConfig</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">software.amazon.smithy.openapi.fromsmithy.OpenApiConverter</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">software.amazon.smithy.openapi.model.OpenApi</span><span class="p">;</span>

<span class="n">OpenApiConverter</span><span class="w"> </span><span class="n">converter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OpenApiConverter</span><span class="p">.</span><span class="na">create</span><span class="p">();</span>

<span class="c1">// Add any necessary configuration settings.</span>
<span class="n">OpenApiConfig</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">OpenApiConfig</span><span class="p">();</span>
<span class="n">config</span><span class="p">.</span><span class="na">setService</span><span class="p">(</span><span class="n">ShapeId</span><span class="p">.</span><span class="na">from</span><span class="p">(</span><span class="s">&quot;example.weather#Weather&quot;</span><span class="p">));</span>
<span class="n">converter</span><span class="p">.</span><span class="na">config</span><span class="p">(</span><span class="n">config</span><span class="p">);</span>

<span class="c1">// Generate the OpenAPI schema.</span>
<span class="n">OpenApi</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">converter</span><span class="p">.</span><span class="na">convert</span><span class="p">(</span><span class="n">myModel</span><span class="p">);</span>
</pre></div>
</div>
<p>The conversion process is highly extensible through
<code class="docutils literal notranslate"><span class="pre">software.amazon.smithy.openapi.fromsmithy.Smithy2OpenApiExtension</span></code>
<a class="reference external" href="https://docs.oracle.com/javase/tutorial/sound/SPI-intro.html">service providers</a>. See the Javadocs for more information.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="migrating-idl-1-to-2.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Smithy IDL 1.0 to 2.0 Migration Guide</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Model Translations</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Amazon Web Services
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/smithy-lang/smithy" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Converting Smithy to OpenAPI</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#differences-between-smithy-and-openapi">Differences between Smithy and OpenAPI</a><ul>
<li><a class="reference internal" href="#unsupported-features">Unsupported features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#converting-to-openapi-with-smithy-build">Converting to OpenAPI with smithy-build</a></li>
<li><a class="reference internal" href="#openapi-configuration-settings">OpenAPI configuration settings</a><ul>
<li><a class="reference internal" href="#service-string">service (<code class="docutils literal notranslate"><span class="pre">string</span></code>)</a></li>
<li><a class="reference internal" href="#protocol-string">protocol (<code class="docutils literal notranslate"><span class="pre">string</span></code>)</a></li>
<li><a class="reference internal" href="#version-string">version (<code class="docutils literal notranslate"><span class="pre">string</span></code>)</a></li>
<li><a class="reference internal" href="#tags-boolean">tags (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)</a></li>
<li><a class="reference internal" href="#supportedtags-string">supportedTags (<code class="docutils literal notranslate"><span class="pre">[string]</span></code>)</a></li>
<li><a class="reference internal" href="#defaultblobformat-string">defaultBlobFormat (<code class="docutils literal notranslate"><span class="pre">string</span></code>)</a></li>
<li><a class="reference internal" href="#externaldocs-string">externalDocs (<code class="docutils literal notranslate"><span class="pre">[string]</span></code>)</a></li>
<li><a class="reference internal" href="#keepunusedcomponents-boolean">keepUnusedComponents (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)</a></li>
<li><a class="reference internal" href="#jsoncontenttype-string">jsonContentType (<code class="docutils literal notranslate"><span class="pre">string</span></code>)</a></li>
<li><a class="reference internal" href="#forbidgreedylabels-boolean">forbidGreedyLabels (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)</a></li>
<li><a class="reference internal" href="#removegreedyparametersuffix-boolean">removeGreedyParameterSuffix (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)</a></li>
<li><a class="reference internal" href="#onhttpprefixheaders-string">onHttpPrefixHeaders (<code class="docutils literal notranslate"><span class="pre">string</span></code>)</a></li>
<li><a class="reference internal" href="#ignoreunsupportedtraits-boolean">ignoreUnsupportedTraits (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)</a></li>
<li><a class="reference internal" href="#substitutions-map-string-any">substitutions (<code class="docutils literal notranslate"><span class="pre">map&lt;string,</span> <span class="pre">any&gt;</span></code>)</a></li>
<li><a class="reference internal" href="#jsonadd-map-string-any">jsonAdd (<code class="docutils literal notranslate"><span class="pre">map&lt;string,</span> <span class="pre">any&gt;</span></code>)</a></li>
<li><a class="reference internal" href="#useintegertype-boolean">useIntegerType (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)</a></li>
<li><a class="reference internal" href="#disableintegerformat-boolean">disableIntegerFormat (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)</a></li>
<li><a class="reference internal" href="#onerrorstatusconflict-string">onErrorStatusConflict (<code class="docutils literal notranslate"><span class="pre">string</span></code>)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#json-schema-configuration-settings">JSON schema configuration settings</a><ul>
<li><a class="reference internal" href="#alphanumericonlyrefs-boolean">alphanumericOnlyRefs (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)</a></li>
<li><a class="reference internal" href="#usejsonname-boolean">useJsonName (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)</a></li>
<li><a class="reference internal" href="#defaulttimestampformat-string">defaultTimestampFormat (<code class="docutils literal notranslate"><span class="pre">string</span></code>)</a></li>
<li><a class="reference internal" href="#unionstrategy-string">unionStrategy (<code class="docutils literal notranslate"><span class="pre">string</span></code>)</a></li>
<li><a class="reference internal" href="#enumstrategy-string">enumStrategy (<code class="docutils literal notranslate"><span class="pre">string</span></code>)</a></li>
<li><a class="reference internal" href="#mapstrategy-string">mapStrategy (<code class="docutils literal notranslate"><span class="pre">string</span></code>)</a></li>
<li><a class="reference internal" href="#useinlinemaps-boolean">useInlineMaps (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)</a></li>
<li><a class="reference internal" href="#schemadocumentextensions-map-string-any">schemaDocumentExtensions (<code class="docutils literal notranslate"><span class="pre">map&lt;string,</span> <span class="pre">any&gt;</span></code>)</a></li>
<li><a class="reference internal" href="#disablefeatures-string">disableFeatures (<code class="docutils literal notranslate"><span class="pre">[string]</span></code>)</a></li>
<li><a class="reference internal" href="#supportnonnumericfloats-boolean">supportNonNumericFloats (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)</a></li>
<li><a class="reference internal" href="#disabledefaultvalues-boolean">disableDefaultValues (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)</a></li>
<li><a class="reference internal" href="#disableintenums-boolean">disableIntEnums (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)</a></li>
<li><a class="reference internal" href="#addreferencedescriptions-boolean">addReferenceDescriptions (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#security-schemes">Security schemes</a></li>
<li><a class="reference internal" href="#examples-trait-conversion"><code class="docutils literal notranslate"><span class="pre">&#64;examples</span></code> trait conversion</a></li>
<li><a class="reference internal" href="#openapi-conversion-traits">OpenAPI conversion traits</a><ul>
<li><a class="reference internal" href="#specificationextension-trait"><code class="docutils literal notranslate"><span class="pre">specificationExtension</span></code> trait</a><ul>
<li><a class="reference internal" href="#supported-trait-locations">Supported trait locations</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#amazon-api-gateway-extensions">Amazon API Gateway extensions</a><ul>
<li><a class="reference internal" href="#amazon-api-gateway-configuration-settings">Amazon API Gateway configuration settings</a><ul>
<li><a class="reference internal" href="#apigatewaydefaults-string">apiGatewayDefaults (<code class="docutils literal notranslate"><span class="pre">string</span></code>)</a></li>
<li><a class="reference internal" href="#apigatewaytype-string">apiGatewayType (<code class="docutils literal notranslate"><span class="pre">string</span></code>)</a></li>
<li><a class="reference internal" href="#disablecloudformationsubstitution-boolean">disableCloudFormationSubstitution (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)</a></li>
<li><a class="reference internal" href="#additionalallowedcorsheaders-string">additionalAllowedCorsHeaders (<code class="docutils literal notranslate"><span class="pre">[string]</span></code>)</a></li>
<li><a class="reference internal" href="#synccorspreflightintegration-boolean">syncCorsPreflightIntegration (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#binary-types">Binary types</a></li>
<li><a class="reference internal" href="#request-validators">Request validators</a></li>
<li><a class="reference internal" href="#integrations">Integrations</a></li>
<li><a class="reference internal" href="#cors-functionality">CORS functionality</a></li>
<li><a class="reference internal" href="#authorizers">Authorizers</a></li>
<li><a class="reference internal" href="#aws-cloudformation-substitutions">AWS CloudFormation substitutions</a></li>
<li><a class="reference internal" href="#amazon-cognito-user-pools">Amazon Cognito User Pools</a></li>
<li><a class="reference internal" href="#amazon-api-gateway-api-key-usage-plans">Amazon API Gateway API key usage plans</a></li>
<li><a class="reference internal" href="#other-traits-that-influence-api-gateway">Other traits that influence API Gateway</a></li>
<li><a class="reference internal" href="#amazon-api-gateway-limitations">Amazon API Gateway limitations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#converting-to-openapi-with-code">Converting to OpenAPI with code</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=60dbed4a"></script>
    <script src="../../_static/doctools.js?v=fd6eb6e6"></script>
    <script src="../../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="../../_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=6b89569b"></script>
    <script src="../../_static/tabs.js?v=3ee01567"></script>
    </body>
</html>